/**
 * Generates function which silents global errors on page generated by scriptlet
 * If error doesn't belong to our error we transfer it to the native onError handler
 *
 * @param {string} rid - unique identifier of scriptlet
 * @returns {Function} window.onerror handler
 */
export function createOnErrorHandler(rid) {
    // eslint-disable-next-line consistent-return
    const nativeOnError = window.onerror;
    return function onError(error, ...args) {
        if (typeof error === 'string' && error.indexOf(rid) !== -1) {
            return true;
        }
        if (nativeOnError instanceof Function) {
            return nativeOnError.apply(this, [error, ...args]);
        }
        return false;
    };
}
