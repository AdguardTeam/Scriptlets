{"version":3,"file":"scriptlets-module.js","sources":["../src/helpers/random-id.js","../src/helpers/set-property-access.js","../src/helpers/get-property-in-chain.js","../src/helpers/string-utils.js","../src/helpers/create-on-error-handler.js","../src/helpers/noop.js","../src/helpers/hit.js","../src/helpers/index.js","../src/helpers/injector.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/toArray.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../src/helpers/parse-rule.js","../src/scriptlets/abort-on-property-read.js","../src/scriptlets/abort-on-property-write.js","../src/scriptlets/prevent-setTimeout.js","../src/scriptlets/prevent-setInterval.js","../src/scriptlets/prevent-window-open.js","../src/scriptlets/abort-current-inline-script.js","../src/scriptlets/set-constant.js","../src/scriptlets/remove-cookie.js","../src/scriptlets/prevent-addEventListener.js","../src/scriptlets/prevent-bab.js","../src/scriptlets/nowebrtc.js","../src/scriptlets/log-addEventListener.js","../src/scriptlets/log-setInterval.js","../src/scriptlets/log-setTimeout.js","../src/scriptlets/log-eval.js","../src/scriptlets/log.js","../src/scriptlets/noeval.js","../src/scriptlets/prevent-eval-if.js","../src/scriptlets/prevent-fab-3.2.0.js","../src/scriptlets/set-popads-dummy.js","../src/scriptlets/prevent-popads-net.js","../src/scriptlets/prevent-adfly.js","../src/scriptlets/debug-on-property-read.js","../src/scriptlets/debug-on-property-write.js","../src/scriptlets/debug-current-inline-script.js","../src/scriptlets/remove-attr.js","../src/scriptlets/remove-class.js","../src/scriptlets/disable-newtab-links.js","../src/scriptlets/adjust-setInterval.js","../src/scriptlets/adjust-setTimeout.js","../src/scriptlets/dir-string.js","../src/scriptlets/json-prune.js","../src/scriptlets/scriptletsList.js","../src/helpers/converter.js","../src/scriptlets/index.js"],"sourcesContent":["\n/**\n * Generate random six symbols id\n */\nexport function randomId() {\n    return Math.random().toString(36).substr(2, 9);\n}\n","/**\n * Set getter and setter to property if it's configurable\n * @param {Object} object target object with property\n * @param {string} property property name\n * @param {Object} descriptor contains getter and setter functions\n * @returns {boolean} is operation successful\n */\nexport function setPropertyAccess(object, property, descriptor) {\n    const currentDescriptor = Object.getOwnPropertyDescriptor(object, property);\n    if (currentDescriptor && !currentDescriptor.configurable) {\n        return false;\n    }\n    Object.defineProperty(object, property, descriptor);\n    return true;\n}\n","/**\n * @typedef Chain\n * @property {Object} base\n * @property {string} prop\n * @property {string} [chain]\n */\n\n/**\n * Check is property exist in base object recursively\n *\n * If property doesn't exist in base object\n * defines this property and returns base, property name and remaining part of property chain\n *\n * @param {Object} base\n * @param {string} chain\n * @returns {Chain}\n */\nexport function getPropertyInChain(base, chain) {\n    const pos = chain.indexOf('.');\n    if (pos === -1) {\n        return { base, prop: chain };\n    }\n    const prop = chain.slice(0, pos);\n    const own = base[prop];\n    chain = chain.slice(pos + 1);\n    if (own !== undefined) {\n        return getPropertyInChain(own, chain);\n    }\n\n    Object.defineProperty(base, prop, { configurable: true });\n    return { base: own, prop, chain };\n}\n","/**\n * Escapes special chars in string\n * @param {string} str\n * @returns {string}\n */\nexport const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n/**\n * Converts search string to the regexp\n * TODO think about nested dependencies, but be careful with dependency loops\n * @param {string} str search string\n * @returns {RegExp}\n */\nexport const toRegExp = (str) => {\n    if (str[0] === '/' && str[str.length - 1] === '/') {\n        return new RegExp(str.slice(1, -1));\n    }\n    const escaped = str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    return new RegExp(escaped);\n};\n\n/**\n * Get string before regexp first match\n * @param {string} str\n * @param {RegExp} rx\n */\nexport const getBeforeRegExp = (str, rx) => {\n    const index = str.search(rx);\n    return str.substring(0, index);\n};\n\nexport const substringAfter = (str, separator) => {\n    if (!str) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? '' : str.substring(index + separator.length);\n};\n\nexport const substringBefore = (str, separator) => {\n    if (!str || !separator) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? str : str.substring(0, index);\n};\n\n/**\n * Wrap str in double qoutes and replaces single quotes if need\n * @param {string} str\n */\nexport const wrapInDoubleQuotes = (str) => {\n    if (str[0] === '\\'' && str[str.length - 1] === '\\'') {\n        str = str.substring(1, str.length - 1);\n        // eslint-disable-next-line no-useless-escape\n        str = str.replace(/\\\"/g, '\\\\\"');\n    } else if (str[0] === '\"' && str[str.length - 1] === '\"') {\n        str = str.substring(1, str.length - 1);\n        // eslint-disable-next-line no-useless-escape\n        str = str.replace(/\\'/g, '\\\\\\'');\n    }\n    return `\"${str}\"`;\n};\n\n/**\n * Returns substring enclosed in the widest braces\n * @param {string} str\n */\nexport const getStringInBraces = (str) => {\n    const firstIndex = str.indexOf('(');\n    const lastIndex = str.lastIndexOf(')');\n    return str.substring(firstIndex + 1, lastIndex);\n};\n","/**\n * Generates function which silents global errors on page generated by scriptlet\n * If error doesn't belong to our error we transfer it to the native onError handler\n * @param {string} rid - unique identifier of scriptlet\n * @return {onError}\n */\nexport function createOnErrorHandler(rid) {\n    // eslint-disable-next-line consistent-return\n    const nativeOnError = window.onerror;\n    return function onError(error, ...args) {\n        if (typeof error === 'string' && error.indexOf(rid) !== -1) {\n            return true;\n        }\n        if (nativeOnError instanceof Function) {\n            return nativeOnError.apply(this, [error, ...args]);\n        }\n        return false;\n    };\n}\n","/**\n * Noop function\n */\nexport const noop = () => { };\n\n/**\n * Function returns null\n */\nexport const noopNull = () => null;\n\n/**\n * Function returns this\n */\nexport function noopThis() {\n    return this;\n}\n\n/**\n * Function returns empty array\n */\nexport const noopArray = () => [];\n\n/**\n * Function returns empty string\n */\nexport const noopStr = () => '';\n","/* eslint-disable no-console, no-underscore-dangle */\n/**\n * Hit used only for debug purposes now\n * @param {Source} source\n * @param {String} message optional message\n */\nexport const hit = (source, message) => {\n    if (source.verbose !== true) {\n        return;\n    }\n\n    try {\n        const log = console.log.bind(console);\n        const trace = console.trace.bind(console);\n\n        const prefix = source.ruleText || '';\n\n        if (message) {\n            log(`${prefix} message:\\n${message}`);\n        }\n\n        log(`${prefix} trace start`);\n        if (trace) {\n            trace();\n        }\n        log(`${prefix} trace end`);\n    } catch (e) {\n        // try catch for Edge 15\n        // In according to this issue https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/14495220/\n        // console.log throws an error\n    }\n\n    // This is necessary for unit-tests only!\n    if (typeof window.__debugScriptlets === 'function') {\n        window.__debugScriptlets(source);\n    }\n};\n","/**\n * This file must export all used dependencies\n */\nexport * from './random-id';\nexport * from './set-property-access';\nexport * from './get-property-in-chain';\nexport * from './string-utils';\nexport * from './create-on-error-handler';\nexport * from './noop';\nexport * from './hit';\n","import * as dependencies from '.';\n\n\n/**\n * Concat dependencies to scriptlet code\n * @param {string} scriptlet string view of scriptlet\n */\nexport function attachDependencies(scriptlet) {\n    const { injections = [] } = scriptlet;\n    return injections.reduce((accum, dep) => `${accum}\\n${dependencies[dep.name]}`, scriptlet.toString());\n}\n\n/**\n * Add scriptlet call to existing code\n * @param {Function} scriptlet\n * @param {string} code\n */\nexport function addCall(scriptlet, code) {\n    return `${code};\n        const updatedArgs = args ? [].concat(source).concat(args) : [source];\n        ${scriptlet.name}.apply(this, updatedArgs);\n    `;\n}\n\n/**\n * Wrap function into IIFE (Immediately invoked function expression)\n *\n * @param {Source} source - object with scriptlet properties\n * @param {string} code - scriptlet source code with dependencies\n *\n * @returns {string} full scriptlet code\n *\n * @example\n * const source = {\n *      args: [\"aaa\", \"bbb\"],\n *      name: 'noeval',\n * };\n * const code = \"function noeval(source, args) { alert(source); } noeval.apply(this, args);\"\n * const result = wrapInIIFE(source, code);\n *\n * // result\n * `(function(source, args) {\n *      function noeval(source) { alert(source); }\n *      noeval.apply(this, args);\n * )({\"args\": [\"aaa\", \"bbb\"], \"name\":\"noeval\"}, [\"aaa\", \"bbb\"])`\n */\nexport function passSourceAndProps(source, code) {\n    if (source.hit) {\n        source.hit = source.hit.toString();\n    }\n    const sourceString = JSON.stringify(source);\n    const argsString = source.args ? `[${source.args.map(JSON.stringify)}]` : undefined;\n    const params = argsString ? `${sourceString}, ${argsString}` : sourceString;\n    return `(function(source, args){\\n${code}\\n})(${params});`;\n}\n\n/**\n * Wrap code in no name function\n * @param {string} code which must be wrapped\n */\nexport function wrapInNonameFunc(code) {\n    return `function(source, args){\\n${code}\\n}`;\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || nonIterableRest();\n}\n\nmodule.exports = _toArray;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/**\n * Iterate over iterable argument and evaluate current state with transitions\n * @param {string} init first transition name\n * @param {Array|Collection|string} iterable\n * @param {Object} transitions transtion functions\n * @param {any} args arguments which should be passed to transition functions\n */\nfunction iterateWithTransitions(iterable, transitions, init, args) {\n    let state = init || Object.keys(transitions)[0];\n    for (let i = 0; i < iterable.length; i += 1) {\n        state = transitions[state](iterable, i, args);\n    }\n    return state;\n}\n\n/**\n * AdGuard scriptlet rule mask\n */\nexport const ADG_SCRIPTLET_MASK = '#//scriptlet';\n\n/**\n * Helper to accumulate an array of strings char by char\n */\nconst wordSaver = () => {\n    let str = '';\n    const strs = [];\n    const saveSymb = (s) => {\n        str += s;\n        return str;\n    };\n    const saveStr = () => {\n        strs.push(str);\n        str = '';\n    };\n    const getAll = () => [...strs];\n\n    return { saveSymb, saveStr, getAll };\n};\n\nconst substringAfter = (str, separator) => {\n    if (!str) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? '' : str.substring(index + separator.length);\n};\n\n/**\n * Parse and validate scriptlet rule\n * @param {*} ruleText\n * @returns {{name: string, args: Array<string>}}\n */\nexport const parseRule = (ruleText) => {\n    ruleText = substringAfter(ruleText, ADG_SCRIPTLET_MASK);\n    /**\n     * Transition names\n     */\n    const TRANSITION = {\n        OPENED: 'opened',\n        PARAM: 'param',\n        CLOSED: 'closed',\n    };\n\n    /**\n     * Transition function: the current index position in start, end or between params\n     * @param {string} rule\n     * @param {number} index\n     * @param {Object} Object\n     * @property {Object} Object.sep contains prop symb with current separator char\n     */\n    const opened = (rule, index, { sep }) => {\n        const char = rule[index];\n        let transition;\n        switch (char) {\n        case ' ':\n        case '(':\n        case ',': {\n            transition = TRANSITION.OPENED;\n            break;\n        }\n        case '\\'':\n        case '\"': {\n            sep.symb = char;\n            transition = TRANSITION.PARAM;\n            break;\n        }\n        case ')': {\n            transition = index === rule.length - 1\n                ? TRANSITION.CLOSED\n                : TRANSITION.OPENED;\n            break;\n        }\n        default: {\n            throw new Error('The rule is not a scriptlet');\n        }\n        }\n\n        return transition;\n    };\n    /**\n     * Transition function: the current index position inside param\n     * @param {string} rule\n     * @param {number} index\n     * @param {Object} Object\n     * @property {Object} Object.sep contains prop `symb` with current separator char\n     * @property {Object} Object.saver helper which allow to save strings by car by char\n     */\n    const param = (rule, index, { saver, sep }) => {\n        const char = rule[index];\n        switch (char) {\n        case '\\'':\n        case '\"': {\n            const preIndex = index - 1;\n            const before = rule[preIndex];\n            if (char === sep.symb && before !== '\\\\') {\n                sep.symb = null;\n                saver.saveStr();\n                return TRANSITION.OPENED;\n            }\n        }\n        // eslint-disable-next-line no-fallthrough\n        default: {\n            saver.saveSymb(char);\n            return TRANSITION.PARAM;\n        }\n        }\n    };\n    const transitions = {\n        [TRANSITION.OPENED]: opened,\n        [TRANSITION.PARAM]: param,\n        [TRANSITION.CLOSED]: () => { },\n    };\n    const sep = { symb: null };\n    const saver = wordSaver();\n    const state = iterateWithTransitions(ruleText, transitions, TRANSITION.OPENED, { sep, saver });\n\n    if (state !== 'closed') {\n        throw new Error(`Invalid scriptlet rule ${ruleText}`);\n    }\n\n    const args = saver.getAll();\n    return {\n        name: args[0],\n        args: args.slice(1),\n    };\n};\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-on-property-read\n *\n * @description\n * Aborts a script when it attempts to **read** the specified property.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-on-property-readjs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L864\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"abort-on-property-read\", <property>)\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n *\n * **Examples**\n * ```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet(\"abort-on-property-read\", \"alert\")\n *\n * ! Aborts script when it tries to access `navigator.language`\n * example.org#%#//scriptlet(\"abort-on-property-read\", \"navigator.language\")\n * ```\n */\n/* eslint-enable max-len */\nexport function abortOnPropertyRead(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        throw new ReferenceError(rid);\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, {\n            get: abort,\n            set: () => {\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\nabortOnPropertyRead.names = [\n    'abort-on-property-read',\n    'abort-on-property-read.js',\n    'ubo-abort-on-property-read.js',\n    'abp-abort-on-property-read',\n];\nabortOnPropertyRead.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-on-property-write\n *\n * @description\n * Aborts a script when it attempts to **write** the specified property.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-on-property-writejs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L896\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"abort-on-property-write\", <property>)\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n *\n * **Examples**\n * ```\n * ! Aborts all inline scripts trying to access `window.alert`\n * utils.escape('<script></script>')\n * // => '&lt;script&gt;&lt;/script&gt;'\n * ```\n */\n/* eslint-enable max-len */\nexport function abortOnPropertyWrite(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        throw new ReferenceError(rid);\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, { set: abort });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid).bind();\n}\n\nabortOnPropertyWrite.names = [\n    'abort-on-property-write',\n    'abort-on-property-write.js',\n    'ubo-abort-on-property-write.js',\n    'abp-abort-on-property-write',\n];\n\nabortOnPropertyWrite.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-setTimeout\n *\n * @description\n * Prevents a `setTimeout` call if the text of the callback is matching the specified search string/regexp and (optionally) have the specified delay.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#settimeout-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-setTimeout\"[, <search>[, <delay>]])\n * ```\n *\n * **Parameters**\n * - `search` (optional) string or regular expression that must match the stringified callback . If not set, prevents all `setTimeout` calls.\n * - `delay` (optional) must be an integer. If set, it matches the delay passed to the `setTimeout` call.\n *\n * **Examples**\n *\n * 1. Prevents `setTimeout` calls if the callback contains `value` and the delay is set to `300`.\n *     ```\n *     example.org#%#//scriptlet(\"prevent-setTimeout\", \"value\", \"300\")\n *     ```\n *\n *     For instance, the followiing call will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"value\";\n *     }, 300);\n *     ```\n *\n * 2. Prevents `setTimeout` calls if the callback matches `/\\.test/` regardless of the delay.\n *     ```bash\n *     example.org#%#//scriptlet(\"prevent-setTimeout\", \"/\\.test/\")\n *     ```\n *\n *     For instance, the followiing call will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"value\";\n *     }, 100);\n *     ```\n */\n/* eslint-enable max-len */\nexport function preventSetTimeout(source, match, delay) {\n    const nativeTimeout = window.setTimeout;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    delay = parseInt(delay, 10);\n    delay = nativeIsNaN(delay) ? null : delay;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n    const timeoutWrapper = (cb, d, ...args) => {\n        if ((!delay || d === delay) && match.test(cb.toString())) {\n            hit(source);\n            return nativeTimeout(() => { }, d);\n        }\n        return nativeTimeout.apply(window, [cb, d, ...args]);\n    };\n    window.setTimeout = timeoutWrapper;\n}\n\npreventSetTimeout.names = [\n    'prevent-setTimeout',\n    'setTimeout-defuser.js',\n    'ubo-setTimeout-defuser.js',\n];\n\npreventSetTimeout.injections = [toRegExp, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-setInterval\n *\n * @description\n * Prevents a `setInterval` call if the text of the callback is matching the specified search string/regexp and (optionally) have the specified interval.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#setinterval-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-setInterval\"[, <search>[, <interval>]])\n * ```\n *\n * **Parameters**\n * - `search` (optional) string or regular expression that must match the stringified callback . If not set, prevents all `setInterval` calls.\n * - `interval` (optional) must be an integer. If set, it matches the interval passed to the `setInterval` call.\n *\n * **Example**\n *\n * 1. Prevents `setInterval` calls if the callback contains `value` and the interval is set to `300`.\n *     ```\n *     example.org#%#//scriptlet(\"prevent-setInterval\", \"value\", \"300\")\n *     ```\n *\n *     For instance, the followiing call will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"value\";\n *     }, 300);\n *     ```\n *\n * 2. Prevents `setInterval` calls if the callback matches `/\\.test/` regardless of the interval.\n *     ```\n *     example.org#%#//scriptlet(\"prevent-setInterval\", \"/\\.test/\")\n *     ```\n *\n *     For instance, the followiing call will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"value\";\n *     }, 100);\n *     ```\n */\n/* eslint-enable max-len */\nexport function preventSetInterval(source, match, interval) {\n    const nativeInterval = window.setInterval;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    interval = parseInt(interval, 10);\n    interval = nativeIsNaN(interval) ? null : interval;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n    const intervalWrapper = (cb, d, ...args) => {\n        if ((!interval || d === interval) && match.test(cb.toString())) {\n            hit(source);\n            return nativeInterval(() => { }, d);\n        }\n        return nativeInterval.apply(window, [cb, d, ...args]);\n    };\n    window.setInterval = intervalWrapper;\n}\n\npreventSetInterval.names = [\n    'prevent-setInterval',\n    'setInterval-defuser.js',\n    'ubo-setInterval-defuser.js',\n];\n\npreventSetInterval.injections = [toRegExp, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-window-open\n *\n * @description\n * Prevents `window.open` calls when URL either matches or not matches the specified string/regexp. Using it without parameters prevents all `window.open` calls.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#windowopen-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-window-open\"[, <match>[, <search>]])\n * ```\n *\n * **Parameters**\n * - `match` (optional) defaults to \"matching\", any positive number for \"matching\", 0 or any string for \"not matching\",\n * - `search` (optional) string or regexp for matching the URL passed to `window.open` call.\n *\n * **Example**\n *\n * 1. Prevent all `window.open` calls:\n * ```\n *     example.org#%#//scriptlet(\"prevent-window-open\")\n * ```\n *\n * 2. Prevent `window.open` for all URLs containing `example`:\n * ```\n *     example.org#%#//scriptlet(\"prevent-window-open\", \"1\", \"example\")\n * ```\n *\n * 3. Prevent `window.open` for all URLs matching RegExp `/example\\./`:\n * ```\n *     example.org#%#//scriptlet(\"prevent-window-open\", \"1\", \"/example\\./\")\n * ```\n *\n * 4. Prevent `window.open` for all URLs **NOT** containing `example`:\n * ```\n *     example.org#%#//scriptlet(\"prevent-window-open\", \"0\", \"example\")\n * ```\n */\n/* eslint-enable max-len */\nexport function preventWindowOpen(source, inverse, match) {\n    const nativeOpen = window.open;\n\n    inverse = inverse\n        ? !(+inverse)\n        : !!inverse;\n    match = match\n        ? toRegExp(match)\n        : toRegExp('/.?/');\n\n    // eslint-disable-next-line consistent-return\n    const openWrapper = (str, ...args) => {\n        if (inverse === match.test(str)) {\n            return nativeOpen.apply(window, [str, ...args]);\n        }\n        hit(source);\n    };\n    window.open = openWrapper;\n}\n\npreventWindowOpen.names = [\n    'prevent-window-open',\n    'window.open-defuser.js',\n    'ubo-window.open-defuser.js',\n];\n\npreventWindowOpen.injections = [toRegExp, hit];\n","/* eslint-disable no-new-func */\nimport { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { toRegExp } from '../helpers/string-utils';\nimport { hit, createOnErrorHandler } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-current-inline-script\n *\n * @description\n * Aborts an inline script when it attempts to **read** the specified property\n * AND when the contents of the `<script>` element contains the specified\n * text or matches the regular expression.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-current-inline-scriptjs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L928\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"abort-current-inline-script\", <property> [, <search>])\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n * - `search` (optional) string or regular expression that must match the inline script contents. If not set, abort all inline scripts which are trying to access the specified property.\n *\n * **Examples**\n * 1. Aborts all inline scripts trying to access `window.alert`\n *     ```\n *     example.org#%#//scriptlet(\"abort-current-inline-script\", \"alert\")\n *     ```\n *\n * 2. Aborts inline scripts which are trying to access `window.alert` and contain `Hello, world`.\n *     ```\n *     example.org#%#//scriptlet(\"abort-current-inline-script\", \"alert\", \"Hello, world\")\n *     ```\n *\n *     For instance, the following script will be aborted\n *     ```html\n *     <script>alert(\"Hello, world\");</script>\n *     ```\n *\n * 3. Aborts inline scripts which are trying to access `window.alert` and match this regexp: `/Hello.+world/`.\n *     ```\n *     example.org#%#//scriptlet(\"abort-current-inline-script\", \"alert\", \"/Hello.+world/\")\n *     ```\n *\n *     For instance, the following scripts will be aborted:\n *     ```html\n *     <script>alert(\"Hello, big world\");</script>\n *     ```\n *     ```html\n *     <script>alert(\"Hello, little world\");</script>\n *     ```\n *\n *     This script will not be aborted:\n *     ```html\n *     <script>alert(\"Hi, little world\");</script>\n *     ```\n */\n/* eslint-enable max-len */\nexport function abortCurrentInlineScript(source, property, search = null) {\n    const regex = search ? toRegExp(search) : null;\n    const rid = randomId();\n\n    const getCurrentScript = () => {\n        if (!document.currentScript) { // eslint-disable-line compat/compat\n            const scripts = document.getElementsByTagName('script');\n            return scripts[scripts.length - 1];\n        }\n        return document.currentScript; // eslint-disable-line compat/compat\n    };\n\n    const ourScript = getCurrentScript();\n\n    const abort = () => {\n        const scriptEl = getCurrentScript();\n        let content = scriptEl.textContent;\n\n        try {\n            const textContentGetter = Object.getOwnPropertyDescriptor(Node.prototype, 'textContent').get;\n            content = textContentGetter.call(scriptEl);\n            // eslint-disable-next-line no-empty\n        } catch (e) { }\n\n\n        if (scriptEl instanceof HTMLScriptElement\n            && content.length > 0\n            && scriptEl !== ourScript\n            && (!regex || regex.test(scriptEl.textContent))) {\n            hit(source);\n            throw new ReferenceError(rid);\n        }\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        let currentValue = base[prop];\n        setPropertyAccess(base, prop, {\n            set: (value) => {\n                abort();\n                currentValue = value;\n            },\n            get: () => {\n                abort();\n                return currentValue;\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\nabortCurrentInlineScript.names = [\n    'abort-current-inline-script',\n    'abort-current-inline-script.js',\n    'ubo-abort-current-inline-script.js',\n    'abp-abort-current-inline-script',\n];\n\nabortCurrentInlineScript.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n];\n","import { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet set-constant\n *\n * @description\n * Creates a constant property and assigns it one of the values from the predefined list.\n *\n * > Actually, it's not a constant. Please note, that it can be rewritten with a value of a different type.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#set-constantjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"set-constant\", <property>, <value>)\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n * - `value` (required). Possible values:\n *     - positive decimal integer `<= 32767`\n *     - one of the predefined constants:\n *         - `undefined`\n *         - `false`\n *         - `true`\n *         - `null`\n *         - `noopFunc` - function with empty body\n *         - `trueFunc` - function returning true\n *         - `falseFunc` - function returning false\n *         - `''` - empty string\n *\n * **Examples**\n * ```\n * ! window.firstConst === false // this comparision will return true\n * example.org#%#//scriptlet(\"set-constant\", \"firstConst\", \"false\")\n *\n * ! window.secondConst() === true // call to the secondConst will return true\n * example.org#%#//scriptlet(\"set-constant\", \"secondConst\", \"trueFunc\")\n * ```\n */\n/* eslint-enable max-len */\nexport function setConstant(source, property, value) {\n    if (!property) {\n        return;\n    }\n\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n\n    let constantValue;\n    if (value === 'undefined') {\n        constantValue = undefined;\n    } else if (value === 'false') {\n        constantValue = false;\n    } else if (value === 'true') {\n        constantValue = true;\n    } else if (value === 'null') {\n        constantValue = null;\n    } else if (value === 'noopFunc') {\n        constantValue = () => {};\n    } else if (value === 'trueFunc') {\n        constantValue = () => true;\n    } else if (value === 'falseFunc') {\n        constantValue = () => false;\n    } else if (/^\\d+$/.test(value)) {\n        constantValue = parseFloat(value);\n        if (nativeIsNaN(constantValue)) {\n            return;\n        }\n        if (Math.abs(constantValue) > 0x7FFF) {\n            return;\n        }\n    } else if (value === '-1') {\n        constantValue = -1;\n    } else if (value === '') {\n        constantValue = '';\n    } else {\n        return;\n    }\n\n    let canceled = false;\n    const mustCancel = (value) => {\n        if (canceled) {\n            return canceled;\n        }\n        canceled = value !== undefined\n            && constantValue !== undefined\n            && typeof value !== typeof constantValue;\n        return canceled;\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        if (mustCancel(base[prop])) { return; }\n\n        hit(source);\n        setPropertyAccess(base, prop, {\n            get: () => constantValue,\n            set: (a) => {\n                if (mustCancel(a)) {\n                    constantValue = a;\n                }\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n}\n\nsetConstant.names = [\n    'set-constant',\n    'set-constant.js',\n    'ubo-set-constant.js',\n];\nsetConstant.injections = [getPropertyInChain, setPropertyAccess, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-cookie\n *\n * @description\n * Removes current page cookies by passed string matching with name. For current domain and subdomains. Runs on load and before unload.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#cookie-removerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"remove-cookie\"[, match])\n * ```\n *\n * **Parameters**\n * - `match` (optional) String or regex matching the cookie name. If not specified all accessible cookies will be removed.\n *\n * **Examples**\n * 1. Removes all cookies:\n * ```\n *     example.org#%#//scriptlet(\"remove-cookie\")\n * ```\n *\n * 2. Removes cookies which name contains `example` string.\n * ```\n *     example.org#%#//scriptlet(\"remove-cookie\", \"example\")\n * ```\n *\n *     For instance this cookie will be removed\n *     ```javascript\n *     document.cookie = '__example=randomValue';\n *     ```\n */\n/* eslint-enable max-len */\nexport function removeCookie(source, match) {\n    const regex = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const removeCookieFromHost = (cookieName, hostName) => {\n        const cookieSpec = `${cookieName}=`;\n        const domain1 = `; domain=${hostName}`;\n        const domain2 = `; domain=.${hostName}`;\n        const path = '; path=/';\n        const expiration = '; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = cookieSpec + expiration;\n        document.cookie = cookieSpec + domain1 + expiration;\n        document.cookie = cookieSpec + domain2 + expiration;\n        document.cookie = cookieSpec + path + expiration;\n        document.cookie = cookieSpec + domain1 + path + expiration;\n        document.cookie = cookieSpec + domain2 + path + expiration;\n        hit(source);\n    };\n\n    const rmCookie = () => {\n        document.cookie.split(';').forEach((cookieStr) => {\n            const pos = cookieStr.indexOf('=');\n            if (pos === -1) {\n                return;\n            }\n\n            const cookieName = cookieStr.slice(0, pos).trim();\n            if (!regex.test(cookieName)) {\n                return;\n            }\n\n            const hostParts = document.location.hostname.split('.');\n            for (let i = 0; i <= hostParts.length - 1; i += 1) {\n                const hostName = hostParts.slice(i).join('.');\n                if (hostName) {\n                    removeCookieFromHost(cookieName, hostName);\n                }\n            }\n        });\n    };\n    rmCookie();\n    window.addEventListener('beforeunload', rmCookie);\n}\n\nremoveCookie.names = [\n    'remove-cookie',\n    'cookie-remover.js',\n    'ubo-cookie-remover.js',\n];\n\nremoveCookie.injections = [toRegExp, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-addEventListener\n *\n * @description\n * Prevents adding event listeners for the specified events and callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#addeventlistener-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-addEventListener\"[, eventSearch[, functionSearch]])\n * ```\n *\n * **Parameters**\n * - `eventSearch` (optional) String or regex matching the event name. If not specified, the scriptlets prevents all event listeners.\n * - `functionSearch` (optional) String or regex matching the event listener function body. If not set, the scriptlet prevents all event listeners with event name matching `eventSearch`.\n *\n * **Examples**\n * 1. Prevent all `click` listeners:\n * ```\n *     example.org#%#//scriptlet(\"prevent-addEventListener\", \"click\")\n * ```\n\n2. Prevent 'click' listeners with the callback body containing `searchString`.\n * ```\n *     example.org#%#//scriptlet(\"prevent-addEventListener\", \"click\", \"searchString\")\n * ```\n *\n *     For instance, this listener will not be called:\n * ```javascript\n *     el.addEventListener('click', () => {\n *         window.test = 'searchString';\n *     });\n * ```\n */\n/* eslint-enable max-len */\nexport function preventAddEventListener(source, event, funcStr) {\n    event = event ? toRegExp(event) : toRegExp('/.?/');\n    funcStr = funcStr ? toRegExp(funcStr) : toRegExp('/.?/');\n\n    const nativeAddEventListener = window.EventTarget.prototype.addEventListener;\n    function addEventListenerWrapper(eventName, callback, ...args) {\n        if (event.test(eventName.toString()) && funcStr.test(callback.toString())) {\n            hit(source);\n            return undefined;\n        }\n        return nativeAddEventListener.apply(this, [eventName, callback, ...args]);\n    }\n\n    window.EventTarget.prototype.addEventListener = addEventListenerWrapper;\n}\n\npreventAddEventListener.names = [\n    'prevent-addEventListener',\n    'addEventListener-defuser.js',\n    'ubo-addEventListener-defuser.js',\n];\n\npreventAddEventListener.injections = [toRegExp, hit];\n","/* eslint-disable consistent-return, no-eval */\n\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet prevent-bab\n *\n * @description\n * Prevents BlockAdblock script from detecting an ad blocker.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#bab-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-bab\")\n * ```\n */\nexport function preventBab(source) {\n    const nativeSetTimeout = window.setTimeout;\n    const babRegex = /\\.bab_elementid.$/;\n\n    window.setTimeout = (callback, ...args) => {\n        if (typeof callback !== 'string' || !babRegex.test(callback)) {\n            return nativeSetTimeout.call(this, callback, ...args);\n        }\n        hit(source);\n    };\n\n    const signatures = [\n        ['blockadblock'],\n        ['babasbm'],\n        [/getItem\\('babn'\\)/],\n        ['getElementById', 'String.fromCharCode', 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', 'charAt', 'DOMContentLoaded', 'AdBlock', 'addEventListener', 'doScroll', 'fromCharCode', '<<2|r>>4', 'sessionStorage', 'clientWidth', 'localStorage', 'Math', 'random'],\n    ];\n    const check = (str) => {\n        for (let i = 0; i < signatures.length; i += 1) {\n            const tokens = signatures[i];\n            let match = 0;\n            for (let j = 0; j < tokens.length; j += 1) {\n                const token = tokens[j];\n                const found = token instanceof RegExp ? token.test(str) : str.indexOf(token) > -1;\n                if (found) {\n                    match += 1;\n                }\n            }\n            if (match / tokens.length >= 0.8) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const nativeEval = window.eval;\n    window.eval = (str) => {\n        if (!check(str)) {\n            return nativeEval(str);\n        }\n        hit(source);\n        const bodyEl = document.body;\n        if (bodyEl) {\n            bodyEl.style.removeProperty('visibility');\n        }\n        const el = document.getElementById('babasbmsgx');\n        if (el) {\n            el.parentNode.removeChild(el);\n        }\n    };\n}\n\npreventBab.names = [\n    'prevent-bab',\n    'bab-defuser.js',\n    'ubo-bab-defuser.js',\n];\n\npreventBab.injections = [hit];\n","/* eslint-disable no-unused-vars, no-extra-bind, func-names */\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet nowebrtc\n *\n * @description\n * Disables WebRTC by overriding `RTCPeerConnection`. The overriden function will log every attempt to create a new connection.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nowebrtcjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"nowebrtc\")\n * ```\n */\n/* eslint-enable max-len */\nexport function nowebrtc(source) {\n    let propertyName = '';\n    if (window.RTCPeerConnection) {\n        propertyName = 'RTCPeerConnection';\n    } else if (window.webkitRTCPeerConnection) {\n        propertyName = 'webkitRTCPeerConnection';\n    }\n\n    if (propertyName === '') {\n        return;\n    }\n\n    const rtcReplacement = (config) => {\n        hit(source, `Document tried to create an RTCPeerConnection: ${config}`);\n    };\n    const noop = () => {};\n    rtcReplacement.prototype = {\n        close: noop,\n        createDataChannel: noop,\n        createOffer: noop,\n        setRemoteDescription: noop,\n    };\n    const rtc = window[propertyName];\n    window[propertyName] = rtcReplacement;\n    if (rtc.prototype) {\n        rtc.prototype.createDataChannel = function (a, b) {\n            return {\n                close: noop,\n                send: noop,\n            };\n        }.bind(null);\n    }\n}\n\nnowebrtc.names = [\n    'nowebrtc',\n    'nowebrtc.js',\n    'ubo-nowebrtc.js',\n];\n\nnowebrtc.injections = [hit];\n","/* eslint-disable no-console */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-addEventListener\n *\n * @description\n * Logs all addEventListener calls to the console.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#addeventlistener-loggerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"log-addEventListener\")\n * ```\n */\nexport function logAddEventListener(source) {\n    const log = console.log.bind(console);\n    const nativeAddEventListener = window.EventTarget.prototype.addEventListener;\n    function addEventListenerWrapper(eventName, callback, ...args) {\n        hit(source);\n        log(`addEventListener(\"${eventName}\", ${callback.toString()})`);\n        return nativeAddEventListener.apply(this, [eventName, callback, ...args]);\n    }\n    window.EventTarget.prototype.addEventListener = addEventListenerWrapper;\n}\n\nlogAddEventListener.names = [\n    'log-addEventListener',\n    'addEventListener-logger.js',\n    'ubo-addEventListener-logger.js',\n];\n\nlogAddEventListener.injections = [hit];\n","/* eslint-disable no-console */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-setInterval\n *\n * @description\n * Logs all setInterval calls to the console.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#setinterval-loggerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"log-setInterval\")\n * ```\n */\nexport function logSetInterval(source) {\n    const log = console.log.bind(console);\n    const nativeSetInterval = window.setInterval;\n    function setIntervalWrapper(callback, timeout, ...args) {\n        hit(source);\n        log(`setInterval(\"${callback.toString()}\", ${timeout})`);\n        return nativeSetInterval.apply(window, [callback, timeout, ...args]);\n    }\n    window.setInterval = setIntervalWrapper;\n}\n\nlogSetInterval.names = [\n    'log-setInterval',\n    'setInterval-logger.js',\n    'ubo-setInterval-logger.js',\n];\n\nlogSetInterval.injections = [hit];\n","/* eslint-disable no-console */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-setTimeout\n *\n * @description\n * Logs all setTimeout call to the console.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#settimeout-loggerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"log-setTimeout\")\n * ```\n */\nexport function logSetTimeout(source) {\n    const log = console.log.bind(console);\n    const nativeSetTimeout = window.setTimeout;\n    function setTimeoutWrapper(callback, timeout, ...args) {\n        hit(source);\n        log(`setTimeout(\"${callback.toString()}\", ${timeout})`);\n        return nativeSetTimeout.apply(window, [callback, timeout, ...args]);\n    }\n    window.setTimeout = setTimeoutWrapper;\n}\n\nlogSetTimeout.names = [\n    'log-setTimeout',\n    'setTimeout-logger.js',\n    'ubo-setTimeout-logger.js',\n];\n\nlogSetTimeout.injections = [hit];\n","/* eslint-disable no-console, no-eval */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-eval\n *\n * @description\n * Logs all `eval()` or `new Function()` calls to the console.\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"log-eval\")\n * ```\n */\nexport function logEval(source) {\n    const log = console.log.bind(console);\n    // wrap eval function\n    const nativeEval = window.eval;\n    function evalWrapper(str) {\n        hit(source);\n        log(`eval(\"${str}\")`);\n        return nativeEval(str);\n    }\n    window.eval = evalWrapper;\n\n    // wrap new Function\n    const nativeFunction = window.Function;\n\n    function FunctionWrapper(...args) {\n        hit(source);\n        log(`new Function(${args.join(', ')})`);\n        return nativeFunction.apply(this, [...args]);\n    }\n\n    FunctionWrapper.prototype = Object.create(nativeFunction.prototype);\n    FunctionWrapper.prototype.constructor = FunctionWrapper;\n\n    window.Function = FunctionWrapper;\n}\n\nlogEval.names = [\n    'log-eval',\n];\n\nlogEval.injections = [hit];\n","/**\n * @scriptlet log\n *\n * @description\n * A simple scriptlet which only purpose is to print arguments to console.\n * This scriptlet can be helpful for debugging and troubleshooting other scriptlets.\n * **Example**\n * ```\n * example.org#%#//scriptlet(\"log\", \"arg1\", \"arg2\")\n * ```\n */\nexport function log(...args) {\n    console.log(args); // eslint-disable-line no-console\n}\nlog.names = ['log'];\n","/* eslint-disable no-eval, no-extra-bind */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet noeval\n *\n * @description\n * Prevents page to use eval.\n * Notifies about attempts in the console\n *\n * It is mostly used for `$redirect` rules.\n * See [redirect description](../wiki/about-redirects.md#noeval).\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"noeval\")\n * ```\n */\nexport function noeval(source) {\n    window.eval = function evalWrapper(s) {\n        hit(source, `AdGuard has prevented eval:\\n${s}`);\n    }.bind();\n}\n\nnoeval.names = [\n    'noeval',\n    'noeval.js',\n    'silent-noeval.js',\n    'ubo-noeval.js',\n    'ubo-silent-noeval.js',\n];\n\nnoeval.injections = [hit];\n","/* eslint-disable no-eval, no-extra-bind, func-names */\n\nimport { toRegExp, hit } from '../helpers';\n\n/**\n * @scriptlet prevent-eval-if\n *\n * @description\n * Prevents page to use eval matching payload.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#noeval-ifjs-\n *\n * **Parameters**\n * - `search` string or regexp matching stringified eval payload\n *\n * **Examples**\n * ```\n * !\n * ```\n *\n * @param {string|RegExp} [search] string or regexp matching stringified eval payload\n */\nexport function preventEvalIf(source, search) {\n    search = search ? toRegExp(search) : toRegExp('/.?/');\n\n    const nativeEval = window.eval;\n    window.eval = function (payload) {\n        if (!search.test(payload.toString())) {\n            return nativeEval.call(window, payload);\n        }\n        hit(source, payload);\n        return undefined;\n    }.bind(window);\n}\n\npreventEvalIf.names = [\n    'prevent-eval-if',\n    'noeval-if.js',\n    'ubo-noeval-if.js',\n];\n\npreventEvalIf.injections = [toRegExp, hit];\n","/* eslint-disable no-console, func-names, no-multi-assign */\nimport { noop, hit } from '../helpers';\n\n/**\n * @scriptlet prevent-fab-3.2.0\n *\n * @description\n * Prevents execution of the FAB script v3.2.0.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#fuckadblockjs-320-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-fab-3.2.0\")\n * ```\n */\nexport function preventFab(source) {\n    hit(source);\n    const Fab = function () {};\n    Fab.prototype.check = noop;\n    Fab.prototype.clearEvent = noop;\n    Fab.prototype.emitEvent = noop;\n    Fab.prototype.on = function (a, b) {\n        if (!a) {\n            b();\n        }\n        return this;\n    };\n    Fab.prototype.onDetected = function () {\n        return this;\n    };\n    Fab.prototype.onNotDetected = function (a) {\n        a();\n        return this;\n    };\n    Fab.prototype.setOption = noop;\n    window.FuckAdBlock = window.BlockAdBlock = Fab;\n    //\n    window.fuckAdBlock = window.blockAdBlock = new Fab();\n}\n\npreventFab.names = [\n    'prevent-fab-3.2.0',\n    'fuckadblock.js-3.2.0',\n    'ubo-fuckadblock.js-3.2.0',\n];\n\npreventFab.injections = [noop, hit];\n","/* eslint-disable no-console, func-names, no-multi-assign */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet set-popads-dummy\n *\n * @description\n * Sets static properties PopAds and popns.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#popads-dummyjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"set-popads-dummy\")\n * ```\n */\nexport function setPopadsDummy(source) {\n    delete window.PopAds;\n    delete window.popns;\n    Object.defineProperties(window, {\n        PopAds: {\n            get: () => {\n                hit(source);\n                return {};\n            },\n        },\n        popns: {\n            get: () => {\n                hit(source);\n                return {};\n            },\n        },\n    });\n}\n\nsetPopadsDummy.names = [\n    'set-popads-dummy',\n    'popads-dummy.js',\n    'ubo-popads-dummy.js',\n];\n\nsetPopadsDummy.injections = [hit];\n","import {\n    hit, createOnErrorHandler, randomId,\n} from '../helpers';\n\n/**\n * @scriptlet prevent-popads-net\n *\n * @description\n * Aborts on property write (PopAds, popns), throws reference error with random id.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#popadsnetjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-popads-net\")\n * ```\n */\nexport function preventPopadsNet(source) {\n    const rid = randomId();\n\n    const throwError = () => {\n        throw new ReferenceError(rid);\n    };\n\n    delete window.PopAds;\n    delete window.popns;\n    Object.defineProperties(window, {\n        PopAds: { set: throwError },\n        popns: { set: throwError },\n    });\n\n    window.onerror = createOnErrorHandler(rid).bind();\n    hit(source);\n}\n\npreventPopadsNet.names = [\n    'prevent-popads-net',\n    'popads.net.js',\n    'ubo-popads.net.js',\n];\n\npreventPopadsNet.injections = [createOnErrorHandler, randomId, hit];\n","/* eslint-disable func-names */\nimport { hit, setPropertyAccess } from '../helpers';\n\n/**\n * @scriptlet prevent-adfly\n *\n * @description\n * Prevents anti-adblock scripts on adfly short links.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#adfly-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-adfly\")\n * ```\n */\nexport function preventAdfly(source) {\n    const isDigit = (data) => /^\\d$/.test(data);\n    const handler = function (encodedURL) {\n        let evenChars = '';\n        let oddChars = '';\n        for (let i = 0; i < encodedURL.length; i += 1) {\n            if (i % 2 === 0) {\n                evenChars += encodedURL.charAt(i);\n            } else {\n                oddChars = encodedURL.charAt(i) + oddChars;\n            }\n        }\n\n        let data = (evenChars + oddChars).split('');\n\n        for (let i = 0; i < data.length; i += 1) {\n            if (isDigit(data[i])) {\n                for (let ii = i + 1; ii < data.length; ii += 1) {\n                    if (isDigit(data[ii])) {\n                        // eslint-disable-next-line no-bitwise\n                        const temp = parseInt(data[i], 10) ^ parseInt(data[ii], 10);\n                        if (temp < 10) {\n                            data[i] = temp.toString();\n                        }\n                        i = ii;\n                        break;\n                    }\n                }\n            }\n        }\n        data = data.join('');\n        const decodedURL = window.atob(data).slice(16, -16);\n        /* eslint-disable compat/compat */\n        if (window.stop) {\n            window.stop();\n        }\n        /* eslint-enable compat/compat */\n        window.onbeforeunload = null;\n        window.location.href = decodedURL;\n    };\n\n    let val;\n    // Do not apply handler more than one time\n    let applyHandler = true;\n\n    const result = setPropertyAccess(window, 'ysmm', {\n        configurable: false,\n        set: (value) => {\n            if (applyHandler) {\n                applyHandler = false;\n                try {\n                    if (typeof value === 'string') {\n                        handler(value);\n                    }\n                } catch (err) { } // eslint-disable-line no-empty\n            }\n            val = value;\n        },\n        get: () => val,\n    });\n\n    if (result) {\n        hit(source);\n    } else {\n        window.console.error('Failed to set up prevent-adfly scriptlet');\n    }\n}\n\npreventAdfly.names = [\n    'prevent-adfly',\n    'adfly-defuser.js',\n    'ubo-adfly-defuser.js',\n];\n\npreventAdfly.injections = [setPropertyAccess, hit];\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-on-property-read\n *\n * @description\n * This scriptlet is basically the same as [abort-on-property-read](#abort-on-property-read), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n * ```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet(\"debug-on-property-read\", \"alert\")\n * ```\n */\n/* eslint-enable max-len */\nexport function debugOnPropertyRead(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        // eslint-disable-next-line no-debugger\n        debugger;\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, {\n            get: abort,\n            set: () => { },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\ndebugOnPropertyRead.names = [\n    'debug-on-property-read',\n];\ndebugOnPropertyRead.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-on-property-write\n *\n * @description\n * This scriptlet is basically the same as [abort-on-property-write](#abort-on-property-write), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n * ```\n * ! Aborts script when it tries to write in property `window.test`\n * example.org#%#//scriptlet(\"debug-on-property-write\", \"test\")\n * ```\n */\n/* eslint-enable max-len */\nexport function debugOnPropertyWrite(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        // eslint-disable-next-line no-debugger\n        debugger;\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, { set: abort });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid).bind();\n}\n\ndebugOnPropertyWrite.names = [\n    'debug-on-property-write',\n];\n\ndebugOnPropertyWrite.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","/* eslint-disable no-new-func */\nimport { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { toRegExp } from '../helpers/string-utils';\nimport { hit, createOnErrorHandler } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-current-inline-script\n *\n * @description\n * This scriptlet is basically the same as [abort-current-inline-script](#abort-current-inline-script), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n *```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet(\"debug-current-inline-script\", \"alert\")\n * ```\n */\n/* eslint-enable max-len */\nexport function debugCurrentInlineScript(source, property, search = null) {\n    const regex = search ? toRegExp(search) : null;\n    const rid = randomId();\n\n    const getCurrentScript = () => {\n        if (!document.currentScript) { // eslint-disable-line compat/compat\n            const scripts = document.getElementsByTagName('script');\n            return scripts[scripts.length - 1];\n        }\n        return document.currentScript; // eslint-disable-line compat/compat\n    };\n\n    const ourScript = getCurrentScript();\n\n    const abort = () => {\n        const scriptEl = getCurrentScript();\n        if (scriptEl instanceof HTMLScriptElement\n            && scriptEl.textContent.length > 0\n            && scriptEl !== ourScript\n            && (!regex || regex.test(scriptEl.textContent))) {\n            hit(source);\n            // eslint-disable-next-line no-debugger\n            debugger;\n        }\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        let currentValue = base[prop];\n        setPropertyAccess(base, prop, {\n            set: (value) => {\n                abort();\n                currentValue = value;\n            },\n            get: () => {\n                abort();\n                return currentValue;\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\ndebugCurrentInlineScript.names = [\n    'debug-current-inline-script',\n];\n\ndebugCurrentInlineScript.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n];\n","import { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-attr\n *\n * @description\n * Removes the specified attributes from DOM notes. This scriptlet runs only once after the page load (DOMContentLoaded).\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#remove-attrjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"remove-attr\", attrs[, selector])\n * ```\n *\n * - `attrs`  required, attribute or list of attributes joined by '|';\n * - `selector`  optional, CSS selector, specifies DOM nodes from which the attributes will be removed\n *\n * **Examples**\n * 1.  Removes by attribute\n *     ```\n *     example.org#%#//scriptlet(\"remove-attr\", \"example|test\")\n *     ```\n *\n *     ```html\n *     <!-- before  -->\n *     <div example=\"true\" test=\"true\">Some text</div>\n *\n *     <!-- after -->\n *     <div>Some text</div>\n *     ```\n *\n * 2. Removes with specified selector\n *     ```\n *     example.org#%#//scriptlet(\"remove-attr\", \"example\", \".inner\")\n *     ```\n *\n *     ```html\n *     <!-- before -->\n *     <div class=\"wrapper\" example=\"true\">\n *         <div class=\"inner\" example=\"true\">Some text</div>\n *     </div>\n *\n *     <!-- after -->\n *     <div class=\"wrapper\" example=\"true\">\n *         <div class=\"inner\">Some text</div>\n *     </div>\n *     ```\n */\n/* eslint-enable max-len */\nexport function removeAttr(source, attrs, selector) {\n    if (!attrs) { return; }\n    attrs = attrs.split(/\\s*\\|\\s*/);\n    if (!selector) {\n        selector = `[${attrs.join('],[')}]`;\n    }\n\n    const rmattr = (ev) => {\n        if (ev) {\n            window.removeEventListener(ev.type, rmattr, true);\n        }\n\n        const nodes = [].slice.call(document.querySelectorAll(selector));\n        let removed = false;\n        nodes.forEach((node) => {\n            attrs.forEach((attr) => {\n                node.removeAttribute(attr);\n                removed = true;\n            });\n        });\n        if (removed) {\n            hit(source);\n        }\n    };\n\n    if (document.readyState === 'loading') {\n        window.addEventListener('DOMContentLoaded', rmattr, true);\n    } else {\n        rmattr();\n    }\n}\n\nremoveAttr.names = [\n    'remove-attr',\n    'remove-attr.js',\n    'ubo-remove-attr.js',\n];\n\nremoveAttr.injections = [hit];\n","import { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-class\n *\n * @description\n * Removes the specified classes from DOM notes. This scriptlet runs only once after the page load (DOMContentLoaded).\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"remove-class\", classes[, selector])\n * ```\n *\n * - `classes`  required, class or list of classes separated by '|';\n * - `selector`  optional, CSS selector, specifies DOM nodes from which the classes will be removed;\n * if there is no selector, every class independently will be removed from all nodes which has one\n *\n * **Examples**\n * 1.  Removes by classes\n *     ```\n *     example.org#%#//scriptlet(\"remove-class\", \"example|test\")\n *     ```\n *\n *     ```html\n *     <!-- before  -->\n *     <div id=\"first\" class=\"nice test\">Some text</div>\n *     <div id=\"second\" class=\"rare example for test\">Some text</div>\n *     <div id=\"third\" class=\"testing better example\">Some text</div>\n *\n *     <!-- after -->\n *     <div id=\"first\" class=\"nice\">Some text</div>\n *     <div id=\"second\" class=\"rare for\">Some text</div>\n *     <div id=\"third\" class=\"testing better\">Some text</div>\n *     ```\n *\n * 2. Removes with specified selector\n *     ```\n *     example.org#%#//scriptlet(\"remove-class\", \"branding\", \".inner\")\n *     ```\n *\n *     ```html\n *     <!-- before -->\n *     <div class=\"wrapper true branding\">\n *         <div class=\"inner bad branding\">Some text</div>\n *     </div>\n *\n *     <!-- after -->\n *     <div class=\"wrapper true branding\">\n *         <div class=\"inner bad\">Some text</div>\n *     </div>\n *     ```\n */\n/* eslint-enable max-len */\n\nexport function removeClass(source, classNames, selector) {\n    if (!classNames) { return; }\n    classNames = classNames.split(/\\s*\\|\\s*/);\n    let selectors = [];\n    if (!selector) {\n        selectors = classNames.map((className) => {\n            return `.${className}`;\n        });\n    }\n\n    const removeClassHandler = (ev) => {\n        if (ev) {\n            window.removeEventListener(ev.type, removeClassHandler, true);\n        }\n\n        const nodes = new Set();\n        if (selector) {\n            const foundedNodes = [].slice.call(document.querySelectorAll(selector));\n            foundedNodes.forEach((n) => nodes.add(n));\n        } else if (selectors.length > 0) {\n            selectors.forEach((s) => {\n                const elements = document.querySelectorAll(s);\n                for (let i = 0; i < elements.length; i += 1) {\n                    const element = elements[i];\n                    nodes.add(element);\n                }\n            });\n        }\n\n        let removed = false;\n\n        nodes.forEach((node) => {\n            classNames.forEach((className) => {\n                if (node.classList.contains(className)) {\n                    node.classList.remove(className);\n                    removed = true;\n                }\n            });\n        });\n\n        if (removed) {\n            hit(source);\n        }\n    };\n\n    if (document.readyState === 'loading') {\n        window.addEventListener('DOMContentLoaded', removeClassHandler, true);\n    } else {\n        removeClassHandler();\n    }\n}\n\nremoveClass.names = [\n    'remove-class',\n];\n\nremoveClass.injections = [hit];\n","import { hit } from '../helpers';\n\n/**\n * @scriptlet disable-newtab-links\n *\n * @description\n * Prevents opening new tabs and windows if there is `target` attribute in element.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#disable-newtab-linksjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"disable-newtab-links\")\n * ```\n */\nexport function disableNewtabLinks(source) {\n    document.addEventListener('click', (ev) => {\n        let { target } = ev;\n        while (target !== null) {\n            if (target.localName === 'a' && target.hasAttribute('target')) {\n                ev.stopPropagation();\n                ev.preventDefault();\n                hit(source);\n                break;\n            }\n            target = target.parentNode;\n        }\n    });\n}\n\ndisableNewtabLinks.names = [\n    'disable-newtab-links',\n    'disable-newtab-links.js',\n    'ubo-disable-newtab-links.js',\n];\n\ndisableNewtabLinks.injections = [\n    hit,\n];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet adjust-setInterval\n *\n * @description\n * Adjusts interval for specified setInterval() callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nano-setinterval-boosterjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"adjust-setInterval\"[, match [, interval[, boost]]])\n * ```\n *\n * - `match` - optional, string/regular expression, matching in stringified callback function\n * - `interval` - optional, defaults to 1000, decimal integer, matching interval\n * - `boost` - optional, default to 0.05, float, capped at 50 times for up and down, interval multiplier\n *\n * **Examples**\n * 1. Adjust all setInterval() x20 times where interval equal 1000ms:\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setInterval\")\n *     ```\n *\n * 2. Adjust all setInterval() x20 times where callback mathed with `example` and interval equal 1000ms\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setInterval\", \"example\")\n *     ```\n *\n * 3. Adjust all setInterval() x20 times where callback mathed with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setInterval\", \"example\", \"400\")\n *     ```\n *\n * 4. Slow down setInterval() x2 times where callback matched with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setInterval\", \"example\", \"400\", \"2\")\n *     ```\n */\n/* eslint-enable max-len */\nexport function adjustSetInterval(source, match, interval, boost) {\n    const nativeInterval = window.setInterval;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const nativeIsFinite = Number.isFinite || window.isFinite; // eslint-disable-line compat/compat\n\n    interval = parseInt(interval, 10);\n    interval = nativeIsNaN(interval) ? 1000 : interval;\n\n    boost = parseInt(boost, 10);\n    boost = nativeIsNaN(interval) || !nativeIsFinite(boost) ? 0.05 : boost;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    if (boost < 0.02) {\n        boost = 0.02;\n    }\n    if (boost > 50) {\n        boost = 50;\n    }\n\n    const intervalWrapper = (cb, d, ...args) => {\n        if (d === interval && match.test(cb.toString())) {\n            d *= boost;\n            hit(source);\n        }\n        return nativeInterval.apply(window, [cb, d, ...args]);\n    };\n    window.setInterval = intervalWrapper;\n}\n\nadjustSetInterval.names = [\n    'adjust-setInterval',\n    'nano-setInterval-booster.js',\n    'ubo-nano-setInterval-booster.js',\n];\n\nadjustSetInterval.injections = [toRegExp, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet adjust-setTimeout\n *\n * @description\n * Adjusts timeout for specified setTimout() callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nano-settimeout-boosterjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"adjust-setTimeout\"[, match [, timeout[, boost]]])\n * ```\n *\n * - `match` - optional, string/regular expression, matching in stringified callback function\n * - `timeout` - optional, defaults to 1000, decimal integer, matching interval\n * - `boost` - optional, default to 0.05, float, capped at 50 times for up and down, interval multiplier\n *\n * **Examples**\n * 1. Adjust all setTimeout() x20 times where interval equal 1000ms:\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setTimeout\")\n *     ```\n *\n * 2. Adjust all setTimeout() x20 times where callback mathed with `example` and interval equal 1000ms\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setTimeout\", \"example\")\n *     ```\n *\n * 3. Adjust all setTimeout() x20 times where callback mathed with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setTimeout\", \"example\", \"400\")\n *     ```\n *\n * 4. Slow down setTimeout() x2 times where callback matched with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet(\"adjust-setTimeout\", \"example\", \"400\", \"2\")\n *     ```\n */\n/* eslint-enable max-len */\nexport function adjustSetTimeout(source, match, timeout, boost) {\n    const nativeTimeout = window.setTimeout;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const nativeIsFinite = Number.isFinite || window.isFinite; // eslint-disable-line compat/compat\n\n    timeout = parseInt(timeout, 10);\n    timeout = nativeIsNaN(timeout) ? 1000 : timeout;\n\n    boost = parseInt(boost, 10);\n    boost = nativeIsNaN(timeout) || !nativeIsFinite(boost) ? 0.05 : boost;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    if (boost < 0.02) {\n        boost = 0.02;\n    }\n    if (boost > 50) {\n        boost = 50;\n    }\n\n    const timeoutWrapper = (cb, d, ...args) => {\n        if (d === timeout && match.test(cb.toString())) {\n            d *= boost;\n            hit(source);\n        }\n        return nativeTimeout.apply(window, [cb, d, ...args]);\n    };\n    window.setTimeout = timeoutWrapper;\n}\n\nadjustSetTimeout.names = [\n    'adjust-setTimeout',\n    'nano-setTimeout-booster.js',\n    'ubo-nano-setTimeout-booster.js',\n];\n\nadjustSetTimeout.injections = [toRegExp, hit];\n","import { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet dir-string\n *\n * @description\n * Wraps the `console.dir` API to call the `toString` method of the argument.\n * There are several adblock circumvention systems that detect browser devtools\n * and hide themselves. Therefore, if we force them to think\n * that devtools are open (using this scrciptlet),\n * it will automatically disable the adblock circumvention script.\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L766\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"dir-string\"[, times])\n * ```\n * - `times` - optional, the number of times to call the `toString` method of the argument to `console.dir`\n *\n * **Example**\n * ```\n * ! Run 2 times\n * example.org#%#//scriptlet(\"dir-string\", \"2\")\n * ```\n */\n/* eslint-enable max-len */\nexport function dirString(source, times) {\n    const { dir } = console;\n    times = parseInt(times, 10);\n\n    function dirWrapper(object) {\n        // eslint-disable-next-line no-unused-vars\n        let temp;\n        for (let i = 0; i < times; i += 1) {\n            // eslint-disable-next-line no-unused-expressions\n            temp = `${object}`;\n        }\n        if (typeof dir === 'function') {\n            dir.call(this, object);\n        }\n        hit(source, temp);\n    }\n    // eslint-disable-next-line no-console\n    console.dir = dirWrapper;\n}\n\ndirString.names = [\n    'dir-string',\n    'abp-dir-string',\n];\n\ndirString.injections = [hit];\n","import { hit, getPropertyInChain } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet json-prune\n *\n * @description\n * Removes specified properties from the result of calling JSON.parse and returns the caller\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"json-prune\"[, propsToRemove [, obligatoryProps]])\n * ```\n *\n * - `propsToRemove` - string of space-separated properties to remove\n * - `obligatoryProps` - optional, string of space-separated properties which must be all present for the pruning to occur\n *\n * **Examples**\n * 1. Removes property `example` from the results of JSON.parse call\n *     ```\n *     example.org#%#//scriptlet(\"json-prune\", \"example\")\n *     ```\n *\n *     For instance, the following call will return `{ one: 1}`\n *\n *     ```html\n *     JSON.parse('{\"one\":1,\"example\":true}')\n *     ```\n *\n * 2. If there are no specified properties in the result of JSON.parse call, pruning will NOT occur\n *     ```\n *     example.org#%#//scriptlet(\"json-prune\", \"one\", \"obligatoryProp\")\n *     ```\n *\n *     For instance, the following call will return `{ one: 1, two: 2}`\n *\n *     ```html\n *     JSON.parse('{\"one\":1,\"two\":2}')\n *     ```\n *\n * 3. A property in a list of properties can be a chain of properties\n *\n *     ```\n *     example.org#%#//scriptlet(\"json-prune\", \"a.b\", \"adpath.url.first\")\n *     ```\n *\n * 4. Call with no arguments will log the current hostname and json payload at the console\n *     ```\n *     example.org#%#//scriptlet(\"json-prune\")\n *     ```\n */\n/* eslint-enable max-len */\nexport function jsonPrune(source, propsToRemove, requiredInitialProps) {\n    // eslint-disable-next-line no-console\n    const log = console.log.bind(console);\n    const prunePaths = propsToRemove !== undefined && propsToRemove !== ''\n        ? propsToRemove.split(/ +/)\n        : [];\n    const needlePaths = requiredInitialProps !== undefined && requiredInitialProps !== ''\n        ? requiredInitialProps.split(/ +/)\n        : [];\n\n    function isPruningNeeded(root) {\n        for (let i = 0; i < needlePaths.length; i += 1) {\n            const needlePath = needlePaths[i];\n            const details = getPropertyInChain(root, needlePath);\n            const nestedPropName = needlePath.split('').pop();\n            if (details.base[nestedPropName] === undefined) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const nativeParse = JSON.parse;\n\n    const parseWrapper = (...args) => {\n        const r = nativeParse.apply(window, args);\n        if (prunePaths.length === 0) {\n            log(window.location.hostname, r);\n            return r;\n        }\n        if (isPruningNeeded(r) === false) {\n            return r;\n        }\n        prunePaths.forEach((path) => {\n            const ownerObj = getPropertyInChain(r, path);\n            if (ownerObj.base) {\n                delete ownerObj.base[ownerObj.prop];\n            }\n        });\n        hit(source);\n        return r;\n    };\n\n    JSON.parse = parseWrapper;\n}\n\n\njsonPrune.names = [\n    'json-prune',\n    'json-prune.js',\n    'ubo-json-prune.js',\n];\n\njsonPrune.injections = [hit, getPropertyInChain];\n","/**\n * This file must export all scriptlets which should be accessible\n */\nexport * from './abort-on-property-read';\nexport * from './abort-on-property-write';\nexport * from './prevent-setTimeout';\nexport * from './prevent-setInterval';\nexport * from './prevent-window-open';\nexport * from './abort-current-inline-script';\nexport * from './set-constant';\nexport * from './remove-cookie';\nexport * from './prevent-addEventListener';\nexport * from './prevent-bab';\nexport * from './nowebrtc';\nexport * from './log-addEventListener';\nexport * from './log-setInterval';\nexport * from './log-setTimeout';\nexport * from './log-eval';\nexport * from './log';\nexport * from './noeval';\nexport * from './prevent-eval-if';\nexport * from './prevent-fab-3.2.0';\nexport * from './set-popads-dummy';\nexport * from './prevent-popads-net';\nexport * from './prevent-adfly';\nexport * from './debug-on-property-read';\nexport * from './debug-on-property-write';\nexport * from './debug-current-inline-script';\nexport * from './remove-attr';\nexport * from './remove-class';\nexport * from './disable-newtab-links';\nexport * from './adjust-setInterval';\nexport * from './adjust-setTimeout';\nexport * from './dir-string';\nexport * from './json-prune';\n","import {\n    getBeforeRegExp,\n    substringAfter,\n    substringBefore,\n    wrapInDoubleQuotes,\n    getStringInBraces,\n} from './string-utils';\n\nimport { parseRule, ADG_SCRIPTLET_MASK } from './parse-rule';\n\nimport * as scriptletList from '../scriptlets/scriptletsList';\n\n/**\n * AdGuard scriptlet rule\n */\nconst ADGUARD_SCRIPTLET_MASK_REG = /#@?%#\\/\\/scriptlet\\(.+\\)/;\n// eslint-disable-next-line no-template-curly-in-string\nconst ADGUARD_SCRIPTLET_TEMPLATE = '${domains}#%#//scriptlet(${args})';\n// eslint-disable-next-line no-template-curly-in-string\nconst ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE = '${domains}#@%#//scriptlet(${args})';\n\n/**\n * uBlock scriptlet rule mask\n */\nconst UBO_SCRIPTLET_MASK_REG = /#@?#script:inject|#@?#\\s*\\+js/;\nconst UBO_SCRIPTLET_MASK_1 = '##+js';\nconst UBO_SCRIPTLET_MASK_2 = '##script:inject';\nconst UBO_SCRIPTLET_EXCEPTION_MASK_1 = '#@#+js';\nconst UBO_SCRIPTLET_EXCEPTION_MASK_2 = '#@#script:inject';\n// eslint-disable-next-line no-template-curly-in-string\nconst UBO_SCRIPTLET_TEMPLATE = '${domains}##+js(${args})';\n// eslint-disable-next-line no-template-curly-in-string\nconst UBO_SCRIPTLET_EXCEPTION_TEMPLATE = '${domains}#@#+js(${args})';\n\nconst UBO_ALIAS_NAME_MARKER = 'ubo-';\n\n/**\n * AdBlock Plus snippet rule mask\n */\nconst ABP_SCRIPTLET_MASK = '#$#';\nconst ABP_SCRIPTLET_EXCEPTION_MASK = '#@$#';\n\n/**\n * AdGuard CSS rule mask\n */\nconst ADG_CSS_MASK_REG = /#@?\\$#.+?\\s*\\{.*\\}\\s*$/g;\n\n/**\n * Returns array of strings separated by space which not in quotes\n * @param {string} str\n */\nconst getSentences = (str) => {\n    const reg = /'.*?'|\".*?\"|\\S+/g;\n    return str.match(reg);\n};\n\n/**\n * Replaces string with data by placeholders\n * @param {string} str\n * @param {Object} data - where keys are placeholders names\n */\nconst replacePlaceholders = (str, data) => {\n    return Object.keys(data).reduce((acc, key) => {\n        const reg = new RegExp(`\\\\$\\\\{${key}\\\\}`, 'g');\n        acc = acc.replace(reg, data[key]);\n        return acc;\n    }, str);\n};\n\n\n/**\n * Checks is AdGuard scriptlet rule\n * @param {string} rule rule text\n */\nexport const isAdgScriptletRule = (rule) => {\n    return rule.indexOf(ADG_SCRIPTLET_MASK) > -1;\n};\n\n/**\n * Checks is uBO scriptlet rule\n * @param {string} rule rule text\n */\nexport const isUboScriptletRule = (rule) => {\n    return (\n        rule.indexOf(UBO_SCRIPTLET_MASK_1) > -1\n        || rule.indexOf(UBO_SCRIPTLET_MASK_2) > -1\n        || rule.indexOf(UBO_SCRIPTLET_EXCEPTION_MASK_1) > -1\n        || rule.indexOf(UBO_SCRIPTLET_EXCEPTION_MASK_2) > -1\n    )\n        && UBO_SCRIPTLET_MASK_REG.test(rule);\n};\n\n/**\n * Checks is AdBlock Plus snippet\n * @param {string} rule rule text\n */\nexport const isAbpSnippetRule = (rule) => {\n    return (\n        rule.indexOf(ABP_SCRIPTLET_MASK) > -1\n        || rule.indexOf(ABP_SCRIPTLET_EXCEPTION_MASK) > -1\n    )\n    && rule.search(ADG_CSS_MASK_REG) === -1;\n};\n\n/**\n * Converts string of UBO scriptlet rule to AdGuard scritlet rule\n * @param {String} rule - UBO scriptlet rule\n */\nexport const convertUboToAdg = (rule) => {\n    const domains = getBeforeRegExp(rule, UBO_SCRIPTLET_MASK_REG);\n    const mask = rule.match(UBO_SCRIPTLET_MASK_REG)[0];\n    let template;\n    if (mask.indexOf('@') > -1) {\n        template = ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE;\n    } else {\n        template = ADGUARD_SCRIPTLET_TEMPLATE;\n    }\n    const args = getStringInBraces(rule)\n        .split(/, /g)\n        .map((arg, index) => (index === 0 ? `ubo-${arg}` : arg))\n        .map((arg) => (wrapInDoubleQuotes(arg)))\n        .join(', ');\n    const adgRule = replacePlaceholders(\n        template,\n        { domains, args },\n    );\n    return [adgRule];\n};\n\n/**\n * Convert string of ABP scriptlet rule to AdGuard scritlet rule\n * @param {String} rule - ABP scriptlet rule\n */\nexport const convertAbpToAdg = (rule) => {\n    const SEMICOLON_DIVIDER = /;(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/g;\n    const mask = rule.indexOf(ABP_SCRIPTLET_MASK) > -1\n        ? ABP_SCRIPTLET_MASK\n        : ABP_SCRIPTLET_EXCEPTION_MASK;\n    const template = mask === ABP_SCRIPTLET_MASK\n        ? ADGUARD_SCRIPTLET_TEMPLATE\n        : ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE;\n    const domains = substringBefore(rule, mask);\n    const args = substringAfter(rule, mask);\n\n    return args.split(SEMICOLON_DIVIDER)\n        .map((args) => getSentences(args)\n            .filter((arg) => arg)\n            .map((arg, index) => (index === 0 ? `abp-${arg}` : arg))\n            .map((arg) => wrapInDoubleQuotes(arg))\n            .join(', '))\n        .map((args) => replacePlaceholders(template, { domains, args }));\n};\n\n/**\n * Converts scriptlet rule to AdGuard one\n * @param {*} rule\n */\nexport const convertScriptletToAdg = (rule) => {\n    let result;\n    if (isUboScriptletRule(rule)) {\n        result = convertUboToAdg(rule);\n    } else if (isAbpSnippetRule(rule)) {\n        result = convertAbpToAdg(rule);\n    } else if (isAdgScriptletRule(rule)) {\n        result = rule;\n    }\n\n    return result;\n};\n\n/**\n * Converts UBO scriptlet rule to AdGuard one\n * @param {String} rule - AdGuard scriptlet rule\n * @returns {String} - UBO scriptlet rule\n */\nexport const convertAdgToUbo = (rule) => {\n    let res;\n\n    if (isAdgScriptletRule(rule)) {\n        const { name: parsedName, args: parsedParams } = parseRule(rule);\n\n        // object of name and aliases for the Adg-scriptlet\n        const adgScriptletObject = Object\n            .keys(scriptletList)\n            .map((el) => scriptletList[el])\n            .map((s) => {\n                const [name, ...aliases] = s.names;\n                return { name, aliases };\n            })\n            .find((el) => (el.name === parsedName));\n\n        const { aliases } = adgScriptletObject;\n\n        if (aliases.length > 0) {\n            const uboAlias = adgScriptletObject.aliases\n                // eslint-disable-next-line no-restricted-properties\n                .find((alias) => (alias.includes(UBO_ALIAS_NAME_MARKER)));\n\n            if (uboAlias) {\n                const mask = rule.match(ADGUARD_SCRIPTLET_MASK_REG)[0];\n                let template;\n                if (mask.indexOf('@') > -1) {\n                    template = UBO_SCRIPTLET_EXCEPTION_TEMPLATE;\n                } else {\n                    template = UBO_SCRIPTLET_TEMPLATE;\n                }\n                const domains = getBeforeRegExp(rule, ADGUARD_SCRIPTLET_MASK_REG);\n                const uboName = uboAlias.replace(UBO_ALIAS_NAME_MARKER, '');\n\n                const args = `${uboName}, ${parsedParams.join(', ')}`;\n\n                const uboRule = replacePlaceholders(\n                    template,\n                    { domains, args },\n                );\n\n                res = uboRule;\n            }\n        }\n    }\n\n    return res;\n};\n","import {\n    attachDependencies,\n    addCall,\n    passSourceAndProps,\n    wrapInNonameFunc,\n} from '../helpers/injector';\n\nimport {\n    isAdgScriptletRule,\n    isUboScriptletRule,\n    isAbpSnippetRule,\n    convertUboToAdg,\n    convertAbpToAdg,\n    convertScriptletToAdg,\n    convertAdgToUbo,\n} from '../helpers/converter';\n\nimport { parseRule } from '../helpers/parse-rule';\n\nimport * as scriptletsList from './scriptletsList';\n\n/**\n * @typedef {Object} Source - scriptlet properties\n * @property {string} name Scriptlet name\n * @property {Array<string>} args Arguments for scriptlet function\n * @property {'extension'|'corelibs'} engine Defines the final form of scriptlet string presentation\n * @property {string} [version]\n * @property {boolean} [verbose] flag to enable printing to console debug information\n * @property {string} [ruleText] Source rule text is used for debugging purposes\n */\n\n\n/**\n * Find scriptlet by it's name\n * @param {string} name\n */\nfunction getScriptletByName(name) {\n    const scriptlets = Object.keys(scriptletsList).map((key) => scriptletsList[key]);\n    return scriptlets\n        .find((s) => s.names && s.names.indexOf(name) > -1);\n}\n\n/**\n * Checks if the scriptlet name is valid\n * @param {String} name - Scriptlet name\n */\nfunction isValidScriptletName(name) {\n    if (!name) {\n        return false;\n    }\n    const scriptlet = getScriptletByName(name);\n    if (!scriptlet) {\n        return false;\n    }\n    return true;\n}\n\n/**\n* Returns scriptlet code by param\n* @param {Source} source\n*/\nfunction getScriptletCode(source) {\n    if (!isValidScriptletName(source.name)) {\n        return null;\n    }\n\n    const scriptlet = getScriptletByName(source.name);\n    let result = attachDependencies(scriptlet);\n    result = addCall(scriptlet, result);\n    result = source.engine === 'corelibs'\n        ? wrapInNonameFunc(result)\n        : passSourceAndProps(source, result);\n    return result;\n}\n\n/**\n * Validates any scriptlet rule\n * @param {String} input - can be Adguard or Ubo or Abp scriptlet rule\n */\nfunction isValidScriptletRule(input) {\n    if (!input) {\n        return false;\n    }\n\n    const rule = convertScriptletToAdg(input);\n\n    const parsedRule = parseRule(rule);\n\n    return isValidScriptletName(parsedRule.name);\n}\n\n\n/**\n * Global scriptlet variable\n *\n * @returns {Object} object with method `invoke`\n * `invoke` method receives one argument with `Source` type\n * `validate` method receives one argument with `String` type\n */\n// eslint-disable-next-line no-undef\nscriptlets = (() => ({\n    invoke: getScriptletCode,\n    validateName: isValidScriptletName,\n    validateRule: isValidScriptletRule,\n    isAdgScriptletRule,\n    isUboScriptletRule,\n    isAbpSnippetRule,\n    convertUboToAdg,\n    convertAbpToAdg,\n    convertScriptletToAdg,\n    convertAdgToUbo,\n}))();\n"],"names":["randomId","Math","random","toString","substr","setPropertyAccess","object","property","descriptor","currentDescriptor","Object","getOwnPropertyDescriptor","configurable","defineProperty","getPropertyInChain","base","chain","pos","indexOf","prop","slice","own","undefined","escapeRegExp","str","replace","toRegExp","length","RegExp","escaped","getBeforeRegExp","rx","index","search","substring","substringAfter","separator","substringBefore","wrapInDoubleQuotes","getStringInBraces","firstIndex","lastIndex","lastIndexOf","createOnErrorHandler","rid","nativeOnError","window","onerror","onError","error","Function","args","apply","noop","noopNull","noopThis","noopArray","noopStr","hit","source","message","verbose","log","console","bind","trace","prefix","ruleText","e","__debugScriptlets","attachDependencies","scriptlet","injections","reduce","accum","dep","dependencies","name","addCall","code","passSourceAndProps","sourceString","JSON","stringify","argsString","map","params","wrapInNonameFunc","iterateWithTransitions","iterable","transitions","init","state","keys","i","ADG_SCRIPTLET_MASK","wordSaver","strs","saveSymb","s","saveStr","push","getAll","parseRule","TRANSITION","OPENED","PARAM","CLOSED","opened","rule","sep","char","transition","symb","Error","param","saver","preIndex","before","abortOnPropertyRead","abort","ReferenceError","setChainPropAccess","owner","chainInfo","setter","a","get","set","names","abortOnPropertyWrite","preventSetTimeout","match","delay","nativeTimeout","setTimeout","nativeIsNaN","Number","isNaN","parseInt","timeoutWrapper","cb","d","test","preventSetInterval","interval","nativeInterval","setInterval","intervalWrapper","preventWindowOpen","inverse","nativeOpen","open","openWrapper","abortCurrentInlineScript","regex","getCurrentScript","document","currentScript","scripts","getElementsByTagName","ourScript","scriptEl","content","textContent","textContentGetter","Node","prototype","call","HTMLScriptElement","currentValue","value","setConstant","constantValue","parseFloat","abs","canceled","mustCancel","removeCookie","removeCookieFromHost","cookieName","hostName","cookieSpec","domain1","domain2","path","expiration","cookie","rmCookie","split","forEach","cookieStr","trim","hostParts","location","hostname","join","addEventListener","preventAddEventListener","event","funcStr","nativeAddEventListener","EventTarget","addEventListenerWrapper","eventName","callback","preventBab","nativeSetTimeout","babRegex","signatures","check","tokens","j","token","found","nativeEval","eval","bodyEl","body","style","removeProperty","el","getElementById","parentNode","removeChild","nowebrtc","propertyName","RTCPeerConnection","webkitRTCPeerConnection","rtcReplacement","config","close","createDataChannel","createOffer","setRemoteDescription","rtc","b","send","logAddEventListener","logSetInterval","nativeSetInterval","setIntervalWrapper","timeout","logSetTimeout","setTimeoutWrapper","logEval","evalWrapper","nativeFunction","FunctionWrapper","create","constructor","noeval","preventEvalIf","payload","preventFab","Fab","clearEvent","emitEvent","on","onDetected","onNotDetected","setOption","FuckAdBlock","BlockAdBlock","fuckAdBlock","blockAdBlock","setPopadsDummy","PopAds","popns","defineProperties","preventPopadsNet","throwError","preventAdfly","isDigit","data","handler","encodedURL","evenChars","oddChars","charAt","ii","temp","decodedURL","atob","stop","onbeforeunload","href","val","applyHandler","result","err","debugOnPropertyRead","debugOnPropertyWrite","debugCurrentInlineScript","removeAttr","attrs","selector","rmattr","ev","removeEventListener","type","nodes","querySelectorAll","removed","node","attr","removeAttribute","readyState","removeClass","classNames","selectors","className","removeClassHandler","Set","foundedNodes","n","add","elements","element","classList","contains","remove","disableNewtabLinks","target","localName","hasAttribute","stopPropagation","preventDefault","adjustSetInterval","boost","nativeIsFinite","isFinite","adjustSetTimeout","dirString","times","dir","dirWrapper","jsonPrune","propsToRemove","requiredInitialProps","prunePaths","needlePaths","isPruningNeeded","root","needlePath","details","nestedPropName","pop","nativeParse","parse","parseWrapper","r","ownerObj","ADGUARD_SCRIPTLET_MASK_REG","ADGUARD_SCRIPTLET_TEMPLATE","ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE","UBO_SCRIPTLET_MASK_REG","UBO_SCRIPTLET_MASK_1","UBO_SCRIPTLET_MASK_2","UBO_SCRIPTLET_EXCEPTION_MASK_1","UBO_SCRIPTLET_EXCEPTION_MASK_2","UBO_SCRIPTLET_TEMPLATE","UBO_SCRIPTLET_EXCEPTION_TEMPLATE","UBO_ALIAS_NAME_MARKER","ABP_SCRIPTLET_MASK","ABP_SCRIPTLET_EXCEPTION_MASK","ADG_CSS_MASK_REG","getSentences","reg","replacePlaceholders","acc","key","isAdgScriptletRule","isUboScriptletRule","isAbpSnippetRule","convertUboToAdg","domains","mask","template","arg","adgRule","convertAbpToAdg","SEMICOLON_DIVIDER","filter","convertScriptletToAdg","convertAdgToUbo","res","parsedName","parsedParams","adgScriptletObject","scriptletList","aliases","find","uboAlias","alias","includes","uboName","uboRule","getScriptletByName","scriptlets","scriptletsList","isValidScriptletName","getScriptletCode","engine","isValidScriptletRule","input","parsedRule","invoke","validateName","validateRule"],"mappings":";;;;;;AACA;;;AAGO,SAASA,QAAT,GAAoB;AACvB,SAAOC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,CAArC,CAAP;AACH;;ACND;;;;;;;AAOA,AAAO,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,QAAnC,EAA6CC,UAA7C,EAAyD;AAC5D,MAAMC,iBAAiB,GAAGC,MAAM,CAACC,wBAAP,CAAgCL,MAAhC,EAAwCC,QAAxC,CAA1B;;AACA,MAAIE,iBAAiB,IAAI,CAACA,iBAAiB,CAACG,YAA5C,EAA0D;AACtD,WAAO,KAAP;AACH;;AACDF,EAAAA,MAAM,CAACG,cAAP,CAAsBP,MAAtB,EAA8BC,QAA9B,EAAwCC,UAAxC;AACA,SAAO,IAAP;AACH;;ACdD;;;;;;;AAOA;;;;;;;;;;AAUA,AAAO,SAASM,kBAAT,CAA4BC,IAA5B,EAAkCC,KAAlC,EAAyC;AAC5C,MAAMC,GAAG,GAAGD,KAAK,CAACE,OAAN,CAAc,GAAd,CAAZ;;AACA,MAAID,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZ,WAAO;AAAEF,MAAAA,IAAI,EAAJA,IAAF;AAAQI,MAAAA,IAAI,EAAEH;AAAd,KAAP;AACH;;AACD,MAAMG,IAAI,GAAGH,KAAK,CAACI,KAAN,CAAY,CAAZ,EAAeH,GAAf,CAAb;AACA,MAAMI,GAAG,GAAGN,IAAI,CAACI,IAAD,CAAhB;AACAH,EAAAA,KAAK,GAAGA,KAAK,CAACI,KAAN,CAAYH,GAAG,GAAG,CAAlB,CAAR;;AACA,MAAII,GAAG,KAAKC,SAAZ,EAAuB;AACnB,WAAOR,kBAAkB,CAACO,GAAD,EAAML,KAAN,CAAzB;AACH;;AAEDN,EAAAA,MAAM,CAACG,cAAP,CAAsBE,IAAtB,EAA4BI,IAA5B,EAAkC;AAAEP,IAAAA,YAAY,EAAE;AAAhB,GAAlC;AACA,SAAO;AAAEG,IAAAA,IAAI,EAAEM,GAAR;AAAaF,IAAAA,IAAI,EAAJA,IAAb;AAAmBH,IAAAA,KAAK,EAALA;AAAnB,GAAP;AACH;;AC/BD;;;;;AAKA,AAAO,IAAMO,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD;AAAA,SAASA,GAAG,CAACC,OAAJ,CAAY,qBAAZ,EAAmC,MAAnC,CAAT;AAAA,CAArB;AAEP;;;;;;;AAMA,AAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACF,GAAD,EAAS;AAC7B,MAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,GAAX,IAAkBA,GAAG,CAACA,GAAG,CAACG,MAAJ,GAAa,CAAd,CAAH,KAAwB,GAA9C,EAAmD;AAC/C,WAAO,IAAIC,MAAJ,CAAWJ,GAAG,CAACJ,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX,CAAP;AACH;;AACD,MAAMS,OAAO,GAAGL,GAAG,CAACC,OAAJ,CAAY,qBAAZ,EAAmC,MAAnC,CAAhB;AACA,SAAO,IAAIG,MAAJ,CAAWC,OAAX,CAAP;AACH,CANM;AAQP;;;;;;AAKA,AAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACN,GAAD,EAAMO,EAAN,EAAa;AACxC,MAAMC,KAAK,GAAGR,GAAG,CAACS,MAAJ,CAAWF,EAAX,CAAd;AACA,SAAOP,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBF,KAAjB,CAAP;AACH,CAHM;AAKP,AAAO,IAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAACX,GAAD,EAAMY,SAAN,EAAoB;AAC9C,MAAI,CAACZ,GAAL,EAAU;AACN,WAAOA,GAAP;AACH;;AACD,MAAMQ,KAAK,GAAGR,GAAG,CAACN,OAAJ,CAAYkB,SAAZ,CAAd;AACA,SAAOJ,KAAK,GAAG,CAAR,GAAY,EAAZ,GAAiBR,GAAG,CAACU,SAAJ,CAAcF,KAAK,GAAGI,SAAS,CAACT,MAAhC,CAAxB;AACH,CANM;AAQP,AAAO,IAAMU,eAAe,GAAG,SAAlBA,eAAkB,CAACb,GAAD,EAAMY,SAAN,EAAoB;AAC/C,MAAI,CAACZ,GAAD,IAAQ,CAACY,SAAb,EAAwB;AACpB,WAAOZ,GAAP;AACH;;AACD,MAAMQ,KAAK,GAAGR,GAAG,CAACN,OAAJ,CAAYkB,SAAZ,CAAd;AACA,SAAOJ,KAAK,GAAG,CAAR,GAAYR,GAAZ,GAAkBA,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBF,KAAjB,CAAzB;AACH,CANM;AAQP;;;;;AAIA,AAAO,IAAMM,kBAAkB,GAAG,SAArBA,kBAAqB,CAACd,GAAD,EAAS;AACvC,MAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,IAAX,IAAmBA,GAAG,CAACA,GAAG,CAACG,MAAJ,GAAa,CAAd,CAAH,KAAwB,IAA/C,EAAqD;AACjDH,IAAAA,GAAG,GAAGA,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBV,GAAG,CAACG,MAAJ,GAAa,CAA9B,CAAN,CADiD;;AAGjDH,IAAAA,GAAG,GAAGA,GAAG,CAACC,OAAJ,CAAY,KAAZ,EAAmB,KAAnB,CAAN;AACH,GAJD,MAIO,IAAID,GAAG,CAAC,CAAD,CAAH,KAAW,GAAX,IAAkBA,GAAG,CAACA,GAAG,CAACG,MAAJ,GAAa,CAAd,CAAH,KAAwB,GAA9C,EAAmD;AACtDH,IAAAA,GAAG,GAAGA,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBV,GAAG,CAACG,MAAJ,GAAa,CAA9B,CAAN,CADsD;;AAGtDH,IAAAA,GAAG,GAAGA,GAAG,CAACC,OAAJ,CAAY,KAAZ,EAAmB,MAAnB,CAAN;AACH;;AACD,qBAAWD,GAAX;AACH,CAXM;AAaP;;;;;AAIA,AAAO,IAAMe,iBAAiB,GAAG,SAApBA,iBAAoB,CAACf,GAAD,EAAS;AACtC,MAAMgB,UAAU,GAAGhB,GAAG,CAACN,OAAJ,CAAY,GAAZ,CAAnB;AACA,MAAMuB,SAAS,GAAGjB,GAAG,CAACkB,WAAJ,CAAgB,GAAhB,CAAlB;AACA,SAAOlB,GAAG,CAACU,SAAJ,CAAcM,UAAU,GAAG,CAA3B,EAA8BC,SAA9B,CAAP;AACH,CAJM;;ACpEP;;;;;;AAMA,AAAO,SAASE,oBAAT,CAA8BC,GAA9B,EAAmC;AACtC;AACA,MAAMC,aAAa,GAAGC,MAAM,CAACC,OAA7B;AACA,SAAO,SAASC,OAAT,CAAiBC,KAAjB,EAAiC;AACpC,QAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAAC/B,OAAN,CAAc0B,GAAd,MAAuB,CAAC,CAAzD,EAA4D;AACxD,aAAO,IAAP;AACH;;AACD,QAAIC,aAAa,YAAYK,QAA7B,EAAuC;AAAA,wCAJTC,IAIS;AAJTA,QAAAA,IAIS;AAAA;;AACnC,aAAON,aAAa,CAACO,KAAd,CAAoB,IAApB,GAA2BH,KAA3B,SAAqCE,IAArC,EAAP;AACH;;AACD,WAAO,KAAP;AACH,GARD;AASH;;AClBD;;;AAGA,AAAO,IAAME,IAAI,GAAG,SAAPA,IAAO,GAAM,EAAnB;AAEP;;;;AAGA,AAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,SAAM,IAAN;AAAA,CAAjB;AAEP;;;;AAGA,AAAO,SAASC,QAAT,GAAoB;AACvB,SAAO,IAAP;AACH;AAED;;;;AAGA,AAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,SAAM,EAAN;AAAA,CAAlB;AAEP;;;;AAGA,AAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAM,EAAN;AAAA,CAAhB;;ACzBP;;AACA;;;;;AAKA,AAAO,IAAMC,GAAG,GAAG,SAANA,GAAM,CAACC,MAAD,EAASC,OAAT,EAAqB;AACpC,MAAID,MAAM,CAACE,OAAP,KAAmB,IAAvB,EAA6B;AACzB;AACH;;AAED,MAAI;AACA,QAAMC,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,QAAME,KAAK,GAAGF,OAAO,CAACE,KAAR,CAAcD,IAAd,CAAmBD,OAAnB,CAAd;AAEA,QAAMG,MAAM,GAAGP,MAAM,CAACQ,QAAP,IAAmB,EAAlC;;AAEA,QAAIP,OAAJ,EAAa;AACTE,MAAAA,GAAG,WAAII,MAAJ,wBAAwBN,OAAxB,EAAH;AACH;;AAEDE,IAAAA,GAAG,WAAII,MAAJ,kBAAH;;AACA,QAAID,KAAJ,EAAW;AACPA,MAAAA,KAAK;AACR;;AACDH,IAAAA,GAAG,WAAII,MAAJ,gBAAH;AACH,GAfD,CAeE,OAAOE,CAAP,EAAU,EAAV;AAEE;AACA;AAGJ;;;AACA,MAAI,OAAOtB,MAAM,CAACuB,iBAAd,KAAoC,UAAxC,EAAoD;AAChDvB,IAAAA,MAAM,CAACuB,iBAAP,CAAyBV,MAAzB;AACH;AACJ,CA9BM;;ACNP;;;;;;;;;;;;;;;;;;;;;;;;;ACGA;;;;;AAIA,AAAO,SAASW,kBAAT,CAA4BC,SAA5B,EAAuC;AAAA,8BACdA,SADc,CAClCC,UADkC;AAAA,MAClCA,UADkC,sCACrB,EADqB;AAE1C,SAAOA,UAAU,CAACC,MAAX,CAAkB,UAACC,KAAD,EAAQC,GAAR;AAAA,qBAAmBD,KAAnB,eAA6BE,YAAY,CAACD,GAAG,CAACE,IAAL,CAAzC;AAAA,GAAlB,EAAyEN,SAAS,CAACpE,QAAV,EAAzE,CAAP;AACH;AAED;;;;;;AAKA,AAAO,SAAS2E,OAAT,CAAiBP,SAAjB,EAA4BQ,IAA5B,EAAkC;AACrC,mBAAUA,IAAV,uGAEMR,SAAS,CAACM,IAFhB;AAIH;AAED;;;;;;;;;;;;;;;;;;;;;;;AAsBA,AAAO,SAASG,kBAAT,CAA4BrB,MAA5B,EAAoCoB,IAApC,EAA0C;AAC7C,MAAIpB,MAAM,CAACD,GAAX,EAAgB;AACZC,IAAAA,MAAM,CAACD,GAAP,GAAaC,MAAM,CAACD,GAAP,CAAWvD,QAAX,EAAb;AACH;;AACD,MAAM8E,YAAY,GAAGC,IAAI,CAACC,SAAL,CAAexB,MAAf,CAArB;AACA,MAAMyB,UAAU,GAAGzB,MAAM,CAACR,IAAP,cAAkBQ,MAAM,CAACR,IAAP,CAAYkC,GAAZ,CAAgBH,IAAI,CAACC,SAArB,CAAlB,SAAuD7D,SAA1E;AACA,MAAMgE,MAAM,GAAGF,UAAU,aAAMH,YAAN,eAAuBG,UAAvB,IAAsCH,YAA/D;AACA,6CAAoCF,IAApC,kBAAgDO,MAAhD;AACH;AAED;;;;;AAIA,AAAO,SAASC,gBAAT,CAA0BR,IAA1B,EAAgC;AACnC,4CAAmCA,IAAnC;AACH;;AC9DD,SAAS,eAAe,CAAC,GAAG,EAAE;EAC5B,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC;CACpC;;AAED,kBAAc,GAAG,eAAe;;ACJhC,SAAS,gBAAgB,CAAC,IAAI,EAAE;EAC9B,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,oBAAoB,EAAE,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;CAC/H;;AAED,mBAAc,GAAG,gBAAgB;;ACJjC,SAAS,gBAAgB,GAAG;EAC1B,MAAM,IAAI,SAAS,CAAC,sDAAsD,CAAC,CAAC;CAC7E;;AAED,mBAAc,GAAG,gBAAgB;;ACEjC,SAAS,QAAQ,CAAC,GAAG,EAAE;EACrB,OAAO,cAAc,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,GAAG,CAAC,IAAI,eAAe,EAAE,CAAC;CACzE;;AAED,WAAc,GAAG,QAAQ;;ACVzB,SAAS,eAAe,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE;EACxC,IAAI,GAAG,IAAI,GAAG,EAAE;IACd,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,EAAE;MAC9B,KAAK,EAAE,KAAK;MACZ,UAAU,EAAE,IAAI;MAChB,YAAY,EAAE,IAAI;MAClB,QAAQ,EAAE,IAAI;KACf,CAAC,CAAC;GACJ,MAAM;IACL,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;GAClB;;EAED,OAAO,GAAG,CAAC;CACZ;;AAED,kBAAc,GAAG,eAAe;;ACfhC;;;;;;;AAOA,SAASS,sBAAT,CAAgCC,QAAhC,EAA0CC,WAA1C,EAAuDC,IAAvD,EAA6DxC,IAA7D,EAAmE;AAC/D,MAAIyC,KAAK,GAAGD,IAAI,IAAIjF,MAAM,CAACmF,IAAP,CAAYH,WAAZ,EAAyB,CAAzB,CAApB;;AACA,OAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,QAAQ,CAAC9D,MAA7B,EAAqCmE,CAAC,IAAI,CAA1C,EAA6C;AACzCF,IAAAA,KAAK,GAAGF,WAAW,CAACE,KAAD,CAAX,CAAmBH,QAAnB,EAA6BK,CAA7B,EAAgC3C,IAAhC,CAAR;AACH;;AACD,SAAOyC,KAAP;AACH;AAED;;;;;AAGA,AAAO,IAAMG,kBAAkB,GAAG,cAA3B;AAEP;;;;AAGA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpB,MAAIxE,GAAG,GAAG,EAAV;AACA,MAAMyE,IAAI,GAAG,EAAb;;AACA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,CAAD,EAAO;AACpB3E,IAAAA,GAAG,IAAI2E,CAAP;AACA,WAAO3E,GAAP;AACH,GAHD;;AAIA,MAAM4E,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClBH,IAAAA,IAAI,CAACI,IAAL,CAAU7E,GAAV;AACAA,IAAAA,GAAG,GAAG,EAAN;AACH,GAHD;;AAIA,MAAM8E,MAAM,GAAG,SAATA,MAAS;AAAA,qBAAUL,IAAV;AAAA,GAAf;;AAEA,SAAO;AAAEC,IAAAA,QAAQ,EAARA,QAAF;AAAYE,IAAAA,OAAO,EAAPA,OAAZ;AAAqBE,IAAAA,MAAM,EAANA;AAArB,GAAP;AACH,CAdD;;AAgBA,IAAMnE,gBAAc,GAAG,SAAjBA,cAAiB,CAACX,GAAD,EAAMY,SAAN,EAAoB;AACvC,MAAI,CAACZ,GAAL,EAAU;AACN,WAAOA,GAAP;AACH;;AACD,MAAMQ,KAAK,GAAGR,GAAG,CAACN,OAAJ,CAAYkB,SAAZ,CAAd;AACA,SAAOJ,KAAK,GAAG,CAAR,GAAY,EAAZ,GAAiBR,GAAG,CAACU,SAAJ,CAAcF,KAAK,GAAGI,SAAS,CAACT,MAAhC,CAAxB;AACH,CAND;AAQA;;;;;;;AAKA,AAAO,IAAM4E,SAAS,GAAG,SAAZA,SAAY,CAACpC,QAAD,EAAc;AAAA;;AACnCA,EAAAA,QAAQ,GAAGhC,gBAAc,CAACgC,QAAD,EAAW4B,kBAAX,CAAzB;AACA;;;;AAGA,MAAMS,UAAU,GAAG;AACfC,IAAAA,MAAM,EAAE,QADO;AAEfC,IAAAA,KAAK,EAAE,OAFQ;AAGfC,IAAAA,MAAM,EAAE;AAHO,GAAnB;AAMA;;;;;;;;AAOA,MAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,IAAD,EAAO7E,KAAP,QAA0B;AAAA,QAAV8E,GAAU,QAAVA,GAAU;AACrC,QAAMC,IAAI,GAAGF,IAAI,CAAC7E,KAAD,CAAjB;AACA,QAAIgF,UAAJ;;AACA,YAAQD,IAAR;AACA,WAAK,GAAL;AACA,WAAK,GAAL;AACA,WAAK,GAAL;AAAU;AACNC,UAAAA,UAAU,GAAGR,UAAU,CAACC,MAAxB;AACA;AACH;;AACD,WAAK,IAAL;AACA,WAAK,GAAL;AAAU;AACNK,UAAAA,GAAG,CAACG,IAAJ,GAAWF,IAAX;AACAC,UAAAA,UAAU,GAAGR,UAAU,CAACE,KAAxB;AACA;AACH;;AACD,WAAK,GAAL;AAAU;AACNM,UAAAA,UAAU,GAAGhF,KAAK,KAAK6E,IAAI,CAAClF,MAAL,GAAc,CAAxB,GACP6E,UAAU,CAACG,MADJ,GAEPH,UAAU,CAACC,MAFjB;AAGA;AACH;;AACD;AAAS;AACL,gBAAM,IAAIS,KAAJ,CAAU,6BAAV,CAAN;AACH;AArBD;;AAwBA,WAAOF,UAAP;AACH,GA5BD;AA6BA;;;;;;;;;;AAQA,MAAMG,KAAK,GAAG,SAARA,KAAQ,CAACN,IAAD,EAAO7E,KAAP,SAAiC;AAAA,QAAjBoF,KAAiB,SAAjBA,KAAiB;AAAA,QAAVN,GAAU,SAAVA,GAAU;AAC3C,QAAMC,IAAI,GAAGF,IAAI,CAAC7E,KAAD,CAAjB;;AACA,YAAQ+E,IAAR;AACA,WAAK,IAAL;AACA,WAAK,GAAL;AAAU;AACN,cAAMM,QAAQ,GAAGrF,KAAK,GAAG,CAAzB;AACA,cAAMsF,MAAM,GAAGT,IAAI,CAACQ,QAAD,CAAnB;;AACA,cAAIN,IAAI,KAAKD,GAAG,CAACG,IAAb,IAAqBK,MAAM,KAAK,IAApC,EAA0C;AACtCR,YAAAA,GAAG,CAACG,IAAJ,GAAW,IAAX;AACAG,YAAAA,KAAK,CAAChB,OAAN;AACA,mBAAOI,UAAU,CAACC,MAAlB;AACH;AACJ;AACD;;AACA;AAAS;AACLW,UAAAA,KAAK,CAAClB,QAAN,CAAea,IAAf;AACA,iBAAOP,UAAU,CAACE,KAAlB;AACH;AAfD;AAiBH,GAnBD;;AAoBA,MAAMhB,WAAW,oDACZc,UAAU,CAACC,MADC,EACQG,MADR,gCAEZJ,UAAU,CAACE,KAFC,EAEOS,KAFP,gCAGZX,UAAU,CAACG,MAHC,EAGQ,YAAM,EAHd,gBAAjB;AAKA,MAAMG,GAAG,GAAG;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAAZ;AACA,MAAMG,KAAK,GAAGpB,SAAS,EAAvB;AACA,MAAMJ,KAAK,GAAGJ,sBAAsB,CAACrB,QAAD,EAAWuB,WAAX,EAAwBc,UAAU,CAACC,MAAnC,EAA2C;AAAEK,IAAAA,GAAG,EAAHA,GAAF;AAAOM,IAAAA,KAAK,EAALA;AAAP,GAA3C,CAApC;;AAEA,MAAIxB,KAAK,KAAK,QAAd,EAAwB;AACpB,UAAM,IAAIsB,KAAJ,kCAAoC/C,QAApC,EAAN;AACH;;AAED,MAAMhB,IAAI,GAAGiE,KAAK,CAACd,MAAN,EAAb;AACA,SAAO;AACHzB,IAAAA,IAAI,EAAE1B,IAAI,CAAC,CAAD,CADP;AAEHA,IAAAA,IAAI,EAAEA,IAAI,CAAC/B,KAAL,CAAW,CAAX;AAFH,GAAP;AAIH,CA7FM;;AC/CP;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;AACA,AAAO,SAASmG,mBAAT,CAA6B5D,MAA7B,EAAqCpD,QAArC,EAA+C;AAClD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMqC,GAAG,GAAG5C,QAAQ,EAApB;;AACA,MAAMwH,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB9D,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,UAAM,IAAI8D,cAAJ,CAAmB7E,GAAnB,CAAN;AACH,GAHD;;AAIA,MAAM8E,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQpH,QAAR,EAAqB;AAC5C,QAAMqH,SAAS,GAAG9G,kBAAkB,CAAC6G,KAAD,EAAQpH,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7B6G,SAF6B,CAEtC7G,IAFsC;AAAA,QAGpCI,IAHoC,GAGpByG,SAHoB,CAGpCzG,IAHoC;AAAA,QAG9BH,KAH8B,GAGpB4G,SAHoB,CAG9B5G,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAM6G,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClB/G,QAAAA,IAAI,GAAG+G,CAAP;;AACA,YAAIA,CAAC,YAAYpH,MAAjB,EAAyB;AACrBgH,UAAAA,kBAAkB,CAACI,CAAD,EAAI9G,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsB8G,KAAtB,EAA6BxG,IAA7B,EAAmC;AAC/B4G,QAAAA,GAAG,EAAE;AAAA,iBAAMhH,IAAN;AAAA,SAD0B;AAE/BiH,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDxH,IAAAA,iBAAiB,CAACU,IAAD,EAAOI,IAAP,EAAa;AAC1B4G,MAAAA,GAAG,EAAEP,KADqB;AAE1BQ,MAAAA,GAAG,EAAE,eAAM;AAFe,KAAb,CAAjB;AAKH,GAvBD;;AAyBAN,EAAAA,kBAAkB,CAAC5E,MAAD,EAASvC,QAAT,CAAlB;AAEAuC,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAEDuD,mBAAmB,CAACU,KAApB,GAA4B,CACxB,wBADwB,EAExB,2BAFwB,EAGxB,+BAHwB,EAIxB,4BAJwB,CAA5B;AAMAV,mBAAmB,CAAC/C,UAApB,GAAiC,CAC7BxE,QAD6B,EAE7BK,iBAF6B,EAG7BS,kBAH6B,EAI7B6B,oBAJ6B,EAK7Be,GAL6B,CAAjC;;AC7EA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;AACA,AAAO,SAASwE,oBAAT,CAA8BvE,MAA9B,EAAsCpD,QAAtC,EAAgD;AACnD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMqC,GAAG,GAAG5C,QAAQ,EAApB;;AACA,MAAMwH,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB9D,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,UAAM,IAAI8D,cAAJ,CAAmB7E,GAAnB,CAAN;AACH,GAHD;;AAIA,MAAM8E,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQpH,QAAR,EAAqB;AAC5C,QAAMqH,SAAS,GAAG9G,kBAAkB,CAAC6G,KAAD,EAAQpH,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7B6G,SAF6B,CAEtC7G,IAFsC;AAAA,QAGpCI,IAHoC,GAGpByG,SAHoB,CAGpCzG,IAHoC;AAAA,QAG9BH,KAH8B,GAGpB4G,SAHoB,CAG9B5G,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAM6G,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClB/G,QAAAA,IAAI,GAAG+G,CAAP;;AACA,YAAIA,CAAC,YAAYpH,MAAjB,EAAyB;AACrBgH,UAAAA,kBAAkB,CAACI,CAAD,EAAI9G,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsB8G,KAAtB,EAA6BxG,IAA7B,EAAmC;AAC/B4G,QAAAA,GAAG,EAAE;AAAA,iBAAMhH,IAAN;AAAA,SAD0B;AAE/BiH,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDxH,IAAAA,iBAAiB,CAACU,IAAD,EAAOI,IAAP,EAAa;AAAE6G,MAAAA,GAAG,EAAER;AAAP,KAAb,CAAjB;AACH,GAnBD;;AAqBAE,EAAAA,kBAAkB,CAAC5E,MAAD,EAASvC,QAAT,CAAlB;AAEAuC,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CAA0BoB,IAA1B,EAAjB;AACH;AAEDkE,oBAAoB,CAACD,KAArB,GAA6B,CACzB,yBADyB,EAEzB,4BAFyB,EAGzB,gCAHyB,EAIzB,6BAJyB,CAA7B;AAOAC,oBAAoB,CAAC1D,UAArB,GAAkC,CAC9BxE,QAD8B,EAE9BK,iBAF8B,EAG9BS,kBAH8B,EAI9B6B,oBAJ8B,EAK9Be,GAL8B,CAAlC;;ACzEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;;AACA,AAAO,SAASyE,iBAAT,CAA2BxE,MAA3B,EAAmCyE,KAAnC,EAA0CC,KAA1C,EAAiD;AACpD,MAAMC,aAAa,GAAGxF,MAAM,CAACyF,UAA7B;AACA,MAAMC,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgB5F,MAAM,CAAC4F,KAA3C,CAFoD;;AAGpDL,EAAAA,KAAK,GAAGM,QAAQ,CAACN,KAAD,EAAQ,EAAR,CAAhB;AACAA,EAAAA,KAAK,GAAGG,WAAW,CAACH,KAAD,CAAX,GAAqB,IAArB,GAA4BA,KAApC;AAEAD,EAAAA,KAAK,GAAGA,KAAK,GAAG1G,QAAQ,CAAC0G,KAAD,CAAX,GAAqB1G,QAAQ,CAAC,MAAD,CAA1C;;AACA,MAAMkH,cAAc,GAAG,SAAjBA,cAAiB,CAACC,EAAD,EAAKC,CAAL,EAAoB;AACvC,QAAI,CAAC,CAACT,KAAD,IAAUS,CAAC,KAAKT,KAAjB,KAA2BD,KAAK,CAACW,IAAN,CAAWF,EAAE,CAAC1I,QAAH,EAAX,CAA/B,EAA0D;AACtDuD,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,aAAO2E,aAAa,CAAC,YAAM,EAAP,EAAYQ,CAAZ,CAApB;AACH;;AAJsC,sCAAT3F,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAKvC,WAAOmF,aAAa,CAAClF,KAAd,CAAoBN,MAApB,GAA6B+F,EAA7B,EAAiCC,CAAjC,SAAuC3F,IAAvC,EAAP;AACH,GAND;;AAOAL,EAAAA,MAAM,CAACyF,UAAP,GAAoBK,cAApB;AACH;AAEDT,iBAAiB,CAACF,KAAlB,GAA0B,CACtB,oBADsB,EAEtB,uBAFsB,EAGtB,2BAHsB,CAA1B;AAMAE,iBAAiB,CAAC3D,UAAlB,GAA+B,CAAC9C,QAAD,EAAWgC,GAAX,CAA/B;;ACrEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4CA;;AACA,AAAO,SAASsF,kBAAT,CAA4BrF,MAA5B,EAAoCyE,KAApC,EAA2Ca,QAA3C,EAAqD;AACxD,MAAMC,cAAc,GAAGpG,MAAM,CAACqG,WAA9B;AACA,MAAMX,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgB5F,MAAM,CAAC4F,KAA3C,CAFwD;;AAGxDO,EAAAA,QAAQ,GAAGN,QAAQ,CAACM,QAAD,EAAW,EAAX,CAAnB;AACAA,EAAAA,QAAQ,GAAGT,WAAW,CAACS,QAAD,CAAX,GAAwB,IAAxB,GAA+BA,QAA1C;AAEAb,EAAAA,KAAK,GAAGA,KAAK,GAAG1G,QAAQ,CAAC0G,KAAD,CAAX,GAAqB1G,QAAQ,CAAC,MAAD,CAA1C;;AACA,MAAM0H,eAAe,GAAG,SAAlBA,eAAkB,CAACP,EAAD,EAAKC,CAAL,EAAoB;AACxC,QAAI,CAAC,CAACG,QAAD,IAAaH,CAAC,KAAKG,QAApB,KAAiCb,KAAK,CAACW,IAAN,CAAWF,EAAE,CAAC1I,QAAH,EAAX,CAArC,EAAgE;AAC5DuD,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,aAAOuF,cAAc,CAAC,YAAM,EAAP,EAAYJ,CAAZ,CAArB;AACH;;AAJuC,sCAAT3F,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAKxC,WAAO+F,cAAc,CAAC9F,KAAf,CAAqBN,MAArB,GAA8B+F,EAA9B,EAAkCC,CAAlC,SAAwC3F,IAAxC,EAAP;AACH,GAND;;AAOAL,EAAAA,MAAM,CAACqG,WAAP,GAAqBC,eAArB;AACH;AAEDJ,kBAAkB,CAACf,KAAnB,GAA2B,CACvB,qBADuB,EAEvB,wBAFuB,EAGvB,4BAHuB,CAA3B;AAMAe,kBAAkB,CAACxE,UAAnB,GAAgC,CAAC9C,QAAD,EAAWgC,GAAX,CAAhC;;ACrEA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AACA,AAAO,SAAS2F,iBAAT,CAA2B1F,MAA3B,EAAmC2F,OAAnC,EAA4ClB,KAA5C,EAAmD;AACtD,MAAMmB,UAAU,GAAGzG,MAAM,CAAC0G,IAA1B;AAEAF,EAAAA,OAAO,GAAGA,OAAO,GACX,CAAE,CAACA,OADQ,GAEX,CAAC,CAACA,OAFR;AAGAlB,EAAAA,KAAK,GAAGA,KAAK,GACP1G,QAAQ,CAAC0G,KAAD,CADD,GAEP1G,QAAQ,CAAC,MAAD,CAFd,CANsD;;AAWtD,MAAM+H,WAAW,GAAG,SAAdA,WAAc,CAACjI,GAAD,EAAkB;AAClC,QAAI8H,OAAO,KAAKlB,KAAK,CAACW,IAAN,CAAWvH,GAAX,CAAhB,EAAiC;AAAA,wCADR2B,IACQ;AADRA,QAAAA,IACQ;AAAA;;AAC7B,aAAOoG,UAAU,CAACnG,KAAX,CAAiBN,MAAjB,GAA0BtB,GAA1B,SAAkC2B,IAAlC,EAAP;AACH;;AACDO,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GALD;;AAMAb,EAAAA,MAAM,CAAC0G,IAAP,GAAcC,WAAd;AACH;AAEDJ,iBAAiB,CAACpB,KAAlB,GAA0B,CACtB,qBADsB,EAEtB,wBAFsB,EAGtB,4BAHsB,CAA1B;AAMAoB,iBAAiB,CAAC7E,UAAlB,GAA+B,CAAC9C,QAAD,EAAWgC,GAAX,CAA/B;;ACvEA;AACA,AAMA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;AACA,AAAO,SAASgG,wBAAT,CAAkC/F,MAAlC,EAA0CpD,QAA1C,EAAmE;AAAA,MAAf0B,MAAe,uEAAN,IAAM;AACtE,MAAM0H,KAAK,GAAG1H,MAAM,GAAGP,QAAQ,CAACO,MAAD,CAAX,GAAsB,IAA1C;AACA,MAAMW,GAAG,GAAG5C,QAAQ,EAApB;;AAEA,MAAM4J,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,QAAI,CAACC,QAAQ,CAACC,aAAd,EAA6B;AAAE;AAC3B,UAAMC,OAAO,GAAGF,QAAQ,CAACG,oBAAT,CAA8B,QAA9B,CAAhB;AACA,aAAOD,OAAO,CAACA,OAAO,CAACpI,MAAR,GAAiB,CAAlB,CAAd;AACH;;AACD,WAAOkI,QAAQ,CAACC,aAAhB,CAL2B;AAM9B,GAND;;AAQA,MAAMG,SAAS,GAAGL,gBAAgB,EAAlC;;AAEA,MAAMpC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB,QAAM0C,QAAQ,GAAGN,gBAAgB,EAAjC;AACA,QAAIO,OAAO,GAAGD,QAAQ,CAACE,WAAvB;;AAEA,QAAI;AACA,UAAMC,iBAAiB,GAAG3J,MAAM,CAACC,wBAAP,CAAgC2J,IAAI,CAACC,SAArC,EAAgD,aAAhD,EAA+DxC,GAAzF;AACAoC,MAAAA,OAAO,GAAGE,iBAAiB,CAACG,IAAlB,CAAuBN,QAAvB,CAAV,CAFA;AAIH,KAJD,CAIE,OAAO9F,CAAP,EAAU;;AAGZ,QAAI8F,QAAQ,YAAYO,iBAApB,IACGN,OAAO,CAACxI,MAAR,GAAiB,CADpB,IAEGuI,QAAQ,KAAKD,SAFhB,KAGI,CAACN,KAAD,IAAUA,KAAK,CAACZ,IAAN,CAAWmB,QAAQ,CAACE,WAApB,CAHd,CAAJ,EAGqD;AACjD1G,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,YAAM,IAAI8D,cAAJ,CAAmB7E,GAAnB,CAAN;AACH;AACJ,GAlBD;;AAoBA,MAAM8E,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQpH,QAAR,EAAqB;AAC5C,QAAMqH,SAAS,GAAG9G,kBAAkB,CAAC6G,KAAD,EAAQpH,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7B6G,SAF6B,CAEtC7G,IAFsC;AAAA,QAGpCI,IAHoC,GAGpByG,SAHoB,CAGpCzG,IAHoC;AAAA,QAG9BH,KAH8B,GAGpB4G,SAHoB,CAG9B5G,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAM6G,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClB/G,QAAAA,IAAI,GAAG+G,CAAP;;AACA,YAAIA,CAAC,YAAYpH,MAAjB,EAAyB;AACrBgH,UAAAA,kBAAkB,CAACI,CAAD,EAAI9G,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsB8G,KAAtB,EAA6BxG,IAA7B,EAAmC;AAC/B4G,QAAAA,GAAG,EAAE;AAAA,iBAAMhH,IAAN;AAAA,SAD0B;AAE/BiH,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAED,QAAI6C,YAAY,GAAG3J,IAAI,CAACI,IAAD,CAAvB;AACAd,IAAAA,iBAAiB,CAACU,IAAD,EAAOI,IAAP,EAAa;AAC1B6G,MAAAA,GAAG,EAAE,aAAC2C,KAAD,EAAW;AACZnD,QAAAA,KAAK;AACLkD,QAAAA,YAAY,GAAGC,KAAf;AACH,OAJyB;AAK1B5C,MAAAA,GAAG,EAAE,eAAM;AACPP,QAAAA,KAAK;AACL,eAAOkD,YAAP;AACH;AARyB,KAAb,CAAjB;AAUH,GA7BD;;AA+BAhD,EAAAA,kBAAkB,CAAC5E,MAAD,EAASvC,QAAT,CAAlB;AAEAuC,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAED0F,wBAAwB,CAACzB,KAAzB,GAAiC,CAC7B,6BAD6B,EAE7B,gCAF6B,EAG7B,oCAH6B,EAI7B,iCAJ6B,CAAjC;AAOAyB,wBAAwB,CAAClF,UAAzB,GAAsC,CAClCxE,QADkC,EAElCK,iBAFkC,EAGlCS,kBAHkC,EAIlCY,QAJkC,EAKlCiB,oBALkC,EAMlCe,GANkC,CAAtC;;AC5IA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AACA,AAAO,SAASkH,WAAT,CAAqBjH,MAArB,EAA6BpD,QAA7B,EAAuCoK,KAAvC,EAA8C;AACjD,MAAI,CAACpK,QAAL,EAAe;AACX;AACH;;AAED,MAAMiI,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgB5F,MAAM,CAAC4F,KAA3C,CALiD;;AAOjD,MAAImC,aAAJ;;AACA,MAAIF,KAAK,KAAK,WAAd,EAA2B;AACvBE,IAAAA,aAAa,GAAGvJ,SAAhB;AACH,GAFD,MAEO,IAAIqJ,KAAK,KAAK,OAAd,EAAuB;AAC1BE,IAAAA,aAAa,GAAG,KAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,MAAd,EAAsB;AACzBE,IAAAA,aAAa,GAAG,IAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,MAAd,EAAsB;AACzBE,IAAAA,aAAa,GAAG,IAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,UAAd,EAA0B;AAC7BE,IAAAA,aAAa,GAAG,yBAAM,EAAtB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,UAAd,EAA0B;AAC7BE,IAAAA,aAAa,GAAG;AAAA,aAAM,IAAN;AAAA,KAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,WAAd,EAA2B;AAC9BE,IAAAA,aAAa,GAAG;AAAA,aAAM,KAAN;AAAA,KAAhB;AACH,GAFM,MAEA,IAAI,QAAQ9B,IAAR,CAAa4B,KAAb,CAAJ,EAAyB;AAC5BE,IAAAA,aAAa,GAAGC,UAAU,CAACH,KAAD,CAA1B;;AACA,QAAInC,WAAW,CAACqC,aAAD,CAAf,EAAgC;AAC5B;AACH;;AACD,QAAI5K,IAAI,CAAC8K,GAAL,CAASF,aAAT,IAA0B,MAA9B,EAAsC;AAClC;AACH;AACJ,GARM,MAQA,IAAIF,KAAK,KAAK,IAAd,EAAoB;AACvBE,IAAAA,aAAa,GAAG,CAAC,CAAjB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,EAAd,EAAkB;AACrBE,IAAAA,aAAa,GAAG,EAAhB;AACH,GAFM,MAEA;AACH;AACH;;AAED,MAAIG,QAAQ,GAAG,KAAf;;AACA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACN,KAAD,EAAW;AAC1B,QAAIK,QAAJ,EAAc;AACV,aAAOA,QAAP;AACH;;AACDA,IAAAA,QAAQ,GAAGL,KAAK,KAAKrJ,SAAV,IACJuJ,aAAa,KAAKvJ,SADd,IAEJ,OAAOqJ,KAAP,KAAiB,OAAOE,aAF/B;AAGA,WAAOG,QAAP;AACH,GARD;;AAUA,MAAMtD,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQpH,QAAR,EAAqB;AAC5C,QAAMqH,SAAS,GAAG9G,kBAAkB,CAAC6G,KAAD,EAAQpH,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7B6G,SAF6B,CAEtC7G,IAFsC;AAAA,QAGpCI,IAHoC,GAGpByG,SAHoB,CAGpCzG,IAHoC;AAAA,QAG9BH,KAH8B,GAGpB4G,SAHoB,CAG9B5G,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAM6G,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClB/G,QAAAA,IAAI,GAAG+G,CAAP;;AACA,YAAIA,CAAC,YAAYpH,MAAjB,EAAyB;AACrBgH,UAAAA,kBAAkB,CAACI,CAAD,EAAI9G,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsB8G,KAAtB,EAA6BxG,IAA7B,EAAmC;AAC/B4G,QAAAA,GAAG,EAAE;AAAA,iBAAMhH,IAAN;AAAA,SAD0B;AAE/BiH,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAED,QAAIoD,UAAU,CAAClK,IAAI,CAACI,IAAD,CAAL,CAAd,EAA4B;AAAE;AAAS;;AAEvCuC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAtD,IAAAA,iBAAiB,CAACU,IAAD,EAAOI,IAAP,EAAa;AAC1B4G,MAAAA,GAAG,EAAE;AAAA,eAAM8C,aAAN;AAAA,OADqB;AAE1B7C,MAAAA,GAAG,EAAE,aAACF,CAAD,EAAO;AACR,YAAImD,UAAU,CAACnD,CAAD,CAAd,EAAmB;AACf+C,UAAAA,aAAa,GAAG/C,CAAhB;AACH;AACJ;AANyB,KAAb,CAAjB;AAQH,GA7BD;;AA+BAJ,EAAAA,kBAAkB,CAAC5E,MAAD,EAASvC,QAAT,CAAlB;AACH;AAEDqK,WAAW,CAAC3C,KAAZ,GAAoB,CAChB,cADgB,EAEhB,iBAFgB,EAGhB,qBAHgB,CAApB;AAKA2C,WAAW,CAACpG,UAAZ,GAAyB,CAAC1D,kBAAD,EAAqBT,iBAArB,EAAwCqD,GAAxC,CAAzB;;AClIA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AACA,AAAO,SAASwH,YAAT,CAAsBvH,MAAtB,EAA8ByE,KAA9B,EAAqC;AACxC,MAAMuB,KAAK,GAAGvB,KAAK,GAAG1G,QAAQ,CAAC0G,KAAD,CAAX,GAAqB1G,QAAQ,CAAC,MAAD,CAAhD;;AAEA,MAAMyJ,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,UAAD,EAAaC,QAAb,EAA0B;AACnD,QAAMC,UAAU,aAAMF,UAAN,MAAhB;AACA,QAAMG,OAAO,sBAAeF,QAAf,CAAb;AACA,QAAMG,OAAO,uBAAgBH,QAAhB,CAAb;AACA,QAAMI,IAAI,GAAG,UAAb;AACA,QAAMC,UAAU,GAAG,yCAAnB;AACA7B,IAAAA,QAAQ,CAAC8B,MAAT,GAAkBL,UAAU,GAAGI,UAA/B;AACA7B,IAAAA,QAAQ,CAAC8B,MAAT,GAAkBL,UAAU,GAAGC,OAAb,GAAuBG,UAAzC;AACA7B,IAAAA,QAAQ,CAAC8B,MAAT,GAAkBL,UAAU,GAAGE,OAAb,GAAuBE,UAAzC;AACA7B,IAAAA,QAAQ,CAAC8B,MAAT,GAAkBL,UAAU,GAAGG,IAAb,GAAoBC,UAAtC;AACA7B,IAAAA,QAAQ,CAAC8B,MAAT,GAAkBL,UAAU,GAAGC,OAAb,GAAuBE,IAAvB,GAA8BC,UAAhD;AACA7B,IAAAA,QAAQ,CAAC8B,MAAT,GAAkBL,UAAU,GAAGE,OAAb,GAAuBC,IAAvB,GAA8BC,UAAhD;AACAhI,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GAbD;;AAeA,MAAMiI,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACnB/B,IAAAA,QAAQ,CAAC8B,MAAT,CAAgBE,KAAhB,CAAsB,GAAtB,EAA2BC,OAA3B,CAAmC,UAACC,SAAD,EAAe;AAC9C,UAAM9K,GAAG,GAAG8K,SAAS,CAAC7K,OAAV,CAAkB,GAAlB,CAAZ;;AACA,UAAID,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZ;AACH;;AAED,UAAMmK,UAAU,GAAGW,SAAS,CAAC3K,KAAV,CAAgB,CAAhB,EAAmBH,GAAnB,EAAwB+K,IAAxB,EAAnB;;AACA,UAAI,CAACrC,KAAK,CAACZ,IAAN,CAAWqC,UAAX,CAAL,EAA6B;AACzB;AACH;;AAED,UAAMa,SAAS,GAAGpC,QAAQ,CAACqC,QAAT,CAAkBC,QAAlB,CAA2BN,KAA3B,CAAiC,GAAjC,CAAlB;;AACA,WAAK,IAAI/F,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAImG,SAAS,CAACtK,MAAV,GAAmB,CAAxC,EAA2CmE,CAAC,IAAI,CAAhD,EAAmD;AAC/C,YAAMuF,QAAQ,GAAGY,SAAS,CAAC7K,KAAV,CAAgB0E,CAAhB,EAAmBsG,IAAnB,CAAwB,GAAxB,CAAjB;;AACA,YAAIf,QAAJ,EAAc;AACVF,UAAAA,oBAAoB,CAACC,UAAD,EAAaC,QAAb,CAApB;AACH;AACJ;AACJ,KAlBD;AAmBH,GApBD;;AAqBAO,EAAAA,QAAQ;AACR9I,EAAAA,MAAM,CAACuJ,gBAAP,CAAwB,cAAxB,EAAwCT,QAAxC;AACH;AAEDV,YAAY,CAACjD,KAAb,GAAqB,CACjB,eADiB,EAEjB,mBAFiB,EAGjB,uBAHiB,CAArB;AAMAiD,YAAY,CAAC1G,UAAb,GAA0B,CAAC9C,QAAD,EAAWgC,GAAX,CAA1B;;ACpFA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;AACA,AAAO,SAAS4I,uBAAT,CAAiC3I,MAAjC,EAAyC4I,KAAzC,EAAgDC,OAAhD,EAAyD;AAC5DD,EAAAA,KAAK,GAAGA,KAAK,GAAG7K,QAAQ,CAAC6K,KAAD,CAAX,GAAqB7K,QAAQ,CAAC,MAAD,CAA1C;AACA8K,EAAAA,OAAO,GAAGA,OAAO,GAAG9K,QAAQ,CAAC8K,OAAD,CAAX,GAAuB9K,QAAQ,CAAC,MAAD,CAAhD;AAEA,MAAM+K,sBAAsB,GAAG3J,MAAM,CAAC4J,WAAP,CAAmBnC,SAAnB,CAA6B8B,gBAA5D;;AACA,WAASM,uBAAT,CAAiCC,SAAjC,EAA4CC,QAA5C,EAA+D;AAC3D,QAAIN,KAAK,CAACxD,IAAN,CAAW6D,SAAS,CAACzM,QAAV,EAAX,KAAoCqM,OAAO,CAACzD,IAAR,CAAa8D,QAAQ,CAAC1M,QAAT,EAAb,CAAxC,EAA2E;AACvEuD,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,aAAOrC,SAAP;AACH;;AAJ0D,sCAAN6B,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAK3D,WAAOsJ,sBAAsB,CAACrJ,KAAvB,CAA6B,IAA7B,GAAoCwJ,SAApC,EAA+CC,QAA/C,SAA4D1J,IAA5D,EAAP;AACH;;AAEDL,EAAAA,MAAM,CAAC4J,WAAP,CAAmBnC,SAAnB,CAA6B8B,gBAA7B,GAAgDM,uBAAhD;AACH;AAEDL,uBAAuB,CAACrE,KAAxB,GAAgC,CAC5B,0BAD4B,EAE5B,6BAF4B,EAG5B,iCAH4B,CAAhC;AAMAqE,uBAAuB,CAAC9H,UAAxB,GAAqC,CAAC9C,QAAD,EAAWgC,GAAX,CAArC;;AC/DA;AAEA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASoJ,UAAT,CAAoBnJ,MAApB,EAA4B;AAAA;;AAC/B,MAAMoJ,gBAAgB,GAAGjK,MAAM,CAACyF,UAAhC;AACA,MAAMyE,QAAQ,GAAG,mBAAjB;;AAEAlK,EAAAA,MAAM,CAACyF,UAAP,GAAoB,UAACsE,QAAD,EAAuB;AACvC,QAAI,OAAOA,QAAP,KAAoB,QAApB,IAAgC,CAACG,QAAQ,CAACjE,IAAT,CAAc8D,QAAd,CAArC,EAA8D;AAAA,wCADhC1J,IACgC;AADhCA,QAAAA,IACgC;AAAA;;AAC1D,aAAO4J,gBAAgB,CAACvC,IAAjB,OAAAuC,gBAAgB,GAAM,KAAN,EAAYF,QAAZ,SAAyB1J,IAAzB,EAAvB;AACH;;AACDO,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GALD;;AAOA,MAAMsJ,UAAU,GAAG,CACf,CAAC,cAAD,CADe,EAEf,CAAC,SAAD,CAFe,EAGf,CAAC,mBAAD,CAHe,EAIf,CAAC,gBAAD,EAAmB,qBAAnB,EAA0C,gEAA1C,EAA4G,QAA5G,EAAsH,kBAAtH,EAA0I,SAA1I,EAAqJ,kBAArJ,EAAyK,UAAzK,EAAqL,cAArL,EAAqM,UAArM,EAAiN,gBAAjN,EAAmO,aAAnO,EAAkP,cAAlP,EAAkQ,MAAlQ,EAA0Q,QAA1Q,CAJe,CAAnB;;AAMA,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAAC1L,GAAD,EAAS;AACnB,SAAK,IAAIsE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmH,UAAU,CAACtL,MAA/B,EAAuCmE,CAAC,IAAI,CAA5C,EAA+C;AAC3C,UAAMqH,MAAM,GAAGF,UAAU,CAACnH,CAAD,CAAzB;AACA,UAAIsC,KAAK,GAAG,CAAZ;;AACA,WAAK,IAAIgF,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAAM,CAACxL,MAA3B,EAAmCyL,CAAC,IAAI,CAAxC,EAA2C;AACvC,YAAMC,KAAK,GAAGF,MAAM,CAACC,CAAD,CAApB;AACA,YAAME,KAAK,GAAGD,KAAK,YAAYzL,MAAjB,GAA0ByL,KAAK,CAACtE,IAAN,CAAWvH,GAAX,CAA1B,GAA4CA,GAAG,CAACN,OAAJ,CAAYmM,KAAZ,IAAqB,CAAC,CAAhF;;AACA,YAAIC,KAAJ,EAAW;AACPlF,UAAAA,KAAK,IAAI,CAAT;AACH;AACJ;;AACD,UAAIA,KAAK,GAAG+E,MAAM,CAACxL,MAAf,IAAyB,GAA7B,EAAkC;AAC9B,eAAO,IAAP;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GAhBD;;AAkBA,MAAM4L,UAAU,GAAGzK,MAAM,CAAC0K,IAA1B;;AACA1K,EAAAA,MAAM,CAAC0K,IAAP,GAAc,UAAChM,GAAD,EAAS;AACnB,QAAI,CAAC0L,KAAK,CAAC1L,GAAD,CAAV,EAAiB;AACb,aAAO+L,UAAU,CAAC/L,GAAD,CAAjB;AACH;;AACDkC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,QAAM8J,MAAM,GAAG5D,QAAQ,CAAC6D,IAAxB;;AACA,QAAID,MAAJ,EAAY;AACRA,MAAAA,MAAM,CAACE,KAAP,CAAaC,cAAb,CAA4B,YAA5B;AACH;;AACD,QAAMC,EAAE,GAAGhE,QAAQ,CAACiE,cAAT,CAAwB,YAAxB,CAAX;;AACA,QAAID,EAAJ,EAAQ;AACJA,MAAAA,EAAE,CAACE,UAAH,CAAcC,WAAd,CAA0BH,EAA1B;AACH;AACJ,GAbD;AAcH;AAEDf,UAAU,CAAC7E,KAAX,GAAmB,CACf,aADe,EAEf,gBAFe,EAGf,oBAHe,CAAnB;AAMA6E,UAAU,CAACtI,UAAX,GAAwB,CAACd,GAAD,CAAxB;;AC5EA;AACA,AAEA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAASuK,QAAT,CAAkBtK,MAAlB,EAA0B;AAC7B,MAAIuK,YAAY,GAAG,EAAnB;;AACA,MAAIpL,MAAM,CAACqL,iBAAX,EAA8B;AAC1BD,IAAAA,YAAY,GAAG,mBAAf;AACH,GAFD,MAEO,IAAIpL,MAAM,CAACsL,uBAAX,EAAoC;AACvCF,IAAAA,YAAY,GAAG,yBAAf;AACH;;AAED,MAAIA,YAAY,KAAK,EAArB,EAAyB;AACrB;AACH;;AAED,MAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAACC,MAAD,EAAY;AAC/B5K,IAAAA,GAAG,CAACC,MAAD,2DAA2D2K,MAA3D,EAAH;AACH,GAFD;;AAGA,MAAMjL,IAAI,GAAG,SAAPA,IAAO,GAAM,EAAnB;;AACAgL,EAAAA,cAAc,CAAC9D,SAAf,GAA2B;AACvBgE,IAAAA,KAAK,EAAElL,IADgB;AAEvBmL,IAAAA,iBAAiB,EAAEnL,IAFI;AAGvBoL,IAAAA,WAAW,EAAEpL,IAHU;AAIvBqL,IAAAA,oBAAoB,EAAErL;AAJC,GAA3B;AAMA,MAAMsL,GAAG,GAAG7L,MAAM,CAACoL,YAAD,CAAlB;AACApL,EAAAA,MAAM,CAACoL,YAAD,CAAN,GAAuBG,cAAvB;;AACA,MAAIM,GAAG,CAACpE,SAAR,EAAmB;AACfoE,IAAAA,GAAG,CAACpE,SAAJ,CAAciE,iBAAd,GAAkC,UAAU1G,CAAV,EAAa8G,CAAb,EAAgB;AAC9C,aAAO;AACHL,QAAAA,KAAK,EAAElL,IADJ;AAEHwL,QAAAA,IAAI,EAAExL;AAFH,OAAP;AAIH,KALiC,CAKhCW,IALgC,CAK3B,IAL2B,CAAlC;AAMH;AACJ;AAEDiK,QAAQ,CAAChG,KAAT,GAAiB,CACb,UADa,EAEb,aAFa,EAGb,iBAHa,CAAjB;AAMAgG,QAAQ,CAACzJ,UAAT,GAAsB,CAACd,GAAD,CAAtB;;AC3DA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASoL,mBAAT,CAA6BnL,MAA7B,EAAqC;AACxC,MAAMG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,MAAM0I,sBAAsB,GAAG3J,MAAM,CAAC4J,WAAP,CAAmBnC,SAAnB,CAA6B8B,gBAA5D;;AACA,WAASM,uBAAT,CAAiCC,SAAjC,EAA4CC,QAA5C,EAA+D;AAC3DnJ,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,IAAAA,GAAG,8BAAsB8I,SAAtB,iBAAqCC,QAAQ,CAAC1M,QAAT,EAArC,OAAH;;AAF2D,sCAANgD,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAG3D,WAAOsJ,sBAAsB,CAACrJ,KAAvB,CAA6B,IAA7B,GAAoCwJ,SAApC,EAA+CC,QAA/C,SAA4D1J,IAA5D,EAAP;AACH;;AACDL,EAAAA,MAAM,CAAC4J,WAAP,CAAmBnC,SAAnB,CAA6B8B,gBAA7B,GAAgDM,uBAAhD;AACH;AAEDmC,mBAAmB,CAAC7G,KAApB,GAA4B,CACxB,sBADwB,EAExB,4BAFwB,EAGxB,gCAHwB,CAA5B;AAMA6G,mBAAmB,CAACtK,UAApB,GAAiC,CAACd,GAAD,CAAjC;;AClCA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASqL,cAAT,CAAwBpL,MAAxB,EAAgC;AACnC,MAAMG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,MAAMiL,iBAAiB,GAAGlM,MAAM,CAACqG,WAAjC;;AACA,WAAS8F,kBAAT,CAA4BpC,QAA5B,EAAsCqC,OAAtC,EAAwD;AACpDxL,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,IAAAA,GAAG,yBAAiB+I,QAAQ,CAAC1M,QAAT,EAAjB,iBAA0C+O,OAA1C,OAAH;;AAFoD,sCAAN/L,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAGpD,WAAO6L,iBAAiB,CAAC5L,KAAlB,CAAwBN,MAAxB,GAAiC+J,QAAjC,EAA2CqC,OAA3C,SAAuD/L,IAAvD,EAAP;AACH;;AACDL,EAAAA,MAAM,CAACqG,WAAP,GAAqB8F,kBAArB;AACH;AAEDF,cAAc,CAAC9G,KAAf,GAAuB,CACnB,iBADmB,EAEnB,uBAFmB,EAGnB,2BAHmB,CAAvB;AAMA8G,cAAc,CAACvK,UAAf,GAA4B,CAACd,GAAD,CAA5B;;AClCA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASyL,aAAT,CAAuBxL,MAAvB,EAA+B;AAClC,MAAMG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,MAAMgJ,gBAAgB,GAAGjK,MAAM,CAACyF,UAAhC;;AACA,WAAS6G,iBAAT,CAA2BvC,QAA3B,EAAqCqC,OAArC,EAAuD;AACnDxL,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,IAAAA,GAAG,wBAAgB+I,QAAQ,CAAC1M,QAAT,EAAhB,iBAAyC+O,OAAzC,OAAH;;AAFmD,sCAAN/L,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAGnD,WAAO4J,gBAAgB,CAAC3J,KAAjB,CAAuBN,MAAvB,GAAgC+J,QAAhC,EAA0CqC,OAA1C,SAAsD/L,IAAtD,EAAP;AACH;;AACDL,EAAAA,MAAM,CAACyF,UAAP,GAAoB6G,iBAApB;AACH;AAEDD,aAAa,CAAClH,KAAd,GAAsB,CAClB,gBADkB,EAElB,sBAFkB,EAGlB,0BAHkB,CAAtB;AAMAkH,aAAa,CAAC3K,UAAd,GAA2B,CAACd,GAAD,CAA3B;;AClCA;AACA,AAEA;;;;;;;;;;;;AAWA,AAAO,SAAS2L,OAAT,CAAiB1L,MAAjB,EAAyB;AAC5B,MAAMG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ,CAD4B;;AAG5B,MAAMwJ,UAAU,GAAGzK,MAAM,CAAC0K,IAA1B;;AACA,WAAS8B,WAAT,CAAqB9N,GAArB,EAA0B;AACtBkC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,IAAAA,GAAG,kBAAUtC,GAAV,SAAH;AACA,WAAO+L,UAAU,CAAC/L,GAAD,CAAjB;AACH;;AACDsB,EAAAA,MAAM,CAAC0K,IAAP,GAAc8B,WAAd,CAT4B;;AAY5B,MAAMC,cAAc,GAAGzM,MAAM,CAACI,QAA9B;;AAEA,WAASsM,eAAT,GAAkC;AAC9B9L,IAAAA,GAAG,CAACC,MAAD,CAAH;;AAD8B,sCAANR,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAE9BW,IAAAA,GAAG,wBAAiBX,IAAI,CAACiJ,IAAL,CAAU,IAAV,CAAjB,OAAH;AACA,WAAOmD,cAAc,CAACnM,KAAf,CAAqB,IAArB,YAA+BD,IAA/B,EAAP;AACH;;AAEDqM,EAAAA,eAAe,CAACjF,SAAhB,GAA4B7J,MAAM,CAAC+O,MAAP,CAAcF,cAAc,CAAChF,SAA7B,CAA5B;AACAiF,EAAAA,eAAe,CAACjF,SAAhB,CAA0BmF,WAA1B,GAAwCF,eAAxC;AAEA1M,EAAAA,MAAM,CAACI,QAAP,GAAkBsM,eAAlB;AACH;AAEDH,OAAO,CAACpH,KAAR,GAAgB,CACZ,UADY,CAAhB;AAIAoH,OAAO,CAAC7K,UAAR,GAAqB,CAACd,GAAD,CAArB;;AC5CA;;;;;;;;;;;AAWA,AAAO,SAASI,GAAT,GAAsB;AAAA,oCAANX,IAAM;AAANA,IAAAA,IAAM;AAAA;;AACzBY,EAAAA,OAAO,CAACD,GAAR,CAAYX,IAAZ,EADyB;AAE5B;AACDW,GAAG,CAACmE,KAAJ,GAAY,CAAC,KAAD,CAAZ;;ACdA;AACA,AAEA;;;;;;;;;;;;;;;;AAeA,AAAO,SAAS0H,MAAT,CAAgBhM,MAAhB,EAAwB;AAC3Bb,EAAAA,MAAM,CAAC0K,IAAP,GAAc,SAAS8B,WAAT,CAAqBnJ,CAArB,EAAwB;AAClCzC,IAAAA,GAAG,CAACC,MAAD,yCAAyCwC,CAAzC,EAAH;AACH,GAFa,CAEZnC,IAFY,EAAd;AAGH;AAED2L,MAAM,CAAC1H,KAAP,GAAe,CACX,QADW,EAEX,WAFW,EAGX,kBAHW,EAIX,eAJW,EAKX,sBALW,CAAf;AAQA0H,MAAM,CAACnL,UAAP,GAAoB,CAACd,GAAD,CAApB;;AChCA;AAEA,AAEA;;;;;;;;;;;;;;;;;;;;AAmBA,AAAO,SAASkM,aAAT,CAAuBjM,MAAvB,EAA+B1B,MAA/B,EAAuC;AAC1CA,EAAAA,MAAM,GAAGA,MAAM,GAAGP,QAAQ,CAACO,MAAD,CAAX,GAAsBP,QAAQ,CAAC,MAAD,CAA7C;AAEA,MAAM6L,UAAU,GAAGzK,MAAM,CAAC0K,IAA1B;;AACA1K,EAAAA,MAAM,CAAC0K,IAAP,GAAc,UAAUqC,OAAV,EAAmB;AAC7B,QAAI,CAAC5N,MAAM,CAAC8G,IAAP,CAAY8G,OAAO,CAAC1P,QAAR,EAAZ,CAAL,EAAsC;AAClC,aAAOoN,UAAU,CAAC/C,IAAX,CAAgB1H,MAAhB,EAAwB+M,OAAxB,CAAP;AACH;;AACDnM,IAAAA,GAAG,CAACC,MAAD,EAASkM,OAAT,CAAH;AACA,WAAOvO,SAAP;AACH,GANa,CAMZ0C,IANY,CAMPlB,MANO,CAAd;AAOH;AAED8M,aAAa,CAAC3H,KAAd,GAAsB,CAClB,iBADkB,EAElB,cAFkB,EAGlB,kBAHkB,CAAtB;AAMA2H,aAAa,CAACpL,UAAd,GAA2B,CAAC9C,QAAD,EAAWgC,GAAX,CAA3B;;AC1CA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASoM,UAAT,CAAoBnM,MAApB,EAA4B;AAC/BD,EAAAA,GAAG,CAACC,MAAD,CAAH;;AACA,MAAMoM,GAAG,GAAG,SAANA,GAAM,GAAY,EAAxB;;AACAA,EAAAA,GAAG,CAACxF,SAAJ,CAAc2C,KAAd,GAAsB7J,IAAtB;AACA0M,EAAAA,GAAG,CAACxF,SAAJ,CAAcyF,UAAd,GAA2B3M,IAA3B;AACA0M,EAAAA,GAAG,CAACxF,SAAJ,CAAc0F,SAAd,GAA0B5M,IAA1B;;AACA0M,EAAAA,GAAG,CAACxF,SAAJ,CAAc2F,EAAd,GAAmB,UAAUpI,CAAV,EAAa8G,CAAb,EAAgB;AAC/B,QAAI,CAAC9G,CAAL,EAAQ;AACJ8G,MAAAA,CAAC;AACJ;;AACD,WAAO,IAAP;AACH,GALD;;AAMAmB,EAAAA,GAAG,CAACxF,SAAJ,CAAc4F,UAAd,GAA2B,YAAY;AACnC,WAAO,IAAP;AACH,GAFD;;AAGAJ,EAAAA,GAAG,CAACxF,SAAJ,CAAc6F,aAAd,GAA8B,UAAUtI,CAAV,EAAa;AACvCA,IAAAA,CAAC;AACD,WAAO,IAAP;AACH,GAHD;;AAIAiI,EAAAA,GAAG,CAACxF,SAAJ,CAAc8F,SAAd,GAA0BhN,IAA1B;AACAP,EAAAA,MAAM,CAACwN,WAAP,GAAqBxN,MAAM,CAACyN,YAAP,GAAsBR,GAA3C,CApB+B;;AAsB/BjN,EAAAA,MAAM,CAAC0N,WAAP,GAAqB1N,MAAM,CAAC2N,YAAP,GAAsB,IAAIV,GAAJ,EAA3C;AACH;AAEDD,UAAU,CAAC7H,KAAX,GAAmB,CACf,mBADe,EAEf,sBAFe,EAGf,0BAHe,CAAnB;AAMA6H,UAAU,CAACtL,UAAX,GAAwB,CAACnB,IAAD,EAAOK,GAAP,CAAxB;;AChDA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASgN,cAAT,CAAwB/M,MAAxB,EAAgC;AACnC,SAAOb,MAAM,CAAC6N,MAAd;AACA,SAAO7N,MAAM,CAAC8N,KAAd;AACAlQ,EAAAA,MAAM,CAACmQ,gBAAP,CAAwB/N,MAAxB,EAAgC;AAC5B6N,IAAAA,MAAM,EAAE;AACJ5I,MAAAA,GAAG,EAAE,eAAM;AACPrE,QAAAA,GAAG,CAACC,MAAD,CAAH;AACA,eAAO,EAAP;AACH;AAJG,KADoB;AAO5BiN,IAAAA,KAAK,EAAE;AACH7I,MAAAA,GAAG,EAAE,eAAM;AACPrE,QAAAA,GAAG,CAACC,MAAD,CAAH;AACA,eAAO,EAAP;AACH;AAJE;AAPqB,GAAhC;AAcH;AAED+M,cAAc,CAACzI,KAAf,GAAuB,CACnB,kBADmB,EAEnB,iBAFmB,EAGnB,qBAHmB,CAAvB;AAMAyI,cAAc,CAAClM,UAAf,GAA4B,CAACd,GAAD,CAA5B;;ACtCA;;;;;;;;;;;;;;;AAcA,AAAO,SAASoN,gBAAT,CAA0BnN,MAA1B,EAAkC;AACrC,MAAMf,GAAG,GAAG5C,QAAQ,EAApB;;AAEA,MAAM+Q,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrB,UAAM,IAAItJ,cAAJ,CAAmB7E,GAAnB,CAAN;AACH,GAFD;;AAIA,SAAOE,MAAM,CAAC6N,MAAd;AACA,SAAO7N,MAAM,CAAC8N,KAAd;AACAlQ,EAAAA,MAAM,CAACmQ,gBAAP,CAAwB/N,MAAxB,EAAgC;AAC5B6N,IAAAA,MAAM,EAAE;AAAE3I,MAAAA,GAAG,EAAE+I;AAAP,KADoB;AAE5BH,IAAAA,KAAK,EAAE;AAAE5I,MAAAA,GAAG,EAAE+I;AAAP;AAFqB,GAAhC;AAKAjO,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CAA0BoB,IAA1B,EAAjB;AACAN,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAEDmN,gBAAgB,CAAC7I,KAAjB,GAAyB,CACrB,oBADqB,EAErB,eAFqB,EAGrB,mBAHqB,CAAzB;AAMA6I,gBAAgB,CAACtM,UAAjB,GAA8B,CAAC7B,oBAAD,EAAuB3C,QAAvB,EAAiC0D,GAAjC,CAA9B;;AC1CA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASsN,YAAT,CAAsBrN,MAAtB,EAA8B;AACjC,MAAMsN,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD;AAAA,WAAU,OAAOnI,IAAP,CAAYmI,IAAZ,CAAV;AAAA,GAAhB;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAAUC,UAAV,EAAsB;AAClC,QAAIC,SAAS,GAAG,EAAhB;AACA,QAAIC,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAIxL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGsL,UAAU,CAACzP,MAA/B,EAAuCmE,CAAC,IAAI,CAA5C,EAA+C;AAC3C,UAAIA,CAAC,GAAG,CAAJ,KAAU,CAAd,EAAiB;AACbuL,QAAAA,SAAS,IAAID,UAAU,CAACG,MAAX,CAAkBzL,CAAlB,CAAb;AACH,OAFD,MAEO;AACHwL,QAAAA,QAAQ,GAAGF,UAAU,CAACG,MAAX,CAAkBzL,CAAlB,IAAuBwL,QAAlC;AACH;AACJ;;AAED,QAAIJ,IAAI,GAAG,CAACG,SAAS,GAAGC,QAAb,EAAuBzF,KAAvB,CAA6B,EAA7B,CAAX;;AAEA,SAAK,IAAI/F,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAGoL,IAAI,CAACvP,MAAzB,EAAiCmE,EAAC,IAAI,CAAtC,EAAyC;AACrC,UAAImL,OAAO,CAACC,IAAI,CAACpL,EAAD,CAAL,CAAX,EAAsB;AAClB,aAAK,IAAI0L,EAAE,GAAG1L,EAAC,GAAG,CAAlB,EAAqB0L,EAAE,GAAGN,IAAI,CAACvP,MAA/B,EAAuC6P,EAAE,IAAI,CAA7C,EAAgD;AAC5C,cAAIP,OAAO,CAACC,IAAI,CAACM,EAAD,CAAL,CAAX,EAAuB;AACnB;AACA,gBAAMC,IAAI,GAAG9I,QAAQ,CAACuI,IAAI,CAACpL,EAAD,CAAL,EAAU,EAAV,CAAR,GAAwB6C,QAAQ,CAACuI,IAAI,CAACM,EAAD,CAAL,EAAW,EAAX,CAA7C;;AACA,gBAAIC,IAAI,GAAG,EAAX,EAAe;AACXP,cAAAA,IAAI,CAACpL,EAAD,CAAJ,GAAU2L,IAAI,CAACtR,QAAL,EAAV;AACH;;AACD2F,YAAAA,EAAC,GAAG0L,EAAJ;AACA;AACH;AACJ;AACJ;AACJ;;AACDN,IAAAA,IAAI,GAAGA,IAAI,CAAC9E,IAAL,CAAU,EAAV,CAAP;AACA,QAAMsF,UAAU,GAAG5O,MAAM,CAAC6O,IAAP,CAAYT,IAAZ,EAAkB9P,KAAlB,CAAwB,EAAxB,EAA4B,CAAC,EAA7B,CAAnB;AACA;;AACA,QAAI0B,MAAM,CAAC8O,IAAX,EAAiB;AACb9O,MAAAA,MAAM,CAAC8O,IAAP;AACH;AACD;;;AACA9O,IAAAA,MAAM,CAAC+O,cAAP,GAAwB,IAAxB;AACA/O,IAAAA,MAAM,CAACoJ,QAAP,CAAgB4F,IAAhB,GAAuBJ,UAAvB;AACH,GArCD;;AAuCA,MAAIK,GAAJ,CAzCiC;;AA2CjC,MAAIC,YAAY,GAAG,IAAnB;AAEA,MAAMC,MAAM,GAAG5R,iBAAiB,CAACyC,MAAD,EAAS,MAAT,EAAiB;AAC7ClC,IAAAA,YAAY,EAAE,KAD+B;AAE7CoH,IAAAA,GAAG,EAAE,aAAC2C,KAAD,EAAW;AACZ,UAAIqH,YAAJ,EAAkB;AACdA,QAAAA,YAAY,GAAG,KAAf;;AACA,YAAI;AACA,cAAI,OAAOrH,KAAP,KAAiB,QAArB,EAA+B;AAC3BwG,YAAAA,OAAO,CAACxG,KAAD,CAAP;AACH;AACJ,SAJD,CAIE,OAAOuH,GAAP,EAAY,EANA;;AAOjB;;AACDH,MAAAA,GAAG,GAAGpH,KAAN;AACH,KAZ4C;AAa7C5C,IAAAA,GAAG,EAAE;AAAA,aAAMgK,GAAN;AAAA;AAbwC,GAAjB,CAAhC;;AAgBA,MAAIE,MAAJ,EAAY;AACRvO,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GAFD,MAEO;AACHb,IAAAA,MAAM,CAACiB,OAAP,CAAed,KAAf,CAAqB,0CAArB;AACH;AACJ;AAED+N,YAAY,CAAC/I,KAAb,GAAqB,CACjB,eADiB,EAEjB,kBAFiB,EAGjB,sBAHiB,CAArB;AAMA+I,YAAY,CAACxM,UAAb,GAA0B,CAACnE,iBAAD,EAAoBqD,GAApB,CAA1B;;ACtFA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAASyO,mBAAT,CAA6BxO,MAA7B,EAAqCpD,QAArC,EAA+C;AAClD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMqC,GAAG,GAAG5C,QAAQ,EAApB;;AACA,MAAMwH,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB9D,IAAAA,GAAG,CAACC,MAAD,CAAH,CADgB;;AAGhB;AACH,GAJD;;AAKA,MAAM+D,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQpH,QAAR,EAAqB;AAC5C,QAAMqH,SAAS,GAAG9G,kBAAkB,CAAC6G,KAAD,EAAQpH,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7B6G,SAF6B,CAEtC7G,IAFsC;AAAA,QAGpCI,IAHoC,GAGpByG,SAHoB,CAGpCzG,IAHoC;AAAA,QAG9BH,KAH8B,GAGpB4G,SAHoB,CAG9B5G,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAM6G,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClB/G,QAAAA,IAAI,GAAG+G,CAAP;;AACA,YAAIA,CAAC,YAAYpH,MAAjB,EAAyB;AACrBgH,UAAAA,kBAAkB,CAACI,CAAD,EAAI9G,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsB8G,KAAtB,EAA6BxG,IAA7B,EAAmC;AAC/B4G,QAAAA,GAAG,EAAE;AAAA,iBAAMhH,IAAN;AAAA,SAD0B;AAE/BiH,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDxH,IAAAA,iBAAiB,CAACU,IAAD,EAAOI,IAAP,EAAa;AAC1B4G,MAAAA,GAAG,EAAEP,KADqB;AAE1BQ,MAAAA,GAAG,EAAE,eAAM;AAFe,KAAb,CAAjB;AAIH,GAtBD;;AAwBAN,EAAAA,kBAAkB,CAAC5E,MAAD,EAASvC,QAAT,CAAlB;AAEAuC,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAEDmO,mBAAmB,CAAClK,KAApB,GAA4B,CACxB,wBADwB,CAA5B;AAGAkK,mBAAmB,CAAC3N,UAApB,GAAiC,CAC7BxE,QAD6B,EAE7BK,iBAF6B,EAG7BS,kBAH6B,EAI7B6B,oBAJ6B,EAK7Be,GAL6B,CAAjC;;AC3DA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAAS0O,oBAAT,CAA8BzO,MAA9B,EAAsCpD,QAAtC,EAAgD;AACnD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMqC,GAAG,GAAG5C,QAAQ,EAApB;;AACA,MAAMwH,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB9D,IAAAA,GAAG,CAACC,MAAD,CAAH,CADgB;;AAGhB;AACH,GAJD;;AAKA,MAAM+D,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQpH,QAAR,EAAqB;AAC5C,QAAMqH,SAAS,GAAG9G,kBAAkB,CAAC6G,KAAD,EAAQpH,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7B6G,SAF6B,CAEtC7G,IAFsC;AAAA,QAGpCI,IAHoC,GAGpByG,SAHoB,CAGpCzG,IAHoC;AAAA,QAG9BH,KAH8B,GAGpB4G,SAHoB,CAG9B5G,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAM6G,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClB/G,QAAAA,IAAI,GAAG+G,CAAP;;AACA,YAAIA,CAAC,YAAYpH,MAAjB,EAAyB;AACrBgH,UAAAA,kBAAkB,CAACI,CAAD,EAAI9G,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsB8G,KAAtB,EAA6BxG,IAA7B,EAAmC;AAC/B4G,QAAAA,GAAG,EAAE;AAAA,iBAAMhH,IAAN;AAAA,SAD0B;AAE/BiH,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDxH,IAAAA,iBAAiB,CAACU,IAAD,EAAOI,IAAP,EAAa;AAAE6G,MAAAA,GAAG,EAAER;AAAP,KAAb,CAAjB;AACH,GAnBD;;AAqBAE,EAAAA,kBAAkB,CAAC5E,MAAD,EAASvC,QAAT,CAAlB;AAEAuC,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CAA0BoB,IAA1B,EAAjB;AACH;AAEDoO,oBAAoB,CAACnK,KAArB,GAA6B,CACzB,yBADyB,CAA7B;AAIAmK,oBAAoB,CAAC5N,UAArB,GAAkC,CAC9BxE,QAD8B,EAE9BK,iBAF8B,EAG9BS,kBAH8B,EAI9B6B,oBAJ8B,EAK9Be,GAL8B,CAAlC;;AC7DA;AACA,AAMA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAAS2O,wBAAT,CAAkC1O,MAAlC,EAA0CpD,QAA1C,EAAmE;AAAA,MAAf0B,MAAe,uEAAN,IAAM;AACtE,MAAM0H,KAAK,GAAG1H,MAAM,GAAGP,QAAQ,CAACO,MAAD,CAAX,GAAsB,IAA1C;AACA,MAAMW,GAAG,GAAG5C,QAAQ,EAApB;;AAEA,MAAM4J,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,QAAI,CAACC,QAAQ,CAACC,aAAd,EAA6B;AAAE;AAC3B,UAAMC,OAAO,GAAGF,QAAQ,CAACG,oBAAT,CAA8B,QAA9B,CAAhB;AACA,aAAOD,OAAO,CAACA,OAAO,CAACpI,MAAR,GAAiB,CAAlB,CAAd;AACH;;AACD,WAAOkI,QAAQ,CAACC,aAAhB,CAL2B;AAM9B,GAND;;AAQA,MAAMG,SAAS,GAAGL,gBAAgB,EAAlC;;AAEA,MAAMpC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB,QAAM0C,QAAQ,GAAGN,gBAAgB,EAAjC;;AACA,QAAIM,QAAQ,YAAYO,iBAApB,IACGP,QAAQ,CAACE,WAAT,CAAqBzI,MAArB,GAA8B,CADjC,IAEGuI,QAAQ,KAAKD,SAFhB,KAGI,CAACN,KAAD,IAAUA,KAAK,CAACZ,IAAN,CAAWmB,QAAQ,CAACE,WAApB,CAHd,CAAJ,EAGqD;AACjD1G,MAAAA,GAAG,CAACC,MAAD,CAAH,CADiD;;AAGjD;AACH;AACJ,GAVD;;AAYA,MAAM+D,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQpH,QAAR,EAAqB;AAC5C,QAAMqH,SAAS,GAAG9G,kBAAkB,CAAC6G,KAAD,EAAQpH,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7B6G,SAF6B,CAEtC7G,IAFsC;AAAA,QAGpCI,IAHoC,GAGpByG,SAHoB,CAGpCzG,IAHoC;AAAA,QAG9BH,KAH8B,GAGpB4G,SAHoB,CAG9B5G,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAM6G,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClB/G,QAAAA,IAAI,GAAG+G,CAAP;;AACA,YAAIA,CAAC,YAAYpH,MAAjB,EAAyB;AACrBgH,UAAAA,kBAAkB,CAACI,CAAD,EAAI9G,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsB8G,KAAtB,EAA6BxG,IAA7B,EAAmC;AAC/B4G,QAAAA,GAAG,EAAE;AAAA,iBAAMhH,IAAN;AAAA,SAD0B;AAE/BiH,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAED,QAAI6C,YAAY,GAAG3J,IAAI,CAACI,IAAD,CAAvB;AACAd,IAAAA,iBAAiB,CAACU,IAAD,EAAOI,IAAP,EAAa;AAC1B6G,MAAAA,GAAG,EAAE,aAAC2C,KAAD,EAAW;AACZnD,QAAAA,KAAK;AACLkD,QAAAA,YAAY,GAAGC,KAAf;AACH,OAJyB;AAK1B5C,MAAAA,GAAG,EAAE,eAAM;AACPP,QAAAA,KAAK;AACL,eAAOkD,YAAP;AACH;AARyB,KAAb,CAAjB;AAUH,GA7BD;;AA+BAhD,EAAAA,kBAAkB,CAAC5E,MAAD,EAASvC,QAAT,CAAlB;AAEAuC,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAEDqO,wBAAwB,CAACpK,KAAzB,GAAiC,CAC7B,6BAD6B,CAAjC;AAIAoK,wBAAwB,CAAC7N,UAAzB,GAAsC,CAClCxE,QADkC,EAElCK,iBAFkC,EAGlCS,kBAHkC,EAIlCY,QAJkC,EAKlCiB,oBALkC,EAMlCe,GANkC,CAAtC;;ACxFA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AACA,AAAO,SAAS4O,UAAT,CAAoB3O,MAApB,EAA4B4O,KAA5B,EAAmCC,QAAnC,EAA6C;AAChD,MAAI,CAACD,KAAL,EAAY;AAAE;AAAS;;AACvBA,EAAAA,KAAK,GAAGA,KAAK,CAAC1G,KAAN,CAAY,UAAZ,CAAR;;AACA,MAAI,CAAC2G,QAAL,EAAe;AACXA,IAAAA,QAAQ,cAAOD,KAAK,CAACnG,IAAN,CAAW,KAAX,CAAP,MAAR;AACH;;AAED,MAAMqG,MAAM,GAAG,SAATA,MAAS,CAACC,EAAD,EAAQ;AACnB,QAAIA,EAAJ,EAAQ;AACJ5P,MAAAA,MAAM,CAAC6P,mBAAP,CAA2BD,EAAE,CAACE,IAA9B,EAAoCH,MAApC,EAA4C,IAA5C;AACH;;AAED,QAAMI,KAAK,GAAG,GAAGzR,KAAH,CAASoJ,IAAT,CAAcX,QAAQ,CAACiJ,gBAAT,CAA0BN,QAA1B,CAAd,CAAd;AACA,QAAIO,OAAO,GAAG,KAAd;AACAF,IAAAA,KAAK,CAAC/G,OAAN,CAAc,UAACkH,IAAD,EAAU;AACpBT,MAAAA,KAAK,CAACzG,OAAN,CAAc,UAACmH,IAAD,EAAU;AACpBD,QAAAA,IAAI,CAACE,eAAL,CAAqBD,IAArB;AACAF,QAAAA,OAAO,GAAG,IAAV;AACH,OAHD;AAIH,KALD;;AAMA,QAAIA,OAAJ,EAAa;AACTrP,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AACJ,GAhBD;;AAkBA,MAAIkG,QAAQ,CAACsJ,UAAT,KAAwB,SAA5B,EAAuC;AACnCrQ,IAAAA,MAAM,CAACuJ,gBAAP,CAAwB,kBAAxB,EAA4CoG,MAA5C,EAAoD,IAApD;AACH,GAFD,MAEO;AACHA,IAAAA,MAAM;AACT;AACJ;AAEDH,UAAU,CAACrK,KAAX,GAAmB,CACf,aADe,EAEf,gBAFe,EAGf,oBAHe,CAAnB;AAMAqK,UAAU,CAAC9N,UAAX,GAAwB,CAACd,GAAD,CAAxB;;ACxFA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAkDA;;AAEA,AAAO,SAAS0P,WAAT,CAAqBzP,MAArB,EAA6B0P,UAA7B,EAAyCb,QAAzC,EAAmD;AACtD,MAAI,CAACa,UAAL,EAAiB;AAAE;AAAS;;AAC5BA,EAAAA,UAAU,GAAGA,UAAU,CAACxH,KAAX,CAAiB,UAAjB,CAAb;AACA,MAAIyH,SAAS,GAAG,EAAhB;;AACA,MAAI,CAACd,QAAL,EAAe;AACXc,IAAAA,SAAS,GAAGD,UAAU,CAAChO,GAAX,CAAe,UAACkO,SAAD,EAAe;AACtC,wBAAWA,SAAX;AACH,KAFW,CAAZ;AAGH;;AAED,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACd,EAAD,EAAQ;AAC/B,QAAIA,EAAJ,EAAQ;AACJ5P,MAAAA,MAAM,CAAC6P,mBAAP,CAA2BD,EAAE,CAACE,IAA9B,EAAoCY,kBAApC,EAAwD,IAAxD;AACH;;AAED,QAAMX,KAAK,GAAG,IAAIY,GAAJ,EAAd;;AACA,QAAIjB,QAAJ,EAAc;AACV,UAAMkB,YAAY,GAAG,GAAGtS,KAAH,CAASoJ,IAAT,CAAcX,QAAQ,CAACiJ,gBAAT,CAA0BN,QAA1B,CAAd,CAArB;AACAkB,MAAAA,YAAY,CAAC5H,OAAb,CAAqB,UAAC6H,CAAD;AAAA,eAAOd,KAAK,CAACe,GAAN,CAAUD,CAAV,CAAP;AAAA,OAArB;AACH,KAHD,MAGO,IAAIL,SAAS,CAAC3R,MAAV,GAAmB,CAAvB,EAA0B;AAC7B2R,MAAAA,SAAS,CAACxH,OAAV,CAAkB,UAAC3F,CAAD,EAAO;AACrB,YAAM0N,QAAQ,GAAGhK,QAAQ,CAACiJ,gBAAT,CAA0B3M,CAA1B,CAAjB;;AACA,aAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+N,QAAQ,CAAClS,MAA7B,EAAqCmE,CAAC,IAAI,CAA1C,EAA6C;AACzC,cAAMgO,OAAO,GAAGD,QAAQ,CAAC/N,CAAD,CAAxB;AACA+M,UAAAA,KAAK,CAACe,GAAN,CAAUE,OAAV;AACH;AACJ,OAND;AAOH;;AAED,QAAIf,OAAO,GAAG,KAAd;AAEAF,IAAAA,KAAK,CAAC/G,OAAN,CAAc,UAACkH,IAAD,EAAU;AACpBK,MAAAA,UAAU,CAACvH,OAAX,CAAmB,UAACyH,SAAD,EAAe;AAC9B,YAAIP,IAAI,CAACe,SAAL,CAAeC,QAAf,CAAwBT,SAAxB,CAAJ,EAAwC;AACpCP,UAAAA,IAAI,CAACe,SAAL,CAAeE,MAAf,CAAsBV,SAAtB;AACAR,UAAAA,OAAO,GAAG,IAAV;AACH;AACJ,OALD;AAMH,KAPD;;AASA,QAAIA,OAAJ,EAAa;AACTrP,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AACJ,GAjCD;;AAmCA,MAAIkG,QAAQ,CAACsJ,UAAT,KAAwB,SAA5B,EAAuC;AACnCrQ,IAAAA,MAAM,CAACuJ,gBAAP,CAAwB,kBAAxB,EAA4CmH,kBAA5C,EAAgE,IAAhE;AACH,GAFD,MAEO;AACHA,IAAAA,kBAAkB;AACrB;AACJ;AAEDJ,WAAW,CAACnL,KAAZ,GAAoB,CAChB,cADgB,CAApB;AAIAmL,WAAW,CAAC5O,UAAZ,GAAyB,CAACd,GAAD,CAAzB;;AC7GA;;;;;;;;;;;;;;;AAcA,AAAO,SAASwQ,kBAAT,CAA4BvQ,MAA5B,EAAoC;AACvCkG,EAAAA,QAAQ,CAACwC,gBAAT,CAA0B,OAA1B,EAAmC,UAACqG,EAAD,EAAQ;AAAA,QACjCyB,MADiC,GACtBzB,EADsB,CACjCyB,MADiC;;AAEvC,WAAOA,MAAM,KAAK,IAAlB,EAAwB;AACpB,UAAIA,MAAM,CAACC,SAAP,KAAqB,GAArB,IAA4BD,MAAM,CAACE,YAAP,CAAoB,QAApB,CAAhC,EAA+D;AAC3D3B,QAAAA,EAAE,CAAC4B,eAAH;AACA5B,QAAAA,EAAE,CAAC6B,cAAH;AACA7Q,QAAAA,GAAG,CAACC,MAAD,CAAH;AACA;AACH;;AACDwQ,MAAAA,MAAM,GAAGA,MAAM,CAACpG,UAAhB;AACH;AACJ,GAXD;AAYH;AAEDmG,kBAAkB,CAACjM,KAAnB,GAA2B,CACvB,sBADuB,EAEvB,yBAFuB,EAGvB,6BAHuB,CAA3B;AAMAiM,kBAAkB,CAAC1P,UAAnB,GAAgC,CAC5Bd,GAD4B,CAAhC;;AClCA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AACA,AAAO,SAAS8Q,iBAAT,CAA2B7Q,MAA3B,EAAmCyE,KAAnC,EAA0Ca,QAA1C,EAAoDwL,KAApD,EAA2D;AAC9D,MAAMvL,cAAc,GAAGpG,MAAM,CAACqG,WAA9B;AACA,MAAMX,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgB5F,MAAM,CAAC4F,KAA3C,CAF8D;;AAG9D,MAAMgM,cAAc,GAAGjM,MAAM,CAACkM,QAAP,IAAmB7R,MAAM,CAAC6R,QAAjD,CAH8D;;AAK9D1L,EAAAA,QAAQ,GAAGN,QAAQ,CAACM,QAAD,EAAW,EAAX,CAAnB;AACAA,EAAAA,QAAQ,GAAGT,WAAW,CAACS,QAAD,CAAX,GAAwB,IAAxB,GAA+BA,QAA1C;AAEAwL,EAAAA,KAAK,GAAG9L,QAAQ,CAAC8L,KAAD,EAAQ,EAAR,CAAhB;AACAA,EAAAA,KAAK,GAAGjM,WAAW,CAACS,QAAD,CAAX,IAAyB,CAACyL,cAAc,CAACD,KAAD,CAAxC,GAAkD,IAAlD,GAAyDA,KAAjE;AAEArM,EAAAA,KAAK,GAAGA,KAAK,GAAG1G,QAAQ,CAAC0G,KAAD,CAAX,GAAqB1G,QAAQ,CAAC,MAAD,CAA1C;;AAEA,MAAI+S,KAAK,GAAG,IAAZ,EAAkB;AACdA,IAAAA,KAAK,GAAG,IAAR;AACH;;AACD,MAAIA,KAAK,GAAG,EAAZ,EAAgB;AACZA,IAAAA,KAAK,GAAG,EAAR;AACH;;AAED,MAAMrL,eAAe,GAAG,SAAlBA,eAAkB,CAACP,EAAD,EAAKC,CAAL,EAAoB;AACxC,QAAIA,CAAC,KAAKG,QAAN,IAAkBb,KAAK,CAACW,IAAN,CAAWF,EAAE,CAAC1I,QAAH,EAAX,CAAtB,EAAiD;AAC7C2I,MAAAA,CAAC,IAAI2L,KAAL;AACA/Q,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;;AAJuC,sCAATR,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAKxC,WAAO+F,cAAc,CAAC9F,KAAf,CAAqBN,MAArB,GAA8B+F,EAA9B,EAAkCC,CAAlC,SAAwC3F,IAAxC,EAAP;AACH,GAND;;AAOAL,EAAAA,MAAM,CAACqG,WAAP,GAAqBC,eAArB;AACH;AAEDoL,iBAAiB,CAACvM,KAAlB,GAA0B,CACtB,oBADsB,EAEtB,6BAFsB,EAGtB,iCAHsB,CAA1B;AAMAuM,iBAAiB,CAAChQ,UAAlB,GAA+B,CAAC9C,QAAD,EAAWgC,GAAX,CAA/B;;AC7EA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AACA,AAAO,SAASkR,gBAAT,CAA0BjR,MAA1B,EAAkCyE,KAAlC,EAAyC8G,OAAzC,EAAkDuF,KAAlD,EAAyD;AAC5D,MAAMnM,aAAa,GAAGxF,MAAM,CAACyF,UAA7B;AACA,MAAMC,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgB5F,MAAM,CAAC4F,KAA3C,CAF4D;;AAG5D,MAAMgM,cAAc,GAAGjM,MAAM,CAACkM,QAAP,IAAmB7R,MAAM,CAAC6R,QAAjD,CAH4D;;AAK5DzF,EAAAA,OAAO,GAAGvG,QAAQ,CAACuG,OAAD,EAAU,EAAV,CAAlB;AACAA,EAAAA,OAAO,GAAG1G,WAAW,CAAC0G,OAAD,CAAX,GAAuB,IAAvB,GAA8BA,OAAxC;AAEAuF,EAAAA,KAAK,GAAG9L,QAAQ,CAAC8L,KAAD,EAAQ,EAAR,CAAhB;AACAA,EAAAA,KAAK,GAAGjM,WAAW,CAAC0G,OAAD,CAAX,IAAwB,CAACwF,cAAc,CAACD,KAAD,CAAvC,GAAiD,IAAjD,GAAwDA,KAAhE;AAEArM,EAAAA,KAAK,GAAGA,KAAK,GAAG1G,QAAQ,CAAC0G,KAAD,CAAX,GAAqB1G,QAAQ,CAAC,MAAD,CAA1C;;AAEA,MAAI+S,KAAK,GAAG,IAAZ,EAAkB;AACdA,IAAAA,KAAK,GAAG,IAAR;AACH;;AACD,MAAIA,KAAK,GAAG,EAAZ,EAAgB;AACZA,IAAAA,KAAK,GAAG,EAAR;AACH;;AAED,MAAM7L,cAAc,GAAG,SAAjBA,cAAiB,CAACC,EAAD,EAAKC,CAAL,EAAoB;AACvC,QAAIA,CAAC,KAAKoG,OAAN,IAAiB9G,KAAK,CAACW,IAAN,CAAWF,EAAE,CAAC1I,QAAH,EAAX,CAArB,EAAgD;AAC5C2I,MAAAA,CAAC,IAAI2L,KAAL;AACA/Q,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;;AAJsC,sCAATR,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAKvC,WAAOmF,aAAa,CAAClF,KAAd,CAAoBN,MAApB,GAA6B+F,EAA7B,EAAiCC,CAAjC,SAAuC3F,IAAvC,EAAP;AACH,GAND;;AAOAL,EAAAA,MAAM,CAACyF,UAAP,GAAoBK,cAApB;AACH;AAEDgM,gBAAgB,CAAC3M,KAAjB,GAAyB,CACrB,mBADqB,EAErB,4BAFqB,EAGrB,gCAHqB,CAAzB;AAMA2M,gBAAgB,CAACpQ,UAAjB,GAA8B,CAAC9C,QAAD,EAAWgC,GAAX,CAA9B;;AC9EA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AACA,AAAO,SAASmR,SAAT,CAAmBlR,MAAnB,EAA2BmR,KAA3B,EAAkC;AAAA,iBACrB/Q,OADqB;AAAA,MAC7BgR,GAD6B,YAC7BA,GAD6B;AAErCD,EAAAA,KAAK,GAAGnM,QAAQ,CAACmM,KAAD,EAAQ,EAAR,CAAhB;;AAEA,WAASE,UAAT,CAAoB1U,MAApB,EAA4B;AACxB;AACA,QAAImR,IAAJ;;AACA,SAAK,IAAI3L,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGgP,KAApB,EAA2BhP,CAAC,IAAI,CAAhC,EAAmC;AAC/B;AACA2L,MAAAA,IAAI,aAAMnR,MAAN,CAAJ;AACH;;AACD,QAAI,OAAOyU,GAAP,KAAe,UAAnB,EAA+B;AAC3BA,MAAAA,GAAG,CAACvK,IAAJ,CAAS,IAAT,EAAelK,MAAf;AACH;;AACDoD,IAAAA,GAAG,CAACC,MAAD,EAAS8N,IAAT,CAAH;AACH,GAfoC;;;AAiBrC1N,EAAAA,OAAO,CAACgR,GAAR,GAAcC,UAAd;AACH;AAEDH,SAAS,CAAC5M,KAAV,GAAkB,CACd,YADc,EAEd,gBAFc,CAAlB;AAKA4M,SAAS,CAACrQ,UAAV,GAAuB,CAACd,GAAD,CAAvB;;ACpDA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AACA,AAAO,SAASuR,SAAT,CAAmBtR,MAAnB,EAA2BuR,aAA3B,EAA0CC,oBAA1C,EAAgE;AACnE;AACA,MAAMrR,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,MAAMqR,UAAU,GAAGF,aAAa,KAAK5T,SAAlB,IAA+B4T,aAAa,KAAK,EAAjD,GACbA,aAAa,CAACrJ,KAAd,CAAoB,IAApB,CADa,GAEb,EAFN;AAGA,MAAMwJ,WAAW,GAAGF,oBAAoB,KAAK7T,SAAzB,IAAsC6T,oBAAoB,KAAK,EAA/D,GACdA,oBAAoB,CAACtJ,KAArB,CAA2B,IAA3B,CADc,GAEd,EAFN;;AAIA,WAASyJ,eAAT,CAAyBC,IAAzB,EAA+B;AAC3B,SAAK,IAAIzP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGuP,WAAW,CAAC1T,MAAhC,EAAwCmE,CAAC,IAAI,CAA7C,EAAgD;AAC5C,UAAM0P,UAAU,GAAGH,WAAW,CAACvP,CAAD,CAA9B;AACA,UAAM2P,OAAO,GAAG3U,kBAAkB,CAACyU,IAAD,EAAOC,UAAP,CAAlC;AACA,UAAME,cAAc,GAAGF,UAAU,CAAC3J,KAAX,CAAiB,EAAjB,EAAqB8J,GAArB,EAAvB;;AACA,UAAIF,OAAO,CAAC1U,IAAR,CAAa2U,cAAb,MAAiCpU,SAArC,EAAgD;AAC5C,eAAO,KAAP;AACH;AACJ;;AACD,WAAO,IAAP;AACH;;AAED,MAAMsU,WAAW,GAAG1Q,IAAI,CAAC2Q,KAAzB;;AAEA,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAa;AAAA,sCAAT3S,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAC9B,QAAM4S,CAAC,GAAGH,WAAW,CAACxS,KAAZ,CAAkBN,MAAlB,EAA0BK,IAA1B,CAAV;;AACA,QAAIiS,UAAU,CAACzT,MAAX,KAAsB,CAA1B,EAA6B;AACzBmC,MAAAA,GAAG,CAAChB,MAAM,CAACoJ,QAAP,CAAgBC,QAAjB,EAA2B4J,CAA3B,CAAH;AACA,aAAOA,CAAP;AACH;;AACD,QAAIT,eAAe,CAACS,CAAD,CAAf,KAAuB,KAA3B,EAAkC;AAC9B,aAAOA,CAAP;AACH;;AACDX,IAAAA,UAAU,CAACtJ,OAAX,CAAmB,UAACL,IAAD,EAAU;AACzB,UAAMuK,QAAQ,GAAGlV,kBAAkB,CAACiV,CAAD,EAAItK,IAAJ,CAAnC;;AACA,UAAIuK,QAAQ,CAACjV,IAAb,EAAmB;AACf,eAAOiV,QAAQ,CAACjV,IAAT,CAAciV,QAAQ,CAAC7U,IAAvB,CAAP;AACH;AACJ,KALD;AAMAuC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,WAAOoS,CAAP;AACH,GAjBD;;AAmBA7Q,EAAAA,IAAI,CAAC2Q,KAAL,GAAaC,YAAb;AACH;AAGDb,SAAS,CAAChN,KAAV,GAAkB,CACd,YADc,EAEd,eAFc,EAGd,mBAHc,CAAlB;AAMAgN,SAAS,CAACzQ,UAAV,GAAuB,CAACd,GAAD,EAAM5C,kBAAN,CAAvB;;ACzGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYA;;;;AAGA,IAAMmV,0BAA0B,GAAG,0BAAnC;;AAEA,IAAMC,0BAA0B,GAAG,mCAAnC;;AAEA,IAAMC,oCAAoC,GAAG,oCAA7C;AAEA;;;;AAGA,IAAMC,sBAAsB,GAAG,+BAA/B;AACA,IAAMC,oBAAoB,GAAG,OAA7B;AACA,IAAMC,oBAAoB,GAAG,iBAA7B;AACA,IAAMC,8BAA8B,GAAG,QAAvC;AACA,IAAMC,8BAA8B,GAAG,kBAAvC;;AAEA,IAAMC,sBAAsB,GAAG,0BAA/B;;AAEA,IAAMC,gCAAgC,GAAG,2BAAzC;AAEA,IAAMC,qBAAqB,GAAG,MAA9B;AAEA;;;;AAGA,IAAMC,kBAAkB,GAAG,KAA3B;AACA,IAAMC,4BAA4B,GAAG,MAArC;AAEA;;;;AAGA,IAAMC,gBAAgB,GAAG,yBAAzB;AAEA;;;;;AAIA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAACvV,GAAD,EAAS;AAC1B,MAAMwV,GAAG,GAAG,kBAAZ;AACA,SAAOxV,GAAG,CAAC4G,KAAJ,CAAU4O,GAAV,CAAP;AACH,CAHD;AAKA;;;;;;;AAKA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACzV,GAAD,EAAM0P,IAAN,EAAe;AACvC,SAAOxQ,MAAM,CAACmF,IAAP,CAAYqL,IAAZ,EAAkBzM,MAAlB,CAAyB,UAACyS,GAAD,EAAMC,GAAN,EAAc;AAC1C,QAAMH,GAAG,GAAG,IAAIpV,MAAJ,iBAAoBuV,GAApB,UAA8B,GAA9B,CAAZ;AACAD,IAAAA,GAAG,GAAGA,GAAG,CAACzV,OAAJ,CAAYuV,GAAZ,EAAiB9F,IAAI,CAACiG,GAAD,CAArB,CAAN;AACA,WAAOD,GAAP;AACH,GAJM,EAIJ1V,GAJI,CAAP;AAKH,CAND;AASA;;;;;;AAIA,AAAO,IAAM4V,kBAAkB,GAAG,SAArBA,kBAAqB,CAACvQ,IAAD,EAAU;AACxC,SAAOA,IAAI,CAAC3F,OAAL,CAAa6E,kBAAb,IAAmC,CAAC,CAA3C;AACH,CAFM;AAIP;;;;;AAIA,AAAO,IAAMsR,kBAAkB,GAAG,SAArBA,kBAAqB,CAACxQ,IAAD,EAAU;AACxC,SAAO,CACHA,IAAI,CAAC3F,OAAL,CAAamV,oBAAb,IAAqC,CAAC,CAAtC,IACGxP,IAAI,CAAC3F,OAAL,CAAaoV,oBAAb,IAAqC,CAAC,CADzC,IAEGzP,IAAI,CAAC3F,OAAL,CAAaqV,8BAAb,IAA+C,CAAC,CAFnD,IAGG1P,IAAI,CAAC3F,OAAL,CAAasV,8BAAb,IAA+C,CAAC,CAJhD,KAMAJ,sBAAsB,CAACrN,IAAvB,CAA4BlC,IAA5B,CANP;AAOH,CARM;AAUP;;;;;AAIA,AAAO,IAAMyQ,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACzQ,IAAD,EAAU;AACtC,SAAO,CACHA,IAAI,CAAC3F,OAAL,CAAa0V,kBAAb,IAAmC,CAAC,CAApC,IACG/P,IAAI,CAAC3F,OAAL,CAAa2V,4BAAb,IAA6C,CAAC,CAF9C,KAIJhQ,IAAI,CAAC5E,MAAL,CAAY6U,gBAAZ,MAAkC,CAAC,CAJtC;AAKH,CANM;AAQP;;;;;AAIA,AAAO,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,CAAC1Q,IAAD,EAAU;AACrC,MAAM2Q,OAAO,GAAG1V,eAAe,CAAC+E,IAAD,EAAOuP,sBAAP,CAA/B;AACA,MAAMqB,IAAI,GAAG5Q,IAAI,CAACuB,KAAL,CAAWgO,sBAAX,EAAmC,CAAnC,CAAb;AACA,MAAIsB,QAAJ;;AACA,MAAID,IAAI,CAACvW,OAAL,CAAa,GAAb,IAAoB,CAAC,CAAzB,EAA4B;AACxBwW,IAAAA,QAAQ,GAAGvB,oCAAX;AACH,GAFD,MAEO;AACHuB,IAAAA,QAAQ,GAAGxB,0BAAX;AACH;;AACD,MAAM/S,IAAI,GAAGZ,iBAAiB,CAACsE,IAAD,CAAjB,CACRgF,KADQ,CACF,KADE,EAERxG,GAFQ,CAEJ,UAACsS,GAAD,EAAM3V,KAAN;AAAA,WAAiBA,KAAK,KAAK,CAAV,iBAAqB2V,GAArB,IAA6BA,GAA9C;AAAA,GAFI,EAGRtS,GAHQ,CAGJ,UAACsS,GAAD;AAAA,WAAUrV,kBAAkB,CAACqV,GAAD,CAA5B;AAAA,GAHI,EAIRvL,IAJQ,CAIH,IAJG,CAAb;AAKA,MAAMwL,OAAO,GAAGX,mBAAmB,CAC/BS,QAD+B,EAE/B;AAAEF,IAAAA,OAAO,EAAPA,OAAF;AAAWrU,IAAAA,IAAI,EAAJA;AAAX,GAF+B,CAAnC;AAIA,SAAO,CAACyU,OAAD,CAAP;AACH,CAnBM;AAqBP;;;;;AAIA,AAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAAChR,IAAD,EAAU;AACrC,MAAMiR,iBAAiB,GAAG,gCAA1B;AACA,MAAML,IAAI,GAAG5Q,IAAI,CAAC3F,OAAL,CAAa0V,kBAAb,IAAmC,CAAC,CAApC,GACPA,kBADO,GAEPC,4BAFN;AAGA,MAAMa,QAAQ,GAAGD,IAAI,KAAKb,kBAAT,GACXV,0BADW,GAEXC,oCAFN;AAGA,MAAMqB,OAAO,GAAGnV,eAAe,CAACwE,IAAD,EAAO4Q,IAAP,CAA/B;AACA,MAAMtU,IAAI,GAAGhB,cAAc,CAAC0E,IAAD,EAAO4Q,IAAP,CAA3B;AAEA,SAAOtU,IAAI,CAAC0I,KAAL,CAAWiM,iBAAX,EACFzS,GADE,CACE,UAAClC,IAAD;AAAA,WAAU4T,YAAY,CAAC5T,IAAD,CAAZ,CACV4U,MADU,CACH,UAACJ,GAAD;AAAA,aAASA,GAAT;AAAA,KADG,EAEVtS,GAFU,CAEN,UAACsS,GAAD,EAAM3V,KAAN;AAAA,aAAiBA,KAAK,KAAK,CAAV,iBAAqB2V,GAArB,IAA6BA,GAA9C;AAAA,KAFM,EAGVtS,GAHU,CAGN,UAACsS,GAAD;AAAA,aAASrV,kBAAkB,CAACqV,GAAD,CAA3B;AAAA,KAHM,EAIVvL,IAJU,CAIL,IAJK,CAAV;AAAA,GADF,EAMF/G,GANE,CAME,UAAClC,IAAD;AAAA,WAAU8T,mBAAmB,CAACS,QAAD,EAAW;AAAEF,MAAAA,OAAO,EAAPA,OAAF;AAAWrU,MAAAA,IAAI,EAAJA;AAAX,KAAX,CAA7B;AAAA,GANF,CAAP;AAOH,CAlBM;AAoBP;;;;;AAIA,AAAO,IAAM6U,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACnR,IAAD,EAAU;AAC3C,MAAIoL,MAAJ;;AACA,MAAIoF,kBAAkB,CAACxQ,IAAD,CAAtB,EAA8B;AAC1BoL,IAAAA,MAAM,GAAGsF,eAAe,CAAC1Q,IAAD,CAAxB;AACH,GAFD,MAEO,IAAIyQ,gBAAgB,CAACzQ,IAAD,CAApB,EAA4B;AAC/BoL,IAAAA,MAAM,GAAG4F,eAAe,CAAChR,IAAD,CAAxB;AACH,GAFM,MAEA,IAAIuQ,kBAAkB,CAACvQ,IAAD,CAAtB,EAA8B;AACjCoL,IAAAA,MAAM,GAAGpL,IAAT;AACH;;AAED,SAAOoL,MAAP;AACH,CAXM;AAaP;;;;;;AAKA,AAAO,IAAMgG,eAAe,GAAG,SAAlBA,eAAkB,CAACpR,IAAD,EAAU;AACrC,MAAIqR,GAAJ;;AAEA,MAAId,kBAAkB,CAACvQ,IAAD,CAAtB,EAA8B;AAAA,qBACuBN,SAAS,CAACM,IAAD,CADhC;AAAA,QACZsR,UADY,cAClBtT,IADkB;AAAA,QACMuT,YADN,cACAjV,IADA;;;AAI1B,QAAMkV,kBAAkB,GAAG3X,MAAM,CAC5BmF,IADsB,CACjByS,cADiB,EAEtBjT,GAFsB,CAElB,UAACwI,EAAD;AAAA,aAAQyK,cAAa,CAACzK,EAAD,CAArB;AAAA,KAFkB,EAGtBxI,GAHsB,CAGlB,UAACc,CAAD,EAAO;AAAA,6BACmBA,CAAC,CAAC8B,KADrB;AAAA,UACDpD,IADC;AAAA,UACQ0T,OADR;;AAER,aAAO;AAAE1T,QAAAA,IAAI,EAAJA,IAAF;AAAQ0T,QAAAA,OAAO,EAAPA;AAAR,OAAP;AACH,KANsB,EAOtBC,IAPsB,CAOjB,UAAC3K,EAAD;AAAA,aAASA,EAAE,CAAChJ,IAAH,KAAYsT,UAArB;AAAA,KAPiB,CAA3B;AAJ0B,QAalBI,OAbkB,GAaNF,kBAbM,CAalBE,OAbkB;;AAe1B,QAAIA,OAAO,CAAC5W,MAAR,GAAiB,CAArB,EAAwB;AACpB,UAAM8W,QAAQ,GAAGJ,kBAAkB,CAACE,OAAnB;AAAA,OAEZC,IAFY,CAEP,UAACE,KAAD;AAAA,eAAYA,KAAK,CAACC,QAAN,CAAehC,qBAAf,CAAZ;AAAA,OAFO,CAAjB;;AAIA,UAAI8B,QAAJ,EAAc;AACV,YAAMhB,IAAI,GAAG5Q,IAAI,CAACuB,KAAL,CAAW6N,0BAAX,EAAuC,CAAvC,CAAb;AACA,YAAIyB,QAAJ;;AACA,YAAID,IAAI,CAACvW,OAAL,CAAa,GAAb,IAAoB,CAAC,CAAzB,EAA4B;AACxBwW,UAAAA,QAAQ,GAAGhB,gCAAX;AACH,SAFD,MAEO;AACHgB,UAAAA,QAAQ,GAAGjB,sBAAX;AACH;;AACD,YAAMe,OAAO,GAAG1V,eAAe,CAAC+E,IAAD,EAAOoP,0BAAP,CAA/B;AACA,YAAM2C,OAAO,GAAGH,QAAQ,CAAChX,OAAT,CAAiBkV,qBAAjB,EAAwC,EAAxC,CAAhB;AAEA,YAAMxT,IAAI,aAAMyV,OAAN,eAAkBR,YAAY,CAAChM,IAAb,CAAkB,IAAlB,CAAlB,CAAV;AAEA,YAAMyM,OAAO,GAAG5B,mBAAmB,CAC/BS,QAD+B,EAE/B;AAAEF,UAAAA,OAAO,EAAPA,OAAF;AAAWrU,UAAAA,IAAI,EAAJA;AAAX,SAF+B,CAAnC;AAKA+U,QAAAA,GAAG,GAAGW,OAAN;AACH;AACJ;AACJ;;AAED,SAAOX,GAAP;AACH,CA/CM;;AC1JP;;;;;;;;;;AAWA;;;;;AAIA,SAASY,kBAAT,CAA4BjU,IAA5B,EAAkC;AAC9B,MAAMkU,UAAU,GAAGrY,MAAM,CAACmF,IAAP,CAAYmT,cAAZ,EAA4B3T,GAA5B,CAAgC,UAAC8R,GAAD;AAAA,WAAS6B,cAAc,CAAC7B,GAAD,CAAvB;AAAA,GAAhC,CAAnB;AACA,SAAO4B,UAAU,CACZP,IADE,CACG,UAACrS,CAAD;AAAA,WAAOA,CAAC,CAAC8B,KAAF,IAAW9B,CAAC,CAAC8B,KAAF,CAAQ/G,OAAR,CAAgB2D,IAAhB,IAAwB,CAAC,CAA3C;AAAA,GADH,CAAP;AAEH;AAED;;;;;;AAIA,SAASoU,oBAAT,CAA8BpU,IAA9B,EAAoC;AAChC,MAAI,CAACA,IAAL,EAAW;AACP,WAAO,KAAP;AACH;;AACD,MAAMN,SAAS,GAAGuU,kBAAkB,CAACjU,IAAD,CAApC;;AACA,MAAI,CAACN,SAAL,EAAgB;AACZ,WAAO,KAAP;AACH;;AACD,SAAO,IAAP;AACH;AAED;;;;;;AAIA,SAAS2U,gBAAT,CAA0BvV,MAA1B,EAAkC;AAC9B,MAAI,CAACsV,oBAAoB,CAACtV,MAAM,CAACkB,IAAR,CAAzB,EAAwC;AACpC,WAAO,IAAP;AACH;;AAED,MAAMN,SAAS,GAAGuU,kBAAkB,CAACnV,MAAM,CAACkB,IAAR,CAApC;AACA,MAAIoN,MAAM,GAAG3N,kBAAkB,CAACC,SAAD,CAA/B;AACA0N,EAAAA,MAAM,GAAGnN,OAAO,CAACP,SAAD,EAAY0N,MAAZ,CAAhB;AACAA,EAAAA,MAAM,GAAGtO,MAAM,CAACwV,MAAP,KAAkB,UAAlB,GACH5T,gBAAgB,CAAC0M,MAAD,CADb,GAEHjN,kBAAkB,CAACrB,MAAD,EAASsO,MAAT,CAFxB;AAGA,SAAOA,MAAP;AACH;AAED;;;;;;AAIA,SAASmH,oBAAT,CAA8BC,KAA9B,EAAqC;AACjC,MAAI,CAACA,KAAL,EAAY;AACR,WAAO,KAAP;AACH;;AAED,MAAMxS,IAAI,GAAGmR,qBAAqB,CAACqB,KAAD,CAAlC;AAEA,MAAMC,UAAU,GAAG/S,SAAS,CAACM,IAAD,CAA5B;AAEA,SAAOoS,oBAAoB,CAACK,UAAU,CAACzU,IAAZ,CAA3B;AACH;AAGD;;;;;;;AAOA;;;AACAkU,UAAU,GAAI;AAAA,SAAO;AACjBQ,IAAAA,MAAM,EAAEL,gBADS;AAEjBM,IAAAA,YAAY,EAAEP,oBAFG;AAGjBQ,IAAAA,YAAY,EAAEL,oBAHG;AAIjBhC,IAAAA,kBAAkB,EAAlBA,kBAJiB;AAKjBC,IAAAA,kBAAkB,EAAlBA,kBALiB;AAMjBC,IAAAA,gBAAgB,EAAhBA,gBANiB;AAOjBC,IAAAA,eAAe,EAAfA,eAPiB;AAQjBM,IAAAA,eAAe,EAAfA,eARiB;AASjBG,IAAAA,qBAAqB,EAArBA,qBATiB;AAUjBC,IAAAA,eAAe,EAAfA;AAViB,GAAP;AAAA,CAAD,EAAb;;;;;;;;;;;;"}