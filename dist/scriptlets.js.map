{"version":3,"file":"scriptlets.js","sources":["../src/helpers/random-id.js","../src/helpers/set-property-access.js","../src/helpers/get-property-in-chain.js","../src/helpers/get-wildcard-property-in-chain.js","../src/helpers/string-utils.js","../src/helpers/create-on-error-handler.js","../src/helpers/noop.js","../src/helpers/hit.js","../src/helpers/observer.js","../src/helpers/match-stack.js","../src/helpers/array-utils.js","../src/helpers/index.js","../src/helpers/injector.js","../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../src/helpers/parse-rule.js","../src/scriptlets/abort-on-property-read.js","../src/scriptlets/abort-on-property-write.js","../src/scriptlets/prevent-setTimeout.js","../src/scriptlets/prevent-setInterval.js","../src/scriptlets/prevent-window-open.js","../src/scriptlets/abort-current-inline-script.js","../src/scriptlets/set-constant.js","../src/scriptlets/remove-cookie.js","../src/scriptlets/prevent-addEventListener.js","../src/scriptlets/prevent-bab.js","../src/scriptlets/nowebrtc.js","../src/scriptlets/log-addEventListener.js","../src/scriptlets/log-eval.js","../src/scriptlets/log.js","../src/scriptlets/noeval.js","../src/scriptlets/prevent-eval-if.js","../src/scriptlets/prevent-fab-3.2.0.js","../src/scriptlets/set-popads-dummy.js","../src/scriptlets/prevent-popads-net.js","../src/scriptlets/prevent-adfly.js","../src/scriptlets/debug-on-property-read.js","../src/scriptlets/debug-on-property-write.js","../src/scriptlets/debug-current-inline-script.js","../src/scriptlets/remove-attr.js","../src/scriptlets/remove-class.js","../src/scriptlets/disable-newtab-links.js","../src/scriptlets/adjust-setInterval.js","../src/scriptlets/adjust-setTimeout.js","../src/scriptlets/dir-string.js","../src/scriptlets/json-prune.js","../src/scriptlets/prevent-requestAnimationFrame.js","../src/scriptlets/set-cookie.js","../src/scriptlets/hide-in-shadow-dom.js","../src/scriptlets/scriptletsList.js","../src/helpers/validator.js","../node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/@babel/runtime/helpers/toArray.js","../src/helpers/converter.js","../src/redirects/google-analytics.js","../src/redirects/google-analytics-ga.js","../src/redirects/googlesyndication-adsbygoogle.js","../src/redirects/googletagmanager-gtm.js","../src/redirects/googletagservices-gpt.js","../src/redirects/scorecardresearch-beacon.js","../src/redirects/metrika-yandex-tag.js","../src/redirects/metrika-yandex-watch.js","../src/redirects/amazon-apstag.js","../src/redirects/index.js","../src/scriptlets/index.js","../src/scriptlets/scriptletsWrapper.js"],"sourcesContent":["/**\n * Generate random six symbols id\n */\nexport function randomId() {\n    return Math.random().toString(36).substr(2, 9);\n}\n","/**\n * Set getter and setter to property if it's configurable\n * @param {Object} object target object with property\n * @param {string} property property name\n * @param {Object} descriptor contains getter and setter functions\n * @returns {boolean} is operation successful\n */\nexport function setPropertyAccess(object, property, descriptor) {\n    const currentDescriptor = Object.getOwnPropertyDescriptor(object, property);\n    if (currentDescriptor && !currentDescriptor.configurable) {\n        return false;\n    }\n    Object.defineProperty(object, property, descriptor);\n    return true;\n}\n","/**\n * @typedef Chain\n * @property {Object} base\n * @property {string} prop\n * @property {string} [chain]\n */\n\n/**\n * Check if the property exists in the base object (recursively)\n *\n * If property doesn't exist in base object,\n * defines this property as 'undefined'\n * and returns base, property name and remaining part of property chain\n *\n * @param {Object} base\n * @param {string} chain\n * @returns {Chain}\n */\nexport function getPropertyInChain(base, chain) {\n    const pos = chain.indexOf('.');\n    if (pos === -1) {\n        return { base, prop: chain };\n    }\n    const prop = chain.slice(0, pos);\n    const nextBase = base[prop];\n    chain = chain.slice(pos + 1);\n    if (nextBase !== undefined) {\n        return getPropertyInChain(nextBase, chain);\n    }\n\n    Object.defineProperty(base, prop, { configurable: true });\n    return { base: nextBase, prop, chain };\n}\n","/**\n * @typedef Chain\n * @property {Object} base\n * @property {string} prop\n * @property {string} [chain]\n */\n\n/**\n * Check if the property exists in the base object (recursively).\n * Similar to getPropertyInChain but upgraded for json-prune:\n * handle wildcard properties and does not define nonexistent base property as 'undefined'\n *\n * @param {Object} base\n * @param {string} chain\n * @param {boolean} [lookThrough=false]\n * should the method look through it's props in order to wildcard\n * @param {Array} [output=[]] result acc\n * @returns {Chain[]} array of objects\n */\nexport function getWildcardPropertyInChain(base, chain, lookThrough = false, output = []) {\n    const pos = chain.indexOf('.');\n    if (pos === -1) {\n        // for paths like 'a.b.*' every final nested prop should be processed\n        if (chain === '*') {\n            Object.keys(base).forEach((key) => {\n                output.push({ base, prop: key });\n            });\n        } else {\n            output.push({ base, prop: chain });\n        }\n\n        return output;\n    }\n\n    const prop = chain.slice(0, pos);\n\n    const shouldLookThrough = (prop === '[]' && Array.isArray(base))\n        || (prop === '*' && base instanceof Object);\n\n    if (shouldLookThrough) {\n        const nextProp = chain.slice(pos + 1);\n        const baseKeys = Object.keys(base);\n\n        // if there is a wildcard prop in input chain (e.g. 'ad.*.src' for 'ad.0.src ad.1.src'),\n        // each one of base keys should be considered as a potential chain prop in final path\n        baseKeys.forEach((key) => {\n            const item = base[key];\n            getWildcardPropertyInChain(item, nextProp, lookThrough, output);\n        });\n    }\n\n    const nextBase = base[prop];\n    chain = chain.slice(pos + 1);\n    if (nextBase !== undefined) {\n        getWildcardPropertyInChain(nextBase, chain, lookThrough, output);\n    }\n\n    return output;\n}\n","/**\n * Escapes special chars in string\n * @param {string} str\n * @returns {string}\n */\nexport const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n/**\n * Converts search string to the regexp\n * TODO think about nested dependencies, but be careful with dependency loops\n * @param {string} str search string\n * @returns {RegExp}\n */\nexport const toRegExp = (str) => {\n    if (str[0] === '/' && str[str.length - 1] === '/') {\n        return new RegExp(str.slice(1, -1));\n    }\n    const escaped = str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    return new RegExp(escaped);\n};\n\n/**\n * Get string before regexp first match\n * @param {string} str\n * @param {RegExp} rx\n */\nexport const getBeforeRegExp = (str, rx) => {\n    const index = str.search(rx);\n    return str.substring(0, index);\n};\n\nexport const startsWith = (str, prefix) => {\n    // if str === '', (str && false) will return ''\n    // that's why it has to be !!str\n    return !!str && str.indexOf(prefix) === 0;\n};\n\nexport const endsWith = (str, prefix) => {\n    // if str === '', (str && false) will return ''\n    // that's why it has to be !!str\n    return !!str && str.indexOf(prefix) === str.length - 1;\n};\n\nexport const substringAfter = (str, separator) => {\n    if (!str) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? '' : str.substring(index + separator.length);\n};\n\nexport const substringBefore = (str, separator) => {\n    if (!str || !separator) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? str : str.substring(0, index);\n};\n\n/**\n * Wrap str in single qoutes and replaces single quotes to doudle one\n * @param {string} str\n */\nexport const wrapInSingleQuotes = (str) => {\n    if ((str[0] === '\\'' && str[str.length - 1] === '\\'')\n        || (str[0] === '\"' && str[str.length - 1] === '\"')) {\n        str = str.substring(1, str.length - 1);\n    }\n    // eslint-disable-next-line no-useless-escape\n    str = str.replace(/\\'/g, '\"');\n\n    return `'${str}'`;\n};\n\n/**\n * Returns substring enclosed in the widest braces\n * @param {string} str\n */\nexport const getStringInBraces = (str) => {\n    const firstIndex = str.indexOf('(');\n    const lastIndex = str.lastIndexOf(')');\n    return str.substring(firstIndex + 1, lastIndex);\n};\n","/**\n * Generates function which silents global errors on page generated by scriptlet\n * If error doesn't belong to our error we transfer it to the native onError handler\n * @param {string} rid - unique identifier of scriptlet\n * @return {onError}\n */\nexport function createOnErrorHandler(rid) {\n    // eslint-disable-next-line consistent-return\n    const nativeOnError = window.onerror;\n    return function onError(error, ...args) {\n        if (typeof error === 'string' && error.indexOf(rid) !== -1) {\n            return true;\n        }\n        if (nativeOnError instanceof Function) {\n            return nativeOnError.apply(this, [error, ...args]);\n        }\n        return false;\n    };\n}\n","/**\n * Noop function\n */\nexport const noopFunc = () => { };\n\n/**\n * Function returns null\n */\nexport const noopNull = () => null;\n\n/**\n * Function returns true\n */\nexport const trueFunc = () => true;\n\n/**\n * Function returns false\n */\nexport const falseFunc = () => false;\n\n/**\n * Function returns this\n */\nexport function noopThis() {\n    return this;\n}\n\n/**\n * Function returns empty array\n */\nexport const noopArray = () => [];\n\n/**\n * Function returns empty string\n */\nexport const noopStr = () => '';\n","/* eslint-disable no-console, no-underscore-dangle */\n/**\n * Hit used only for debug purposes now\n * @param {Source} source\n * @param {string} [message] - optional message;\n * use LOG_MARKER = 'log: ' at the start of a message\n * for logging scriptlets\n */\nexport const hit = (source, message) => {\n    if (source.verbose !== true) {\n        return;\n    }\n\n    try {\n        const log = console.log.bind(console);\n        const trace = console.trace.bind(console);\n\n        let prefix = source.ruleText || '';\n\n        if (source.domainName) {\n            const AG_SCRIPTLET_MARKER = '#%#//';\n            const UBO_SCRIPTLET_MARKER = '##+js';\n            let ruleStartIndex;\n            if (source.ruleText.indexOf(AG_SCRIPTLET_MARKER) > -1) {\n                ruleStartIndex = source.ruleText.indexOf(AG_SCRIPTLET_MARKER);\n            } else if (source.ruleText.indexOf(UBO_SCRIPTLET_MARKER) > -1) {\n                ruleStartIndex = source.ruleText.indexOf(UBO_SCRIPTLET_MARKER);\n            }\n            // delete all domains from ruleText and leave just rule part\n            const rulePart = source.ruleText.slice(ruleStartIndex);\n            // prepare applied scriptlet rule for specific domain\n            prefix = `${source.domainName}${rulePart}`;\n        }\n\n        // Used to check if scriptlet uses 'hit' function for logging\n        const LOG_MARKER = 'log: ';\n\n        if (message) {\n            if (message.indexOf(LOG_MARKER) === -1) {\n                log(`${prefix} message:\\n${message}`);\n            } else {\n                log(message.slice(LOG_MARKER.length));\n            }\n        }\n\n        log(`${prefix} trace start`);\n        if (trace) {\n            trace();\n        }\n        log(`${prefix} trace end`);\n    } catch (e) {\n        // try catch for Edge 15\n        // In according to this issue https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/14495220/\n        // console.log throws an error\n    }\n\n    // This is necessary for unit-tests only!\n    if (typeof window.__debug === 'function') {\n        window.__debug(source);\n    }\n};\n","/**\n * DOM tree changes observer. Used for 'remove-attr' and 'remove-class' scriptlets\n * @param {Function} callback\n * @param {Boolean} observeAttrs - optional parameter - should observer check attibutes changes\n */\nexport const observeDOMChanges = (callback, observeAttrs = false, attrsToObserv = []) => {\n    /**\n     * Returns a wrapper, passing the call to 'method' at maximum once per 'delay' milliseconds.\n     * Those calls that fall into the \"cooldown\" period, are ignored\n     * @param {Function} method\n     * @param {Number} delay - milliseconds\n     */\n    const throttle = (method, delay) => {\n        let wait = false;\n        let savedArgs;\n        const wrapper = (...args) => {\n            if (wait) {\n                savedArgs = args;\n                return;\n            }\n            method(...args);\n            wait = true;\n            setTimeout(() => {\n                wait = false;\n                if (savedArgs) {\n                    wrapper(savedArgs);\n                    savedArgs = null;\n                }\n            }, delay);\n        };\n        return wrapper;\n    };\n\n    /**\n     * 'delay' in milliseconds for 'throttle' method\n     */\n    const THROTTLE_DELAY_MS = 20;\n    /**\n     * Used for remove-class\n     */\n    // eslint-disable-next-line no-use-before-define\n    const observer = new MutationObserver(throttle(callbackWrapper, THROTTLE_DELAY_MS));\n\n    const connect = () => {\n        if (attrsToObserv.length > 0) {\n            observer.observe(document.documentElement, {\n                childList: true,\n                subtree: true,\n                attributes: observeAttrs,\n                attributeFilter: attrsToObserv,\n            });\n        } else {\n            observer.observe(document.documentElement, {\n                childList: true,\n                subtree: true,\n                attributes: observeAttrs,\n            });\n        }\n    };\n    const disconnect = () => {\n        observer.disconnect();\n    };\n    function callbackWrapper() {\n        disconnect();\n        callback();\n        connect();\n    }\n\n    connect();\n};\n","/**\n * Checks if the stackTrace contains stackRegexp\n * // https://github.com/AdguardTeam/Scriptlets/issues/82\n * @param {string} stackRegexp - stack regexp\n * @param {string} stackTrace - script error stack trace\n * @returns {boolean}\n */\n\nexport const matchStackTrace = (stackRegexp, stackTrace) => {\n    const refinedStackTrace = stackTrace\n        .split('\\n')\n        .slice(2) // get rid of our own functions in the stack trace\n        .map((line) => line.trim()) // trim the lines\n        .join('\\n');\n\n    return stackRegexp.test(refinedStackTrace);\n};\n","/**\n * Some browsers do not support Array.prototype.flat()\n * for example, Opera 42 which is used for browserstack tests\n * https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/flat\n * @param {Array} input\n */\nexport const flatten = (input) => {\n    const stack = [];\n    input.forEach((el) => stack.push(el));\n    const res = [];\n    while (stack.length) {\n        // pop value from stack\n        const next = stack.pop();\n        if (Array.isArray(next)) {\n            // push back array items, won't modify the original input\n            next.forEach((el) => stack.push(el));\n        } else {\n            res.push(next);\n        }\n    }\n    // reverse to restore input order\n    return res.reverse();\n};\n","/**\n * This file must export all used dependencies\n */\nexport * from './random-id';\nexport * from './set-property-access';\nexport * from './get-property-in-chain';\nexport * from './get-wildcard-property-in-chain';\nexport * from './string-utils';\nexport * from './create-on-error-handler';\nexport * from './noop';\nexport * from './hit';\nexport * from './observer';\nexport * from './match-stack';\nexport * from './array-utils';\n","import * as dependencies from '.';\n\n/**\n * Concat dependencies to scriptlet code\n * @param {string} scriptlet string view of scriptlet\n */\nexport function attachDependencies(scriptlet) {\n    const { injections = [] } = scriptlet;\n    return injections.reduce((accum, dep) => `${accum}\\n${dependencies[dep.name]}`, scriptlet.toString());\n}\n\n/**\n * Add scriptlet call to existing code\n * @param {Function} scriptlet\n * @param {string} code\n */\nexport function addCall(scriptlet, code) {\n    return `${code};\n        const updatedArgs = args ? [].concat(source).concat(args) : [source];\n        ${scriptlet.name}.apply(this, updatedArgs);\n    `;\n}\n\n/**\n * Wrap function into IIFE (Immediately invoked function expression)\n *\n * @param {Source} source - object with scriptlet properties\n * @param {string} code - scriptlet source code with dependencies\n *\n * @returns {string} full scriptlet code\n *\n * @example\n * const source = {\n *      args: [\"aaa\", \"bbb\"],\n *      name: 'noeval',\n * };\n * const code = \"function noeval(source, args) { alert(source); } noeval.apply(this, args);\"\n * const result = wrapInIIFE(source, code);\n *\n * // result\n * `(function(source, args) {\n *      function noeval(source) { alert(source); }\n *      noeval.apply(this, args);\n * )({\"args\": [\"aaa\", \"bbb\"], \"name\":\"noeval\"}, [\"aaa\", \"bbb\"])`\n */\nexport function passSourceAndProps(source, code) {\n    if (source.hit) {\n        source.hit = source.hit.toString();\n    }\n    const sourceString = JSON.stringify(source);\n    const argsString = source.args ? `[${source.args.map(JSON.stringify)}]` : undefined;\n    const params = argsString ? `${sourceString}, ${argsString}` : sourceString;\n    return `(function(source, args){\\n${code}\\n})(${params});`;\n}\n\n/**\n * Wrap code in no name function\n * @param {string} code which must be wrapped\n */\nexport function wrapInNonameFunc(code) {\n    return `function(source, args){\\n${code}\\n}`;\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/**\n * Iterate over iterable argument and evaluate current state with transitions\n * @param {string} init first transition name\n * @param {Array|Collection|string} iterable\n * @param {Object} transitions transtion functions\n * @param {any} args arguments which should be passed to transition functions\n */\nfunction iterateWithTransitions(iterable, transitions, init, args) {\n    let state = init || Object.keys(transitions)[0];\n    for (let i = 0; i < iterable.length; i += 1) {\n        state = transitions[state](iterable, i, args);\n    }\n    return state;\n}\n\n/**\n * AdGuard scriptlet rule mask\n */\nexport const ADG_SCRIPTLET_MASK = '#//scriptlet';\n\n/**\n * Helper to accumulate an array of strings char by char\n */\nconst wordSaver = () => {\n    let str = '';\n    const strs = [];\n    const saveSymb = (s) => {\n        str += s;\n        return str;\n    };\n    const saveStr = () => {\n        strs.push(str);\n        str = '';\n    };\n    const getAll = () => [...strs];\n\n    return { saveSymb, saveStr, getAll };\n};\n\nconst substringAfter = (str, separator) => {\n    if (!str) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? '' : str.substring(index + separator.length);\n};\n\n/**\n * Parse and validate scriptlet rule\n * @param {*} ruleText\n * @returns {{name: string, args: Array<string>}}\n */\nexport const parseRule = (ruleText) => {\n    ruleText = substringAfter(ruleText, ADG_SCRIPTLET_MASK);\n    /**\n     * Transition names\n     */\n    const TRANSITION = {\n        OPENED: 'opened',\n        PARAM: 'param',\n        CLOSED: 'closed',\n    };\n\n    /**\n     * Transition function: the current index position in start, end or between params\n     * @param {string} rule\n     * @param {number} index\n     * @param {Object} Object\n     * @property {Object} Object.sep contains prop symb with current separator char\n     */\n    const opened = (rule, index, { sep }) => {\n        const char = rule[index];\n        let transition;\n        switch (char) {\n        case ' ':\n        case '(':\n        case ',': {\n            transition = TRANSITION.OPENED;\n            break;\n        }\n        case '\\'':\n        case '\"': {\n            sep.symb = char;\n            transition = TRANSITION.PARAM;\n            break;\n        }\n        case ')': {\n            transition = index === rule.length - 1\n                ? TRANSITION.CLOSED\n                : TRANSITION.OPENED;\n            break;\n        }\n        default: {\n            throw new Error('The rule is not a scriptlet');\n        }\n        }\n\n        return transition;\n    };\n    /**\n     * Transition function: the current index position inside param\n     * @param {string} rule\n     * @param {number} index\n     * @param {Object} Object\n     * @property {Object} Object.sep contains prop `symb` with current separator char\n     * @property {Object} Object.saver helper which allow to save strings by car by char\n     */\n    const param = (rule, index, { saver, sep }) => {\n        const char = rule[index];\n        switch (char) {\n        case '\\'':\n        case '\"': {\n            const preIndex = index - 1;\n            const before = rule[preIndex];\n            if (char === sep.symb && before !== '\\\\') {\n                sep.symb = null;\n                saver.saveStr();\n                return TRANSITION.OPENED;\n            }\n        }\n        // eslint-disable-next-line no-fallthrough\n        default: {\n            saver.saveSymb(char);\n            return TRANSITION.PARAM;\n        }\n        }\n    };\n    const transitions = {\n        [TRANSITION.OPENED]: opened,\n        [TRANSITION.PARAM]: param,\n        [TRANSITION.CLOSED]: () => { },\n    };\n    const sep = { symb: null };\n    const saver = wordSaver();\n    const state = iterateWithTransitions(ruleText, transitions, TRANSITION.OPENED, { sep, saver });\n\n    if (state !== 'closed') {\n        throw new Error(`Invalid scriptlet rule ${ruleText}`);\n    }\n\n    const args = saver.getAll();\n    return {\n        name: args[0],\n        args: args.slice(1),\n    };\n};\n","import {\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    toRegExp,\n    matchStackTrace,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-on-property-read\n *\n * @description\n * Aborts a script when it attempts to **read** the specified property.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-on-property-readjs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L864\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('abort-on-property-read', property[, stack])\n * ```\n *\n * - `property` - required, path to a property (joined with `.` if needed). The property must be attached to `window`\n * - `stack` - optional, string or regular expression that must match the current function call stack trace\n *\n * **Examples**\n * ```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet('abort-on-property-read', 'alert')\n *\n * ! Aborts script when it tries to access `navigator.language`\n * example.org#%#//scriptlet('abort-on-property-read', 'navigator.language')\n *\n * ! Aborts script when it tries to access `window.adblock` and it's error stack trace contains `test.js`\n * example.org#%#//scriptlet('abort-on-property-read', 'adblock', 'test.js')\n * ```\n */\n/* eslint-enable max-len */\nexport function abortOnPropertyRead(source, property, stack) {\n    const stackRegexp = stack ? toRegExp(stack) : toRegExp('/.?/');\n    if (!property\n        || !matchStackTrace(stackRegexp, new Error().stack)) {\n        return;\n    }\n\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        throw new ReferenceError(rid);\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, {\n            get: abort,\n            set: () => {\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\nabortOnPropertyRead.names = [\n    'abort-on-property-read',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'abort-on-property-read.js',\n    'ubo-abort-on-property-read.js',\n    'aopr.js',\n    'ubo-aopr.js',\n    'ubo-abort-on-property-read',\n    'ubo-aopr',\n    'abp-abort-on-property-read',\n];\nabortOnPropertyRead.injections = [\n    randomId,\n    toRegExp,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    matchStackTrace,\n];\n","import {\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    toRegExp,\n    matchStackTrace,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-on-property-write\n *\n * @description\n * Aborts a script when it attempts to **write** the specified property.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-on-property-writejs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L896\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('abort-on-property-write', property[, stack])\n * ```\n *\n * - `property` - required, path to a property (joined with `.` if needed). The property must be attached to `window`\n * - `stack` - optional, string or regular expression that must match the current function call stack trace\n *\n * **Examples**\n * ```\n * ! Aborts script when it tries to set `window.adblock` value\n * example.org#%#//scriptlet('abort-on-property-write', 'adblock')\n *\n * ! Aborts script when it tries to set `window.adblock` value and it's error stack trace contains `checking.js`\n * example.org#%#//scriptlet('abort-on-property-write', 'adblock', 'checking.js')\n * ```\n */\n/* eslint-enable max-len */\nexport function abortOnPropertyWrite(source, property, stack) {\n    const stackRegexp = stack ? toRegExp(stack) : toRegExp('/.?/');\n    if (!property\n        || !matchStackTrace(stackRegexp, new Error().stack)) {\n        return;\n    }\n\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        throw new ReferenceError(rid);\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, { set: abort });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid).bind();\n}\n\nabortOnPropertyWrite.names = [\n    'abort-on-property-write',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'abort-on-property-write.js',\n    'ubo-abort-on-property-write.js',\n    'aopw.js',\n    'ubo-aopw.js',\n    'ubo-abort-on-property-write',\n    'ubo-aopw',\n    'abp-abort-on-property-write',\n];\n\nabortOnPropertyWrite.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    toRegExp,\n    matchStackTrace,\n];\n","import {\n    hit, noopFunc, toRegExp, startsWith,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-setTimeout\n *\n * @description\n * Prevents a `setTimeout` call if:\n * 1) the text of the callback is matching the specified search string/regexp which does not start with `!`;\n * otherwise mismatched calls should be defused;\n * 2) the timeout is matching the specified delay; otherwise mismatched calls should be defused.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#no-settimeout-ifjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-setTimeout'[, search[, delay]])\n * ```\n *\n * Call with no arguments will log calls to setTimeout while debugging (`log-setTimeout` superseding),\n * so production filter lists' rules definitely require at least one of the parameters:\n * - `search` - optional, string or regular expression.\n * If starts with `!`, scriptlet will not match the stringified callback but all other will be defused.\n * If do not start with `!`, the stringified callback will be matched.\n * If not set, prevents all `setTimeout` calls due to specified `delay`.\n * - `delay` - optional, must be an integer.\n * If starts with `!`, scriptlet will not match the delay but all other will be defused.\n * If do not start with `!`, the delay passed to the `setTimeout` call will be matched.\n *\n * **Examples**\n * 1. Prevents `setTimeout` calls if the callback matches `/\\.test/` regardless of the delay.\n *     ```bash\n *     example.org#%#//scriptlet('prevent-setTimeout', '/\\.test/')\n *     ```\n *\n *     For instance, the following call will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"value\";\n *     }, 100);\n *     ```\n *\n * 2. Prevents `setTimeout` calls if the callback does not contain `value`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setTimeout', '!value')\n *     ```\n *\n *     For instance, only the first of the following calls will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"test -- prevented\";\n *     }, 300);\n *     setTimeout(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n *\n * 3. Prevents `setTimeout` calls if the callback contains `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setTimeout', 'value', '!300')\n *     ```\n *\n *     For instance, only the first of the following calls will not be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"value 1 -- executed\";\n *     }, 300);\n *     setTimeout(function () {\n *         window.test = \"value 2 -- prevented\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.test = \"value 3 -- prevented\";\n *     }, 500);\n *     ```\n *\n * 4. Prevents `setTimeout` calls if the callback does not contain `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setTimeout', '!value', '!300')\n *     ```\n *\n *     For instance, only the second of the following calls will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"test -- executed\";\n *     }, 300);\n *     setTimeout(function () {\n *         window.test = \"test -- prevented\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n */\n/* eslint-enable max-len */\nexport function preventSetTimeout(source, match, delay) {\n    const nativeTimeout = window.setTimeout;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const log = console.log.bind(console); // eslint-disable-line no-console\n\n    // logs setTimeouts to console if no arguments have been specified\n    const shouldLog = ((typeof match === 'undefined') && (typeof delay === 'undefined'));\n\n    const INVERT_MARKER = '!';\n\n    const isNotMatch = startsWith(match, INVERT_MARKER);\n    if (isNotMatch) {\n        match = match.slice(1);\n    }\n    const isNotDelay = startsWith(delay, INVERT_MARKER);\n    if (isNotDelay) {\n        delay = delay.slice(1);\n    }\n\n    delay = parseInt(delay, 10);\n    delay = nativeIsNaN(delay) ? null : delay;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const timeoutWrapper = (callback, timeout, ...args) => {\n        let shouldPrevent = false;\n        if (shouldLog) {\n            hit(source);\n            log(`setTimeout(\"${callback.toString()}\", ${timeout})`);\n        } else if (!delay) {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch;\n        } else if (match === '/.?/') {\n            shouldPrevent = (timeout === delay) !== isNotDelay;\n        } else {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch\n                && (timeout === delay) !== isNotDelay;\n        }\n\n        if (shouldPrevent) {\n            hit(source);\n            return nativeTimeout(noopFunc, timeout);\n        }\n\n        return nativeTimeout.apply(window, [callback, timeout, ...args]);\n    };\n    window.setTimeout = timeoutWrapper;\n}\n\npreventSetTimeout.names = [\n    'prevent-setTimeout',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'no-setTimeout-if.js', // new implementation of setTimeout-defuser.js\n    'ubo-no-setTimeout-if.js',\n    'setTimeout-defuser.js', // old name should be supported as well\n    'ubo-setTimeout-defuser.js',\n    'nostif.js', // new short name of no-setTimeout-if\n    'ubo-nostif.js',\n    'std.js', // old short scriptlet name\n    'ubo-std.js',\n    'ubo-no-setTimeout-if',\n    'ubo-setTimeout-defuser',\n    'ubo-nostif',\n    'ubo-std',\n];\n\npreventSetTimeout.injections = [toRegExp, startsWith, hit, noopFunc];\n","import {\n    hit, noopFunc, toRegExp, startsWith,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-setInterval\n *\n * @description\n * Prevents a `setInterval` call if:\n * 1) the text of the callback is matching the specified `search` string/regexp which does not start with `!`;\n * otherwise mismatched calls should be defused;\n * 2) the interval is matching the specified `delay`; otherwise mismatched calls should be defused.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#no-setinterval-ifjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-setInterval'[, search[, delay]])\n * ```\n *\n * Call with no arguments will log calls to setInterval while debugging (`log-setInterval` superseding),\n * so production filter lists' rules definitely require at least one of the parameters:\n * - `search` - optional, string or regular expression.\n * If starts with `!`, scriptlet will not match the stringified callback but all other will be defused.\n * If do not start with `!`, the stringified callback will be matched.\n * If not set, prevents all `setInterval` calls due to specified `delay`.\n * - `delay` - optional, must be an integer.\n * If starts with `!`, scriptlet will not match the delay but all other will be defused.\n * If do not start with `!`, the delay passed to the `setInterval` call will be matched.\n *\n *  **Examples**\n * 1. Prevents `setInterval` calls if the callback matches `/\\.test/` regardless of the delay.\n *     ```bash\n *     example.org#%#//scriptlet('prevent-setInterval', '/\\.test/')\n *     ```\n *\n *     For instance, the following call will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"value\";\n *     }, 100);\n *     ```\n *\n * 2. Prevents `setInterval` calls if the callback does not contain `value`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setInterval', '!value')\n *     ```\n *\n *     For instance, only the first of the following calls will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"test -- prevented\";\n *     }, 300);\n *     setInterval(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setInterval(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n *\n * 3. Prevents `setInterval` calls if the callback contains `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setInterval', 'value', '!300')\n *     ```\n *\n *     For instance, only the first of the following calls will not be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"value 1 -- executed\";\n *     }, 300);\n *     setInterval(function () {\n *         window.test = \"value 2 -- prevented\";\n *     }, 400);\n *     setInterval(function () {\n *         window.test = \"value 3 -- prevented\";\n *     }, 500);\n *     ```\n *\n * 4. Prevents `setInterval` calls if the callback does not contain `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setInterval', '!value', '!300')\n *     ```\n *\n *     For instance, only the second of the following calls will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"test -- executed\";\n *     }, 300);\n *     setInterval(function () {\n *         window.test = \"test -- prevented\";\n *     }, 400);\n *     setInterval(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setInterval(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n */\n/* eslint-enable max-len */\nexport function preventSetInterval(source, match, delay) {\n    const nativeInterval = window.setInterval;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const log = console.log.bind(console); // eslint-disable-line no-console\n\n    // logs setIntervals to console if no arguments have been specified\n    const shouldLog = ((typeof match === 'undefined') && (typeof delay === 'undefined'));\n\n    const INVERT_MARKER = '!';\n\n    const isNotMatch = startsWith(match, INVERT_MARKER);\n    if (isNotMatch) {\n        match = match.slice(1);\n    }\n    const isNotDelay = startsWith(delay, INVERT_MARKER);\n    if (isNotDelay) {\n        delay = delay.slice(1);\n    }\n\n    delay = parseInt(delay, 10);\n    delay = nativeIsNaN(delay) ? null : delay;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const intervalWrapper = (callback, interval, ...args) => {\n        let shouldPrevent = false;\n        if (shouldLog) {\n            hit(source);\n            log(`setInterval(\"${callback.toString()}\", ${interval})`);\n        } else if (!delay) {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch;\n        } else if (match === '/.?/') {\n            shouldPrevent = (interval === delay) !== isNotDelay;\n        } else {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch\n                && (interval === delay) !== isNotDelay;\n        }\n\n        if (shouldPrevent) {\n            hit(source);\n            return nativeInterval(noopFunc, interval);\n        }\n\n        return nativeInterval.apply(window, [callback, interval, ...args]);\n    };\n    window.setInterval = intervalWrapper;\n}\n\npreventSetInterval.names = [\n    'prevent-setInterval',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'no-setInterval-if.js', // new implementation of setInterval-defuser.js\n    'ubo-no-setInterval-if.js',\n    'setInterval-defuser.js', // old name should be supported as well\n    'ubo-setInterval-defuser.js',\n    'nosiif.js', // new short name of no-setInterval-if\n    'ubo-nosiif.js',\n    'sid.js', // old short scriptlet name\n    'ubo-sid.js',\n    'ubo-no-setInterval-if',\n    'ubo-setInterval-defuser',\n    'ubo-nosiif',\n    'ubo-sid',\n];\n\npreventSetInterval.injections = [toRegExp, startsWith, hit, noopFunc];\n","import {\n    toRegExp,\n    substringBefore,\n    substringAfter,\n    startsWith,\n    endsWith,\n    hit,\n    noopFunc,\n    trueFunc,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-window-open\n *\n * @description\n * Prevents `window.open` calls when URL either matches or not matches the specified string/regexp. Using it without parameters prevents all `window.open` calls.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#windowopen-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-window-open'[, match[, search[, replacement]]])\n * ```\n *\n * - `match` - optional, defaults to \"matching\", any positive number or nothing for \"matching\", 0 or empty string for \"not matching\"\n * - `search` - optional, string or regexp for matching the URL passed to `window.open` call; defaults to search all `window.open` call\n * - `replacement` - optional, string to return prop value or property instead of window.open; defaults to return noopFunc\n *\n * **Example**\n * 1. Prevent all `window.open` calls:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open')\n * ```\n *\n * 2. Prevent `window.open` for all URLs containing `example`:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '1', 'example')\n * ```\n *\n * 3. Prevent `window.open` for all URLs matching RegExp `/example\\./`:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '1', '/example\\./')\n * ```\n *\n * 4. Prevent `window.open` for all URLs **NOT** containing `example`:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '0', 'example')\n * ```\n * 5. Prevent all `window.open` calls and return 'trueFunc' instead of it if website checks it:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '', '', 'trueFunc')\n * ```\n * 6. Prevent all `window.open` and returns callback\n * which returns object with property 'propName'=noopFunc\n * as a property of window.open if website checks it:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '1', '', '{propName=noopFunc}')\n * ```\n */\n/* eslint-enable max-len */\nexport function preventWindowOpen(source, match = 1, search, replacement) {\n    // Default value of 'match' is needed to prevent all `window.open` calls\n    // if the scriptlet is used without parameters\n    const nativeOpen = window.open;\n\n    // unary plus converts 'match' to a number\n    // e.g.: +'1' -> 1; +false -> 0\n    match = +match > 0;\n\n    search = search\n        ? toRegExp(search)\n        : toRegExp('/.?/');\n\n    // eslint-disable-next-line consistent-return\n    const openWrapper = (str, ...args) => {\n        if (match !== search.test(str)) {\n            return nativeOpen.apply(window, [str, ...args]);\n        }\n\n        hit(source);\n\n        let result;\n\n        // defaults to return noopFunc instead of window.open\n        if (!replacement) {\n            result = noopFunc;\n        } else if (replacement === 'trueFunc') {\n            result = trueFunc;\n        } else if (replacement.indexOf('=') > -1) {\n            // We should return noopFunc instead of window.open\n            // but with some property if website checks it (examples 5, 6)\n            // https://github.com/AdguardTeam/Scriptlets/issues/71\n            const isProp = startsWith(replacement, '{') && endsWith(replacement, '}');\n            if (isProp) {\n                const propertyPart = replacement.slice(1, -1);\n                const propertyName = substringBefore(propertyPart, '=');\n                const propertyValue = substringAfter(propertyPart, '=');\n                if (propertyValue === 'noopFunc') {\n                    result = () => {\n                        const resObj = { };\n                        resObj[propertyName] = noopFunc;\n                        return resObj;\n                    };\n                }\n            }\n        }\n\n        return result;\n    };\n\n    window.open = openWrapper;\n}\n\npreventWindowOpen.names = [\n    'prevent-window-open',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'window.open-defuser.js',\n    'ubo-window.open-defuser.js',\n    'ubo-window.open-defuser',\n];\n\npreventWindowOpen.injections = [\n    toRegExp,\n    startsWith,\n    endsWith,\n    substringBefore,\n    substringAfter,\n    hit,\n    noopFunc,\n    trueFunc,\n];\n","import {\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-current-inline-script\n *\n * @description\n * Aborts an inline script when it attempts to **read** the specified property\n * AND when the contents of the `<script>` element contains the specified\n * text or matches the regular expression.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-current-inline-scriptjs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L928\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('abort-current-inline-script', property[, search])\n * ```\n *\n * - `property` - required, path to a property (joined with `.` if needed). The property must be attached to `window`\n * - `search` - optional, string or regular expression that must match the inline script contents. If not set, abort all inline scripts which are trying to access the specified property\n *\n * > Note please that for inline script with addEventListener in it\n * `property` should be set as `EventTarget.prototype.addEventListener`,\n * not just `addEventListener`.\n *\n * **Examples**\n * 1. Aborts all inline scripts trying to access `window.alert`\n *     ```\n *     example.org#%#//scriptlet('abort-current-inline-script', 'alert')\n *     ```\n *\n * 2. Aborts inline scripts which are trying to access `window.alert` and contain `Hello, world`.\n *     ```\n *     example.org#%#//scriptlet('abort-current-inline-script', 'alert', 'Hello, world')\n *     ```\n *\n *     For instance, the following script will be aborted\n *     ```html\n *     <script>alert(\"Hello, world\");</script>\n *     ```\n *\n * 3. Aborts inline scripts which are trying to access `window.alert` and match this regexp: `/Hello.+world/`.\n *     ```\n *     example.org#%#//scriptlet('abort-current-inline-script', 'alert', '/Hello.+world/')\n *     ```\n *\n *     For instance, the following scripts will be aborted:\n *     ```html\n *     <script>alert(\"Hello, big world\");</script>\n *     ```\n *     ```html\n *     <script>alert(\"Hello, little world\");</script>\n *     ```\n *\n *     This script will not be aborted:\n *     ```html\n *     <script>alert(\"Hi, little world\");</script>\n *     ```\n */\n/* eslint-enable max-len */\nexport function abortCurrentInlineScript(source, property, search) {\n    const searchRegexp = search ? toRegExp(search) : toRegExp('/.?/');\n    const rid = randomId();\n\n    const getCurrentScript = () => {\n        if (!document.currentScript) { // eslint-disable-line compat/compat\n            const scripts = document.getElementsByTagName('script');\n            return scripts[scripts.length - 1];\n        }\n        return document.currentScript; // eslint-disable-line compat/compat\n    };\n\n    const ourScript = getCurrentScript();\n\n    const abort = () => {\n        const scriptEl = getCurrentScript();\n        if (!scriptEl) {\n            return;\n        }\n        let content = scriptEl.textContent;\n\n        // We are using Node.prototype.textContent property descriptor\n        // to get the real script content\n        // even when document.currentScript.textContent is replaced.\n        // https://github.com/AdguardTeam/Scriptlets/issues/57#issuecomment-593638991\n        try {\n            const textContentGetter = Object.getOwnPropertyDescriptor(Node.prototype, 'textContent').get;\n            content = textContentGetter.call(scriptEl);\n        } catch (e) { } // eslint-disable-line no-empty\n\n        if (scriptEl instanceof HTMLScriptElement\n            && content.length > 0\n            && scriptEl !== ourScript\n            && searchRegexp.test(content)) {\n            hit(source);\n            throw new ReferenceError(rid);\n        }\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n\n        // The scriptlet might be executed before the chain property has been created\n        // (for instance, document.body before the HTML body was loaded).\n        // In this case we're checking whether the base element exists or not\n        // and if not, we simply exit without overriding anything.\n        // e.g. https://github.com/AdguardTeam/Scriptlets/issues/57#issuecomment-575841092\n        if (base instanceof Object === false && base === null) {\n            const props = property.split('.');\n            const propIndex = props.indexOf(prop);\n            const baseName = props[propIndex - 1];\n            console.log(`The scriptlet had been executed before the ${baseName} was loaded.`); // eslint-disable-line no-console\n            return;\n        }\n\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        let currentValue = base[prop];\n        setPropertyAccess(base, prop, {\n            set: (value) => {\n                abort();\n                currentValue = value;\n            },\n            get: () => {\n                abort();\n                return currentValue;\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\nabortCurrentInlineScript.names = [\n    'abort-current-inline-script',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'abort-current-inline-script.js',\n    'ubo-abort-current-inline-script.js',\n    'acis.js',\n    'ubo-acis.js',\n    'ubo-abort-current-inline-script',\n    'ubo-acis',\n    'abp-abort-current-inline-script',\n];\n\nabortCurrentInlineScript.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n];\n","import {\n    hit,\n    noopFunc,\n    trueFunc,\n    falseFunc,\n    getPropertyInChain,\n    setPropertyAccess,\n    toRegExp,\n    matchStackTrace,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet set-constant\n *\n * @description\n * Creates a constant property and assigns it one of the values from the predefined list.\n *\n * > Actually, it's not a constant. Please note, that it can be rewritten with a value of a different type.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#set-constantjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('set-constant', property, value[, stack])\n * ```\n *\n * - `property` - required, path to a property (joined with `.` if needed). The property must be attached to `window`.\n * - `value` - required. Possible values:\n *     - positive decimal integer `<= 32767`\n *     - one of the predefined constants:\n *         - `undefined`\n *         - `false`\n *         - `true`\n *         - `null`\n *         - `noopFunc` - function with empty body\n *         - `trueFunc` - function returning true\n *         - `falseFunc` - function returning false\n *         - `''` - empty string\n *         - `-1` - number value `-1`\n * - `stack` - optional, string or regular expression that must match the current function call stack trace\n *\n * **Examples**\n * ```\n * ! window.firstConst === false // this comparision will return false\n * example.org#%#//scriptlet('set-constant', 'firstConst', 'false')\n *\n * ! window.second() === trueFunc // 'second' call will return true\n * example.org#%#//scriptlet('set-constant', 'secondConst', 'trueFunc')\n *\n * ! document.third() === falseFunc  // 'third' call will return false if the method is related to checking.js\n * example.org#%#//scriptlet('set-constant', 'secondConst', 'trueFunc', 'checking.js')\n * ```\n */\n/* eslint-enable max-len */\nexport function setConstant(source, property, value, stack) {\n    const stackRegexp = stack ? toRegExp(stack) : toRegExp('/.?/');\n    if (!property\n        || !matchStackTrace(stackRegexp, new Error().stack)) {\n        return;\n    }\n\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n\n    let constantValue;\n    if (value === 'undefined') {\n        constantValue = undefined;\n    } else if (value === 'false') {\n        constantValue = false;\n    } else if (value === 'true') {\n        constantValue = true;\n    } else if (value === 'null') {\n        constantValue = null;\n    } else if (value === 'noopFunc') {\n        constantValue = noopFunc;\n    } else if (value === 'trueFunc') {\n        constantValue = trueFunc;\n    } else if (value === 'falseFunc') {\n        constantValue = falseFunc;\n    } else if (/^\\d+$/.test(value)) {\n        constantValue = parseFloat(value);\n        if (nativeIsNaN(constantValue)) {\n            return;\n        }\n        if (Math.abs(constantValue) > 0x7FFF) {\n            return;\n        }\n    } else if (value === '-1') {\n        constantValue = -1;\n    } else if (value === '') {\n        constantValue = '';\n    } else {\n        return;\n    }\n\n    let canceled = false;\n    const mustCancel = (value) => {\n        if (canceled) {\n            return canceled;\n        }\n        canceled = value !== undefined\n            && constantValue !== undefined\n            && typeof value !== typeof constantValue;\n        return canceled;\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n\n        // The scriptlet might be executed before the chain property has been created.\n        // In this case we're checking whether the base element exists or not\n        // and if not, we simply exit without overriding anything\n        if (base instanceof Object === false && base === null) {\n            // log the reason only while debugging\n            if (source.verbose) {\n                const props = property.split('.');\n                const propIndex = props.indexOf(prop);\n                const baseName = props[propIndex - 1];\n                console.log(`set-constant failed because the property '${baseName}' does not exist`); // eslint-disable-line no-console\n            }\n            return;\n        }\n\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        if (mustCancel(base[prop])) { return; }\n\n        hit(source);\n        setPropertyAccess(base, prop, {\n            get: () => constantValue,\n            set: (a) => {\n                if (mustCancel(a)) {\n                    constantValue = a;\n                }\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n}\n\nsetConstant.names = [\n    'set-constant',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'set-constant.js',\n    'ubo-set-constant.js',\n    'set.js',\n    'ubo-set.js',\n    'ubo-set-constant',\n    'ubo-set',\n];\nsetConstant.injections = [\n    getPropertyInChain,\n    setPropertyAccess,\n    toRegExp,\n    matchStackTrace,\n    hit,\n    noopFunc,\n    trueFunc,\n    falseFunc,\n];\n","import { hit, toRegExp } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-cookie\n *\n * @description\n * Removes current page cookies by passed string matching with name. For current domain and subdomains. Runs on load and before unload.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#cookie-removerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('remove-cookie'[, match])\n * ```\n *\n * - `match` - optional, string or regex matching the cookie name. If not specified all accessible cookies will be removed.\n *\n * **Examples**\n * 1. Removes all cookies:\n * ```\n *     example.org#%#//scriptlet('remove-cookie')\n * ```\n *\n * 2. Removes cookies which name contains `example` string.\n * ```\n *     example.org#%#//scriptlet('remove-cookie', 'example')\n * ```\n *\n *     For instance this cookie will be removed\n *     ```javascript\n *     document.cookie = '__example=randomValue';\n *     ```\n */\n/* eslint-enable max-len */\nexport function removeCookie(source, match) {\n    const regex = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const removeCookieFromHost = (cookieName, hostName) => {\n        const cookieSpec = `${cookieName}=`;\n        const domain1 = `; domain=${hostName}`;\n        const domain2 = `; domain=.${hostName}`;\n        const path = '; path=/';\n        const expiration = '; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = cookieSpec + expiration;\n        document.cookie = cookieSpec + domain1 + expiration;\n        document.cookie = cookieSpec + domain2 + expiration;\n        document.cookie = cookieSpec + path + expiration;\n        document.cookie = cookieSpec + domain1 + path + expiration;\n        document.cookie = cookieSpec + domain2 + path + expiration;\n        hit(source);\n    };\n\n    const rmCookie = () => {\n        document.cookie.split(';').forEach((cookieStr) => {\n            const pos = cookieStr.indexOf('=');\n            if (pos === -1) {\n                return;\n            }\n\n            const cookieName = cookieStr.slice(0, pos).trim();\n            if (!regex.test(cookieName)) {\n                return;\n            }\n\n            const hostParts = document.location.hostname.split('.');\n            for (let i = 0; i <= hostParts.length - 1; i += 1) {\n                const hostName = hostParts.slice(i).join('.');\n                if (hostName) {\n                    removeCookieFromHost(cookieName, hostName);\n                }\n            }\n        });\n    };\n    rmCookie();\n    window.addEventListener('beforeunload', rmCookie);\n}\n\nremoveCookie.names = [\n    'remove-cookie',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'cookie-remover.js',\n    'ubo-cookie-remover.js',\n    'ubo-cookie-remover',\n];\n\nremoveCookie.injections = [toRegExp, hit];\n","import { hit, toRegExp } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-addEventListener\n *\n * @description\n * Prevents adding event listeners for the specified events and callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#addeventlistener-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-addEventListener'[, eventSearch[, functionSearch]])\n * ```\n *\n * - `eventSearch` - optional, string or regex matching the event name. If not specified, the scriptlets prevents all event listeners\n * - `functionSearch` - optional, string or regex matching the event listener function body. If not set, the scriptlet prevents all event listeners with event name matching `eventSearch`\n *\n * **Examples**\n * 1. Prevent all `click` listeners:\n * ```\n *     example.org#%#//scriptlet('prevent-addEventListener', 'click')\n * ```\n\n2. Prevent 'click' listeners with the callback body containing `searchString`.\n * ```\n *     example.org#%#//scriptlet('prevent-addEventListener', 'click', 'searchString')\n * ```\n *\n *     For instance, this listener will not be called:\n * ```javascript\n *     el.addEventListener('click', () => {\n *         window.test = 'searchString';\n *     });\n * ```\n */\n/* eslint-enable max-len */\nexport function preventAddEventListener(source, eventSearch, funcSearch) {\n    const eventSearchRegexp = eventSearch ? toRegExp(eventSearch) : toRegExp('/.?/');\n    const funcSearchRegexp = funcSearch ? toRegExp(funcSearch) : toRegExp('/.?/');\n\n    const nativeAddEventListener = window.EventTarget.prototype.addEventListener;\n    function addEventListenerWrapper(eventName, callback, ...args) {\n        // The scriptlet might cause a website broke\n        // if the website uses test addEventListener with callback = null\n        // https://github.com/AdguardTeam/Scriptlets/issues/76\n        let funcToCheck = callback;\n        if (callback && typeof callback === 'function') {\n            funcToCheck = callback.toString();\n        }\n\n        if (eventSearchRegexp.test(eventName.toString()) && funcSearchRegexp.test(funcToCheck)) {\n            hit(source);\n            return undefined;\n        }\n        return nativeAddEventListener.apply(this, [eventName, callback, ...args]);\n    }\n\n    window.EventTarget.prototype.addEventListener = addEventListenerWrapper;\n}\n\npreventAddEventListener.names = [\n    'prevent-addEventListener',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'addEventListener-defuser.js',\n    'ubo-addEventListener-defuser.js',\n    'aeld.js',\n    'ubo-aeld.js',\n    'ubo-addEventListener-defuser',\n    'ubo-aeld',\n];\n\npreventAddEventListener.injections = [toRegExp, hit];\n","/* eslint-disable consistent-return, no-eval */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet prevent-bab\n *\n * @description\n * Prevents BlockAdblock script from detecting an ad blocker.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#bab-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-bab')\n * ```\n */\nexport function preventBab(source) {\n    const nativeSetTimeout = window.setTimeout;\n    const babRegex = /\\.bab_elementid.$/;\n\n    window.setTimeout = (callback, ...args) => {\n        if (typeof callback !== 'string' || !babRegex.test(callback)) {\n            return nativeSetTimeout.call(this, callback, ...args);\n        }\n        hit(source);\n    };\n\n    const signatures = [\n        ['blockadblock'],\n        ['babasbm'],\n        [/getItem\\('babn'\\)/],\n        ['getElementById', 'String.fromCharCode', 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', 'charAt', 'DOMContentLoaded', 'AdBlock', 'addEventListener', 'doScroll', 'fromCharCode', '<<2|r>>4', 'sessionStorage', 'clientWidth', 'localStorage', 'Math', 'random'],\n    ];\n    const check = (str) => {\n        for (let i = 0; i < signatures.length; i += 1) {\n            const tokens = signatures[i];\n            let match = 0;\n            for (let j = 0; j < tokens.length; j += 1) {\n                const token = tokens[j];\n                const found = token instanceof RegExp ? token.test(str) : str.indexOf(token) > -1;\n                if (found) {\n                    match += 1;\n                }\n            }\n            if (match / tokens.length >= 0.8) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const nativeEval = window.eval;\n    window.eval = (str) => {\n        if (!check(str)) {\n            return nativeEval(str);\n        }\n        hit(source);\n        const bodyEl = document.body;\n        if (bodyEl) {\n            bodyEl.style.removeProperty('visibility');\n        }\n        const el = document.getElementById('babasbmsgx');\n        if (el) {\n            el.parentNode.removeChild(el);\n        }\n    };\n}\n\npreventBab.names = [\n    'prevent-bab',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'nobab.js',\n    'ubo-nobab.js',\n    'bab-defuser.js',\n    'ubo-bab-defuser.js',\n    'ubo-nobab',\n    'ubo-bab-defuser',\n];\n\npreventBab.injections = [hit];\n","/* eslint-disable no-unused-vars, no-extra-bind, func-names */\nimport { hit, noopFunc } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet nowebrtc\n *\n * @description\n * Disables WebRTC by overriding `RTCPeerConnection`. The overriden function will log every attempt to create a new connection.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nowebrtcjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('nowebrtc')\n * ```\n */\n/* eslint-enable max-len */\nexport function nowebrtc(source) {\n    let propertyName = '';\n    if (window.RTCPeerConnection) {\n        propertyName = 'RTCPeerConnection';\n    } else if (window.webkitRTCPeerConnection) {\n        propertyName = 'webkitRTCPeerConnection';\n    }\n\n    if (propertyName === '') {\n        return;\n    }\n\n    const rtcReplacement = (config) => {\n        hit(source, `Document tried to create an RTCPeerConnection: ${config}`);\n    };\n    rtcReplacement.prototype = {\n        close: noopFunc,\n        createDataChannel: noopFunc,\n        createOffer: noopFunc,\n        setRemoteDescription: noopFunc,\n    };\n    const rtc = window[propertyName];\n    window[propertyName] = rtcReplacement;\n    if (rtc.prototype) {\n        rtc.prototype.createDataChannel = function (a, b) {\n            return {\n                close: noopFunc,\n                send: noopFunc,\n            };\n        }.bind(null);\n    }\n}\n\nnowebrtc.names = [\n    'nowebrtc',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'nowebrtc.js',\n    'ubo-nowebrtc.js',\n    'ubo-nowebrtc',\n];\n\nnowebrtc.injections = [hit, noopFunc];\n","/* eslint-disable no-console */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-addEventListener\n *\n * @description\n * Logs all addEventListener calls to the console.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#addeventlistener-loggerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('log-addEventListener')\n * ```\n */\nexport function logAddEventListener(source) {\n    const log = console.log.bind(console);\n    const nativeAddEventListener = window.EventTarget.prototype.addEventListener;\n    function addEventListenerWrapper(eventName, callback, ...args) {\n        hit(source);\n        // The scriptlet might cause a website broke\n        // if the website uses test addEventListener with callback = null\n        // https://github.com/AdguardTeam/Scriptlets/issues/76\n        let callbackToLog = callback;\n        if (callback && typeof callback === 'function') {\n            callbackToLog = callback.toString();\n        }\n        log(`addEventListener(\"${eventName}\", ${callbackToLog})`);\n        return nativeAddEventListener.apply(this, [eventName, callback, ...args]);\n    }\n    window.EventTarget.prototype.addEventListener = addEventListenerWrapper;\n}\n\nlogAddEventListener.names = [\n    'log-addEventListener',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'addEventListener-logger.js',\n    'ubo-addEventListener-logger.js',\n    'aell.js',\n    'ubo-aell.js',\n    'ubo-addEventListener-logger',\n    'ubo-aell',\n];\n\nlogAddEventListener.injections = [hit];\n","/* eslint-disable no-console, no-eval */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-eval\n *\n * @description\n * Logs all `eval()` or `new Function()` calls to the console.\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('log-eval')\n * ```\n */\nexport function logEval(source) {\n    const log = console.log.bind(console);\n    // wrap eval function\n    const nativeEval = window.eval;\n    function evalWrapper(str) {\n        hit(source);\n        log(`eval(\"${str}\")`);\n        return nativeEval(str);\n    }\n    window.eval = evalWrapper;\n\n    // wrap new Function\n    const nativeFunction = window.Function;\n\n    function FunctionWrapper(...args) {\n        hit(source);\n        log(`new Function(${args.join(', ')})`);\n        return nativeFunction.apply(this, [...args]);\n    }\n\n    FunctionWrapper.prototype = Object.create(nativeFunction.prototype);\n    FunctionWrapper.prototype.constructor = FunctionWrapper;\n\n    window.Function = FunctionWrapper;\n}\n\nlogEval.names = [\n    'log-eval',\n];\n\nlogEval.injections = [hit];\n","/**\n * @scriptlet log\n *\n * @description\n * A simple scriptlet which only purpose is to print arguments to console.\n * This scriptlet can be helpful for debugging and troubleshooting other scriptlets.\n *\n * **Example**\n * ```\n * example.org#%#//scriptlet('log', 'arg1', 'arg2')\n * ```\n */\nexport function log(...args) {\n    console.log(args); // eslint-disable-line no-console\n}\nlog.names = ['log'];\n","/* eslint-disable no-eval, no-extra-bind */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet noeval\n *\n * @description\n * Prevents page to use eval.\n * Notifies about attempts in the console\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#noevaljs-\n *\n * It also can be used as `$redirect` rules sometimes.\n * See [redirect description](../wiki/about-redirects.md#noeval).\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('noeval')\n * ```\n */\nexport function noeval(source) {\n    window.eval = function evalWrapper(s) {\n        hit(source, `AdGuard has prevented eval:\\n${s}`);\n    }.bind();\n}\n\nnoeval.names = [\n    'noeval',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'noeval.js',\n    'silent-noeval.js',\n    'ubo-noeval.js',\n    'ubo-silent-noeval.js',\n    'ubo-noeval',\n    'ubo-silent-noeval',\n];\n\nnoeval.injections = [hit];\n","/* eslint-disable no-eval, no-extra-bind, func-names */\n\nimport { toRegExp, hit } from '../helpers';\n\n/**\n * @scriptlet prevent-eval-if\n *\n * @description\n * Prevents page to use eval matching payload.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#noeval-ifjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-eval-if'[, search])\n * ```\n *\n * - `search` - optional, string or regexp for matching stringified eval payload.\n * If 'search is not specified  all stringified eval payload will be matched\n *\n * **Examples**\n * ```\n * ! Prevents eval if it matches 'test'\n * example.org#%#//scriptlet('prevent-eval-if', 'test')\n * ```\n *\n * @param {string|RegExp} [search] string or regexp matching stringified eval payload\n */\nexport function preventEvalIf(source, search) {\n    search = search ? toRegExp(search) : toRegExp('/.?/');\n\n    const nativeEval = window.eval;\n    window.eval = function (payload) {\n        if (!search.test(payload.toString())) {\n            return nativeEval.call(window, payload);\n        }\n        hit(source, payload);\n        return undefined;\n    }.bind(window);\n}\n\npreventEvalIf.names = [\n    'prevent-eval-if',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'noeval-if.js',\n    'ubo-noeval-if.js',\n    'ubo-noeval-if',\n];\n\npreventEvalIf.injections = [toRegExp, hit];\n","/* eslint-disable no-console, func-names, no-multi-assign */\nimport { hit, noopFunc, noopThis } from '../helpers';\n\n/**\n * @scriptlet prevent-fab-3.2.0\n *\n * @description\n * Prevents execution of the FAB script v3.2.0.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#fuckadblockjs-320-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-fab-3.2.0')\n * ```\n */\nexport function preventFab(source) {\n    hit(source);\n\n    // redefines Fab function for adblock detection\n    const Fab = function () {};\n    Fab.prototype.check = noopFunc;\n    Fab.prototype.clearEvent = noopFunc;\n    Fab.prototype.emitEvent = noopFunc;\n    Fab.prototype.on = function (a, b) {\n        if (!a) {\n            b();\n        }\n        return this;\n    };\n    Fab.prototype.onDetected = noopThis;\n    Fab.prototype.onNotDetected = function (a) {\n        a();\n        return this;\n    };\n    Fab.prototype.setOption = noopFunc;\n\n    const fab = new Fab();\n    const getSetFab = {\n        get() { return Fab; },\n        set() {},\n    };\n    const getsetfab = {\n        get() { return fab; },\n        set() {},\n    };\n\n    // redefined Fab data properties which if 'FuckAdBlock' variable exists\n    if (Object.prototype.hasOwnProperty.call(window, 'FuckAdBlock')) {\n        window.FuckAdBlock = Fab;\n    } else {\n        // or redefined Fab accessor properties\n        Object.defineProperty(window, 'FuckAdBlock', getSetFab);\n    }\n    if (Object.prototype.hasOwnProperty.call(window, 'BlockAdBlock')) {\n        window.BlockAdBlock = Fab;\n    } else {\n        Object.defineProperty(window, 'BlockAdBlock', getSetFab);\n    }\n    if (Object.prototype.hasOwnProperty.call(window, 'SniffAdBlock')) {\n        window.SniffAdBlock = Fab;\n    } else {\n        Object.defineProperty(window, 'SniffAdBlock', getSetFab);\n    }\n\n    if (Object.prototype.hasOwnProperty.call(window, 'fuckAdBlock')) {\n        window.fuckAdBlock = fab;\n    } else {\n        Object.defineProperty(window, 'fuckAdBlock', getsetfab);\n    }\n    if (Object.prototype.hasOwnProperty.call(window, 'blockAdBlock')) {\n        window.blockAdBlock = fab;\n    } else {\n        Object.defineProperty(window, 'blockAdBlock', getsetfab);\n    }\n    if (Object.prototype.hasOwnProperty.call(window, 'sniffAdBlock')) {\n        window.sniffAdBlock = fab;\n    } else {\n        Object.defineProperty(window, 'sniffAdBlock', getsetfab);\n    }\n}\n\npreventFab.names = [\n    'prevent-fab-3.2.0',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'nofab.js',\n    'ubo-nofab.js',\n    'fuckadblock.js-3.2.0',\n    'ubo-fuckadblock.js-3.2.0',\n    'ubo-nofab',\n];\n\npreventFab.injections = [hit, noopFunc, noopThis];\n","/* eslint-disable no-console, func-names, no-multi-assign */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet set-popads-dummy\n *\n * @description\n * Sets static properties PopAds and popns.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#popads-dummyjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('set-popads-dummy')\n * ```\n */\nexport function setPopadsDummy(source) {\n    delete window.PopAds;\n    delete window.popns;\n    Object.defineProperties(window, {\n        PopAds: {\n            get: () => {\n                hit(source);\n                return {};\n            },\n        },\n        popns: {\n            get: () => {\n                hit(source);\n                return {};\n            },\n        },\n    });\n}\n\nsetPopadsDummy.names = [\n    'set-popads-dummy',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'popads-dummy.js',\n    'ubo-popads-dummy.js',\n    'ubo-popads-dummy',\n];\n\nsetPopadsDummy.injections = [hit];\n","import {\n    hit, createOnErrorHandler, randomId,\n} from '../helpers';\n\n/**\n * @scriptlet prevent-popads-net\n *\n * @description\n * Aborts on property write (PopAds, popns), throws reference error with random id.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#popadsnetjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-popads-net')\n * ```\n */\nexport function preventPopadsNet(source) {\n    const rid = randomId();\n\n    const throwError = () => {\n        throw new ReferenceError(rid);\n    };\n\n    delete window.PopAds;\n    delete window.popns;\n    Object.defineProperties(window, {\n        PopAds: { set: throwError },\n        popns: { set: throwError },\n    });\n\n    window.onerror = createOnErrorHandler(rid).bind();\n    hit(source);\n}\n\npreventPopadsNet.names = [\n    'prevent-popads-net',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'popads.net.js',\n    'ubo-popads.net.js',\n    'ubo-popads.net',\n];\n\npreventPopadsNet.injections = [createOnErrorHandler, randomId, hit];\n","/* eslint-disable func-names */\nimport { hit, setPropertyAccess } from '../helpers';\n\n/**\n * @scriptlet prevent-adfly\n *\n * @description\n * Prevents anti-adblock scripts on adfly short links.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#adfly-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-adfly')\n * ```\n */\nexport function preventAdfly(source) {\n    const isDigit = (data) => /^\\d$/.test(data);\n    const handler = function (encodedURL) {\n        let evenChars = '';\n        let oddChars = '';\n        for (let i = 0; i < encodedURL.length; i += 1) {\n            if (i % 2 === 0) {\n                evenChars += encodedURL.charAt(i);\n            } else {\n                oddChars = encodedURL.charAt(i) + oddChars;\n            }\n        }\n\n        let data = (evenChars + oddChars).split('');\n\n        for (let i = 0; i < data.length; i += 1) {\n            if (isDigit(data[i])) {\n                for (let ii = i + 1; ii < data.length; ii += 1) {\n                    if (isDigit(data[ii])) {\n                        // eslint-disable-next-line no-bitwise\n                        const temp = parseInt(data[i], 10) ^ parseInt(data[ii], 10);\n                        if (temp < 10) {\n                            data[i] = temp.toString();\n                        }\n                        i = ii;\n                        break;\n                    }\n                }\n            }\n        }\n        data = data.join('');\n        const decodedURL = window.atob(data).slice(16, -16);\n        /* eslint-disable compat/compat */\n        if (window.stop) {\n            window.stop();\n        }\n        /* eslint-enable compat/compat */\n        window.onbeforeunload = null;\n        window.location.href = decodedURL;\n    };\n\n    let val;\n    // Do not apply handler more than one time\n    let applyHandler = true;\n\n    const result = setPropertyAccess(window, 'ysmm', {\n        configurable: false,\n        set: (value) => {\n            if (applyHandler) {\n                applyHandler = false;\n                try {\n                    if (typeof value === 'string') {\n                        handler(value);\n                    }\n                } catch (err) { } // eslint-disable-line no-empty\n            }\n            val = value;\n        },\n        get: () => val,\n    });\n\n    if (result) {\n        hit(source);\n    } else {\n        window.console.error('Failed to set up prevent-adfly scriptlet');\n    }\n}\n\npreventAdfly.names = [\n    'prevent-adfly',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'adfly-defuser.js',\n    'ubo-adfly-defuser.js',\n    'ubo-adfly-defuser',\n];\n\npreventAdfly.injections = [setPropertyAccess, hit];\n","import {\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    toRegExp,\n    matchStackTrace,\n    noopFunc,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-on-property-read\n *\n * @description\n * This scriptlet is basically the same as [abort-on-property-read](#abort-on-property-read), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n * ```\n * ! Debug script if it tries to access `window.alert`\n * example.org#%#//scriptlet('debug-on-property-read', 'alert')\n * ! of `window.open`\n * example.org#%#//scriptlet('debug-on-property-read', 'open')\n * ```\n */\n/* eslint-enable max-len */\nexport function debugOnPropertyRead(source, property, stack) {\n    const stackRegexp = stack ? toRegExp(stack) : toRegExp('/.?/');\n    if (!property\n        || !matchStackTrace(stackRegexp, new Error().stack)) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        debugger; // eslint-disable-line no-debugger\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, {\n            get: abort,\n            set: noopFunc,\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\ndebugOnPropertyRead.names = [\n    'debug-on-property-read',\n];\ndebugOnPropertyRead.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    toRegExp,\n    matchStackTrace,\n    noopFunc,\n];\n","import {\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    toRegExp,\n    matchStackTrace,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-on-property-write\n *\n * @description\n * This scriptlet is basically the same as [abort-on-property-write](#abort-on-property-write), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n * ```\n * ! Aborts script when it tries to write in property `window.test`\n * example.org#%#//scriptlet('debug-on-property-write', 'test')\n * ```\n */\n/* eslint-enable max-len */\nexport function debugOnPropertyWrite(source, property, stack) {\n    const stackRegexp = stack ? toRegExp(stack) : toRegExp('/.?/');\n    if (!property\n        || !matchStackTrace(stackRegexp, new Error().stack)) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        debugger; // eslint-disable-line no-debugger\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, { set: abort });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid).bind();\n}\n\ndebugOnPropertyWrite.names = [\n    'debug-on-property-write',\n];\n\ndebugOnPropertyWrite.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n    toRegExp,\n    matchStackTrace,\n];\n","import {\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-current-inline-script\n *\n * @description\n * This scriptlet is basically the same as [abort-current-inline-script](#abort-current-inline-script), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n *```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet('debug-current-inline-script', 'alert')\n * ```\n */\n/* eslint-enable max-len */\nexport function debugCurrentInlineScript(source, property, search = null) {\n    const regex = search ? toRegExp(search) : null;\n    const rid = randomId();\n\n    const getCurrentScript = () => {\n        if (!document.currentScript) { // eslint-disable-line compat/compat\n            const scripts = document.getElementsByTagName('script');\n            return scripts[scripts.length - 1];\n        }\n        return document.currentScript; // eslint-disable-line compat/compat\n    };\n\n    const ourScript = getCurrentScript();\n\n    const abort = () => {\n        const scriptEl = getCurrentScript();\n        if (scriptEl instanceof HTMLScriptElement\n            && scriptEl.textContent.length > 0\n            && scriptEl !== ourScript\n            && (!regex || regex.test(scriptEl.textContent))) {\n            hit(source);\n            debugger; // eslint-disable-line no-debugger\n        }\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        let currentValue = base[prop];\n        setPropertyAccess(base, prop, {\n            set: (value) => {\n                abort();\n                currentValue = value;\n            },\n            get: () => {\n                abort();\n                return currentValue;\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\ndebugCurrentInlineScript.names = [\n    'debug-current-inline-script',\n];\n\ndebugCurrentInlineScript.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n];\n","import { hit, observeDOMChanges } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-attr\n *\n * @description\n * Removes the specified attributes from DOM nodes. This scriptlet runs once when the page loads\n * and after that periodically in order to DOM tree changes.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#remove-attrjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('remove-attr', attrs[, selector])\n * ```\n *\n * - `attrs`  required, attribute or list of attributes joined by '|'\n * - `selector`  optional, CSS selector, specifies DOM nodes from which the attributes will be removed\n *\n * **Examples**\n * 1.  Removes by attribute\n *     ```\n *     example.org#%#//scriptlet('remove-attr', 'example|test')\n *     ```\n *\n *     ```html\n *     <!-- before  -->\n *     <div example=\"true\" test=\"true\">Some text</div>\n *\n *     <!-- after -->\n *     <div>Some text</div>\n *     ```\n *\n * 2. Removes with specified selector\n *     ```\n *     example.org#%#//scriptlet('remove-attr', 'example', 'div[class=\"inner\"]')\n *     ```\n *\n *     ```html\n *     <!-- before -->\n *     <div class=\"wrapper\" example=\"true\">\n *         <div class=\"inner\" example=\"true\">Some text</div>\n *     </div>\n *\n *     <!-- after -->\n *     <div class=\"wrapper\" example=\"true\">\n *         <div class=\"inner\">Some text</div>\n *     </div>\n *     ```\n */\n/* eslint-enable max-len */\nexport function removeAttr(source, attrs, selector) {\n    if (!attrs) { return; }\n    attrs = attrs.split(/\\s*\\|\\s*/);\n    if (!selector) {\n        selector = `[${attrs.join('],[')}]`;\n    }\n\n    const rmattr = () => {\n        const nodes = [].slice.call(document.querySelectorAll(selector));\n        let removed = false;\n        nodes.forEach((node) => {\n            attrs.forEach((attr) => {\n                node.removeAttribute(attr);\n                removed = true;\n            });\n        });\n        if (removed) {\n            hit(source);\n        }\n    };\n\n    rmattr();\n\n    // 'true' for observing attributes\n    observeDOMChanges(rmattr, true);\n}\n\nremoveAttr.names = [\n    'remove-attr',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'remove-attr.js',\n    'ubo-remove-attr.js',\n    'ra.js',\n    'ubo-ra.js',\n    'ubo-remove-attr',\n    'ubo-ra',\n];\n\nremoveAttr.injections = [hit, observeDOMChanges];\n","import { hit, observeDOMChanges } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-class\n *\n * @description\n * Removes the specified classes from DOM nodes. This scriptlet runs once after the page loads\n * and after that periodically in order to DOM tree changes.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#remove-classjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('remove-class', classes[, selector])\n * ```\n *\n * - `classes`  required, class or list of classes separated by '|'\n * - `selector`  optional, CSS selector, specifies DOM nodes from which the classes will be removed.\n * If there is no `selector`, each class of `classes` independently will be removed from all nodes which has one\n *\n * **Examples**\n * 1.  Removes by classes\n *     ```\n *     example.org#%#//scriptlet('remove-class', 'example|test')\n *     ```\n *\n *     ```html\n *     <!-- before  -->\n *     <div id=\"first\" class=\"nice test\">Some text</div>\n *     <div id=\"second\" class=\"rare example for test\">Some text</div>\n *     <div id=\"third\" class=\"testing better example\">Some text</div>\n *\n *     <!-- after -->\n *     <div id=\"first\" class=\"nice\">Some text</div>\n *     <div id=\"second\" class=\"rare for\">Some text</div>\n *     <div id=\"third\" class=\"testing better\">Some text</div>\n *     ```\n *\n * 2. Removes with specified selector\n *     ```\n *     example.org#%#//scriptlet('remove-class', 'branding', 'div[class^=\"inner\"]')\n *     ```\n *\n *     ```html\n *     <!-- before -->\n *     <div class=\"wrapper true branding\">\n *         <div class=\"inner bad branding\">Some text</div>\n *     </div>\n *\n *     <!-- after -->\n *     <div class=\"wrapper true branding\">\n *         <div class=\"inner bad\">Some text</div>\n *     </div>\n *     ```\n */\n/* eslint-enable max-len */\n\nexport function removeClass(source, classNames, selector) {\n    if (!classNames) { return; }\n    classNames = classNames.split(/\\s*\\|\\s*/);\n    let selectors = [];\n    if (!selector) {\n        selectors = classNames.map((className) => {\n            return `.${className}`;\n        });\n    }\n\n    const removeClassHandler = () => {\n        const nodes = new Set();\n        if (selector) {\n            const foundedNodes = [].slice.call(document.querySelectorAll(selector));\n            foundedNodes.forEach((n) => nodes.add(n));\n        } else if (selectors.length > 0) {\n            selectors.forEach((s) => {\n                const elements = document.querySelectorAll(s);\n                for (let i = 0; i < elements.length; i += 1) {\n                    const element = elements[i];\n                    nodes.add(element);\n                }\n            });\n        }\n\n        let removed = false;\n\n        nodes.forEach((node) => {\n            classNames.forEach((className) => {\n                if (node.classList.contains(className)) {\n                    node.classList.remove(className);\n                    removed = true;\n                }\n            });\n        });\n\n        if (removed) {\n            hit(source);\n        }\n    };\n\n    removeClassHandler();\n\n    const CLASS_ATTR_NAME = ['class'];\n    // 'true' for observing attributes\n    // 'class' for observing only classes\n    observeDOMChanges(removeClassHandler, true, CLASS_ATTR_NAME);\n}\n\nremoveClass.names = [\n    'remove-class',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'remove-class.js',\n    'ubo-remove-class.js',\n    'rc.js',\n    'ubo-rc.js',\n    'ubo-remove-class',\n    'ubo-rc',\n];\n\nremoveClass.injections = [hit, observeDOMChanges];\n","import { hit } from '../helpers';\n\n/**\n * @scriptlet disable-newtab-links\n *\n * @description\n * Prevents opening new tabs and windows if there is `target` attribute in element.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#disable-newtab-linksjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('disable-newtab-links')\n * ```\n */\nexport function disableNewtabLinks(source) {\n    document.addEventListener('click', (ev) => {\n        let { target } = ev;\n        while (target !== null) {\n            if (target.localName === 'a' && target.hasAttribute('target')) {\n                ev.stopPropagation();\n                ev.preventDefault();\n                hit(source);\n                break;\n            }\n            target = target.parentNode;\n        }\n    });\n}\n\ndisableNewtabLinks.names = [\n    'disable-newtab-links',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'disable-newtab-links.js',\n    'ubo-disable-newtab-links.js',\n    'ubo-disable-newtab-links',\n];\n\ndisableNewtabLinks.injections = [\n    hit,\n];\n","import { hit, toRegExp } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet adjust-setInterval\n *\n * @description\n * Adjusts interval for specified setInterval() callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nano-setinterval-boosterjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('adjust-setInterval'[, match [, interval[, boost]]])\n * ```\n *\n * - `match` - optional, string/regular expression, matching in stringified callback function\n * - `interval` - optional, defaults to 1000, decimal integer, matching setInterval delay\n * - `boost` - optional, default to 0.05, float, capped at 50 times for up and down (0.02...50), interval multiplier\n *\n * **Examples**\n * 1. Adjust all setInterval() x20 times where interval equal 1000ms:\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval')\n *     ```\n *\n * 2. Adjust all setInterval() x20 times where callback mathed with `example` and interval equal 1000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval', 'example')\n *     ```\n *\n * 3. Adjust all setInterval() x20 times where callback mathed with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval', 'example', '400')\n *     ```\n *\n * 4. Slow down setInterval() x2 times where callback matched with `example` and interval equal 1000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval', 'example', '', '2')\n *     ```\n * 5.  Adjust all setInterval() x50 times where interval equal 2000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval', '', '2000', '0.02')\n *     ```\n */\n/* eslint-enable max-len */\nexport function adjustSetInterval(source, match, interval, boost) {\n    const nativeInterval = window.setInterval;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const nativeIsFinite = Number.isFinite || window.isFinite; // eslint-disable-line compat/compat\n\n    interval = parseInt(interval, 10);\n    interval = nativeIsNaN(interval) ? 1000 : interval;\n\n    boost = parseFloat(boost);\n    boost = nativeIsNaN(boost) || !nativeIsFinite(boost) ? 0.05 : boost;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    if (boost < 0.02) {\n        boost = 0.02;\n    }\n    if (boost > 50) {\n        boost = 50;\n    }\n\n    const intervalWrapper = (cb, d, ...args) => {\n        if (d === interval && match.test(cb.toString())) {\n            d *= boost;\n            hit(source);\n        }\n        return nativeInterval.apply(window, [cb, d, ...args]);\n    };\n    window.setInterval = intervalWrapper;\n}\n\nadjustSetInterval.names = [\n    'adjust-setInterval',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'nano-setInterval-booster.js',\n    'ubo-nano-setInterval-booster.js',\n    'nano-sib.js',\n    'ubo-nano-sib.js',\n    'ubo-nano-setInterval-booster',\n    'ubo-nano-sib',\n];\n\nadjustSetInterval.injections = [toRegExp, hit];\n","import { hit, toRegExp } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet adjust-setTimeout\n *\n * @description\n * Adjusts timeout for specified setTimout() callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nano-settimeout-boosterjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('adjust-setTimeout'[, match [, timeout[, boost]]])\n * ```\n *\n * - `match` - optional, string/regular expression, matching in stringified callback function\n * - `timeout` - optional, defaults to 1000, decimal integer, matching setTimout delay\n * - `boost` - optional, default to 0.05, float, capped at 50 times for up and down (0.02...50), timeout multiplier\n *\n * **Examples**\n * 1. Adjust all setTimeout() x20 times where timeout equal 1000ms:\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout')\n *     ```\n *\n * 2. Adjust all setTimeout() x20 times where callback mathed with `example` and timeout equal 1000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout', 'example')\n *     ```\n *\n * 3. Adjust all setTimeout() x20 times where callback mathed with `example` and timeout equal 400ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout', 'example', '400')\n *     ```\n *\n * 4. Slow down setTimeout() x2 times where callback matched with `example` and timeout equal 1000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout', 'example', '', '2')\n *     ```\n * 5.  Adjust all setTimeout() x50 times where timeout equal 2000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout', '', '2000', '0.02')\n *     ```\n */\n/* eslint-enable max-len */\nexport function adjustSetTimeout(source, match, timeout, boost) {\n    const nativeTimeout = window.setTimeout;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const nativeIsFinite = Number.isFinite || window.isFinite; // eslint-disable-line compat/compat\n\n    timeout = parseInt(timeout, 10);\n    timeout = nativeIsNaN(timeout) ? 1000 : timeout;\n\n    boost = parseFloat(boost);\n    boost = nativeIsNaN(boost) || !nativeIsFinite(boost) ? 0.05 : boost;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    if (boost < 0.02) {\n        boost = 0.02;\n    }\n    if (boost > 50) {\n        boost = 50;\n    }\n\n    const timeoutWrapper = (cb, d, ...args) => {\n        if (d === timeout && match.test(cb.toString())) {\n            d *= boost;\n            hit(source);\n        }\n        return nativeTimeout.apply(window, [cb, d, ...args]);\n    };\n    window.setTimeout = timeoutWrapper;\n}\n\nadjustSetTimeout.names = [\n    'adjust-setTimeout',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'nano-setTimeout-booster.js',\n    'ubo-nano-setTimeout-booster.js',\n    'nano-stb.js',\n    'ubo-nano-stb.js',\n    'ubo-nano-setTimeout-booster',\n    'ubo-nano-stb',\n];\n\nadjustSetTimeout.injections = [toRegExp, hit];\n","import { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet dir-string\n *\n * @description\n * Wraps the `console.dir` API to call the `toString` method of the argument.\n * There are several adblock circumvention systems that detect browser devtools\n * and hide themselves. Therefore, if we force them to think\n * that devtools are open (using this scrciptlet),\n * it will automatically disable the adblock circumvention script.\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L766\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('dir-string'[, times])\n * ```\n * - `times` - optional, the number of times to call the `toString` method of the argument to `console.dir`\n *\n * **Example**\n * ```\n * ! Run 2 times\n * example.org#%#//scriptlet('dir-string', '2')\n * ```\n */\n/* eslint-enable max-len */\nexport function dirString(source, times) {\n    const { dir } = console;\n    times = parseInt(times, 10);\n\n    function dirWrapper(object) {\n        // eslint-disable-next-line no-unused-vars\n        let temp;\n        for (let i = 0; i < times; i += 1) {\n            // eslint-disable-next-line no-unused-expressions\n            temp = `${object}`;\n        }\n        if (typeof dir === 'function') {\n            dir.call(this, object);\n        }\n        hit(source, temp);\n    }\n    // eslint-disable-next-line no-console\n    console.dir = dirWrapper;\n}\n\ndirString.names = [\n    'dir-string',\n    'abp-dir-string',\n];\n\ndirString.injections = [hit];\n","import {\n    hit, toRegExp, matchStackTrace, getWildcardPropertyInChain,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet json-prune\n *\n * @description\n * Removes specified properties from the result of calling JSON.parse and returns the caller\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#json-prunejs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/master/lib/content/snippets.js#L1285\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('json-prune'[, propsToRemove [, obligatoryProps [, stack]]])\n * ```\n *\n * - `propsToRemove` - optional, string of space-separated properties to remove\n * - `obligatoryProps` - optional, string of space-separated properties which must be all present for the pruning to occur\n * - `stack` - optional, string or regular expression that must match the current function call stack trace\n *\n * > Note please that you can use wildcard `*` for chain property name.\n * e.g. 'ad.*.src' instead of 'ad.0.src ad.1.src ad.2.src ...'\n *\n * **Examples**\n * 1. Removes property `example` from the results of JSON.parse call\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'example')\n *     ```\n *\n *     For instance, the following call will return `{ one: 1}`\n *\n *     ```html\n *     JSON.parse('{\"one\":1,\"example\":true}')\n *     ```\n *\n * 2. If there are no specified properties in the result of JSON.parse call, pruning will NOT occur\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'one', 'obligatoryProp')\n *     ```\n *\n *     For instance, the following call will return `{ one: 1, two: 2}`\n *\n *     ```html\n *     JSON.parse('{\"one\":1,\"two\":2}')\n *     ```\n *\n * 3. A property in a list of properties can be a chain of properties\n *\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'a.b', 'adpath.url.first')\n *     ```\n *\n * 4. Removes property `content.ad` from the results of JSON.parse call it's error stack trace contains `test.js`\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'content.ad', '', 'test.js')\n *     ```\n *\n * 5. A property in a list of properties can be a chain of properties with wildcard in it\n *\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'content.*.media.src', 'content.*.media.preroll')\n *     ```\n *\n * 6. Call with no arguments will log the current hostname and json payload at the console\n *     ```\n *     example.org#%#//scriptlet('json-prune')\n *     ```\n */\n/* eslint-enable max-len */\nexport function jsonPrune(source, propsToRemove, requiredInitialProps, stack) {\n    const stackRegexp = stack ? toRegExp(stack) : toRegExp('/.?/');\n    if (!matchStackTrace(stackRegexp, new Error().stack)) {\n        return;\n    }\n\n    // eslint-disable-next-line no-console\n    const log = console.log.bind(console);\n    const prunePaths = propsToRemove !== undefined && propsToRemove !== ''\n        ? propsToRemove.split(/ +/)\n        : [];\n    const requiredPaths = requiredInitialProps !== undefined && requiredInitialProps !== ''\n        ? requiredInitialProps.split(/ +/)\n        : [];\n\n    function isPruningNeeded(root) {\n        if (!root) {\n            return false;\n        }\n\n        let shouldProcess;\n        for (let i = 0; i < requiredPaths.length; i += 1) {\n            const requiredPath = requiredPaths[i];\n            const lastNestedPropName = requiredPath.split('.').pop();\n\n            const hasWildcard = requiredPath.indexOf('.*.') > -1\n                || requiredPath.indexOf('*.') > -1\n                || requiredPath.indexOf('.*') > -1;\n\n            // if the path has wildcard, getPropertyInChain should 'look through' chain props\n            const details = getWildcardPropertyInChain(root, requiredPath, hasWildcard);\n\n            // start value of 'shouldProcess' due to checking below\n            shouldProcess = !hasWildcard;\n\n            for (let i = 0; i < details.length; i += 1) {\n                if (hasWildcard) {\n                    // if there is a wildcard,\n                    // at least one (||) of props chain should be present in object\n                    shouldProcess = !(details[i].base[lastNestedPropName] === undefined)\n                        || shouldProcess;\n                } else {\n                    // otherwise each one (&&) of them should be there\n                    shouldProcess = !(details[i].base[lastNestedPropName] === undefined)\n                        && shouldProcess;\n                }\n            }\n        }\n\n        return shouldProcess;\n    }\n\n    const nativeParse = JSON.parse;\n\n    const parseWrapper = (...args) => {\n        const root = nativeParse.apply(window, args);\n        if (prunePaths.length === 0) {\n            log(window.location.hostname, root);\n            return root;\n        }\n        if (isPruningNeeded(root) === false) {\n            return root;\n        }\n        // if pruning is needed, we check every input pathToRemove\n        // and delete it if root has it\n        prunePaths.forEach((path) => {\n            const ownerObjArr = getWildcardPropertyInChain(root, path, true);\n            ownerObjArr.forEach((ownerObj) => {\n                if (ownerObj !== undefined && ownerObj.base) {\n                    delete ownerObj.base[ownerObj.prop];\n                }\n            });\n        });\n        hit(source);\n        return root;\n    };\n\n    JSON.parse = parseWrapper;\n}\n\njsonPrune.names = [\n    'json-prune',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'json-prune.js',\n    'ubo-json-prune.js',\n    'ubo-json-prune',\n    'abp-json-prune',\n];\n\njsonPrune.injections = [hit, toRegExp, matchStackTrace, getWildcardPropertyInChain];\n","import {\n    hit, startsWith, toRegExp, noopFunc,\n} from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-requestAnimationFrame\n *\n * @description\n * Prevents a `requestAnimationFrame` call\n * if the text of the callback is matching the specified search string which does not start with `!`;\n * otherwise mismatched calls should be defused.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#no-requestanimationframe-ifjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-requestAnimationFrame'[, search])\n * ```\n *\n * - `search` - optional, string or regular expression.\n * If starts with `!`, scriptlet will not match the stringified callback but all other will be defused.\n * If do not start with `!`, the stringified callback will be matched.\n *\n * Call with no argument will log all requestAnimationFrame calls while debugging.\n * So do not use the scriptlet without any parameter in production filter lists.\n *\n * **Examples**\n * 1. Prevents `requestAnimationFrame` calls if the callback matches `/\\.test/`.\n *     ```bash\n *     example.org#%#//scriptlet('prevent-requestAnimationFrame', '/\\.test/')\n *     ```\n *\n *     For instance, the following call will be prevented:\n *     ```javascript\n *     var times = 0;\n *     requestAnimationFrame(function change() {\n *         window.test = 'new value';\n *         if (times < 2) {\n *             times += 1;\n *             requestAnimationFrame(change);\n *         }\n *     });\n *     ```\n * 2. Prevents `requestAnimationFrame` calls if **does not match** 'check'.\n *     ```bash\n *     example.org#%#//scriptlet('prevent-requestAnimationFrame', '!check')\n *     ```\n *\n *     For instance, only the first call will be prevented:\n *\n *     ```javascript\n *     var timesFirst = 0;\n *     requestAnimationFrame(function changeFirst() {\n *         window.check = 'should not be prevented';\n *         if (timesFirst < 2) {\n *             timesFirst += 1;\n *             requestAnimationFrame(changeFirst);\n *         }\n *     });\n *\n *     var timesSecond = 0;\n *     requestAnimationFrame(function changeSecond() {\n *         window.second = 'should be prevented';\n *         if (timesSecond < 2) {\n *             timesSecond += 1;\n *             requestAnimationFrame(changeSecond);\n *         }\n *     });\n *     ```\n */\n/* eslint-enable max-len */\n\nexport function preventRequestAnimationFrame(source, match) {\n    const nativeRequestAnimationFrame = window.requestAnimationFrame;\n\n    // logs requestAnimationFrame to console if no arguments have been specified\n    const shouldLog = typeof match === 'undefined';\n\n    const INVERT_MARKER = '!';\n\n    const doNotMatch = startsWith(match, INVERT_MARKER);\n    if (doNotMatch) {\n        match = match.slice(1);\n    }\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const rafWrapper = (callback, ...args) => {\n        let shouldPrevent = false;\n        if (shouldLog) {\n            const logMessage = `log: requestAnimationFrame(\"${callback.toString()}\")`;\n            hit(source, logMessage);\n        } else {\n            shouldPrevent = match.test(callback.toString()) !== doNotMatch;\n        }\n\n        if (shouldPrevent) {\n            hit(source);\n            return nativeRequestAnimationFrame(noopFunc);\n        }\n\n        return nativeRequestAnimationFrame.apply(window, [callback, ...args]);\n    };\n\n    window.requestAnimationFrame = rafWrapper;\n}\n\npreventRequestAnimationFrame.names = [\n    'prevent-requestAnimationFrame',\n    // aliases are needed for matching the related scriptlet converted into our syntax\n    'no-requestAnimationFrame-if.js',\n    'ubo-no-requestAnimationFrame-if.js',\n    'norafif.js',\n    'ubo-norafif.js',\n    'ubo-no-requestAnimationFrame-if',\n    'ubo-norafif',\n];\n\npreventRequestAnimationFrame.injections = [hit, startsWith, toRegExp, noopFunc];\n","import { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet set-cookie\n *\n * @description\n * Sets a cookie with the specified name and value. Cookie path defaults to root.\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('set-cookie', name, value)\n * ```\n *\n * - `name` - required, cookie name to be set\n * - `value` - required, cookie value; possible values:\n *     - number `>= 0 && <= 15`\n *     - one of the predefined constants:\n *         - `true` / `True`\n *         - `false` / `False`\n *         - `yes` / `Yes` / `Y`\n *         - `no`\n *         - `ok` / `OK`\n *\n * **Examples**\n * ```\n * example.org#%#//scriptlet('set-cookie', 'checking', 'ok')\n *\n * example.org#%#//scriptlet('set-cookie', 'gdpr-settings-cookie', '1')\n * ```\n */\n/* eslint-enable max-len */\nexport function setCookie(source, name, value) {\n    if (!name || !value) {\n        return;\n    }\n\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    let valueToSet;\n    if (value === 'true') {\n        valueToSet = 'true';\n    } else if (value === 'True') {\n        valueToSet = 'True';\n    } else if (value === 'false') {\n        valueToSet = 'false';\n    } else if (value === 'False') {\n        valueToSet = 'False';\n    } else if (value === 'yes') {\n        valueToSet = 'yes';\n    } else if (value === 'Yes') {\n        valueToSet = 'Yes';\n    } else if (value === 'Y') {\n        valueToSet = 'Y';\n    } else if (value === 'no') {\n        valueToSet = 'no';\n    } else if (value === 'ok') {\n        valueToSet = 'ok';\n    } else if (value === 'OK') {\n        valueToSet = 'OK';\n    } else if (/^\\d+$/.test(value)) {\n        valueToSet = parseFloat(value);\n        if (nativeIsNaN(valueToSet)) {\n            return;\n        }\n        if (Math.abs(valueToSet) < 0 || Math.abs(valueToSet) > 15) {\n            return;\n        }\n    } else {\n        return;\n    }\n\n    const pathToSet = 'path=/;';\n\n    const cookieData = `${encodeURIComponent(name)}=${encodeURIComponent(valueToSet)}; ${pathToSet}`;\n\n    hit(source);\n    document.cookie = cookieData;\n}\n\nsetCookie.names = [\n    'set-cookie',\n];\n\nsetCookie.injections = [hit];\n","import { hit, observeDOMChanges, flatten } from '../helpers';\n\n/**\n * @scriptlet hide-in-shadow-dom\n *\n * @description\n * Hides elements inside open shadow DOM elements.\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('hide-in-shadow-dom', selector[, baseSelector])\n * ```\n *\n * - `selector`  required, CSS selector of element in shadow-dom to hide\n * - `baseSelector`  optional, selector of specific page DOM element,\n * narrows down the part of the page DOM where shadow-dom host supposed to be,\n * defaults to document.documentElement\n *\n * > `baseSelector` should match element of the page DOM, but not of shadow DOM\n *\n * **Examples**\n * ```\n * ! hides menu bar\n * virustotal.com#%#//scriptlet('hide-in-shadow-dom', 'iron-pages', 'vt-virustotal-app')\n *\n * ! hides floating element\n * virustotal.com#%#//scriptlet('hide-in-shadow-dom', 'vt-ui-contact-fab')\n * ```\n */\nexport function hideInShadowDom(source, selector, baseSelector) {\n    // do nothing if browser does not support ShadowRoot\n    // https://developer.mozilla.org/en-US/docs/Web/API/ShadowRoot\n    if (!Element.prototype.attachShadow) {\n        return;\n    }\n\n    /**\n     * Finds shadow-dom host (elements with shadowRoot property) in DOM of rootElement.\n     * @param {HTMLElement} rootElement\n     * @returns {nodeList[]} shadow-dom hosts\n     */\n    const findHostElements = (rootElement) => {\n        const hosts = [];\n        // Element.querySelectorAll() returns list of elements\n        // which are defined in DOM of Element.\n        // Meanwhile, inner DOM of the element with shadowRoot property\n        // is absolutely another DOM and which can not be reached by querySelectorAll('*')\n        const domElems = rootElement.querySelectorAll('*');\n        domElems.forEach((el) => {\n            if (el.shadowRoot) {\n                hosts.push(el);\n            }\n        });\n        return hosts;\n    };\n\n    /**\n     * @typedef {Object} PierceData\n     * @property {Array} targets found elements\n     * @property {Array} innerHosts inner shadow-dom hosts\n     */\n\n    /**\n     * Pierces open shadow-dom in order to find:\n     * - elements by 'selector' matching\n     * - inner shadow-dom hosts\n     * @param {string} selector\n     * @param {nodeList[]} hostElements\n     * @returns {PierceData}\n     */\n    const pierceShadowDom = (selector, hostElements) => {\n        const targets = [];\n        const innerHostsAcc = [];\n\n        const collectTargets = (arr) => {\n            if (arr.length !== 0) {\n                arr.forEach((el) => targets.push(el));\n            }\n        };\n\n        // it's possible to get a few hostElements found by baseSelector on the page\n        hostElements.forEach((host) => {\n            // check presence of selector element inside base element if it's not in shadow-dom\n            const simpleElems = host.querySelectorAll(selector);\n            collectTargets(simpleElems);\n\n            const shadowRootElem = host.shadowRoot;\n            const shadowChildren = shadowRootElem.querySelectorAll(selector);\n            collectTargets(shadowChildren);\n\n            // find inner shadow-dom hosts inside processing shadow-dom\n            innerHostsAcc.push(findHostElements(shadowRootElem));\n        });\n\n        // if there were more than one host element,\n        // innerHostsAcc is an array of arrays and should be flatten\n        const innerHosts = flatten(innerHostsAcc);\n        return { targets, innerHosts };\n    };\n\n    /**\n     * Handles shadow-dom piercing and hiding of found elements\n     */\n    const hideHandler = () => {\n        // start value of shadow-dom hosts for the page dom\n        let hostElements = !baseSelector ? findHostElements(document.documentElement)\n            : document.querySelectorAll(baseSelector);\n\n        // if there is shadow-dom host, they should be explored\n        while (hostElements.length !== 0) {\n            let hidden = false;\n            const DISPLAY_NONE_CSS = 'display:none!important;';\n\n            const { targets, innerHosts } = pierceShadowDom(selector, hostElements);\n\n            targets.forEach((targetEl) => {\n                targetEl.style.cssText = DISPLAY_NONE_CSS;\n                hidden = true;\n            });\n\n            if (hidden) {\n                hit(source);\n            }\n\n            // continue to pierce for inner shadow-dom hosts\n            // and search inside them while the next iteration\n            hostElements = innerHosts;\n        }\n    };\n\n    hideHandler();\n\n    observeDOMChanges(hideHandler, true);\n}\n\nhideInShadowDom.names = [\n    'hide-in-shadow-dom',\n];\n\nhideInShadowDom.injections = [hit, observeDOMChanges, flatten];\n","/**\n * This file must export all scriptlets which should be accessible\n */\nexport * from './abort-on-property-read';\nexport * from './abort-on-property-write';\nexport * from './prevent-setTimeout';\nexport * from './prevent-setInterval';\nexport * from './prevent-window-open';\nexport * from './abort-current-inline-script';\nexport * from './set-constant';\nexport * from './remove-cookie';\nexport * from './prevent-addEventListener';\nexport * from './prevent-bab';\nexport * from './nowebrtc';\nexport * from './log-addEventListener';\nexport * from './log-eval';\nexport * from './log';\nexport * from './noeval';\nexport * from './prevent-eval-if';\nexport * from './prevent-fab-3.2.0';\nexport * from './set-popads-dummy';\nexport * from './prevent-popads-net';\nexport * from './prevent-adfly';\nexport * from './debug-on-property-read';\nexport * from './debug-on-property-write';\nexport * from './debug-current-inline-script';\nexport * from './remove-attr';\nexport * from './remove-class';\nexport * from './disable-newtab-links';\nexport * from './adjust-setInterval';\nexport * from './adjust-setTimeout';\nexport * from './dir-string';\nexport * from './json-prune';\nexport * from './prevent-requestAnimationFrame';\nexport * from './set-cookie';\nexport * from './hide-in-shadow-dom';\n","import {\n    startsWith,\n    endsWith,\n    substringAfter,\n    toRegExp,\n} from './string-utils';\n\nimport { ADG_SCRIPTLET_MASK } from './parse-rule';\n\nimport * as scriptletsList from '../scriptlets/scriptletsList';\n\nimport { redirects } from '../../scripts/compatibility-table.json';\n\nconst JS_RULE_MARKER = '#%#';\nconst COMMENT_MARKER = '!';\n\n/**\n * Checks if rule text is comment e.g. !!example.org##+js(set-constant.js, test, false)\n * @param {string} rule\n * @return {boolean}\n */\nconst isComment = (rule) => startsWith(rule, COMMENT_MARKER);\n\n/* ************************************************************************\n *\n * Scriptlets\n *\n ************************************************************************** */\n\n/**\n * uBlock scriptlet rule mask\n */\nconst UBO_SCRIPTLET_MASK_REG = /#@?#script:inject|#@?#\\s*\\+js/;\nconst UBO_SCRIPTLET_MASK_1 = '##+js';\nconst UBO_SCRIPTLET_MASK_2 = '##script:inject';\nconst UBO_SCRIPTLET_EXCEPTION_MASK_1 = '#@#+js';\nconst UBO_SCRIPTLET_EXCEPTION_MASK_2 = '#@#script:inject';\n\n/**\n * AdBlock Plus snippet rule mask\n */\nconst ABP_SCRIPTLET_MASK = '#$#';\nconst ABP_SCRIPTLET_EXCEPTION_MASK = '#@$#';\n\n/**\n * AdGuard CSS rule mask\n */\nconst ADG_CSS_MASK_REG = /#@?\\$#.+?\\s*\\{.*\\}\\s*$/g;\n\n/**\n * Checks if the `rule` is AdGuard scriptlet rule\n * @param {string} rule - rule text\n */\nconst isAdgScriptletRule = (rule) => {\n    return (\n        !isComment(rule)\n        && rule.indexOf(ADG_SCRIPTLET_MASK) > -1\n    );\n};\n\n/**\n * Checks if the `rule` is uBO scriptlet rule\n * @param {string} rule rule text\n */\nconst isUboScriptletRule = (rule) => {\n    return (\n        rule.indexOf(UBO_SCRIPTLET_MASK_1) > -1\n        || rule.indexOf(UBO_SCRIPTLET_MASK_2) > -1\n        || rule.indexOf(UBO_SCRIPTLET_EXCEPTION_MASK_1) > -1\n        || rule.indexOf(UBO_SCRIPTLET_EXCEPTION_MASK_2) > -1\n    )\n        && UBO_SCRIPTLET_MASK_REG.test(rule)\n        && !isComment(rule);\n};\n\n/**\n * Checks if the `rule` is AdBlock Plus snippet\n * @param {string} rule rule text\n */\nconst isAbpSnippetRule = (rule) => {\n    return (\n        rule.indexOf(ABP_SCRIPTLET_MASK) > -1\n        || rule.indexOf(ABP_SCRIPTLET_EXCEPTION_MASK) > -1\n    )\n    && rule.search(ADG_CSS_MASK_REG) === -1\n    && !isComment(rule);\n};\n\n/**\n * Finds scriptlet by it's name\n * @param {string} name - scriptlet name\n */\nconst getScriptletByName = (name) => {\n    const scriptlets = Object.keys(scriptletsList).map((key) => scriptletsList[key]);\n    return scriptlets\n        .find((s) => {\n            return s.names\n                // full match name checking\n                && (s.names.indexOf(name) > -1\n                    // or check ubo alias name without '.js' at the end\n                    || (!endsWith(name, '.js') && s.names.indexOf(`${name}.js`) > -1)\n                );\n        });\n};\n\n/**\n * Checks if the scriptlet name is valid\n * @param {string} name - Scriptlet name\n */\nconst isValidScriptletName = (name) => {\n    if (!name) {\n        return false;\n    }\n    const scriptlet = getScriptletByName(name);\n    if (!scriptlet) {\n        return false;\n    }\n    return true;\n};\n\n/* ************************************************************************\n *\n * Redirects\n *\n ************************************************************************** */\n\n/**\n * Redirect resources markers\n */\nconst ADG_UBO_REDIRECT_MARKER = 'redirect=';\nconst ABP_REDIRECT_MARKER = 'rewrite=abp-resource:';\n\nconst VALID_SOURCE_TYPES = [\n    'image',\n    'subdocument',\n    'stylesheet',\n    'script',\n    'xmlhttprequest',\n    'media',\n];\n\nconst validAdgRedirects = redirects.filter((el) => el.adg);\n\n/**\n * Converts array of pairs to object.\n * Sort of Object.fromEntries() polyfill.\n * @param {Array} pairs - array of pairs\n * @returns {Object}\n */\nconst objFromEntries = (pairs) => {\n    const output = pairs\n        .reduce((acc, el) => {\n            const [key, value] = el;\n            acc[key] = value;\n            return acc;\n        }, {});\n    return output;\n};\n\n/**\n * Compatibility object where KEYS = UBO redirect names and VALUES = ADG redirect names\n * It's used for UBO -> ADG converting\n */\nconst uboToAdgCompatibility = objFromEntries(\n    validAdgRedirects\n        .filter((el) => el.ubo)\n        .map((el) => {\n            return [el.ubo, el.adg];\n        }),\n);\n\n/**\n * Compatibility object where KEYS = ABP redirect names and VALUES = ADG redirect names\n * It's used for ABP -> ADG converting\n */\nconst abpToAdgCompatibility = objFromEntries(\n    validAdgRedirects\n        .filter((el) => el.abp)\n        .map((el) => {\n            return [el.abp, el.adg];\n        }),\n);\n\n/**\n * Compatibility object where KEYS = UBO redirect names and VALUES = ADG redirect names\n * It's used for ADG -> UBO converting\n */\nconst adgToUboCompatibility = objFromEntries(\n    validAdgRedirects\n        .filter((el) => el.ubo)\n        .map((el) => {\n            return [el.adg, el.ubo];\n        }),\n);\n\n/**\n * Needed for AdGuard redirect names validation where KEYS = **valid** AdGuard redirect names\n * 'adgToUboCompatibility' is still needed for ADG -> UBO converting\n */\nconst validAdgCompatibility = objFromEntries(\n    validAdgRedirects\n        .map((el) => {\n            return [el.adg, 'valid adg redirect'];\n        }),\n);\n\nconst REDIRECT_RULE_TYPES = {\n    VALID_ADG: {\n        marker: ADG_UBO_REDIRECT_MARKER,\n        compatibility: validAdgCompatibility,\n    },\n    ADG: {\n        marker: ADG_UBO_REDIRECT_MARKER,\n        compatibility: adgToUboCompatibility,\n    },\n    UBO: {\n        marker: ADG_UBO_REDIRECT_MARKER,\n        compatibility: uboToAdgCompatibility,\n    },\n    ABP: {\n        marker: ABP_REDIRECT_MARKER,\n        compatibility: abpToAdgCompatibility,\n    },\n};\n\n/**\n * Parses redirect rule modifiers\n * @param {string} rule\n * @returns {Array}\n */\nconst parseModifiers = (rule) => substringAfter(rule, '$').split(',');\n\n/**\n * Gets redirect resource name\n * @param {string} rule\n * @param {string} marker - specific Adg/Ubo or Abp redirect resources marker\n * @returns {string} - redirect resource name\n */\nconst getRedirectName = (rule, marker) => {\n    const ruleModifiers = parseModifiers(rule);\n    const redirectNamePart = ruleModifiers\n        .find((el) => el.indexOf(marker) > -1);\n    return substringAfter(redirectNamePart, marker);\n};\n\n/**\n * Checks if the `rule` is AdGuard redirect rule.\n * Discards comments and JS rules and checks if the `rule` has 'redirect' modifier.\n * @param {string} rule - rule text\n */\nconst isAdgRedirectRule = (rule) => {\n    const MARKER_IN_BASE_PART_MASK = '/((?!\\\\$|\\\\,).{1})redirect=(.{0,}?)\\\\$(popup)?/';\n    return (\n        !isComment(rule)\n        && rule.indexOf(REDIRECT_RULE_TYPES.ADG.marker) > -1\n        // some js rules may have 'redirect=' in it, so we should get rid of them\n        && rule.indexOf(JS_RULE_MARKER) === -1\n        // get rid of rules like '_redirect=*://look.$popup'\n        && !(toRegExp(MARKER_IN_BASE_PART_MASK).test(rule))\n    );\n};\n\n/**\n * Checks if the `rule` satisfies the `type`\n * @param {string} rule - rule text\n * @param {'VALID_ADG'|'ADG'|'UBO'|'ABP'} type - type of a redirect rule\n */\nconst isRedirectRuleByType = (rule, type) => {\n    const { marker, compatibility } = REDIRECT_RULE_TYPES[type];\n\n    if (rule\n        && (!isComment(rule))\n        && (rule.indexOf(marker) > -1)) {\n        const redirectName = getRedirectName(rule, marker);\n\n        return redirectName === Object\n            .keys(compatibility)\n            .find((el) => el === redirectName);\n    }\n    return false;\n};\n\n/**\n* Checks if the `rule` is **valid** AdGuard redirect resource rule\n* @param {string} rule - rule text\n* @returns {boolean}\n*/\nconst isValidAdgRedirectRule = (rule) => {\n    return isRedirectRuleByType(rule, 'VALID_ADG');\n};\n\n/**\n* Checks if the AdGuard redirect `rule` has Ubo analog. Needed for Adg->Ubo conversion\n* @param {string} rule - AdGuard rule text\n* @returns {boolean} - true if the rule can be converted to Ubo\n*/\nconst isAdgRedirectCompatibleWithUbo = (rule) => {\n    return isAdgRedirectRule(rule) && isRedirectRuleByType(rule, 'ADG');\n};\n\n/**\n* Checks if the Ubo redirect `rule` has AdGuard analog. Needed for Ubo->Adg conversion\n* @param {string} rule - Ubo rule text\n* @returns {boolean} - true if the rule can be converted to AdGuard\n*/\nconst isUboRedirectCompatibleWithAdg = (rule) => {\n    return isRedirectRuleByType(rule, 'UBO');\n};\n\n/**\n* Checks if the Abp redirect `rule` has AdGuard analog. Needed for Abp->Adg conversion\n* @param {string} rule - Abp rule text\n* @returns {boolean} - true if the rule can be converted to AdGuard\n*/\nconst isAbpRedirectCompatibleWithAdg = (rule) => {\n    return isRedirectRuleByType(rule, 'ABP');\n};\n\n/**\n * Checks if the rule has specified content type before Adg -> Ubo conversion.\n *\n * Used ONLY for Adg -> Ubo conversion\n * because Ubo redirect rules must contain content type, but Adg and Abp must not.\n *\n * Also source type can not be added automatically because of such valid rules:\n * ! Abp:\n * $rewrite=abp-resource:blank-js,xmlhttprequest\n * ! Adg:\n * $script,redirect=noopvast-2.0\n * $xmlhttprequest,redirect=noopvast-2.0\n *\n * @param {string} rule\n * @returns {boolean}\n */\nconst hasValidContentType = (rule) => {\n    if (isRedirectRuleByType(rule, 'ADG')) {\n        const ruleModifiers = parseModifiers(rule);\n        const sourceType = ruleModifiers\n            .find((el) => VALID_SOURCE_TYPES.indexOf(el) > -1);\n\n        return sourceType !== undefined;\n    }\n    return false;\n};\n\nconst validator = {\n    UBO_SCRIPTLET_MASK_REG,\n    ABP_SCRIPTLET_MASK,\n    ABP_SCRIPTLET_EXCEPTION_MASK,\n    isComment,\n    isAdgScriptletRule,\n    isUboScriptletRule,\n    isAbpSnippetRule,\n    getScriptletByName,\n    isValidScriptletName,\n    REDIRECT_RULE_TYPES,\n    isAdgRedirectRule,\n    isValidAdgRedirectRule,\n    isAdgRedirectCompatibleWithUbo,\n    isUboRedirectCompatibleWithAdg,\n    isAbpRedirectCompatibleWithAdg,\n    parseModifiers,\n    getRedirectName,\n    hasValidContentType,\n};\n\nexport default validator;\n","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}\n\nmodule.exports = _toArray;","import {\n    getBeforeRegExp,\n    substringAfter,\n    substringBefore,\n    wrapInSingleQuotes,\n    getStringInBraces,\n} from './string-utils';\n\nimport validator from './validator';\n\nimport { parseRule } from './parse-rule';\n\nimport * as scriptletList from '../scriptlets/scriptletsList';\n\n/**\n * AdGuard scriptlet rule\n */\nconst ADGUARD_SCRIPTLET_MASK_REG = /#@?%#\\/\\/scriptlet\\(.+\\)/;\n// eslint-disable-next-line no-template-curly-in-string\nconst ADGUARD_SCRIPTLET_TEMPLATE = '${domains}#%#//scriptlet(${args})';\n// eslint-disable-next-line no-template-curly-in-string\nconst ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE = '${domains}#@%#//scriptlet(${args})';\n\n/**\n * uBlock scriptlet rule mask\n */\n// eslint-disable-next-line no-template-curly-in-string\nconst UBO_SCRIPTLET_TEMPLATE = '${domains}##+js(${args})';\n// eslint-disable-next-line no-template-curly-in-string\nconst UBO_SCRIPTLET_EXCEPTION_TEMPLATE = '${domains}#@#+js(${args})';\n\nconst UBO_ALIAS_NAME_MARKER = 'ubo-';\n\n// https://github.com/gorhill/uBlock/wiki/Static-filter-syntax#xhr\nconst UBO_XHR_TYPE = 'xhr';\n\nconst ADG_XHR_TYPE = 'xmlhttprequest';\n\n/**\n * Returns array of strings separated by space which not in quotes\n * @param {string} str\n */\nconst getSentences = (str) => {\n    const reg = /'.*?'|\".*?\"|\\S+/g;\n    return str.match(reg);\n};\n\n/**\n * Replaces string with data by placeholders\n * @param {string} str\n * @param {Object} data - where keys are placeholders names\n */\nconst replacePlaceholders = (str, data) => {\n    return Object.keys(data).reduce((acc, key) => {\n        const reg = new RegExp(`\\\\$\\\\{${key}\\\\}`, 'g');\n        acc = acc.replace(reg, data[key]);\n        return acc;\n    }, str);\n};\n\n/**\n * Converts string of UBO scriptlet rule to AdGuard scritlet rule\n * @param {string} rule - UBO scriptlet rule\n * @returns {Array} - array with one AdGuard scriptlet rule\n */\nexport const convertUboScriptletToAdg = (rule) => {\n    const domains = getBeforeRegExp(rule, validator.UBO_SCRIPTLET_MASK_REG);\n    const mask = rule.match(validator.UBO_SCRIPTLET_MASK_REG)[0];\n    let template;\n    if (mask.indexOf('@') > -1) {\n        template = ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE;\n    } else {\n        template = ADGUARD_SCRIPTLET_TEMPLATE;\n    }\n    const args = getStringInBraces(rule)\n        .split(/, /g)\n        .map((arg, index) => {\n            let outputArg;\n            if (index === 0) {\n                outputArg = (arg.indexOf('.js') > -1) ? `ubo-${arg}` : `ubo-${arg}.js`;\n            } else {\n                outputArg = arg;\n            }\n            // for example: dramaserial.xyz##+js(abort-current-inline-script, $, popup)\n            if (arg === '$') {\n                outputArg = '$$';\n            }\n            return outputArg;\n        })\n        .map((arg) => wrapInSingleQuotes(arg))\n        .join(', ');\n    const adgRule = replacePlaceholders(\n        template,\n        { domains, args },\n    );\n    return [adgRule];\n};\n\n/**\n * Convert string of ABP snippet rule to AdGuard scritlet rule\n * @param {string} rule - ABP snippet rule\n * @returns {Array} - array of AdGuard scriptlet rules -\n * one or few items depends on Abp-rule\n */\nexport const convertAbpSnippetToAdg = (rule) => {\n    const SEMICOLON_DIVIDER = /;(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/g;\n    const mask = rule.indexOf(validator.ABP_SCRIPTLET_MASK) > -1\n        ? validator.ABP_SCRIPTLET_MASK\n        : validator.ABP_SCRIPTLET_EXCEPTION_MASK;\n    const template = mask === validator.ABP_SCRIPTLET_MASK\n        ? ADGUARD_SCRIPTLET_TEMPLATE\n        : ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE;\n    const domains = substringBefore(rule, mask);\n    const args = substringAfter(rule, mask);\n\n    return args.split(SEMICOLON_DIVIDER)\n        .map((args) => getSentences(args)\n            .filter((arg) => arg)\n            .map((arg, index) => (index === 0 ? `abp-${arg}` : arg))\n            .map((arg) => wrapInSingleQuotes(arg))\n            .join(', '))\n        .map((args) => replacePlaceholders(template, { domains, args }));\n};\n\n/**\n * Converts scriptlet rule to AdGuard one\n * @param {string} rule\n * @returns {Array} - array of AdGuard scriptlet rules -\n * one item for Adg and Ubo or few items for Abp\n */\nexport const convertScriptletToAdg = (rule) => {\n    let result;\n    if (validator.isUboScriptletRule(rule)) {\n        result = convertUboScriptletToAdg(rule);\n    } else if (validator.isAbpSnippetRule(rule)) {\n        result = convertAbpSnippetToAdg(rule);\n    } else if (validator.isAdgScriptletRule(rule) || (validator.isComment(rule))) {\n        result = [rule];\n    }\n\n    return result;\n};\n\n/**\n * Converts UBO scriptlet rule to AdGuard one\n * @param {string} rule - AdGuard scriptlet rule\n * @returns {string} - UBO scriptlet rule\n */\nexport const convertAdgScriptletToUbo = (rule) => {\n    let res;\n\n    if (validator.isAdgScriptletRule(rule)) {\n        const { name: parsedName, args: parsedParams } = parseRule(rule);\n\n        // object of name and aliases for the Adg-scriptlet\n        const adgScriptletObject = Object\n            .keys(scriptletList)\n            .map((el) => scriptletList[el])\n            .map((s) => {\n                const [name, ...aliases] = s.names;\n                return { name, aliases };\n            })\n            .find((el) => (el.name === parsedName\n                || el.aliases.indexOf(parsedName) >= 0));\n\n        const { aliases } = adgScriptletObject;\n\n        if (aliases.length > 0) {\n            const uboAlias = adgScriptletObject.aliases\n                // eslint-disable-next-line no-restricted-properties\n                .find((alias) => alias.includes(UBO_ALIAS_NAME_MARKER));\n\n            if (uboAlias) {\n                const mask = rule.match(ADGUARD_SCRIPTLET_MASK_REG)[0];\n                let template;\n                if (mask.indexOf('@') > -1) {\n                    template = UBO_SCRIPTLET_EXCEPTION_TEMPLATE;\n                } else {\n                    template = UBO_SCRIPTLET_TEMPLATE;\n                }\n                const domains = getBeforeRegExp(rule, ADGUARD_SCRIPTLET_MASK_REG);\n                const uboName = uboAlias\n                    .replace(UBO_ALIAS_NAME_MARKER, '')\n                    // '.js' in the Ubo scriptlet name can be omitted\n                    // https://github.com/gorhill/uBlock/wiki/Resources-Library#general-purpose-scriptlets\n                    .replace('.js', '');\n\n                const args = (parsedParams.length > 0) ? `${uboName}, ${parsedParams.join(', ')}` : uboName;\n\n                const uboRule = replacePlaceholders(\n                    template,\n                    { domains, args },\n                );\n\n                res = uboRule;\n            }\n        }\n    }\n\n    return res;\n};\n\n/**\n * Validates any scriptlet rule\n * @param {string} input - can be Adguard or Ubo or Abp scriptlet rule\n */\nexport const isValidScriptletRule = (input) => {\n    if (!input) {\n        return false;\n    }\n    // ABP 'input' rule may contain more than one snippet\n    const rulesArray = convertScriptletToAdg(input);\n\n    // checking if each of parsed scriptlets is valid\n    // if at least one of them is not valid - whole 'input' rule is not valid too\n    const isValid = rulesArray.reduce((acc, rule) => {\n        const parsedRule = parseRule(rule);\n        return validator.isValidScriptletName(parsedRule.name) && acc;\n    }, true);\n\n    return isValid;\n};\n\n/**\n * Converts Ubo redirect rule to Adg one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertUboRedirectToAdg = (rule) => {\n    const firstPartOfRule = substringBefore(rule, '$');\n    const uboModifiers = validator.parseModifiers(rule);\n    const adgModifiers = uboModifiers\n        .map((el) => {\n            if (el.indexOf(validator.REDIRECT_RULE_TYPES.UBO.marker) > -1) {\n                const uboName = substringAfter(el, validator.REDIRECT_RULE_TYPES.UBO.marker);\n                const adgName = validator.REDIRECT_RULE_TYPES.UBO.compatibility[uboName];\n                return `${validator.REDIRECT_RULE_TYPES.ADG.marker}${adgName}`;\n            }\n            if (el === UBO_XHR_TYPE) {\n                return ADG_XHR_TYPE;\n            }\n            return el;\n        })\n        .join(',');\n\n    return `${firstPartOfRule}$${adgModifiers}`;\n};\n\n/**\n * Converts Abp redirect rule to Adg one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertAbpRedirectToAdg = (rule) => {\n    const firstPartOfRule = substringBefore(rule, '$');\n    const abpModifiers = validator.parseModifiers(rule);\n    const adgModifiers = abpModifiers\n        .map((el) => {\n            if (el.indexOf(validator.REDIRECT_RULE_TYPES.ABP.marker) > -1) {\n                const abpName = substringAfter(el, validator.REDIRECT_RULE_TYPES.ABP.marker);\n                const adgName = validator.REDIRECT_RULE_TYPES.ABP.compatibility[abpName];\n                return `${validator.REDIRECT_RULE_TYPES.ADG.marker}${adgName}`;\n            }\n            return el;\n        })\n        .join(',');\n\n    return `${firstPartOfRule}$${adgModifiers}`;\n};\n\n/**\n * Converts redirect rule to AdGuard one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertRedirectToAdg = (rule) => {\n    let result;\n    if (validator.isUboRedirectCompatibleWithAdg(rule)) {\n        result = convertUboRedirectToAdg(rule);\n    } else if (validator.isAbpRedirectCompatibleWithAdg(rule)) {\n        result = convertAbpRedirectToAdg(rule);\n    } else if (validator.isValidAdgRedirectRule(rule)) {\n        result = rule;\n    }\n\n    return result;\n};\n\n/**\n * Converts Adg redirect rule to Ubo one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertAdgRedirectToUbo = (rule) => {\n    if (!validator.hasValidContentType(rule)) {\n        throw new Error(`Rule is not valid for converting to Ubo. Source type is not specified in the rule: ${rule}`);\n    } else {\n        const firstPartOfRule = substringBefore(rule, '$');\n        const uboModifiers = validator.parseModifiers(rule);\n        const adgModifiers = uboModifiers\n            .map((el) => {\n                if (el.indexOf(validator.REDIRECT_RULE_TYPES.ADG.marker) > -1) {\n                    const adgName = substringAfter(el, validator.REDIRECT_RULE_TYPES.ADG.marker);\n                    const uboName = validator.REDIRECT_RULE_TYPES.ADG.compatibility[adgName];\n                    return `${validator.REDIRECT_RULE_TYPES.UBO.marker}${uboName}`;\n                }\n                return el;\n            })\n            .join(',');\n\n        return `${firstPartOfRule}$${adgModifiers}`;\n    }\n};\n","import {\n    hit, noopFunc, noopNull, noopArray,\n} from '../helpers';\n\n/**\n * @redirect google-analytics\n *\n * @description\n * Mocks Google Analytics API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/google-analytics_analytics.js\n *\n * **Example**\n * ```\n * ||google-analytics.com/analytics.js$script,redirect=google-analytics\n * ```\n */\nexport function GoogleAnalytics(source) {\n    // eslint-disable-next-line func-names\n    const Tracker = function () { }; // constructor\n    const proto = Tracker.prototype;\n    proto.get = noopFunc;\n    proto.set = noopFunc;\n    proto.send = noopFunc;\n\n    const googleAnalyticsName = window.GoogleAnalyticsObject || 'ga';\n    // a -- fake arg for 'ga.length < 1' antiadblock checking\n    // eslint-disable-next-line no-unused-vars\n    function ga(a) {\n        const len = arguments.length;\n        if (len === 0) {\n            return;\n        }\n        // eslint-disable-next-line prefer-rest-params\n        const lastArg = arguments[len - 1];\n        if (typeof lastArg !== 'object'\n            || lastArg === null\n            || typeof lastArg.hitCallback !== 'function'\n        ) {\n            return;\n        }\n\n        try {\n            lastArg.hitCallback();\n            // eslint-disable-next-line no-empty\n        } catch (ex) { }\n    }\n\n    ga.create = () => new Tracker();\n    ga.getByName = noopNull;\n    ga.getAll = noopArray;\n    ga.remove = noopFunc;\n    ga.loaded = true;\n    window[googleAnalyticsName] = ga;\n\n    const { dataLayer } = window;\n    if (dataLayer instanceof Object\n        && dataLayer.hide instanceof Object\n        && typeof dataLayer.hide.end === 'function'\n    ) {\n        dataLayer.hide.end();\n    }\n\n    hit(source);\n}\n\nGoogleAnalytics.names = [\n    'google-analytics',\n    'ubo-google-analytics_analytics.js',\n    'google-analytics_analytics.js',\n];\n\nGoogleAnalytics.injections = [\n    hit,\n    noopFunc,\n    noopNull,\n    noopArray,\n];\n","/* eslint-disable no-underscore-dangle */\nimport { hit, noopFunc } from '../helpers';\n\n/**\n * @redirect google-analytics-ga\n *\n * @description\n * Mocks old Google Analytics API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/google-analytics_ga.js\n *\n * **Example**\n * ```\n * ||google-analytics.com/ga.js$script,redirect=google-analytics-ga\n * ```\n */\nexport function GoogleAnalyticsGa(source) {\n    // Gaq constructor\n    function Gaq() { }\n\n    Gaq.prototype.Na = noopFunc;\n    Gaq.prototype.O = noopFunc;\n    Gaq.prototype.Sa = noopFunc;\n    Gaq.prototype.Ta = noopFunc;\n    Gaq.prototype.Va = noopFunc;\n    Gaq.prototype._createAsyncTracker = noopFunc;\n    Gaq.prototype._getAsyncTracker = noopFunc;\n    Gaq.prototype._getPlugin = noopFunc;\n    Gaq.prototype.push = (data) => {\n        if (typeof data === 'function') {\n            data();\n            return;\n        }\n        if (Array.isArray(data) === false) {\n            return;\n        }\n        // https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._link\n        if (data[0] === '_link' && typeof data[1] === 'string') {\n            window.location.assign(data[1]);\n        }\n        // https://github.com/gorhill/uBlock/issues/2162\n        if (data[0] === '_set' && data[1] === 'hitCallback' && typeof data[2] === 'function') {\n            data[2]();\n        }\n    };\n\n    const gaq = new Gaq();\n    const asyncTrackers = window._gaq || [];\n    if (Array.isArray(asyncTrackers)) {\n        while (asyncTrackers[0]) {\n            gaq.push(asyncTrackers.shift());\n        }\n    }\n    // eslint-disable-next-line no-multi-assign\n    window._gaq = gaq.qf = gaq;\n\n    // Gat constructor\n    function Gat() { }\n\n    // Mock tracker api\n    const api = [\n        '_addIgnoredOrganic', '_addIgnoredRef', '_addItem', '_addOrganic',\n        '_addTrans', '_clearIgnoredOrganic', '_clearIgnoredRef', '_clearOrganic',\n        '_cookiePathCopy', '_deleteCustomVar', '_getName', '_setAccount',\n        '_getAccount', '_getClientInfo', '_getDetectFlash', '_getDetectTitle',\n        '_getLinkerUrl', '_getLocalGifPath', '_getServiceMode', '_getVersion',\n        '_getVisitorCustomVar', '_initData', '_link', '_linkByPost',\n        '_setAllowAnchor', '_setAllowHash', '_setAllowLinker', '_setCampContentKey',\n        '_setCampMediumKey', '_setCampNameKey', '_setCampNOKey', '_setCampSourceKey',\n        '_setCampTermKey', '_setCampaignCookieTimeout', '_setCampaignTrack', '_setClientInfo',\n        '_setCookiePath', '_setCookiePersistence', '_setCookieTimeout', '_setCustomVar',\n        '_setDetectFlash', '_setDetectTitle', '_setDomainName', '_setLocalGifPath',\n        '_setLocalRemoteServerMode', '_setLocalServerMode', '_setReferrerOverride', '_setRemoteServerMode',\n        '_setSampleRate', '_setSessionTimeout', '_setSiteSpeedSampleRate', '_setSessionCookieTimeout',\n        '_setVar', '_setVisitorCookieTimeout', '_trackEvent', '_trackPageLoadTime',\n        '_trackPageview', '_trackSocial', '_trackTiming', '_trackTrans',\n        '_visitCode',\n    ];\n    const tracker = api.reduce((res, funcName) => {\n        res[funcName] = noopFunc;\n        return res;\n    }, {});\n    tracker._getLinkerUrl = (a) => a;\n\n    Gat.prototype._anonymizeIP = noopFunc;\n    Gat.prototype._createTracker = noopFunc;\n    Gat.prototype._forceSSL = noopFunc;\n    Gat.prototype._getPlugin = noopFunc;\n    Gat.prototype._getTracker = () => tracker;\n    Gat.prototype._getTrackerByName = () => tracker;\n    Gat.prototype._getTrackers = noopFunc;\n    Gat.prototype.aa = noopFunc;\n    Gat.prototype.ab = noopFunc;\n    Gat.prototype.hb = noopFunc;\n    Gat.prototype.la = noopFunc;\n    Gat.prototype.oa = noopFunc;\n    Gat.prototype.pa = noopFunc;\n    Gat.prototype.u = noopFunc;\n\n    const gat = new Gat();\n    window._gat = gat;\n\n    hit(source);\n}\n\nGoogleAnalyticsGa.names = [\n    'google-analytics-ga',\n    'ubo-google-analytics_ga.js',\n    'google-analytics_ga.js',\n];\n\nGoogleAnalyticsGa.injections = [hit, noopFunc];\n","import { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @redirect googlesyndication-adsbygoogle\n *\n * @description\n * Mocks Google AdSense API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/googlesyndication_adsbygoogle.js\n *\n * **Example**\n * ```\n * ||pagead2.googlesyndication.com/pagead/js/adsbygoogle.js$script,redirect=googlesyndication-adsbygoogle\n * ```\n */\n/* eslint-enable max-len */\nexport function GoogleSyndicationAdsByGoogle(source) {\n    window.adsbygoogle = {\n        length: 0,\n        loaded: true,\n        push() {\n            this.length += 1;\n        },\n    };\n    const adElems = document.querySelectorAll('.adsbygoogle');\n    const css = 'height:1px!important;max-height:1px!important;max-width:1px!important;width:1px!important;';\n    const statusAttrName = 'data-adsbygoogle-status';\n    const ASWIFT_IFRAME_MARKER = 'aswift_';\n    const GOOGLE_ADS_IFRAME_MARKER = 'google_ads_iframe_';\n\n    let executed = false;\n    for (let i = 0; i < adElems.length; i += 1) {\n        const adElemChildNodes = adElems[i].childNodes;\n        const childNodesQuantity = adElemChildNodes.length;\n        // childNodes of .adsbygoogle can be defined if scriptlet was executed before\n        // so we should check are that childNodes exactly defined by us\n        // TODO: remake after scriptlets context developing in 1.3\n        let areIframesDefined = false;\n        if (childNodesQuantity > 0) {\n            // it should be only 2 child iframes if scriptlet was executed\n            areIframesDefined = childNodesQuantity === 2\n                // the first of child nodes should be aswift iframe\n                && adElemChildNodes[0].tagName.toLowerCase() === 'iframe'\n                && adElemChildNodes[0].id.indexOf(ASWIFT_IFRAME_MARKER) > -1\n                // the second of child nodes should be google_ads iframe\n                && adElemChildNodes[1].tagName.toLowerCase() === 'iframe'\n                && adElemChildNodes[1].id.indexOf(GOOGLE_ADS_IFRAME_MARKER) > -1;\n        }\n\n        if (!areIframesDefined) {\n            // here we do the job if scriptlet has not been executed earlier\n            adElems[i].setAttribute(statusAttrName, 'done');\n\n            const aswiftIframe = document.createElement('iframe');\n            aswiftIframe.id = `${ASWIFT_IFRAME_MARKER}${i + 1}`;\n            aswiftIframe.style = css;\n            adElems[i].appendChild(aswiftIframe);\n            const innerAswiftIframe = document.createElement('iframe');\n            aswiftIframe.contentWindow.document.body.appendChild(innerAswiftIframe);\n\n            const googleadsIframe = document.createElement('iframe');\n            googleadsIframe.id = `${GOOGLE_ADS_IFRAME_MARKER}${i + 1}`;\n            googleadsIframe.style = css;\n            adElems[i].appendChild(googleadsIframe);\n            const innerGoogleadsIframe = document.createElement('iframe');\n            googleadsIframe.contentWindow.document.body.appendChild(innerGoogleadsIframe);\n\n            executed = true;\n        }\n    }\n\n    if (executed) {\n        hit(source);\n    }\n}\n\nGoogleSyndicationAdsByGoogle.names = [\n    'googlesyndication-adsbygoogle',\n    'ubo-googlesyndication_adsbygoogle.js',\n    'googlesyndication_adsbygoogle.js',\n];\n\nGoogleSyndicationAdsByGoogle.injections = [\n    hit,\n];\n","import { hit, noopFunc } from '../helpers';\n\n/**\n * @redirect googletagmanager-gtm\n *\n * @description\n * Mocks Google Tag Manager API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/googletagmanager_gtm.js\n *\n * **Example**\n * ```\n * ||googletagmanager.com/gtm.js$script,redirect=googletagmanager-gtm\n * ```\n */\nexport function GoogleTagManagerGtm(source) {\n    window.ga = window.ga || noopFunc;\n    const { dataLayer, google_optimize } = window; // eslint-disable-line camelcase\n    if (dataLayer instanceof Object === false) {\n        return;\n    }\n\n    if (dataLayer.hide instanceof Object && typeof dataLayer.hide.end === 'function') {\n        dataLayer.hide.end();\n    }\n\n    if (typeof dataLayer.push === 'function') {\n        dataLayer.push = (data) => {\n            if (data instanceof Object && typeof data.eventCallback === 'function') {\n                setTimeout(data.eventCallback, 1);\n            }\n        };\n    }\n\n    // https://github.com/AdguardTeam/Scriptlets/issues/81\n    if (google_optimize instanceof Object && typeof google_optimize.get === 'function') { // eslint-disable-line camelcase\n        const googleOptimizeWrapper = { };\n        googleOptimizeWrapper.get = noopFunc;\n\n        window.google_optimize = googleOptimizeWrapper;\n    }\n\n    hit(source);\n}\n\nGoogleTagManagerGtm.names = [\n    'googletagmanager-gtm',\n    'ubo-googletagmanager_gtm.js',\n    'googletagmanager_gtm.js',\n];\n\nGoogleTagManagerGtm.injections = [hit, noopFunc];\n","import {\n    hit, noopFunc, noopThis, noopNull, noopArray, noopStr,\n} from '../helpers';\n\n/**\n * @redirect googletagservices-gpt\n *\n * @description\n * Mocks Google Publisher Tag API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/googletagservices_gpt.js\n *\n * **Example**\n * ```\n * ||googletagservices.com/tag/js/gpt.js$script,redirect=googletagservices-gpt\n * ```\n */\nexport function GoogleTagServicesGpt(source) {\n    const companionAdsService = {\n        addEventListener: noopThis,\n        enableSyncLoading: noopFunc,\n        setRefreshUnfilledSlots: noopFunc,\n    };\n    const contentService = {\n        addEventListener: noopThis,\n        setContent: noopFunc,\n    };\n    function PassbackSlot() { } // constructor\n\n    PassbackSlot.prototype.display = noopFunc;\n    PassbackSlot.prototype.get = noopNull;\n    PassbackSlot.prototype.set = noopThis;\n    PassbackSlot.prototype.setClickUrl = noopThis;\n    PassbackSlot.prototype.setTagForChildDirectedTreatment = noopThis;\n    PassbackSlot.prototype.setTargeting = noopThis;\n    PassbackSlot.prototype.updateTargetingFromMap = noopThis;\n\n    function SizeMappingBuilder() { } // constructor\n    SizeMappingBuilder.prototype.addSize = noopThis;\n    SizeMappingBuilder.prototype.build = noopNull;\n\n    function Slot() { } // constructor\n    Slot.prototype.addService = noopThis;\n    Slot.prototype.clearCategoryExclusions = noopThis;\n    Slot.prototype.clearTargeting = noopThis;\n    Slot.prototype.defineSizeMapping = noopThis;\n    Slot.prototype.get = noopNull;\n    Slot.prototype.getAdUnitPath = noopArray;\n    Slot.prototype.getAttributeKeys = noopArray;\n    Slot.prototype.getCategoryExclusions = noopArray;\n    Slot.prototype.getDomId = noopStr;\n    Slot.prototype.getSlotElementId = noopStr;\n    Slot.prototype.getSlotId = noopThis;\n    Slot.prototype.getTargeting = noopArray;\n    Slot.prototype.getTargetingKeys = noopArray;\n    Slot.prototype.set = noopThis;\n    Slot.prototype.setCategoryExclusion = noopThis;\n    Slot.prototype.setClickUrl = noopThis;\n    Slot.prototype.setCollapseEmptyDiv = noopThis;\n    Slot.prototype.setTargeting = noopThis;\n\n    const pubAdsService = {\n        addEventListener: noopThis,\n        clear: noopFunc,\n        clearCategoryExclusions: noopThis,\n        clearTagForChildDirectedTreatment: noopThis,\n        clearTargeting: noopThis,\n        collapseEmptyDivs: noopFunc,\n        defineOutOfPagePassback() { return new PassbackSlot(); },\n        definePassback() { return new PassbackSlot(); },\n        disableInitialLoad: noopFunc,\n        display: noopFunc,\n        enableAsyncRendering: noopFunc,\n        enableSingleRequest: noopFunc,\n        enableSyncRendering: noopFunc,\n        enableVideoAds: noopFunc,\n        get: noopNull,\n        getAttributeKeys: noopArray,\n        getTargeting: noopFunc,\n        getTargetingKeys: noopArray,\n        getSlots: noopArray,\n        refresh: noopFunc,\n        set: noopThis,\n        setCategoryExclusion: noopThis,\n        setCentering: noopFunc,\n        setCookieOptions: noopThis,\n        setForceSafeFrame: noopThis,\n        setLocation: noopThis,\n        setPublisherProvidedId: noopThis,\n        setRequestNonPersonalizedAds: noopThis,\n        setSafeFrameConfig: noopThis,\n        setTagForChildDirectedTreatment: noopThis,\n        setTargeting: noopThis,\n        setVideoContent: noopThis,\n        updateCorrelator: noopFunc,\n    };\n\n    const { googletag = {} } = window;\n    const { cmd = [] } = googletag;\n\n    googletag.apiReady = true;\n    googletag.cmd = [];\n    googletag.cmd.push = (a) => {\n        try {\n            a();\n            // eslint-disable-next-line no-empty\n        } catch (ex) { }\n        return 1;\n    };\n    googletag.companionAds = () => companionAdsService;\n    googletag.content = () => contentService;\n    googletag.defineOutOfPageSlot = () => new Slot();\n    googletag.defineSlot = () => new Slot();\n    googletag.destroySlots = noopFunc;\n    googletag.disablePublisherConsole = noopFunc;\n    googletag.display = noopFunc;\n    googletag.enableServices = noopFunc;\n    googletag.getVersion = noopStr;\n    googletag.pubads = () => pubAdsService;\n    googletag.pubadsReady = true;\n    googletag.setAdIframeTitle = noopFunc;\n    googletag.sizeMapping = () => new SizeMappingBuilder();\n\n    window.googletag = googletag;\n    while (cmd.length !== 0) {\n        googletag.cmd.push(cmd.shift());\n    }\n\n    hit(source);\n}\n\nGoogleTagServicesGpt.names = [\n    'googletagservices-gpt',\n    'ubo-googletagservices_gpt.js',\n    'googletagservices_gpt.js',\n];\n\nGoogleTagServicesGpt.injections = [\n    hit,\n    noopFunc,\n    noopThis,\n    noopNull,\n    noopArray,\n    noopStr,\n];\n","import { hit } from '../helpers';\n\n/**\n * @redirect scorecardresearch-beacon\n *\n * @description\n * Mocks Scorecard Research API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/scorecardresearch_beacon.js\n *\n * **Example**\n * ```\n * ||sb.scorecardresearch.com/beacon.js$script,redirect=scorecardresearch-beacon\n * ```\n */\nexport function ScoreCardResearchBeacon(source) {\n    window.COMSCORE = {\n        purge() {\n            // eslint-disable-next-line no-underscore-dangle\n            window._comscore = [];\n        },\n        beacon() {},\n    };\n    hit(source);\n}\n\nScoreCardResearchBeacon.names = [\n    'scorecardresearch-beacon',\n    'ubo-scorecardresearch_beacon.js',\n    'scorecardresearch_beacon.js',\n];\n\nScoreCardResearchBeacon.injections = [\n    hit,\n];\n","import { hit, noopFunc } from '../helpers';\n\n/**\n * @redirect metrika-yandex-tag\n *\n * @description\n * Mocks Yandex Metrika API.\n * https://yandex.ru/support/metrica/objects/method-reference.html\n *\n * **Example**\n * ```\n * ||mc.yandex.ru/metrika/tag.js$script,redirect=metrika-yandex-tag\n * ```\n */\nexport function metrikaYandexTag(source) {\n    const asyncCallbackFromOptions = (param, options = {}) => {\n        let { callback } = options;\n        const { ctx } = options;\n        if (typeof callback === 'function') {\n            callback = ctx !== undefined ? callback.bind(ctx) : callback;\n            setTimeout(() => callback());\n        }\n    };\n\n    const init = noopFunc;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/addfileextension.html\n     */\n    const addFileExtension = noopFunc;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/extlink.html\n     */\n    const extLink = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/file.html\n     */\n    const file = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/get-client-id.html\n     * @param {Function} cb\n     */\n    const getClientID = (cb) => {\n        setTimeout(cb(null));\n    };\n\n    /**\n     * https://yandex.ru/support/metrica/objects/hit.html\n     */\n    const hitFunc = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/notbounce.html\n     */\n    const notBounce = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/params-method.html\n     */\n    const params = noopFunc;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/reachgoal.html\n     * @param {string} target\n     * @param {Object} params\n     * @param {Function} callback\n     * @param {any} ctx\n     */\n    const reachGoal = (target, params, callback, ctx) => {\n        asyncCallbackFromOptions(null, { callback, ctx });\n    };\n\n    /**\n     * https://yandex.ru/support/metrica/objects/set-user-id.html\n     */\n    const setUserID = noopFunc;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/user-params.html\n     */\n    const userParams = noopFunc;\n\n    const api = {\n        init,\n        addFileExtension,\n        extLink,\n        file,\n        getClientID,\n        hit: hitFunc,\n        notBounce,\n        params,\n        reachGoal,\n        setUserID,\n        userParams,\n    };\n\n    function ym(id, funcName, ...args) {\n        return api[funcName] && api[funcName](...args);\n    }\n\n    window.ym = ym;\n\n    hit(source);\n}\n\nmetrikaYandexTag.names = [\n    'metrika-yandex-tag',\n];\n\nmetrikaYandexTag.injections = [hit, noopFunc];\n","import { hit, noopFunc } from '../helpers';\n\n/**\n * @redirect metrika-yandex-watch\n *\n * @description\n * Mocks the old Yandex Metrika API.\n * https://yandex.ru/support/metrica/objects/_method-reference.html\n *\n * **Example**\n * ```\n * ||mc.yandex.ru/metrika/watch.js$script,redirect=metrika-yandex-watch\n * ```\n */\nexport function metrikaYandexWatch(source) {\n    const cbName = 'yandex_metrika_callbacks';\n\n    /**\n     * Gets callback and its context from options and call it in async way\n     * @param {Object} options Yandex Metrika API options\n     */\n    const asyncCallbackFromOptions = (options = {}) => {\n        let { callback } = options;\n        const { ctx } = options;\n        if (typeof callback === 'function') {\n            callback = ctx !== undefined ? callback.bind(ctx) : callback;\n            setTimeout(() => callback());\n        }\n    };\n\n    function Metrika() { } // constructor\n\n    // Methods without options\n    Metrika.prototype.addFileExtension = noopFunc;\n    Metrika.prototype.getClientID = noopFunc;\n    Metrika.prototype.setUserID = noopFunc;\n    Metrika.prototype.userParams = noopFunc;\n\n    // Methods with options\n    // The order of arguments should be kept in according to API\n    Metrika.prototype.extLink = (url, options) => {\n        asyncCallbackFromOptions(options);\n    };\n    Metrika.prototype.file = (url, options) => {\n        asyncCallbackFromOptions(options);\n    };\n    Metrika.prototype.hit = (url, options) => {\n        asyncCallbackFromOptions(options);\n    };\n    Metrika.prototype.reachGoal = (target, params, cb, ctx) => {\n        asyncCallbackFromOptions({ callback: cb, ctx });\n    };\n    Metrika.prototype.notBounce = asyncCallbackFromOptions;\n\n    if (window.Ya) {\n        window.Ya.Metrika = Metrika;\n    } else {\n        window.Ya = { Metrika };\n    }\n\n    if (window[cbName] && Array.isArray(window[cbName])) {\n        window[cbName].forEach((func) => {\n            if (typeof func === 'function') {\n                func();\n            }\n        });\n    }\n\n    hit(source);\n}\n\nmetrikaYandexWatch.names = [\n    'metrika-yandex-watch',\n];\n\nmetrikaYandexWatch.injections = [hit, noopFunc];\n","import { hit, noopFunc } from '../helpers';\n\n/**\n * @redirect amazon-apstag\n *\n * @description\n * Mocks Amazon's apstag.js\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/f842ab6d3c1cf0394f95d27092bf59627262da40/src/web_accessible_resources/amazon_apstag.js\n *\n * **Example**\n * ```\n * ||amazon-adsystem.com/aax2/apstag.js$script,redirect=amazon-apstag\n * ```\n */\nexport function AmazonApstag(source) {\n    const apstagWrapper = {\n        fetchBids(a, b) {\n            if (typeof b === 'function') {\n                b([]);\n            }\n        },\n        init: noopFunc,\n        setDisplayBids: noopFunc,\n        targetingKeys: noopFunc,\n    };\n\n    window.apstag = apstagWrapper;\n\n    hit(source);\n}\n\nAmazonApstag.names = [\n    'amazon-apstag',\n    'ubo-amazon_apstag.js',\n    'amazon_apstag.js',\n];\n\nAmazonApstag.injections = [hit, noopFunc];\n","import {\n    attachDependencies,\n    addCall,\n    wrapInNonameFunc,\n    passSourceAndProps,\n} from '../helpers/injector';\n\nimport validator from '../helpers/validator';\n\nimport {\n    convertUboRedirectToAdg,\n    convertAbpRedirectToAdg,\n    convertRedirectToAdg,\n    convertAdgRedirectToUbo,\n} from '../helpers/converter';\n\nimport * as redirectsList from './redirectsList';\n\n/**\n * Finds redirect resource by it's name\n * @param {string} name - redirect name\n */\nconst getRedirectByName = (name) => {\n    const redirects = Object.keys(redirectsList).map((key) => redirectsList[key]);\n    return redirects.find((r) => r.names && r.names.indexOf(name) > -1);\n};\n\n/**\n * @typedef {Object} Source - redirect properties\n * @property {string} name redirect name\n * @property {Array<string>} args Arguments for redirect function\n * @property {'extension'|'test'} [engine] -\n * Defines the final form of redirect string presentation\n * @property {boolean} [verbose] flag to enable printing to console debug information\n */\n\n/**\n * Returns redirect code by param\n * @param {Source} source\n * @returns {string} redirect code\n */\nconst getRedirectCode = (source) => {\n    const redirect = getRedirectByName(source.name);\n    let result = attachDependencies(redirect);\n    result = addCall(redirect, result);\n\n    // redirect code for different sources is checked in tests\n    // so it should be just a code without any source and props passed\n    result = source.engine === 'test'\n        ? wrapInNonameFunc(result)\n        : passSourceAndProps(source, result);\n\n    return result;\n};\n\nexport const redirectsCjs = {\n    getCode: getRedirectCode,\n    isAdgRedirectRule: validator.isAdgRedirectRule,\n    isValidAdgRedirectRule: validator.isValidAdgRedirectRule,\n    isAdgRedirectCompatibleWithUbo: validator.isAdgRedirectCompatibleWithUbo,\n    isUboRedirectCompatibleWithAdg: validator.isUboRedirectCompatibleWithAdg,\n    isAbpRedirectCompatibleWithAdg: validator.isAbpRedirectCompatibleWithAdg,\n    convertUboRedirectToAdg,\n    convertAbpRedirectToAdg,\n    convertRedirectToAdg,\n    convertAdgRedirectToUbo,\n};\n","import { redirectsCjs } from '../redirects';\n\nimport {\n    attachDependencies,\n    addCall,\n    passSourceAndProps,\n    wrapInNonameFunc,\n} from '../helpers/injector';\n\nimport validator from '../helpers/validator';\n\nimport {\n    isValidScriptletRule,\n    convertUboScriptletToAdg,\n    convertAbpSnippetToAdg,\n    convertScriptletToAdg,\n    convertAdgScriptletToUbo,\n} from '../helpers/converter';\n\n/**\n * @typedef {Object} Source - scriptlet properties\n * @property {string} name Scriptlet name\n * @property {Array<string>} args Arguments for scriptlet function\n * @property {'extension'|'corelibs'|'test'} engine -\n * Defines the final form of scriptlet string presentation\n * @property {string} [version]\n * @property {boolean} [verbose] flag to enable printing to console debug information\n * @property {string} [ruleText] Source rule text is used for debugging purposes\n * @property {string} [domainName] domain name where scriptlet is applied; for debugging purposes\n */\n\n/**\n * Returns scriptlet code by param\n * @param {Source} source\n * @returns {string} scriptlet code\n */\nfunction getScriptletCode(source) {\n    if (!validator.isValidScriptletName(source.name)) {\n        return null;\n    }\n\n    const scriptlet = validator.getScriptletByName(source.name);\n    let result = attachDependencies(scriptlet);\n    result = addCall(scriptlet, result);\n    result = source.engine === 'corelibs' || source.engine === 'test'\n        ? wrapInNonameFunc(result)\n        : passSourceAndProps(source, result);\n    return result;\n}\n\n/**\n * Scriptlets variable\n *\n * @returns {Object} object with methods:\n * `invoke` method receives one argument with `Source` type\n * `validate` method receives one argument with `String` type\n */\nconst scriptletsObject = (() => ({\n    invoke: getScriptletCode,\n    isValidScriptletName: validator.isValidScriptletName,\n    isValidScriptletRule,\n    isAdgScriptletRule: validator.isAdgScriptletRule,\n    isUboScriptletRule: validator.isUboScriptletRule,\n    isAbpSnippetRule: validator.isAbpSnippetRule,\n    convertUboToAdg: convertUboScriptletToAdg,\n    convertAbpToAdg: convertAbpSnippetToAdg,\n    convertScriptletToAdg,\n    convertAdgToUbo: convertAdgScriptletToUbo,\n    redirects: redirectsCjs,\n}))();\n\nexport default scriptletsObject;\n","import scriptletsObject from './index';\n\n/**\n * Expose scriptlets to global\n */\n// eslint-disable-next-line no-undef\nscriptlets = scriptletsObject;\n"],"names":["randomId","Math","random","toString","substr","setPropertyAccess","object","property","descriptor","currentDescriptor","Object","getOwnPropertyDescriptor","configurable","defineProperty","getPropertyInChain","base","chain","pos","indexOf","prop","slice","nextBase","undefined","getWildcardPropertyInChain","lookThrough","output","keys","forEach","key","push","shouldLookThrough","Array","isArray","nextProp","baseKeys","item","escapeRegExp","str","replace","toRegExp","length","RegExp","escaped","getBeforeRegExp","rx","index","search","substring","startsWith","prefix","endsWith","substringAfter","separator","substringBefore","wrapInSingleQuotes","getStringInBraces","firstIndex","lastIndex","lastIndexOf","createOnErrorHandler","rid","nativeOnError","window","onerror","onError","error","Function","args","apply","noopFunc","noopNull","trueFunc","falseFunc","noopThis","noopArray","noopStr","hit","source","message","verbose","log","console","bind","trace","ruleText","domainName","AG_SCRIPTLET_MARKER","UBO_SCRIPTLET_MARKER","ruleStartIndex","rulePart","LOG_MARKER","e","__debug","observeDOMChanges","callback","observeAttrs","attrsToObserv","throttle","method","delay","wait","savedArgs","wrapper","setTimeout","THROTTLE_DELAY_MS","observer","MutationObserver","callbackWrapper","connect","observe","document","documentElement","childList","subtree","attributes","attributeFilter","disconnect","matchStackTrace","stackRegexp","stackTrace","refinedStackTrace","split","map","line","trim","join","test","flatten","input","stack","el","res","next","pop","reverse","attachDependencies","scriptlet","injections","reduce","accum","dep","dependencies","name","addCall","code","passSourceAndProps","sourceString","JSON","stringify","argsString","params","wrapInNonameFunc","_arrayWithHoles","arr","_iterableToArrayLimit","i","Symbol","iterator","_arr","_n","_d","_e","_i","_s","done","value","err","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","prototype","call","constructor","from","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_defineProperty","obj","enumerable","writable","iterateWithTransitions","iterable","transitions","init","state","ADG_SCRIPTLET_MASK","wordSaver","strs","saveSymb","s","saveStr","getAll","parseRule","TRANSITION","OPENED","PARAM","CLOSED","opened","rule","sep","char","transition","symb","Error","param","saver","preIndex","before","abortOnPropertyRead","abort","ReferenceError","setChainPropAccess","owner","chainInfo","setter","a","get","set","names","abortOnPropertyWrite","preventSetTimeout","match","nativeTimeout","nativeIsNaN","Number","isNaN","shouldLog","INVERT_MARKER","isNotMatch","isNotDelay","parseInt","timeoutWrapper","timeout","shouldPrevent","preventSetInterval","nativeInterval","setInterval","intervalWrapper","interval","preventWindowOpen","replacement","nativeOpen","open","openWrapper","result","isProp","propertyPart","propertyName","propertyValue","resObj","abortCurrentInlineScript","searchRegexp","getCurrentScript","currentScript","scripts","getElementsByTagName","ourScript","scriptEl","content","textContent","textContentGetter","Node","HTMLScriptElement","props","propIndex","baseName","currentValue","setConstant","constantValue","parseFloat","abs","canceled","mustCancel","removeCookie","regex","removeCookieFromHost","cookieName","hostName","cookieSpec","domain1","domain2","path","expiration","cookie","rmCookie","cookieStr","hostParts","location","hostname","addEventListener","preventAddEventListener","eventSearch","funcSearch","eventSearchRegexp","funcSearchRegexp","nativeAddEventListener","EventTarget","addEventListenerWrapper","eventName","funcToCheck","preventBab","nativeSetTimeout","babRegex","signatures","check","tokens","j","token","found","nativeEval","eval","bodyEl","body","style","removeProperty","getElementById","parentNode","removeChild","nowebrtc","RTCPeerConnection","webkitRTCPeerConnection","rtcReplacement","config","close","createDataChannel","createOffer","setRemoteDescription","rtc","b","send","logAddEventListener","callbackToLog","logEval","evalWrapper","nativeFunction","FunctionWrapper","create","noeval","preventEvalIf","payload","preventFab","Fab","clearEvent","emitEvent","on","onDetected","onNotDetected","setOption","fab","getSetFab","getsetfab","hasOwnProperty","FuckAdBlock","BlockAdBlock","SniffAdBlock","fuckAdBlock","blockAdBlock","sniffAdBlock","setPopadsDummy","PopAds","popns","defineProperties","preventPopadsNet","throwError","preventAdfly","isDigit","data","handler","encodedURL","evenChars","oddChars","charAt","ii","temp","decodedURL","atob","stop","onbeforeunload","href","val","applyHandler","debugOnPropertyRead","debugOnPropertyWrite","debugCurrentInlineScript","removeAttr","attrs","selector","rmattr","nodes","querySelectorAll","removed","node","attr","removeAttribute","removeClass","classNames","selectors","className","removeClassHandler","Set","foundedNodes","add","elements","element","classList","contains","remove","CLASS_ATTR_NAME","disableNewtabLinks","ev","target","localName","hasAttribute","stopPropagation","preventDefault","adjustSetInterval","boost","nativeIsFinite","isFinite","cb","d","adjustSetTimeout","dirString","times","dir","dirWrapper","jsonPrune","propsToRemove","requiredInitialProps","prunePaths","requiredPaths","isPruningNeeded","root","shouldProcess","requiredPath","lastNestedPropName","hasWildcard","details","nativeParse","parse","parseWrapper","ownerObjArr","ownerObj","preventRequestAnimationFrame","nativeRequestAnimationFrame","requestAnimationFrame","doNotMatch","rafWrapper","logMessage","setCookie","valueToSet","pathToSet","cookieData","encodeURIComponent","hideInShadowDom","baseSelector","Element","attachShadow","findHostElements","rootElement","hosts","domElems","shadowRoot","pierceShadowDom","hostElements","targets","innerHostsAcc","collectTargets","host","simpleElems","shadowRootElem","shadowChildren","innerHosts","hideHandler","hidden","DISPLAY_NONE_CSS","targetEl","cssText","JS_RULE_MARKER","COMMENT_MARKER","isComment","UBO_SCRIPTLET_MASK_REG","UBO_SCRIPTLET_MASK_1","UBO_SCRIPTLET_MASK_2","UBO_SCRIPTLET_EXCEPTION_MASK_1","UBO_SCRIPTLET_EXCEPTION_MASK_2","ABP_SCRIPTLET_MASK","ABP_SCRIPTLET_EXCEPTION_MASK","ADG_CSS_MASK_REG","isAdgScriptletRule","isUboScriptletRule","isAbpSnippetRule","getScriptletByName","scriptlets","scriptletsList","find","isValidScriptletName","ADG_UBO_REDIRECT_MARKER","ABP_REDIRECT_MARKER","VALID_SOURCE_TYPES","validAdgRedirects","redirects","filter","adg","objFromEntries","pairs","acc","uboToAdgCompatibility","ubo","abpToAdgCompatibility","abp","adgToUboCompatibility","validAdgCompatibility","REDIRECT_RULE_TYPES","VALID_ADG","marker","compatibility","ADG","UBO","ABP","parseModifiers","getRedirectName","ruleModifiers","redirectNamePart","isAdgRedirectRule","MARKER_IN_BASE_PART_MASK","isRedirectRuleByType","type","redirectName","isValidAdgRedirectRule","isAdgRedirectCompatibleWithUbo","isUboRedirectCompatibleWithAdg","isAbpRedirectCompatibleWithAdg","hasValidContentType","sourceType","validator","_iterableToArray","iter","_toArray","iterableToArray","ADGUARD_SCRIPTLET_MASK_REG","ADGUARD_SCRIPTLET_TEMPLATE","ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE","UBO_SCRIPTLET_TEMPLATE","UBO_SCRIPTLET_EXCEPTION_TEMPLATE","UBO_ALIAS_NAME_MARKER","UBO_XHR_TYPE","ADG_XHR_TYPE","getSentences","reg","replacePlaceholders","convertUboScriptletToAdg","domains","mask","template","arg","outputArg","adgRule","convertAbpSnippetToAdg","SEMICOLON_DIVIDER","convertScriptletToAdg","convertAdgScriptletToUbo","parsedName","parsedParams","adgScriptletObject","scriptletList","aliases","uboAlias","alias","includes","uboName","uboRule","isValidScriptletRule","rulesArray","isValid","parsedRule","convertUboRedirectToAdg","firstPartOfRule","uboModifiers","adgModifiers","adgName","convertAbpRedirectToAdg","abpModifiers","abpName","convertRedirectToAdg","convertAdgRedirectToUbo","GoogleAnalytics","Tracker","proto","googleAnalyticsName","GoogleAnalyticsObject","ga","arguments","lastArg","hitCallback","ex","getByName","loaded","dataLayer","hide","end","GoogleAnalyticsGa","Gaq","Na","O","Sa","Ta","Va","_createAsyncTracker","_getAsyncTracker","_getPlugin","assign","gaq","asyncTrackers","_gaq","shift","qf","Gat","api","tracker","funcName","_getLinkerUrl","_anonymizeIP","_createTracker","_forceSSL","_getTracker","_getTrackerByName","_getTrackers","aa","ab","hb","la","oa","pa","u","gat","_gat","GoogleSyndicationAdsByGoogle","adsbygoogle","adElems","css","statusAttrName","ASWIFT_IFRAME_MARKER","GOOGLE_ADS_IFRAME_MARKER","executed","adElemChildNodes","childNodes","childNodesQuantity","areIframesDefined","tagName","toLowerCase","id","setAttribute","aswiftIframe","createElement","appendChild","innerAswiftIframe","contentWindow","googleadsIframe","innerGoogleadsIframe","GoogleTagManagerGtm","google_optimize","eventCallback","googleOptimizeWrapper","GoogleTagServicesGpt","companionAdsService","enableSyncLoading","setRefreshUnfilledSlots","contentService","setContent","PassbackSlot","display","setClickUrl","setTagForChildDirectedTreatment","setTargeting","updateTargetingFromMap","SizeMappingBuilder","addSize","build","Slot","addService","clearCategoryExclusions","clearTargeting","defineSizeMapping","getAdUnitPath","getAttributeKeys","getCategoryExclusions","getDomId","getSlotElementId","getSlotId","getTargeting","getTargetingKeys","setCategoryExclusion","setCollapseEmptyDiv","pubAdsService","clear","clearTagForChildDirectedTreatment","collapseEmptyDivs","defineOutOfPagePassback","definePassback","disableInitialLoad","enableAsyncRendering","enableSingleRequest","enableSyncRendering","enableVideoAds","getSlots","refresh","setCentering","setCookieOptions","setForceSafeFrame","setLocation","setPublisherProvidedId","setRequestNonPersonalizedAds","setSafeFrameConfig","setVideoContent","updateCorrelator","googletag","cmd","apiReady","companionAds","defineOutOfPageSlot","defineSlot","destroySlots","disablePublisherConsole","enableServices","getVersion","pubads","pubadsReady","setAdIframeTitle","sizeMapping","ScoreCardResearchBeacon","COMSCORE","purge","_comscore","beacon","metrikaYandexTag","asyncCallbackFromOptions","options","ctx","addFileExtension","extLink","file","getClientID","hitFunc","notBounce","reachGoal","setUserID","userParams","ym","metrikaYandexWatch","cbName","Metrika","url","Ya","func","AmazonApstag","apstagWrapper","fetchBids","setDisplayBids","targetingKeys","apstag","getRedirectByName","redirectsList","r","getRedirectCode","redirect","engine","redirectsCjs","getCode","getScriptletCode","scriptletsObject","invoke","convertUboToAdg","convertAbpToAdg","convertAdgToUbo"],"mappings":"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"}