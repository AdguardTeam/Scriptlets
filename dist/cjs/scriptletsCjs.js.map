{"version":3,"file":"scriptletsCjs.js","sources":["../../src/helpers/random-id.js","../../src/helpers/set-property-access.js","../../src/helpers/get-property-in-chain.js","../../src/helpers/string-utils.js","../../src/helpers/create-on-error-handler.js","../../src/helpers/noop.js","../../src/helpers/hit.js","../../src/helpers/observer.js","../../src/helpers/index.js","../../src/helpers/injector.js","../../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../../node_modules/@babel/runtime/helpers/nonIterableRest.js","../../node_modules/@babel/runtime/helpers/slicedToArray.js","../../node_modules/@babel/runtime/helpers/defineProperty.js","../../src/helpers/parse-rule.js","../../src/scriptlets/abort-on-property-read.js","../../src/scriptlets/abort-on-property-write.js","../../src/scriptlets/prevent-setTimeout.js","../../src/scriptlets/prevent-setInterval.js","../../src/scriptlets/prevent-window-open.js","../../src/scriptlets/abort-current-inline-script.js","../../src/scriptlets/set-constant.js","../../src/scriptlets/remove-cookie.js","../../src/scriptlets/prevent-addEventListener.js","../../src/scriptlets/prevent-bab.js","../../src/scriptlets/nowebrtc.js","../../src/scriptlets/log-addEventListener.js","../../src/scriptlets/log-eval.js","../../src/scriptlets/log.js","../../src/scriptlets/noeval.js","../../src/scriptlets/prevent-eval-if.js","../../src/scriptlets/prevent-fab-3.2.0.js","../../src/scriptlets/set-popads-dummy.js","../../src/scriptlets/prevent-popads-net.js","../../src/scriptlets/prevent-adfly.js","../../src/scriptlets/debug-on-property-read.js","../../src/scriptlets/debug-on-property-write.js","../../src/scriptlets/debug-current-inline-script.js","../../src/scriptlets/remove-attr.js","../../src/scriptlets/remove-class.js","../../src/scriptlets/disable-newtab-links.js","../../src/scriptlets/adjust-setInterval.js","../../src/scriptlets/adjust-setTimeout.js","../../src/scriptlets/dir-string.js","../../src/scriptlets/json-prune.js","../../src/scriptlets/scriptletsList.js","../../src/helpers/validator.js","../../node_modules/@babel/runtime/helpers/iterableToArray.js","../../node_modules/@babel/runtime/helpers/toArray.js","../../src/helpers/converter.js","../../src/redirects/google-analytics.js","../../src/redirects/google-analytics-ga.js","../../src/redirects/googlesyndication-adsbygoogle.js","../../src/redirects/googletagmanager-gtm.js","../../src/redirects/googletagservices-gpt.js","../../src/redirects/scorecardresearch-beacon.js","../../src/redirects/metrika-yandex-tag.js","../../src/redirects/metrika-yandex-watch.js","../../src/redirects/index.js","../../src/scriptlets/index.js","../../src/scriptlets/scriptletsCjsWrapper.js"],"sourcesContent":["\n/**\n * Generate random six symbols id\n */\nexport function randomId() {\n    return Math.random().toString(36).substr(2, 9);\n}\n","/**\n * Set getter and setter to property if it's configurable\n * @param {Object} object target object with property\n * @param {string} property property name\n * @param {Object} descriptor contains getter and setter functions\n * @returns {boolean} is operation successful\n */\nexport function setPropertyAccess(object, property, descriptor) {\n    const currentDescriptor = Object.getOwnPropertyDescriptor(object, property);\n    if (currentDescriptor && !currentDescriptor.configurable) {\n        return false;\n    }\n    Object.defineProperty(object, property, descriptor);\n    return true;\n}\n","/**\n * @typedef Chain\n * @property {Object} base\n * @property {string} prop\n * @property {string} [chain]\n */\n\n/**\n * Check is property exist in base object recursively\n *\n * If property doesn't exist in base object,\n * defines this property (for addProp = true)\n * and returns base, property name and remaining part of property chain\n *\n * @param {Object} base\n * @param {string} chain\n * @param {Booleam} addProp - defines is nonexistent base property should be assigned as 'undefined'\n * @returns {Chain}\n */\nexport function getPropertyInChain(base, chain, addProp = true) {\n    const pos = chain.indexOf('.');\n    if (pos === -1) {\n        return { base, prop: chain };\n    }\n    const prop = chain.slice(0, pos);\n    const own = base[prop];\n    chain = chain.slice(pos + 1);\n    if (own !== undefined) {\n        return getPropertyInChain(own, chain, addProp);\n    }\n\n    if (!addProp) {\n        return false;\n    }\n\n    Object.defineProperty(base, prop, { configurable: true });\n    return { base: own, prop, chain };\n}\n","/**\n * Escapes special chars in string\n * @param {string} str\n * @returns {string}\n */\nexport const escapeRegExp = (str) => str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n\n/**\n * Converts search string to the regexp\n * TODO think about nested dependencies, but be careful with dependency loops\n * @param {string} str search string\n * @returns {RegExp}\n */\nexport const toRegExp = (str) => {\n    if (str[0] === '/' && str[str.length - 1] === '/') {\n        return new RegExp(str.slice(1, -1));\n    }\n    const escaped = str.replace(/[.*+?^${}()|[\\]\\\\]/g, '\\\\$&');\n    return new RegExp(escaped);\n};\n\n/**\n * Get string before regexp first match\n * @param {string} str\n * @param {RegExp} rx\n */\nexport const getBeforeRegExp = (str, rx) => {\n    const index = str.search(rx);\n    return str.substring(0, index);\n};\n\nexport const startsWith = (str, prefix) => {\n    return str && str.indexOf(prefix) === 0;\n};\n\nexport const substringAfter = (str, separator) => {\n    if (!str) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? '' : str.substring(index + separator.length);\n};\n\nexport const substringBefore = (str, separator) => {\n    if (!str || !separator) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? str : str.substring(0, index);\n};\n\n/**\n * Wrap str in single qoutes and replaces single quotes to doudle one\n * @param {string} str\n */\nexport const wrapInSingleQuotes = (str) => {\n    if ((str[0] === '\\'' && str[str.length - 1] === '\\'')\n        || (str[0] === '\"' && str[str.length - 1] === '\"')) {\n        str = str.substring(1, str.length - 1);\n    }\n    // eslint-disable-next-line no-useless-escape\n    str = str.replace(/\\'/g, '\"');\n\n    return `'${str}'`;\n};\n\n/**\n * Returns substring enclosed in the widest braces\n * @param {string} str\n */\nexport const getStringInBraces = (str) => {\n    const firstIndex = str.indexOf('(');\n    const lastIndex = str.lastIndexOf(')');\n    return str.substring(firstIndex + 1, lastIndex);\n};\n","/**\n * Generates function which silents global errors on page generated by scriptlet\n * If error doesn't belong to our error we transfer it to the native onError handler\n * @param {string} rid - unique identifier of scriptlet\n * @return {onError}\n */\nexport function createOnErrorHandler(rid) {\n    // eslint-disable-next-line consistent-return\n    const nativeOnError = window.onerror;\n    return function onError(error, ...args) {\n        if (typeof error === 'string' && error.indexOf(rid) !== -1) {\n            return true;\n        }\n        if (nativeOnError instanceof Function) {\n            return nativeOnError.apply(this, [error, ...args]);\n        }\n        return false;\n    };\n}\n","/**\n * Noop function\n */\nexport const noop = () => { };\n\n/**\n * Function returns null\n */\nexport const noopNull = () => null;\n\n/**\n * Function returns this\n */\nexport function noopThis() {\n    return this;\n}\n\n/**\n * Function returns empty array\n */\nexport const noopArray = () => [];\n\n/**\n * Function returns empty string\n */\nexport const noopStr = () => '';\n","/* eslint-disable no-console, no-underscore-dangle */\n/**\n * Hit used only for debug purposes now\n * @param {Source} source\n * @param {string} message optional message\n */\nexport const hit = (source, message) => {\n    if (source.verbose !== true) {\n        return;\n    }\n\n    try {\n        const log = console.log.bind(console);\n        const trace = console.trace.bind(console);\n\n        const prefix = source.ruleText || '';\n\n        if (message) {\n            log(`${prefix} message:\\n${message}`);\n        }\n\n        log(`${prefix} trace start`);\n        if (trace) {\n            trace();\n        }\n        log(`${prefix} trace end`);\n    } catch (e) {\n        // try catch for Edge 15\n        // In according to this issue https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/14495220/\n        // console.log throws an error\n    }\n\n    // This is necessary for unit-tests only!\n    if (typeof window.__debugScriptlets === 'function') {\n        window.__debugScriptlets(source);\n    }\n};\n","/**\n * DOM tree changes observer. Used for 'remove-attr' and 'remove-class' scriptlets\n * @param {Function} callback\n * @param {Boolean} observeAttrs - optional parameter - should observer check attibutes changes\n */\nexport const observeDOMChanges = (callback, observeAttrs = false, attrsToObserv = []) => {\n    /**\n     * Returns a wrapper, passing the call to 'method' at maximum once per 'delay' milliseconds.\n     * Those calls that fall into the \"cooldown\" period, are ignored\n     * @param {Function} method\n     * @param {Number} delay - milliseconds\n     */\n    const throttle = (method, delay) => {\n        let wait = false;\n        let savedArgs;\n        const wrapper = (...args) => {\n            if (wait) {\n                savedArgs = args;\n                return;\n            }\n            method(...args);\n            wait = true;\n            setTimeout(() => {\n                wait = false;\n                if (savedArgs) {\n                    wrapper(savedArgs);\n                    savedArgs = null;\n                }\n            }, delay);\n        };\n        return wrapper;\n    };\n\n    /**\n     * 'delay' in milliseconds for 'throttle' method\n     */\n    const THROTTLE_DELAY_MS = 20;\n    /**\n     * Used for remove-class\n     */\n    // eslint-disable-next-line no-use-before-define\n    const observer = new MutationObserver(throttle(callbackWrapper, THROTTLE_DELAY_MS));\n\n    const connect = () => {\n        if (attrsToObserv.length > 0) {\n            observer.observe(document.documentElement, {\n                childList: true,\n                subtree: true,\n                attributes: observeAttrs,\n                attributeFilter: attrsToObserv,\n            });\n        } else {\n            observer.observe(document.documentElement, {\n                childList: true,\n                subtree: true,\n                attributes: observeAttrs,\n            });\n        }\n    };\n    const disconnect = () => {\n        observer.disconnect();\n    };\n    function callbackWrapper() {\n        disconnect();\n        callback();\n        connect();\n    }\n\n    connect();\n};\n","/**\n * This file must export all used dependencies\n */\nexport * from './random-id';\nexport * from './set-property-access';\nexport * from './get-property-in-chain';\nexport * from './string-utils';\nexport * from './create-on-error-handler';\nexport * from './noop';\nexport * from './hit';\nexport * from './observer';\n","import * as dependencies from '.';\n\n\n/**\n * Concat dependencies to scriptlet code\n * @param {string} scriptlet string view of scriptlet\n */\nexport function attachDependencies(scriptlet) {\n    const { injections = [] } = scriptlet;\n    return injections.reduce((accum, dep) => `${accum}\\n${dependencies[dep.name]}`, scriptlet.toString());\n}\n\n/**\n * Add scriptlet call to existing code\n * @param {Function} scriptlet\n * @param {string} code\n */\nexport function addCall(scriptlet, code) {\n    return `${code};\n        const updatedArgs = args ? [].concat(source).concat(args) : [source];\n        ${scriptlet.name}.apply(this, updatedArgs);\n    `;\n}\n\n/**\n * Wrap function into IIFE (Immediately invoked function expression)\n *\n * @param {Source} source - object with scriptlet properties\n * @param {string} code - scriptlet source code with dependencies\n *\n * @returns {string} full scriptlet code\n *\n * @example\n * const source = {\n *      args: [\"aaa\", \"bbb\"],\n *      name: 'noeval',\n * };\n * const code = \"function noeval(source, args) { alert(source); } noeval.apply(this, args);\"\n * const result = wrapInIIFE(source, code);\n *\n * // result\n * `(function(source, args) {\n *      function noeval(source) { alert(source); }\n *      noeval.apply(this, args);\n * )({\"args\": [\"aaa\", \"bbb\"], \"name\":\"noeval\"}, [\"aaa\", \"bbb\"])`\n */\nexport function passSourceAndProps(source, code) {\n    if (source.hit) {\n        source.hit = source.hit.toString();\n    }\n    const sourceString = JSON.stringify(source);\n    const argsString = source.args ? `[${source.args.map(JSON.stringify)}]` : undefined;\n    const params = argsString ? `${sourceString}, ${argsString}` : sourceString;\n    return `(function(source, args){\\n${code}\\n})(${params});`;\n}\n\n/**\n * Wrap code in no name function\n * @param {string} code which must be wrapped\n */\nexport function wrapInNonameFunc(code) {\n    return `function(source, args){\\n${code}\\n}`;\n}\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","/**\n * Iterate over iterable argument and evaluate current state with transitions\n * @param {string} init first transition name\n * @param {Array|Collection|string} iterable\n * @param {Object} transitions transtion functions\n * @param {any} args arguments which should be passed to transition functions\n */\nfunction iterateWithTransitions(iterable, transitions, init, args) {\n    let state = init || Object.keys(transitions)[0];\n    for (let i = 0; i < iterable.length; i += 1) {\n        state = transitions[state](iterable, i, args);\n    }\n    return state;\n}\n\n/**\n * AdGuard scriptlet rule mask\n */\nexport const ADG_SCRIPTLET_MASK = '#//scriptlet';\n\n/**\n * Helper to accumulate an array of strings char by char\n */\nconst wordSaver = () => {\n    let str = '';\n    const strs = [];\n    const saveSymb = (s) => {\n        str += s;\n        return str;\n    };\n    const saveStr = () => {\n        strs.push(str);\n        str = '';\n    };\n    const getAll = () => [...strs];\n\n    return { saveSymb, saveStr, getAll };\n};\n\nconst substringAfter = (str, separator) => {\n    if (!str) {\n        return str;\n    }\n    const index = str.indexOf(separator);\n    return index < 0 ? '' : str.substring(index + separator.length);\n};\n\n/**\n * Parse and validate scriptlet rule\n * @param {*} ruleText\n * @returns {{name: string, args: Array<string>}}\n */\nexport const parseRule = (ruleText) => {\n    ruleText = substringAfter(ruleText, ADG_SCRIPTLET_MASK);\n    /**\n     * Transition names\n     */\n    const TRANSITION = {\n        OPENED: 'opened',\n        PARAM: 'param',\n        CLOSED: 'closed',\n    };\n\n    /**\n     * Transition function: the current index position in start, end or between params\n     * @param {string} rule\n     * @param {number} index\n     * @param {Object} Object\n     * @property {Object} Object.sep contains prop symb with current separator char\n     */\n    const opened = (rule, index, { sep }) => {\n        const char = rule[index];\n        let transition;\n        switch (char) {\n        case ' ':\n        case '(':\n        case ',': {\n            transition = TRANSITION.OPENED;\n            break;\n        }\n        case '\\'':\n        case '\"': {\n            sep.symb = char;\n            transition = TRANSITION.PARAM;\n            break;\n        }\n        case ')': {\n            transition = index === rule.length - 1\n                ? TRANSITION.CLOSED\n                : TRANSITION.OPENED;\n            break;\n        }\n        default: {\n            throw new Error('The rule is not a scriptlet');\n        }\n        }\n\n        return transition;\n    };\n    /**\n     * Transition function: the current index position inside param\n     * @param {string} rule\n     * @param {number} index\n     * @param {Object} Object\n     * @property {Object} Object.sep contains prop `symb` with current separator char\n     * @property {Object} Object.saver helper which allow to save strings by car by char\n     */\n    const param = (rule, index, { saver, sep }) => {\n        const char = rule[index];\n        switch (char) {\n        case '\\'':\n        case '\"': {\n            const preIndex = index - 1;\n            const before = rule[preIndex];\n            if (char === sep.symb && before !== '\\\\') {\n                sep.symb = null;\n                saver.saveStr();\n                return TRANSITION.OPENED;\n            }\n        }\n        // eslint-disable-next-line no-fallthrough\n        default: {\n            saver.saveSymb(char);\n            return TRANSITION.PARAM;\n        }\n        }\n    };\n    const transitions = {\n        [TRANSITION.OPENED]: opened,\n        [TRANSITION.PARAM]: param,\n        [TRANSITION.CLOSED]: () => { },\n    };\n    const sep = { symb: null };\n    const saver = wordSaver();\n    const state = iterateWithTransitions(ruleText, transitions, TRANSITION.OPENED, { sep, saver });\n\n    if (state !== 'closed') {\n        throw new Error(`Invalid scriptlet rule ${ruleText}`);\n    }\n\n    const args = saver.getAll();\n    return {\n        name: args[0],\n        args: args.slice(1),\n    };\n};\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-on-property-read\n *\n * @description\n * Aborts a script when it attempts to **read** the specified property.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-on-property-readjs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L864\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('abort-on-property-read', <property>)\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n *\n * **Examples**\n * ```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet('abort-on-property-read', 'alert')\n *\n * ! Aborts script when it tries to access `navigator.language`\n * example.org#%#//scriptlet('abort-on-property-read', 'navigator.language')\n * ```\n */\n/* eslint-enable max-len */\nexport function abortOnPropertyRead(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        throw new ReferenceError(rid);\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, {\n            get: abort,\n            set: () => {\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\nabortOnPropertyRead.names = [\n    'abort-on-property-read',\n    'abort-on-property-read.js',\n    'ubo-abort-on-property-read.js',\n    'aopr.js',\n    'ubo-aopr.js',\n    'abp-abort-on-property-read',\n];\nabortOnPropertyRead.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-on-property-write\n *\n * @description\n * Aborts a script when it attempts to **write** the specified property.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-on-property-writejs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L896\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('abort-on-property-write', <property>)\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n *\n * **Examples**\n * ```\n * ! Aborts all inline scripts trying to access `window.alert`\n * utils.escape('<script></script>')\n * // => '&lt;script&gt;&lt;/script&gt;'\n * ```\n */\n/* eslint-enable max-len */\nexport function abortOnPropertyWrite(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        throw new ReferenceError(rid);\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, { set: abort });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid).bind();\n}\n\nabortOnPropertyWrite.names = [\n    'abort-on-property-write',\n    'abort-on-property-write.js',\n    'ubo-abort-on-property-write.js',\n    'aopw.js',\n    'ubo-aopw.js',\n    'abp-abort-on-property-write',\n];\n\nabortOnPropertyWrite.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","import { toRegExp, startsWith } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-setTimeout\n *\n * @description\n * Prevents a `setTimeout` call if:\n * 1) the text of the callback is matching the specified search string/regexp which does not start with `!`;\n * otherwise mismatched calls should be defused;\n * 2) the timeout is matching the specified delay; otherwise mismatched calls should be defused.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#no-settimeout-ifjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-setTimeout\"[, <search>[, <delay>]])\n * ```\n *\n * **Parameters**\n *\n * Call with no arguments will log calls to setTimeout while debugging (`log-setTimeout` superseding),\n * so production filter lists' rules definitely require at least one of the parameters:\n * - `search` (optional) string or regular expression.\n * If starts with `!`, scriptlet will not match the stringified callback but all other will be defused.\n * If do not start with `!`, the stringified callback will be matched.\n * If not set, prevents all `setTimeout` calls due to specified `delay`.\n * - `delay` (optional) must be an integer.\n * If starts with `!`, scriptlet will not match the delay but all other will be defused.\n * If do not start with `!`, the delay passed to the `setTimeout` call will be matched.\n *\n * **Examples**\n *\n * 1. Prevents `setTimeout` calls if the callback matches `/\\.test/` regardless of the delay.\n *     ```bash\n *     example.org#%#//scriptlet('prevent-setTimeout', '/\\.test/')\n *     ```\n *\n *     For instance, the following call will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"value\";\n *     }, 100);\n *     ```\n *\n * 2. Prevents `setTimeout` calls if the callback does not contain `value`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setTimeout', '!value')\n *     ```\n *\n *     For instance, only the first of the following calls will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"test -- prevented\";\n *     }, 300);\n *     setTimeout(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n *\n * 3. Prevents `setTimeout` calls if the callback contains `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setTimeout', 'value', '!300')\n *     ```\n *\n *     For instance, only the first of the following calls will not be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"value 1 -- executed\";\n *     }, 300);\n *     setTimeout(function () {\n *         window.test = \"value 2 -- prevented\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.test = \"value 3 -- prevented\";\n *     }, 500);\n *     ```\n *\n * 4. Prevents `setTimeout` calls if the callback does not contain `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setTimeout', '!value', '!300')\n *     ```\n *\n *     For instance, only the second of the following calls will be prevented:\n *     ```javascript\n *     setTimeout(function () {\n *         window.test = \"test -- executed\";\n *     }, 300);\n *     setTimeout(function () {\n *         window.test = \"test -- prevented\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setTimeout(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n */\n/* eslint-enable max-len */\nexport function preventSetTimeout(source, match, delay) {\n    const nativeTimeout = window.setTimeout;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const log = console.log.bind(console); // eslint-disable-line no-console\n\n    // logs setTimeouts to console if no arguments have been specified\n    const shouldLog = ((typeof match === 'undefined') && (typeof delay === 'undefined'));\n\n    const INVERT_MARKER = '!';\n\n    const isNotMatch = startsWith(match, INVERT_MARKER);\n    if (isNotMatch) {\n        match = match.slice(1);\n    }\n    const isNotDelay = startsWith(delay, INVERT_MARKER);\n    if (isNotDelay) {\n        delay = delay.slice(1);\n    }\n\n    delay = parseInt(delay, 10);\n    delay = nativeIsNaN(delay) ? null : delay;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const timeoutWrapper = (callback, timeout, ...args) => {\n        let shouldPrevent = false;\n        if (shouldLog) {\n            hit(source);\n            log(`setTimeout(\"${callback.toString()}\", ${timeout})`);\n        } else if (!delay) {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch;\n        } else if (match === '/.?/') {\n            shouldPrevent = (timeout === delay) !== isNotDelay;\n        } else {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch\n                && (timeout === delay) !== isNotDelay;\n        }\n\n        if (shouldPrevent) {\n            hit(source);\n            return nativeTimeout(() => { }, timeout);\n        }\n\n        return nativeTimeout.apply(window, [callback, timeout, ...args]);\n    };\n    window.setTimeout = timeoutWrapper;\n}\n\npreventSetTimeout.names = [\n    'prevent-setTimeout',\n    'no-setTimeout-if.js', // new implementation of setTimeout-defuser.js\n    'ubo-no-setTimeout-if.js',\n    'setTimeout-defuser.js', // old name should be supported as well\n    'ubo-setTimeout-defuser.js',\n    'nostif.js', // new short name of no-setTimeout-if\n    'ubo-nostif.js',\n    'std.js', // old short scriptlet name\n    'ubo-std.js',\n];\n\npreventSetTimeout.injections = [toRegExp, startsWith, hit];\n","import { toRegExp, startsWith } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-setInterval\n *\n * @description\n * Prevents a `setInterval` call if:\n * 1) the text of the callback is matching the specified `search` string/regexp which does not start with `!`;\n * otherwise mismatched calls should be defused;\n * 2) the interval is matching the specified `delay`; otherwise mismatched calls should be defused.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#no-setinterval-ifjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet(\"prevent-setInterval\"[, <search>[, <delay>]])\n * ```\n *\n * **Parameters**\n *\n * Call with no arguments will log calls to setInterval while debugging (`log-setInterval` superseding),\n * so production filter lists' rules definitely require at least one of the parameters:\n * - `search` (optional) string or regular expression.\n * If starts with `!`, scriptlet will not match the stringified callback but all other will be defused.\n * If do not start with `!`, the stringified callback will be matched.\n * If not set, prevents all `setInterval` calls due to specified `delay`.\n * - `delay` (optional) must be an integer.\n * If starts with `!`, scriptlet will not match the delay but all other will be defused.\n * If do not start with `!`, the delay passed to the `setInterval` call will be matched.\n *\n *  **Examples**\n *\n * 1. Prevents `setInterval` calls if the callback matches `/\\.test/` regardless of the delay.\n *     ```bash\n *     example.org#%#//scriptlet('prevent-setInterval', '/\\.test/')\n *     ```\n *\n *     For instance, the following call will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"value\";\n *     }, 100);\n *     ```\n *\n * 2. Prevents `setInterval` calls if the callback does not contain `value`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setInterval', '!value')\n *     ```\n *\n *     For instance, only the first of the following calls will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"test -- prevented\";\n *     }, 300);\n *     setInterval(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setInterval(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n *\n * 3. Prevents `setInterval` calls if the callback contains `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setInterval', 'value', '!300')\n *     ```\n *\n *     For instance, only the first of the following calls will not be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"value 1 -- executed\";\n *     }, 300);\n *     setInterval(function () {\n *         window.test = \"value 2 -- prevented\";\n *     }, 400);\n *     setInterval(function () {\n *         window.test = \"value 3 -- prevented\";\n *     }, 500);\n *     ```\n *\n * 4. Prevents `setInterval` calls if the callback does not contain `value` and the delay is not set to `300`.\n *     ```\n *     example.org#%#//scriptlet('prevent-setInterval', '!value', '!300')\n *     ```\n *\n *     For instance, only the second of the following calls will be prevented:\n *     ```javascript\n *     setInterval(function () {\n *         window.test = \"test -- executed\";\n *     }, 300);\n *     setInterval(function () {\n *         window.test = \"test -- prevented\";\n *     }, 400);\n *     setInterval(function () {\n *         window.test = \"value -- executed\";\n *     }, 400);\n *     setInterval(function () {\n *         window.value = \"test -- executed\";\n *     }, 500);\n *     ```\n */\n/* eslint-enable max-len */\nexport function preventSetInterval(source, match, delay) {\n    const nativeInterval = window.setInterval;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const log = console.log.bind(console); // eslint-disable-line no-console\n\n    // logs setIntervals to console if no arguments have been specified\n    const shouldLog = ((typeof match === 'undefined') && (typeof delay === 'undefined'));\n\n    const INVERT_MARKER = '!';\n\n    const isNotMatch = startsWith(match, INVERT_MARKER);\n    if (isNotMatch) {\n        match = match.slice(1);\n    }\n    const isNotDelay = startsWith(delay, INVERT_MARKER);\n    if (isNotDelay) {\n        delay = delay.slice(1);\n    }\n\n    delay = parseInt(delay, 10);\n    delay = nativeIsNaN(delay) ? null : delay;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const intervalWrapper = (callback, interval, ...args) => {\n        let shouldPrevent = false;\n        if (shouldLog) {\n            hit(source);\n            log(`setInterval(\"${callback.toString()}\", ${interval})`);\n        } else if (!delay) {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch;\n        } else if (match === '/.?/') {\n            shouldPrevent = (interval === delay) !== isNotDelay;\n        } else {\n            shouldPrevent = match.test(callback.toString()) !== isNotMatch\n                && (interval === delay) !== isNotDelay;\n        }\n\n        if (shouldPrevent) {\n            hit(source);\n            return nativeInterval(() => { }, interval);\n        }\n\n        return nativeInterval.apply(window, [callback, interval, ...args]);\n    };\n    window.setInterval = intervalWrapper;\n}\n\npreventSetInterval.names = [\n    'prevent-setInterval',\n    'no-setInterval-if.js', // new implementation of setInterval-defuser.js\n    'ubo-no-setInterval-if.js',\n    'setInterval-defuser.js', // old name should be supported as well\n    'ubo-setInterval-defuser.js',\n    'nosiif.js', // new short name of no-setInterval-if\n    'ubo-nosiif.js',\n    'sid.js', // old short scriptlet name\n    'ubo-sid.js',\n];\n\npreventSetInterval.injections = [toRegExp, startsWith, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-window-open\n *\n * @description\n * Prevents `window.open` calls when URL either matches or not matches the specified string/regexp. Using it without parameters prevents all `window.open` calls.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#windowopen-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-window-open'[, <match>[, <search>]])\n * ```\n *\n * **Parameters**\n * - `match` (optional) defaults to \"matching\", any positive number for \"matching\", 0 or any string for \"not matching\",\n * - `search` (optional) string or regexp for matching the URL passed to `window.open` call.\n *\n * **Example**\n *\n * 1. Prevent all `window.open` calls:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open')\n * ```\n *\n * 2. Prevent `window.open` for all URLs containing `example`:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '1', 'example')\n * ```\n *\n * 3. Prevent `window.open` for all URLs matching RegExp `/example\\./`:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '1', '/example\\./')\n * ```\n *\n * 4. Prevent `window.open` for all URLs **NOT** containing `example`:\n * ```\n *     example.org#%#//scriptlet('prevent-window-open', '0', 'example')\n * ```\n */\n/* eslint-enable max-len */\nexport function preventWindowOpen(source, inverse, match) {\n    const nativeOpen = window.open;\n\n    inverse = inverse\n        ? !(+inverse)\n        : !!inverse;\n    match = match\n        ? toRegExp(match)\n        : toRegExp('/.?/');\n\n    // eslint-disable-next-line consistent-return\n    const openWrapper = (str, ...args) => {\n        if (inverse === match.test(str)) {\n            return nativeOpen.apply(window, [str, ...args]);\n        }\n        hit(source);\n    };\n    window.open = openWrapper;\n}\n\npreventWindowOpen.names = [\n    'prevent-window-open',\n    'window.open-defuser.js',\n    'ubo-window.open-defuser.js',\n];\n\npreventWindowOpen.injections = [toRegExp, hit];\n","/* eslint-disable no-new-func */\nimport { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { toRegExp } from '../helpers/string-utils';\nimport { hit, createOnErrorHandler } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet abort-current-inline-script\n *\n * @description\n * Aborts an inline script when it attempts to **read** the specified property\n * AND when the contents of the `<script>` element contains the specified\n * text or matches the regular expression.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#abort-current-inline-scriptjs-\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L928\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('abort-current-inline-script', <property> [, <search>])\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n * - `search` (optional) string or regular expression that must match the inline script contents. If not set, abort all inline scripts which are trying to access the specified property.\n *\n * **Examples**\n * 1. Aborts all inline scripts trying to access `window.alert`\n *     ```\n *     example.org#%#//scriptlet('abort-current-inline-script', 'alert')\n *     ```\n *\n * 2. Aborts inline scripts which are trying to access `window.alert` and contain `Hello, world`.\n *     ```\n *     example.org#%#//scriptlet('abort-current-inline-script', 'alert', 'Hello, world')\n *     ```\n *\n *     For instance, the following script will be aborted\n *     ```html\n *     <script>alert(\"Hello, world\");</script>\n *     ```\n *\n * 3. Aborts inline scripts which are trying to access `window.alert` and match this regexp: `/Hello.+world/`.\n *     ```\n *     example.org#%#//scriptlet('abort-current-inline-script', 'alert', '/Hello.+world/')\n *     ```\n *\n *     For instance, the following scripts will be aborted:\n *     ```html\n *     <script>alert(\"Hello, big world\");</script>\n *     ```\n *     ```html\n *     <script>alert(\"Hello, little world\");</script>\n *     ```\n *\n *     This script will not be aborted:\n *     ```html\n *     <script>alert(\"Hi, little world\");</script>\n *     ```\n */\n/* eslint-enable max-len */\nexport function abortCurrentInlineScript(source, property, search = null) {\n    const regex = search ? toRegExp(search) : null;\n    const rid = randomId();\n\n    const getCurrentScript = () => {\n        if (!document.currentScript) { // eslint-disable-line compat/compat\n            const scripts = document.getElementsByTagName('script');\n            return scripts[scripts.length - 1];\n        }\n        return document.currentScript; // eslint-disable-line compat/compat\n    };\n\n    const ourScript = getCurrentScript();\n\n    const abort = () => {\n        const scriptEl = getCurrentScript();\n        if (scriptEl instanceof HTMLScriptElement\n        && scriptEl !== ourScript\n        && (!regex || regex.test(scriptEl.textContent))) {\n            hit(source);\n            throw new ReferenceError(rid);\n        }\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        // 'base' checking in order to: https://github.com/AdguardTeam/Scriptlets/issues/57#issuecomment-575841092\n        if (base !== null) {\n            const { prop, chain } = chainInfo;\n            if (chain) {\n                const setter = (a) => {\n                    base = a;\n                    if (a instanceof Object) {\n                        setChainPropAccess(a, chain);\n                    }\n                };\n                Object.defineProperty(owner, prop, {\n                    get: () => base,\n                    set: setter,\n                });\n                return;\n            }\n\n            // some websites redefines 'textContent' property of inline script\n            // so we should check descriptor earlier\n            // https://github.com/AdguardTeam/Scriptlets/issues/57#issuecomment-593638991\n            const descriptor = Object.getOwnPropertyDescriptor(Node.prototype, 'textContent');\n\n            let currentValue;\n            if (descriptor instanceof Object === false\n            || descriptor.get instanceof Function === false) {\n                currentValue = base[prop];\n            }\n\n            setPropertyAccess(base, prop, {\n                set: (value) => {\n                    abort();\n                    currentValue = value;\n                },\n                get: () => {\n                    abort();\n                    return currentValue;\n                },\n            });\n        }\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\nabortCurrentInlineScript.names = [\n    'abort-current-inline-script',\n    'abort-current-inline-script.js',\n    'ubo-abort-current-inline-script.js',\n    'acis.js',\n    'ubo-acis.js',\n    'abp-abort-current-inline-script',\n];\n\nabortCurrentInlineScript.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n];\n","import { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet set-constant\n *\n * @description\n * Creates a constant property and assigns it one of the values from the predefined list.\n *\n * > Actually, it's not a constant. Please note, that it can be rewritten with a value of a different type.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#set-constantjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('set-constant', <property>, <value>)\n * ```\n *\n * **Parameters**\n * - `property` (required) path to a property (joined with `.` if needed). The property must be attached to `window`.\n * - `value` (required). Possible values:\n *     - positive decimal integer `<= 32767`\n *     - one of the predefined constants:\n *         - `undefined`\n *         - `false`\n *         - `true`\n *         - `null`\n *         - `noopFunc` - function with empty body\n *         - `trueFunc` - function returning true\n *         - `falseFunc` - function returning false\n *         - `''` - empty string\n *         - `-1` - number value `-1`\n *\n * **Examples**\n * ```\n * ! window.firstConst === false // this comparision will return true\n * example.org#%#//scriptlet('set-constant', 'firstConst', 'false')\n *\n * ! window.secondConst() === true // call to the secondConst will return true\n * example.org#%#//scriptlet('set-constant', 'secondConst', 'trueFunc')\n * ```\n */\n/* eslint-enable max-len */\nexport function setConstant(source, property, value) {\n    if (!property) {\n        return;\n    }\n\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n\n    let constantValue;\n    if (value === 'undefined') {\n        constantValue = undefined;\n    } else if (value === 'false') {\n        constantValue = false;\n    } else if (value === 'true') {\n        constantValue = true;\n    } else if (value === 'null') {\n        constantValue = null;\n    } else if (value === 'noopFunc') {\n        constantValue = () => {};\n    } else if (value === 'trueFunc') {\n        constantValue = () => true;\n    } else if (value === 'falseFunc') {\n        constantValue = () => false;\n    } else if (/^\\d+$/.test(value)) {\n        constantValue = parseFloat(value);\n        if (nativeIsNaN(constantValue)) {\n            return;\n        }\n        if (Math.abs(constantValue) > 0x7FFF) {\n            return;\n        }\n    } else if (value === '-1') {\n        constantValue = -1;\n    } else if (value === '') {\n        constantValue = '';\n    } else {\n        return;\n    }\n\n    let canceled = false;\n    const mustCancel = (value) => {\n        if (canceled) {\n            return canceled;\n        }\n        canceled = value !== undefined\n            && constantValue !== undefined\n            && typeof value !== typeof constantValue;\n        return canceled;\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        if (mustCancel(base[prop])) { return; }\n\n        hit(source);\n        setPropertyAccess(base, prop, {\n            get: () => constantValue,\n            set: (a) => {\n                if (mustCancel(a)) {\n                    constantValue = a;\n                }\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n}\n\nsetConstant.names = [\n    'set-constant',\n    'set-constant.js',\n    'ubo-set-constant.js',\n    'set.js',\n    'ubo-set.js',\n];\nsetConstant.injections = [getPropertyInChain, setPropertyAccess, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-cookie\n *\n * @description\n * Removes current page cookies by passed string matching with name. For current domain and subdomains. Runs on load and before unload.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#cookie-removerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('remove-cookie'[, match])\n * ```\n *\n * **Parameters**\n * - `match` (optional) String or regex matching the cookie name. If not specified all accessible cookies will be removed.\n *\n * **Examples**\n * 1. Removes all cookies:\n * ```\n *     example.org#%#//scriptlet('remove-cookie')\n * ```\n *\n * 2. Removes cookies which name contains `example` string.\n * ```\n *     example.org#%#//scriptlet('remove-cookie', 'example')\n * ```\n *\n *     For instance this cookie will be removed\n *     ```javascript\n *     document.cookie = '__example=randomValue';\n *     ```\n */\n/* eslint-enable max-len */\nexport function removeCookie(source, match) {\n    const regex = match ? toRegExp(match) : toRegExp('/.?/');\n\n    const removeCookieFromHost = (cookieName, hostName) => {\n        const cookieSpec = `${cookieName}=`;\n        const domain1 = `; domain=${hostName}`;\n        const domain2 = `; domain=.${hostName}`;\n        const path = '; path=/';\n        const expiration = '; expires=Thu, 01 Jan 1970 00:00:00 GMT';\n        document.cookie = cookieSpec + expiration;\n        document.cookie = cookieSpec + domain1 + expiration;\n        document.cookie = cookieSpec + domain2 + expiration;\n        document.cookie = cookieSpec + path + expiration;\n        document.cookie = cookieSpec + domain1 + path + expiration;\n        document.cookie = cookieSpec + domain2 + path + expiration;\n        hit(source);\n    };\n\n    const rmCookie = () => {\n        document.cookie.split(';').forEach((cookieStr) => {\n            const pos = cookieStr.indexOf('=');\n            if (pos === -1) {\n                return;\n            }\n\n            const cookieName = cookieStr.slice(0, pos).trim();\n            if (!regex.test(cookieName)) {\n                return;\n            }\n\n            const hostParts = document.location.hostname.split('.');\n            for (let i = 0; i <= hostParts.length - 1; i += 1) {\n                const hostName = hostParts.slice(i).join('.');\n                if (hostName) {\n                    removeCookieFromHost(cookieName, hostName);\n                }\n            }\n        });\n    };\n    rmCookie();\n    window.addEventListener('beforeunload', rmCookie);\n}\n\nremoveCookie.names = [\n    'remove-cookie',\n    'cookie-remover.js',\n    'ubo-cookie-remover.js',\n];\n\nremoveCookie.injections = [toRegExp, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet prevent-addEventListener\n *\n * @description\n * Prevents adding event listeners for the specified events and callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#addeventlistener-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-addEventListener'[, eventSearch[, functionSearch]])\n * ```\n *\n * **Parameters**\n * - `eventSearch` (optional) String or regex matching the event name. If not specified, the scriptlets prevents all event listeners.\n * - `functionSearch` (optional) String or regex matching the event listener function body. If not set, the scriptlet prevents all event listeners with event name matching `eventSearch`.\n *\n * **Examples**\n * 1. Prevent all `click` listeners:\n * ```\n *     example.org#%#//scriptlet('prevent-addEventListener', 'click')\n * ```\n\n2. Prevent 'click' listeners with the callback body containing `searchString`.\n * ```\n *     example.org#%#//scriptlet('prevent-addEventListener', 'click', 'searchString')\n * ```\n *\n *     For instance, this listener will not be called:\n * ```javascript\n *     el.addEventListener('click', () => {\n *         window.test = 'searchString';\n *     });\n * ```\n */\n/* eslint-enable max-len */\nexport function preventAddEventListener(source, event, funcStr) {\n    event = event ? toRegExp(event) : toRegExp('/.?/');\n    funcStr = funcStr ? toRegExp(funcStr) : toRegExp('/.?/');\n\n    const nativeAddEventListener = window.EventTarget.prototype.addEventListener;\n    function addEventListenerWrapper(eventName, callback, ...args) {\n        if (event.test(eventName.toString()) && funcStr.test(callback.toString())) {\n            hit(source);\n            return undefined;\n        }\n        return nativeAddEventListener.apply(this, [eventName, callback, ...args]);\n    }\n\n    window.EventTarget.prototype.addEventListener = addEventListenerWrapper;\n}\n\npreventAddEventListener.names = [\n    'prevent-addEventListener',\n    'addEventListener-defuser.js',\n    'ubo-addEventListener-defuser.js',\n    'aeld.js',\n    'ubo-aeld.js',\n];\n\npreventAddEventListener.injections = [toRegExp, hit];\n","/* eslint-disable consistent-return, no-eval */\n\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet prevent-bab\n *\n * @description\n * Prevents BlockAdblock script from detecting an ad blocker.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#bab-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-bab')\n * ```\n */\nexport function preventBab(source) {\n    const nativeSetTimeout = window.setTimeout;\n    const babRegex = /\\.bab_elementid.$/;\n\n    window.setTimeout = (callback, ...args) => {\n        if (typeof callback !== 'string' || !babRegex.test(callback)) {\n            return nativeSetTimeout.call(this, callback, ...args);\n        }\n        hit(source);\n    };\n\n    const signatures = [\n        ['blockadblock'],\n        ['babasbm'],\n        [/getItem\\('babn'\\)/],\n        ['getElementById', 'String.fromCharCode', 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789', 'charAt', 'DOMContentLoaded', 'AdBlock', 'addEventListener', 'doScroll', 'fromCharCode', '<<2|r>>4', 'sessionStorage', 'clientWidth', 'localStorage', 'Math', 'random'],\n    ];\n    const check = (str) => {\n        for (let i = 0; i < signatures.length; i += 1) {\n            const tokens = signatures[i];\n            let match = 0;\n            for (let j = 0; j < tokens.length; j += 1) {\n                const token = tokens[j];\n                const found = token instanceof RegExp ? token.test(str) : str.indexOf(token) > -1;\n                if (found) {\n                    match += 1;\n                }\n            }\n            if (match / tokens.length >= 0.8) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    const nativeEval = window.eval;\n    window.eval = (str) => {\n        if (!check(str)) {\n            return nativeEval(str);\n        }\n        hit(source);\n        const bodyEl = document.body;\n        if (bodyEl) {\n            bodyEl.style.removeProperty('visibility');\n        }\n        const el = document.getElementById('babasbmsgx');\n        if (el) {\n            el.parentNode.removeChild(el);\n        }\n    };\n}\n\npreventBab.names = [\n    'prevent-bab',\n    'bab-defuser.js',\n    'ubo-bab-defuser.js',\n    'nobab.js',\n    'ubo-nobab.js',\n];\n\npreventBab.injections = [hit];\n","/* eslint-disable no-unused-vars, no-extra-bind, func-names */\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet nowebrtc\n *\n * @description\n * Disables WebRTC by overriding `RTCPeerConnection`. The overriden function will log every attempt to create a new connection.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nowebrtcjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('nowebrtc')\n * ```\n */\n/* eslint-enable max-len */\nexport function nowebrtc(source) {\n    let propertyName = '';\n    if (window.RTCPeerConnection) {\n        propertyName = 'RTCPeerConnection';\n    } else if (window.webkitRTCPeerConnection) {\n        propertyName = 'webkitRTCPeerConnection';\n    }\n\n    if (propertyName === '') {\n        return;\n    }\n\n    const rtcReplacement = (config) => {\n        hit(source, `Document tried to create an RTCPeerConnection: ${config}`);\n    };\n    const noop = () => {};\n    rtcReplacement.prototype = {\n        close: noop,\n        createDataChannel: noop,\n        createOffer: noop,\n        setRemoteDescription: noop,\n    };\n    const rtc = window[propertyName];\n    window[propertyName] = rtcReplacement;\n    if (rtc.prototype) {\n        rtc.prototype.createDataChannel = function (a, b) {\n            return {\n                close: noop,\n                send: noop,\n            };\n        }.bind(null);\n    }\n}\n\nnowebrtc.names = [\n    'nowebrtc',\n    'nowebrtc.js',\n    'ubo-nowebrtc.js',\n];\n\nnowebrtc.injections = [hit];\n","/* eslint-disable no-console */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-addEventListener\n *\n * @description\n * Logs all addEventListener calls to the console.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#addeventlistener-loggerjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('log-addEventListener')\n * ```\n */\nexport function logAddEventListener(source) {\n    const log = console.log.bind(console);\n    const nativeAddEventListener = window.EventTarget.prototype.addEventListener;\n    function addEventListenerWrapper(eventName, callback, ...args) {\n        hit(source);\n        log(`addEventListener(\"${eventName}\", ${callback.toString()})`);\n        return nativeAddEventListener.apply(this, [eventName, callback, ...args]);\n    }\n    window.EventTarget.prototype.addEventListener = addEventListenerWrapper;\n}\n\nlogAddEventListener.names = [\n    'log-addEventListener',\n    'addEventListener-logger.js',\n    'ubo-addEventListener-logger.js',\n    'aell.js',\n    'ubo-aell.js',\n];\n\nlogAddEventListener.injections = [hit];\n","/* eslint-disable no-console, no-eval */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet log-eval\n *\n * @description\n * Logs all `eval()` or `new Function()` calls to the console.\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('log-eval')\n * ```\n */\nexport function logEval(source) {\n    const log = console.log.bind(console);\n    // wrap eval function\n    const nativeEval = window.eval;\n    function evalWrapper(str) {\n        hit(source);\n        log(`eval(\"${str}\")`);\n        return nativeEval(str);\n    }\n    window.eval = evalWrapper;\n\n    // wrap new Function\n    const nativeFunction = window.Function;\n\n    function FunctionWrapper(...args) {\n        hit(source);\n        log(`new Function(${args.join(', ')})`);\n        return nativeFunction.apply(this, [...args]);\n    }\n\n    FunctionWrapper.prototype = Object.create(nativeFunction.prototype);\n    FunctionWrapper.prototype.constructor = FunctionWrapper;\n\n    window.Function = FunctionWrapper;\n}\n\nlogEval.names = [\n    'log-eval',\n];\n\nlogEval.injections = [hit];\n","/**\n * @scriptlet log\n *\n * @description\n * A simple scriptlet which only purpose is to print arguments to console.\n * This scriptlet can be helpful for debugging and troubleshooting other scriptlets.\n * **Example**\n * ```\n * example.org#%#//scriptlet('log', 'arg1', 'arg2')\n * ```\n */\nexport function log(...args) {\n    console.log(args); // eslint-disable-line no-console\n}\nlog.names = ['log'];\n","/* eslint-disable no-eval, no-extra-bind */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet noeval\n *\n * @description\n * Prevents page to use eval.\n * Notifies about attempts in the console\n *\n * It is mostly used for `$redirect` rules.\n * See [redirect description](../wiki/about-redirects.md#noeval).\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('noeval')\n * ```\n */\nexport function noeval(source) {\n    window.eval = function evalWrapper(s) {\n        hit(source, `AdGuard has prevented eval:\\n${s}`);\n    }.bind();\n}\n\nnoeval.names = [\n    'noeval',\n    'noeval.js',\n    'silent-noeval.js',\n    'ubo-noeval.js',\n    'ubo-silent-noeval.js',\n];\n\nnoeval.injections = [hit];\n","/* eslint-disable no-eval, no-extra-bind, func-names */\n\nimport { toRegExp, hit } from '../helpers';\n\n/**\n * @scriptlet prevent-eval-if\n *\n * @description\n * Prevents page to use eval matching payload.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#noeval-ifjs-\n *\n * **Parameters**\n * - `search` string or regexp matching stringified eval payload\n *\n * **Examples**\n * ```\n * !\n * ```\n *\n * @param {string|RegExp} [search] string or regexp matching stringified eval payload\n */\nexport function preventEvalIf(source, search) {\n    search = search ? toRegExp(search) : toRegExp('/.?/');\n\n    const nativeEval = window.eval;\n    window.eval = function (payload) {\n        if (!search.test(payload.toString())) {\n            return nativeEval.call(window, payload);\n        }\n        hit(source, payload);\n        return undefined;\n    }.bind(window);\n}\n\npreventEvalIf.names = [\n    'prevent-eval-if',\n    'noeval-if.js',\n    'ubo-noeval-if.js',\n];\n\npreventEvalIf.injections = [toRegExp, hit];\n","/* eslint-disable no-console, func-names, no-multi-assign */\nimport { noop, hit } from '../helpers';\n\n/**\n * @scriptlet prevent-fab-3.2.0\n *\n * @description\n * Prevents execution of the FAB script v3.2.0.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#fuckadblockjs-320-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-fab-3.2.0')\n * ```\n */\nexport function preventFab(source) {\n    hit(source);\n    const Fab = function () {};\n    Fab.prototype.check = noop;\n    Fab.prototype.clearEvent = noop;\n    Fab.prototype.emitEvent = noop;\n    Fab.prototype.on = function (a, b) {\n        if (!a) {\n            b();\n        }\n        return this;\n    };\n    Fab.prototype.onDetected = function () {\n        return this;\n    };\n    Fab.prototype.onNotDetected = function (a) {\n        a();\n        return this;\n    };\n    Fab.prototype.setOption = noop;\n    window.FuckAdBlock = window.BlockAdBlock = Fab;\n    //\n    window.fuckAdBlock = window.blockAdBlock = new Fab();\n}\n\npreventFab.names = [\n    'prevent-fab-3.2.0',\n    'fuckadblock.js-3.2.0',\n    'ubo-fuckadblock.js-3.2.0',\n    'nofab.js',\n    'ubo-nofab.js',\n];\n\npreventFab.injections = [noop, hit];\n","/* eslint-disable no-console, func-names, no-multi-assign */\nimport { hit } from '../helpers';\n\n/**\n * @scriptlet set-popads-dummy\n *\n * @description\n * Sets static properties PopAds and popns.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#popads-dummyjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('set-popads-dummy')\n * ```\n */\nexport function setPopadsDummy(source) {\n    delete window.PopAds;\n    delete window.popns;\n    Object.defineProperties(window, {\n        PopAds: {\n            get: () => {\n                hit(source);\n                return {};\n            },\n        },\n        popns: {\n            get: () => {\n                hit(source);\n                return {};\n            },\n        },\n    });\n}\n\nsetPopadsDummy.names = [\n    'set-popads-dummy',\n    'popads-dummy.js',\n    'ubo-popads-dummy.js',\n];\n\nsetPopadsDummy.injections = [hit];\n","import {\n    hit, createOnErrorHandler, randomId,\n} from '../helpers';\n\n/**\n * @scriptlet prevent-popads-net\n *\n * @description\n * Aborts on property write (PopAds, popns), throws reference error with random id.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#popadsnetjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-popads-net')\n * ```\n */\nexport function preventPopadsNet(source) {\n    const rid = randomId();\n\n    const throwError = () => {\n        throw new ReferenceError(rid);\n    };\n\n    delete window.PopAds;\n    delete window.popns;\n    Object.defineProperties(window, {\n        PopAds: { set: throwError },\n        popns: { set: throwError },\n    });\n\n    window.onerror = createOnErrorHandler(rid).bind();\n    hit(source);\n}\n\npreventPopadsNet.names = [\n    'prevent-popads-net',\n    'popads.net.js',\n    'ubo-popads.net.js',\n];\n\npreventPopadsNet.injections = [createOnErrorHandler, randomId, hit];\n","/* eslint-disable func-names */\nimport { hit, setPropertyAccess } from '../helpers';\n\n/**\n * @scriptlet prevent-adfly\n *\n * @description\n * Prevents anti-adblock scripts on adfly short links.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#adfly-defuserjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('prevent-adfly')\n * ```\n */\nexport function preventAdfly(source) {\n    const isDigit = (data) => /^\\d$/.test(data);\n    const handler = function (encodedURL) {\n        let evenChars = '';\n        let oddChars = '';\n        for (let i = 0; i < encodedURL.length; i += 1) {\n            if (i % 2 === 0) {\n                evenChars += encodedURL.charAt(i);\n            } else {\n                oddChars = encodedURL.charAt(i) + oddChars;\n            }\n        }\n\n        let data = (evenChars + oddChars).split('');\n\n        for (let i = 0; i < data.length; i += 1) {\n            if (isDigit(data[i])) {\n                for (let ii = i + 1; ii < data.length; ii += 1) {\n                    if (isDigit(data[ii])) {\n                        // eslint-disable-next-line no-bitwise\n                        const temp = parseInt(data[i], 10) ^ parseInt(data[ii], 10);\n                        if (temp < 10) {\n                            data[i] = temp.toString();\n                        }\n                        i = ii;\n                        break;\n                    }\n                }\n            }\n        }\n        data = data.join('');\n        const decodedURL = window.atob(data).slice(16, -16);\n        /* eslint-disable compat/compat */\n        if (window.stop) {\n            window.stop();\n        }\n        /* eslint-enable compat/compat */\n        window.onbeforeunload = null;\n        window.location.href = decodedURL;\n    };\n\n    let val;\n    // Do not apply handler more than one time\n    let applyHandler = true;\n\n    const result = setPropertyAccess(window, 'ysmm', {\n        configurable: false,\n        set: (value) => {\n            if (applyHandler) {\n                applyHandler = false;\n                try {\n                    if (typeof value === 'string') {\n                        handler(value);\n                    }\n                } catch (err) { } // eslint-disable-line no-empty\n            }\n            val = value;\n        },\n        get: () => val,\n    });\n\n    if (result) {\n        hit(source);\n    } else {\n        window.console.error('Failed to set up prevent-adfly scriptlet');\n    }\n}\n\npreventAdfly.names = [\n    'prevent-adfly',\n    'adfly-defuser.js',\n    'ubo-adfly-defuser.js',\n];\n\npreventAdfly.injections = [setPropertyAccess, hit];\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-on-property-read\n *\n * @description\n * This scriptlet is basically the same as [abort-on-property-read](#abort-on-property-read), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n * ```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet('debug-on-property-read', 'alert')\n * ```\n */\n/* eslint-enable max-len */\nexport function debugOnPropertyRead(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        // eslint-disable-next-line no-debugger\n        debugger;\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, {\n            get: abort,\n            set: () => { },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\ndebugOnPropertyRead.names = [\n    'debug-on-property-read',\n];\ndebugOnPropertyRead.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","import { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { createOnErrorHandler, hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-on-property-write\n *\n * @description\n * This scriptlet is basically the same as [abort-on-property-write](#abort-on-property-write), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n * ```\n * ! Aborts script when it tries to write in property `window.test`\n * example.org#%#//scriptlet('debug-on-property-write', 'test')\n * ```\n */\n/* eslint-enable max-len */\nexport function debugOnPropertyWrite(source, property) {\n    if (!property) {\n        return;\n    }\n    const rid = randomId();\n    const abort = () => {\n        hit(source);\n        // eslint-disable-next-line no-debugger\n        debugger;\n    };\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        setPropertyAccess(base, prop, { set: abort });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid).bind();\n}\n\ndebugOnPropertyWrite.names = [\n    'debug-on-property-write',\n];\n\ndebugOnPropertyWrite.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    createOnErrorHandler,\n    hit,\n];\n","/* eslint-disable no-new-func */\nimport { randomId } from '../helpers/random-id';\nimport { setPropertyAccess } from '../helpers/set-property-access';\nimport { getPropertyInChain } from '../helpers/get-property-in-chain';\nimport { toRegExp } from '../helpers/string-utils';\nimport { hit, createOnErrorHandler } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet debug-current-inline-script\n *\n * @description\n * This scriptlet is basically the same as [abort-current-inline-script](#abort-current-inline-script), but instead of aborting it starts the debugger.\n *\n * **It is not supposed to be used in production filter lists!**\n *\n * **Syntax**\n *```\n * ! Aborts script when it tries to access `window.alert`\n * example.org#%#//scriptlet('debug-current-inline-script', 'alert')\n * ```\n */\n/* eslint-enable max-len */\nexport function debugCurrentInlineScript(source, property, search = null) {\n    const regex = search ? toRegExp(search) : null;\n    const rid = randomId();\n\n    const getCurrentScript = () => {\n        if (!document.currentScript) { // eslint-disable-line compat/compat\n            const scripts = document.getElementsByTagName('script');\n            return scripts[scripts.length - 1];\n        }\n        return document.currentScript; // eslint-disable-line compat/compat\n    };\n\n    const ourScript = getCurrentScript();\n\n    const abort = () => {\n        const scriptEl = getCurrentScript();\n        if (scriptEl instanceof HTMLScriptElement\n            && scriptEl.textContent.length > 0\n            && scriptEl !== ourScript\n            && (!regex || regex.test(scriptEl.textContent))) {\n            hit(source);\n            // eslint-disable-next-line no-debugger\n            debugger;\n        }\n    };\n\n    const setChainPropAccess = (owner, property) => {\n        const chainInfo = getPropertyInChain(owner, property);\n        let { base } = chainInfo;\n        const { prop, chain } = chainInfo;\n        if (chain) {\n            const setter = (a) => {\n                base = a;\n                if (a instanceof Object) {\n                    setChainPropAccess(a, chain);\n                }\n            };\n            Object.defineProperty(owner, prop, {\n                get: () => base,\n                set: setter,\n            });\n            return;\n        }\n\n        let currentValue = base[prop];\n        setPropertyAccess(base, prop, {\n            set: (value) => {\n                abort();\n                currentValue = value;\n            },\n            get: () => {\n                abort();\n                return currentValue;\n            },\n        });\n    };\n\n    setChainPropAccess(window, property);\n\n    window.onerror = createOnErrorHandler(rid)\n        .bind();\n}\n\ndebugCurrentInlineScript.names = [\n    'debug-current-inline-script',\n];\n\ndebugCurrentInlineScript.injections = [\n    randomId,\n    setPropertyAccess,\n    getPropertyInChain,\n    toRegExp,\n    createOnErrorHandler,\n    hit,\n];\n","import { hit, observeDOMChanges } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-attr\n *\n * @description\n * Removes the specified attributes from DOM nodes. This scriptlet runs once when the page loads\n * and after that periodically in order to DOM tree changes.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#remove-attrjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('remove-attr', attrs[, selector])\n * ```\n *\n * - `attrs` — required, attribute or list of attributes joined by '|';\n * - `selector` — optional, CSS selector, specifies DOM nodes from which the attributes will be removed\n *\n * **Examples**\n * 1.  Removes by attribute\n *     ```\n *     example.org#%#//scriptlet('remove-attr', 'example|test')\n *     ```\n *\n *     ```html\n *     <!-- before  -->\n *     <div example=\"true\" test=\"true\">Some text</div>\n *\n *     <!-- after -->\n *     <div>Some text</div>\n *     ```\n *\n * 2. Removes with specified selector\n *     ```\n *     example.org#%#//scriptlet('remove-attr', 'example', 'div[class=\"inner\"]')\n *     ```\n *\n *     ```html\n *     <!-- before -->\n *     <div class=\"wrapper\" example=\"true\">\n *         <div class=\"inner\" example=\"true\">Some text</div>\n *     </div>\n *\n *     <!-- after -->\n *     <div class=\"wrapper\" example=\"true\">\n *         <div class=\"inner\">Some text</div>\n *     </div>\n *     ```\n */\n/* eslint-enable max-len */\nexport function removeAttr(source, attrs, selector) {\n    if (!attrs) { return; }\n    attrs = attrs.split(/\\s*\\|\\s*/);\n    if (!selector) {\n        selector = `[${attrs.join('],[')}]`;\n    }\n\n    const rmattr = () => {\n        const nodes = [].slice.call(document.querySelectorAll(selector));\n        let removed = false;\n        nodes.forEach((node) => {\n            attrs.forEach((attr) => {\n                node.removeAttribute(attr);\n                removed = true;\n            });\n        });\n        if (removed) {\n            hit(source);\n        }\n    };\n\n    rmattr();\n\n    // 'true' for observing attributes\n    observeDOMChanges(rmattr, true);\n}\n\nremoveAttr.names = [\n    'remove-attr',\n    'remove-attr.js',\n    'ubo-remove-attr.js',\n    'ra.js',\n    'ubo-ra.js',\n];\n\nremoveAttr.injections = [hit, observeDOMChanges];\n","import { hit, observeDOMChanges } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet remove-class\n *\n * @description\n * Removes the specified classes from DOM nodes. This scriptlet runs once after the page loads\n * and after that periodically in order to DOM tree changes.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#remove-classjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('remove-class', classes[, selector])\n * ```\n *\n * - `classes` — required, class or list of classes separated by '|';\n * - `selector` — optional, CSS selector, specifies DOM nodes from which the classes will be removed;\n * if there is no selector, every class independently will be removed from all nodes which has one\n *\n * **Examples**\n * 1.  Removes by classes\n *     ```\n *     example.org#%#//scriptlet('remove-class', 'example|test')\n *     ```\n *\n *     ```html\n *     <!-- before  -->\n *     <div id=\"first\" class=\"nice test\">Some text</div>\n *     <div id=\"second\" class=\"rare example for test\">Some text</div>\n *     <div id=\"third\" class=\"testing better example\">Some text</div>\n *\n *     <!-- after -->\n *     <div id=\"first\" class=\"nice\">Some text</div>\n *     <div id=\"second\" class=\"rare for\">Some text</div>\n *     <div id=\"third\" class=\"testing better\">Some text</div>\n *     ```\n *\n * 2. Removes with specified selector\n *     ```\n *     example.org#%#//scriptlet('remove-class', 'branding', 'div[class=\"inner\"]')\n *     ```\n *\n *     ```html\n *     <!-- before -->\n *     <div class=\"wrapper true branding\">\n *         <div class=\"inner bad branding\">Some text</div>\n *     </div>\n *\n *     <!-- after -->\n *     <div class=\"wrapper true branding\">\n *         <div class=\"inner bad\">Some text</div>\n *     </div>\n *     ```\n */\n/* eslint-enable max-len */\n\nexport function removeClass(source, classNames, selector) {\n    if (!classNames) { return; }\n    classNames = classNames.split(/\\s*\\|\\s*/);\n    let selectors = [];\n    if (!selector) {\n        selectors = classNames.map((className) => {\n            return `.${className}`;\n        });\n    }\n\n    const removeClassHandler = () => {\n        const nodes = new Set();\n        if (selector) {\n            const foundedNodes = [].slice.call(document.querySelectorAll(selector));\n            foundedNodes.forEach((n) => nodes.add(n));\n        } else if (selectors.length > 0) {\n            selectors.forEach((s) => {\n                const elements = document.querySelectorAll(s);\n                for (let i = 0; i < elements.length; i += 1) {\n                    const element = elements[i];\n                    nodes.add(element);\n                }\n            });\n        }\n\n        let removed = false;\n\n        nodes.forEach((node) => {\n            classNames.forEach((className) => {\n                if (node.classList.contains(className)) {\n                    node.classList.remove(className);\n                    removed = true;\n                }\n            });\n        });\n\n        if (removed) {\n            hit(source);\n        }\n    };\n\n    removeClassHandler();\n\n    const CLASS_ATTR_NAME = ['class'];\n    // 'true' for observing attributes\n    // 'class' for observing only classes\n    observeDOMChanges(removeClassHandler, true, CLASS_ATTR_NAME);\n}\n\nremoveClass.names = [\n    'remove-class',\n];\n\nremoveClass.injections = [hit, observeDOMChanges];\n","import { hit } from '../helpers';\n\n/**\n * @scriptlet disable-newtab-links\n *\n * @description\n * Prevents opening new tabs and windows if there is `target` attribute in element.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#disable-newtab-linksjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('disable-newtab-links')\n * ```\n */\nexport function disableNewtabLinks(source) {\n    document.addEventListener('click', (ev) => {\n        let { target } = ev;\n        while (target !== null) {\n            if (target.localName === 'a' && target.hasAttribute('target')) {\n                ev.stopPropagation();\n                ev.preventDefault();\n                hit(source);\n                break;\n            }\n            target = target.parentNode;\n        }\n    });\n}\n\ndisableNewtabLinks.names = [\n    'disable-newtab-links',\n    'disable-newtab-links.js',\n    'ubo-disable-newtab-links.js',\n];\n\ndisableNewtabLinks.injections = [\n    hit,\n];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet adjust-setInterval\n *\n * @description\n * Adjusts interval for specified setInterval() callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nano-setinterval-boosterjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('adjust-setInterval'[, match [, interval[, boost]]])\n * ```\n *\n * - `match` - optional, string/regular expression, matching in stringified callback function\n * - `interval` - optional, defaults to 1000, decimal integer, matching interval\n * - `boost` - optional, default to 0.05, float, capped at 50 times for up and down, interval multiplier\n *\n * **Examples**\n * 1. Adjust all setInterval() x20 times where interval equal 1000ms:\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval')\n *     ```\n *\n * 2. Adjust all setInterval() x20 times where callback mathed with `example` and interval equal 1000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval', 'example')\n *     ```\n *\n * 3. Adjust all setInterval() x20 times where callback mathed with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval', 'example', '400')\n *     ```\n *\n * 4. Slow down setInterval() x2 times where callback matched with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setInterval', 'example', '400', '2')\n *     ```\n */\n/* eslint-enable max-len */\nexport function adjustSetInterval(source, match, interval, boost) {\n    const nativeInterval = window.setInterval;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const nativeIsFinite = Number.isFinite || window.isFinite; // eslint-disable-line compat/compat\n\n    interval = parseInt(interval, 10);\n    interval = nativeIsNaN(interval) ? 1000 : interval;\n\n    boost = parseInt(boost, 10);\n    boost = nativeIsNaN(interval) || !nativeIsFinite(boost) ? 0.05 : boost;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    if (boost < 0.02) {\n        boost = 0.02;\n    }\n    if (boost > 50) {\n        boost = 50;\n    }\n\n    const intervalWrapper = (cb, d, ...args) => {\n        if (d === interval && match.test(cb.toString())) {\n            d *= boost;\n            hit(source);\n        }\n        return nativeInterval.apply(window, [cb, d, ...args]);\n    };\n    window.setInterval = intervalWrapper;\n}\n\nadjustSetInterval.names = [\n    'adjust-setInterval',\n    'nano-setInterval-booster.js',\n    'ubo-nano-setInterval-booster.js',\n    'nano-sib.js',\n    'ubo-nano-sib.js',\n];\n\nadjustSetInterval.injections = [toRegExp, hit];\n","import { toRegExp } from '../helpers/string-utils';\nimport { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet adjust-setTimeout\n *\n * @description\n * Adjusts timeout for specified setTimout() callbacks.\n *\n * Related UBO scriptlet:\n * https://github.com/gorhill/uBlock/wiki/Resources-Library#nano-settimeout-boosterjs-\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('adjust-setTimeout'[, match [, timeout[, boost]]])\n * ```\n *\n * - `match` - optional, string/regular expression, matching in stringified callback function\n * - `timeout` - optional, defaults to 1000, decimal integer, matching interval\n * - `boost` - optional, default to 0.05, float, capped at 50 times for up and down, interval multiplier\n *\n * **Examples**\n * 1. Adjust all setTimeout() x20 times where interval equal 1000ms:\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout')\n *     ```\n *\n * 2. Adjust all setTimeout() x20 times where callback mathed with `example` and interval equal 1000ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout', 'example')\n *     ```\n *\n * 3. Adjust all setTimeout() x20 times where callback mathed with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout', 'example', '400')\n *     ```\n *\n * 4. Slow down setTimeout() x2 times where callback matched with `example` and interval equal 400ms\n *     ```\n *     example.org#%#//scriptlet('adjust-setTimeout', 'example', '400', '2')\n *     ```\n */\n/* eslint-enable max-len */\nexport function adjustSetTimeout(source, match, timeout, boost) {\n    const nativeTimeout = window.setTimeout;\n    const nativeIsNaN = Number.isNaN || window.isNaN; // eslint-disable-line compat/compat\n    const nativeIsFinite = Number.isFinite || window.isFinite; // eslint-disable-line compat/compat\n\n    timeout = parseInt(timeout, 10);\n    timeout = nativeIsNaN(timeout) ? 1000 : timeout;\n\n    boost = parseInt(boost, 10);\n    boost = nativeIsNaN(timeout) || !nativeIsFinite(boost) ? 0.05 : boost;\n\n    match = match ? toRegExp(match) : toRegExp('/.?/');\n\n    if (boost < 0.02) {\n        boost = 0.02;\n    }\n    if (boost > 50) {\n        boost = 50;\n    }\n\n    const timeoutWrapper = (cb, d, ...args) => {\n        if (d === timeout && match.test(cb.toString())) {\n            d *= boost;\n            hit(source);\n        }\n        return nativeTimeout.apply(window, [cb, d, ...args]);\n    };\n    window.setTimeout = timeoutWrapper;\n}\n\nadjustSetTimeout.names = [\n    'adjust-setTimeout',\n    'nano-setTimeout-booster.js',\n    'ubo-nano-setTimeout-booster.js',\n    'nano-stb.js',\n    'ubo-nano-stb.js',\n];\n\nadjustSetTimeout.injections = [toRegExp, hit];\n","import { hit } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet dir-string\n *\n * @description\n * Wraps the `console.dir` API to call the `toString` method of the argument.\n * There are several adblock circumvention systems that detect browser devtools\n * and hide themselves. Therefore, if we force them to think\n * that devtools are open (using this scrciptlet),\n * it will automatically disable the adblock circumvention script.\n *\n * Related ABP source:\n * https://github.com/adblockplus/adblockpluscore/blob/6b2a309054cc23432102b85d13f12559639ef495/lib/content/snippets.js#L766\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('dir-string'[, times])\n * ```\n * - `times` - optional, the number of times to call the `toString` method of the argument to `console.dir`\n *\n * **Example**\n * ```\n * ! Run 2 times\n * example.org#%#//scriptlet('dir-string', '2')\n * ```\n */\n/* eslint-enable max-len */\nexport function dirString(source, times) {\n    const { dir } = console;\n    times = parseInt(times, 10);\n\n    function dirWrapper(object) {\n        // eslint-disable-next-line no-unused-vars\n        let temp;\n        for (let i = 0; i < times; i += 1) {\n            // eslint-disable-next-line no-unused-expressions\n            temp = `${object}`;\n        }\n        if (typeof dir === 'function') {\n            dir.call(this, object);\n        }\n        hit(source, temp);\n    }\n    // eslint-disable-next-line no-console\n    console.dir = dirWrapper;\n}\n\ndirString.names = [\n    'dir-string',\n    'abp-dir-string',\n];\n\ndirString.injections = [hit];\n","import { hit, getPropertyInChain } from '../helpers';\n\n/* eslint-disable max-len */\n/**\n * @scriptlet json-prune\n *\n * @description\n * Removes specified properties from the result of calling JSON.parse and returns the caller\n *\n * **Syntax**\n * ```\n * example.org#%#//scriptlet('json-prune'[, propsToRemove [, obligatoryProps]])\n * ```\n *\n * - `propsToRemove` - string of space-separated properties to remove\n * - `obligatoryProps` - optional, string of space-separated properties which must be all present for the pruning to occur\n *\n * **Examples**\n * 1. Removes property `example` from the results of JSON.parse call\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'example')\n *     ```\n *\n *     For instance, the following call will return `{ one: 1}`\n *\n *     ```html\n *     JSON.parse('{\"one\":1,\"example\":true}')\n *     ```\n *\n * 2. If there are no specified properties in the result of JSON.parse call, pruning will NOT occur\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'one', 'obligatoryProp')\n *     ```\n *\n *     For instance, the following call will return `{ one: 1, two: 2}`\n *\n *     ```html\n *     JSON.parse('{\"one\":1,\"two\":2}')\n *     ```\n *\n * 3. A property in a list of properties can be a chain of properties\n *\n *     ```\n *     example.org#%#//scriptlet('json-prune', 'a.b', 'adpath.url.first')\n *     ```\n *\n * 4. Call with no arguments will log the current hostname and json payload at the console\n *     ```\n *     example.org#%#//scriptlet('json-prune')\n *     ```\n */\n/* eslint-enable max-len */\nexport function jsonPrune(source, propsToRemove, requiredInitialProps) {\n    // eslint-disable-next-line no-console\n    const log = console.log.bind(console);\n    const prunePaths = propsToRemove !== undefined && propsToRemove !== ''\n        ? propsToRemove.split(/ +/)\n        : [];\n    const needlePaths = requiredInitialProps !== undefined && requiredInitialProps !== ''\n        ? requiredInitialProps.split(/ +/)\n        : [];\n\n    function isPruningNeeded(root) {\n        if (!root) {\n            return false;\n        }\n\n        for (let i = 0; i < needlePaths.length; i += 1) {\n            const needlePath = needlePaths[i];\n            const details = getPropertyInChain(root, needlePath, false);\n            const nestedPropName = needlePath.split('.').pop();\n            if (details && details.base[nestedPropName] === undefined) {\n                return false;\n            }\n        }\n        return true;\n    }\n\n    const nativeParse = JSON.parse;\n\n    const parseWrapper = (...args) => {\n        const r = nativeParse.apply(window, args);\n        if (prunePaths.length === 0) {\n            log(window.location.hostname, r);\n            return r;\n        }\n        if (isPruningNeeded(r) === false) {\n            return r;\n        }\n        prunePaths.forEach((path) => {\n            const ownerObj = getPropertyInChain(r, path, false);\n            if (ownerObj !== undefined && ownerObj.base) {\n                delete ownerObj.base[ownerObj.prop];\n            }\n        });\n        hit(source);\n        return r;\n    };\n\n    JSON.parse = parseWrapper;\n}\n\n\njsonPrune.names = [\n    'json-prune',\n    'json-prune.js',\n    'ubo-json-prune.js',\n];\n\njsonPrune.injections = [hit, getPropertyInChain];\n","/**\n * This file must export all scriptlets which should be accessible\n */\nexport * from './abort-on-property-read';\nexport * from './abort-on-property-write';\nexport * from './prevent-setTimeout';\nexport * from './prevent-setInterval';\nexport * from './prevent-window-open';\nexport * from './abort-current-inline-script';\nexport * from './set-constant';\nexport * from './remove-cookie';\nexport * from './prevent-addEventListener';\nexport * from './prevent-bab';\nexport * from './nowebrtc';\nexport * from './log-addEventListener';\nexport * from './log-eval';\nexport * from './log';\nexport * from './noeval';\nexport * from './prevent-eval-if';\nexport * from './prevent-fab-3.2.0';\nexport * from './set-popads-dummy';\nexport * from './prevent-popads-net';\nexport * from './prevent-adfly';\nexport * from './debug-on-property-read';\nexport * from './debug-on-property-write';\nexport * from './debug-current-inline-script';\nexport * from './remove-attr';\nexport * from './remove-class';\nexport * from './disable-newtab-links';\nexport * from './adjust-setInterval';\nexport * from './adjust-setTimeout';\nexport * from './dir-string';\nexport * from './json-prune';\n","import {\n    startsWith,\n    substringAfter,\n} from './string-utils';\n\nimport { ADG_SCRIPTLET_MASK } from './parse-rule';\n\nimport * as scriptletsList from '../scriptlets/scriptletsList';\n\nimport { redirects } from '../../scripts/compatibility-table.json';\n\n\nconst COMMENT_MARKER = '!';\n\n/**\n * Checks if rule text is comment e.g. !!example.org##+js(set-constant.js, test, false)\n * @param {string} rule\n * @return {boolean}\n */\nconst isComment = (rule) => startsWith(rule, COMMENT_MARKER);\n\n\n/* ************************************************************************\n *\n * Scriptlets\n *\n ************************************************************************** */\n\n\n/**\n * uBlock scriptlet rule mask\n */\nconst UBO_SCRIPTLET_MASK_REG = /#@?#script:inject|#@?#\\s*\\+js/;\nconst UBO_SCRIPTLET_MASK_1 = '##+js';\nconst UBO_SCRIPTLET_MASK_2 = '##script:inject';\nconst UBO_SCRIPTLET_EXCEPTION_MASK_1 = '#@#+js';\nconst UBO_SCRIPTLET_EXCEPTION_MASK_2 = '#@#script:inject';\n\n/**\n * AdBlock Plus snippet rule mask\n */\nconst ABP_SCRIPTLET_MASK = '#$#';\nconst ABP_SCRIPTLET_EXCEPTION_MASK = '#@$#';\n\n/**\n * AdGuard CSS rule mask\n */\nconst ADG_CSS_MASK_REG = /#@?\\$#.+?\\s*\\{.*\\}\\s*$/g;\n\n\n/**\n * Checks if the `rule` is AdGuard scriptlet rule\n * @param {string} rule - rule text\n */\nconst isAdgScriptletRule = (rule) => {\n    return (\n        !isComment(rule)\n        && rule.indexOf(ADG_SCRIPTLET_MASK) > -1\n    );\n};\n\n/**\n * Checks if the `rule` is uBO scriptlet rule\n * @param {string} rule rule text\n */\nconst isUboScriptletRule = (rule) => {\n    return (\n        rule.indexOf(UBO_SCRIPTLET_MASK_1) > -1\n        || rule.indexOf(UBO_SCRIPTLET_MASK_2) > -1\n        || rule.indexOf(UBO_SCRIPTLET_EXCEPTION_MASK_1) > -1\n        || rule.indexOf(UBO_SCRIPTLET_EXCEPTION_MASK_2) > -1\n    )\n        && UBO_SCRIPTLET_MASK_REG.test(rule)\n        && !isComment(rule);\n};\n\n/**\n * Checks if the `rule` is AdBlock Plus snippet\n * @param {string} rule rule text\n */\nconst isAbpSnippetRule = (rule) => {\n    return (\n        rule.indexOf(ABP_SCRIPTLET_MASK) > -1\n        || rule.indexOf(ABP_SCRIPTLET_EXCEPTION_MASK) > -1\n    )\n    && rule.search(ADG_CSS_MASK_REG) === -1\n    && !isComment(rule);\n};\n\n/**\n * Finds scriptlet by it's name\n * @param {string} name - scriptlet name\n */\nconst getScriptletByName = (name) => {\n    const scriptlets = Object.keys(scriptletsList).map((key) => scriptletsList[key]);\n    return scriptlets\n        .find((s) => s.names && s.names.indexOf(name) > -1);\n};\n\n/**\n * Checks if the scriptlet name is valid\n * @param {string} name - Scriptlet name\n */\nconst isValidScriptletName = (name) => {\n    if (!name) {\n        return false;\n    }\n    const scriptlet = getScriptletByName(name);\n    if (!scriptlet) {\n        return false;\n    }\n    return true;\n};\n\n/* ************************************************************************\n *\n * Redirects\n *\n ************************************************************************** */\n\n/**\n * Redirect resources markers\n */\nconst ADG_UBO_REDIRECT_MARKER = 'redirect=';\nconst ABP_REDIRECT_MARKER = 'rewrite=abp-resource:';\n\nconst VALID_SOURCE_TYPES = [\n    'image',\n    'subdocument',\n    'stylesheet',\n    'script',\n    'xmlhttprequest',\n    'media',\n];\n\nconst validAdgRedirects = redirects.filter((el) => el.adg);\n\n/**\n * Converts array of pairs to object.\n * Sort of Object.fromEntries() polyfill.\n * @param {Array} pairs - array of pairs\n * @returns {Object}\n */\nconst objFromEntries = (pairs) => {\n    const output = pairs\n        .reduce((acc, el) => {\n            const [key, value] = el;\n            acc[key] = value;\n            return acc;\n        }, {});\n    return output;\n};\n\n/**\n * Compatibility object where KEYS = UBO redirect names and VALUES = ADG redirect names\n * It's used for UBO -> ADG  converting\n */\nconst uboToAdgCompatibility = objFromEntries(\n    validAdgRedirects\n        .filter((el) => el.ubo)\n        .map((el) => {\n            return [el.ubo, el.adg];\n        }),\n);\n\n/**\n * Compatibility object where KEYS = ABP redirect names and VALUES = ADG redirect names\n * It's used for ABP -> ADG  converting\n */\nconst abpToAdgCompatibility = objFromEntries(\n    validAdgRedirects\n        .filter((el) => el.abp)\n        .map((el) => {\n            return [el.abp, el.adg];\n        }),\n);\n\n/**\n * Compatibility object where KEYS = UBO redirect names and VALUES = ADG redirect names\n * It's used for ADG -> UBO  converting\n */\nconst adgToUboCompatibility = objFromEntries(\n    validAdgRedirects\n        .filter((el) => el.ubo)\n        .map((el) => {\n            return [el.adg, el.ubo];\n        }),\n);\n\n\nconst REDIRECT_RULE_TYPES = {\n    ADG: {\n        marker: ADG_UBO_REDIRECT_MARKER,\n        compatibility: adgToUboCompatibility,\n    },\n    UBO: {\n        marker: ADG_UBO_REDIRECT_MARKER,\n        compatibility: uboToAdgCompatibility,\n    },\n    ABP: {\n        marker: ABP_REDIRECT_MARKER,\n        compatibility: abpToAdgCompatibility,\n    },\n};\n\n/**\n * Parses redirect rule modifiers\n * @param {string} rule\n * @returns {Array}\n */\nconst parseModifiers = (rule) => substringAfter(rule, '$').split(',');\n\n/**\n * Gets redirect resource name\n * @param {string} rule\n * @param {string} marker - specific Adg/Ubo or Abp redirect resources marker\n * @returns {string} - redirect resource name\n */\nconst getRedirectName = (rule, marker) => {\n    const ruleModifiers = parseModifiers(rule);\n    const redirectNamePart = ruleModifiers\n        .find((el) => el.indexOf(marker) > -1);\n    return substringAfter(redirectNamePart, marker);\n};\n\n\n/**\n * Checks if the `rule` is AdGuard redirect rule.\n * Discards comments and checks if the `rule` has 'redirect' modifier.\n * @param {string} rule - rule text\n */\nconst isAdgRedirectRule = (rule) => {\n    return (\n        !isComment(rule)\n        && rule.indexOf(REDIRECT_RULE_TYPES.ADG.marker) > -1\n    );\n};\n\n/**\n * Checks if the `rule` satisfies the `type`\n * @param {string} rule - rule text\n * @param {'ADG'|'UBO'|'ABP'} type - type of a redirect rule\n */\nconst isRedirectRuleByType = (rule, type) => {\n    const { marker, compatibility } = REDIRECT_RULE_TYPES[type];\n\n    if ((!isComment(rule))\n        && (rule.indexOf(marker) > -1)) {\n        const redirectName = getRedirectName(rule, marker);\n\n        return redirectName === Object\n            .keys(compatibility)\n            .find((el) => el === redirectName);\n    }\n    return false;\n};\n\n/**\n* Checks if the `rule` is AdGuard redirect resource rule\n* @param {string} rule - rule text\n* @returns {boolean}\n*/\nconst isValidAdgRedirectRule = (rule) => {\n    return isRedirectRuleByType(rule, 'ADG');\n};\n\n/**\n* Checks if the `rule` is Ubo redirect resource rule\n* @param {string} rule - rule text\n* @returns {boolean}\n*/\nconst isValidUboRedirectRule = (rule) => {\n    return isRedirectRuleByType(rule, 'UBO');\n};\n\n/**\n* Checks if the `rule` is Abp redirect resource rule\n* @param {string} rule - rule text\n* @returns {boolean}\n*/\nconst isValidAbpRedirectRule = (rule) => {\n    return isRedirectRuleByType(rule, 'ABP');\n};\n\n/**\n * Validates any redirect rule\n * @param {string} rule - can be Adguard or Ubo or Abp redirect rule\n * @returns {boolean}\n */\nconst isValidRedirectRule = (rule) => {\n    return (isValidAdgRedirectRule(rule)\n        || isValidUboRedirectRule(rule)\n        || isValidAbpRedirectRule(rule));\n};\n\n/**\n * Checks if the rule has specified content type before Adg -> Ubo conversion.\n *\n * Used ONLY for Adg -> Ubo conversion\n * because Ubo redirect rules must contain content type, but Adg and Abp must not.\n *\n * Also source type can not be added automatically because of such valid rules:\n * ! Abp:\n * $rewrite=abp-resource:blank-js,xmlhttprequest\n * ! Adg:\n * $script,redirect=noopvast-2.0\n * $xmlhttprequest,redirect=noopvast-2.0\n *\n * @param {string} rule\n * @returns {boolean}\n */\nconst hasValidContentType = (rule) => {\n    if (isRedirectRuleByType(rule, 'ADG')) {\n        const ruleModifiers = parseModifiers(rule);\n        const sourceType = ruleModifiers\n            .find((el) => VALID_SOURCE_TYPES.indexOf(el) > -1);\n\n        return sourceType !== undefined;\n    }\n    return false;\n};\n\nconst validator = {\n    UBO_SCRIPTLET_MASK_REG,\n    ABP_SCRIPTLET_MASK,\n    ABP_SCRIPTLET_EXCEPTION_MASK,\n    isComment,\n    isAdgScriptletRule,\n    isUboScriptletRule,\n    isAbpSnippetRule,\n    getScriptletByName,\n    isValidScriptletName,\n    REDIRECT_RULE_TYPES,\n    isAdgRedirectRule,\n    isValidRedirectRule,\n    isValidAdgRedirectRule,\n    isValidUboRedirectRule,\n    isValidAbpRedirectRule,\n    parseModifiers,\n    getRedirectName,\n    hasValidContentType,\n};\n\nexport default validator;\n","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || nonIterableRest();\n}\n\nmodule.exports = _toArray;","import {\n    getBeforeRegExp,\n    substringAfter,\n    substringBefore,\n    wrapInSingleQuotes,\n    getStringInBraces,\n} from './string-utils';\n\nimport validator from './validator';\n\nimport { parseRule } from './parse-rule';\n\nimport * as scriptletList from '../scriptlets/scriptletsList';\n\n/**\n * AdGuard scriptlet rule\n */\nconst ADGUARD_SCRIPTLET_MASK_REG = /#@?%#\\/\\/scriptlet\\(.+\\)/;\n// eslint-disable-next-line no-template-curly-in-string\nconst ADGUARD_SCRIPTLET_TEMPLATE = '${domains}#%#//scriptlet(${args})';\n// eslint-disable-next-line no-template-curly-in-string\nconst ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE = '${domains}#@%#//scriptlet(${args})';\n\n/**\n * uBlock scriptlet rule mask\n */\n// eslint-disable-next-line no-template-curly-in-string\nconst UBO_SCRIPTLET_TEMPLATE = '${domains}##+js(${args})';\n// eslint-disable-next-line no-template-curly-in-string\nconst UBO_SCRIPTLET_EXCEPTION_TEMPLATE = '${domains}#@#+js(${args})';\n\nconst UBO_ALIAS_NAME_MARKER = 'ubo-';\n\n// https://github.com/gorhill/uBlock/wiki/Static-filter-syntax#xhr\nconst UBO_XHR_TYPE = 'xhr';\n\nconst ADG_XHR_TYPE = 'xmlhttprequest';\n\n\n/**\n * Returns array of strings separated by space which not in quotes\n * @param {string} str\n */\nconst getSentences = (str) => {\n    const reg = /'.*?'|\".*?\"|\\S+/g;\n    return str.match(reg);\n};\n\n/**\n * Replaces string with data by placeholders\n * @param {string} str\n * @param {Object} data - where keys are placeholders names\n */\nconst replacePlaceholders = (str, data) => {\n    return Object.keys(data).reduce((acc, key) => {\n        const reg = new RegExp(`\\\\$\\\\{${key}\\\\}`, 'g');\n        acc = acc.replace(reg, data[key]);\n        return acc;\n    }, str);\n};\n\n/**\n * Converts string of UBO scriptlet rule to AdGuard scritlet rule\n * @param {string} rule - UBO scriptlet rule\n * @returns {Array} - array with one AdGuard scriptlet rule\n */\nexport const convertUboScriptletToAdg = (rule) => {\n    const domains = getBeforeRegExp(rule, validator.UBO_SCRIPTLET_MASK_REG);\n    const mask = rule.match(validator.UBO_SCRIPTLET_MASK_REG)[0];\n    let template;\n    if (mask.indexOf('@') > -1) {\n        template = ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE;\n    } else {\n        template = ADGUARD_SCRIPTLET_TEMPLATE;\n    }\n    const args = getStringInBraces(rule)\n        .split(/, /g)\n        .map((arg, index) => {\n            let outputArg;\n            if (index === 0) {\n                outputArg = (arg.indexOf('.js') > -1) ? `ubo-${arg}` : `ubo-${arg}.js`;\n            } else {\n                outputArg = arg;\n            }\n            // for example: dramaserial.xyz##+js(abort-current-inline-script, $, popup)\n            if (arg === '$') {\n                outputArg = '$$';\n            }\n            return outputArg;\n        })\n        .map((arg) => wrapInSingleQuotes(arg))\n        .join(', ');\n    const adgRule = replacePlaceholders(\n        template,\n        { domains, args },\n    );\n    return [adgRule];\n};\n\n/**\n * Convert string of ABP snippet rule to AdGuard scritlet rule\n * @param {string} rule - ABP snippet rule\n * @returns {Array} - array of AdGuard scriptlet rules -\n * one or few items depends on Abp-rule\n */\nexport const convertAbpSnippetToAdg = (rule) => {\n    const SEMICOLON_DIVIDER = /;(?=(?:(?:[^\"]*\"){2})*[^\"]*$)/g;\n    const mask = rule.indexOf(validator.ABP_SCRIPTLET_MASK) > -1\n        ? validator.ABP_SCRIPTLET_MASK\n        : validator.ABP_SCRIPTLET_EXCEPTION_MASK;\n    const template = mask === validator.ABP_SCRIPTLET_MASK\n        ? ADGUARD_SCRIPTLET_TEMPLATE\n        : ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE;\n    const domains = substringBefore(rule, mask);\n    const args = substringAfter(rule, mask);\n\n    return args.split(SEMICOLON_DIVIDER)\n        .map((args) => getSentences(args)\n            .filter((arg) => arg)\n            .map((arg, index) => (index === 0 ? `abp-${arg}` : arg))\n            .map((arg) => wrapInSingleQuotes(arg))\n            .join(', '))\n        .map((args) => replacePlaceholders(template, { domains, args }));\n};\n\n/**\n * Converts scriptlet rule to AdGuard one\n * @param {string} rule\n * @returns {Array} - array of AdGuard scriptlet rules -\n * one item for Adg and Ubo or few items for Abp\n */\nexport const convertScriptletToAdg = (rule) => {\n    let result;\n    if (validator.isUboScriptletRule(rule)) {\n        result = convertUboScriptletToAdg(rule);\n    } else if (validator.isAbpSnippetRule(rule)) {\n        result = convertAbpSnippetToAdg(rule);\n    } else if (validator.isAdgScriptletRule(rule) || (validator.isComment(rule))) {\n        result = [rule];\n    }\n\n    return result;\n};\n\n/**\n * Converts UBO scriptlet rule to AdGuard one\n * @param {string} rule - AdGuard scriptlet rule\n * @returns {string} - UBO scriptlet rule\n */\nexport const convertAdgScriptletToUbo = (rule) => {\n    let res;\n\n    if (validator.isAdgScriptletRule(rule)) {\n        const { name: parsedName, args: parsedParams } = parseRule(rule);\n\n        // object of name and aliases for the Adg-scriptlet\n        const adgScriptletObject = Object\n            .keys(scriptletList)\n            .map((el) => scriptletList[el])\n            .map((s) => {\n                const [name, ...aliases] = s.names;\n                return { name, aliases };\n            })\n            .find((el) => (el.name === parsedName\n                || el.aliases.indexOf(parsedName) >= 0));\n\n        const { aliases } = adgScriptletObject;\n\n        if (aliases.length > 0) {\n            const uboAlias = adgScriptletObject.aliases\n                // eslint-disable-next-line no-restricted-properties\n                .find((alias) => alias.includes(UBO_ALIAS_NAME_MARKER));\n\n            if (uboAlias) {\n                const mask = rule.match(ADGUARD_SCRIPTLET_MASK_REG)[0];\n                let template;\n                if (mask.indexOf('@') > -1) {\n                    template = UBO_SCRIPTLET_EXCEPTION_TEMPLATE;\n                } else {\n                    template = UBO_SCRIPTLET_TEMPLATE;\n                }\n                const domains = getBeforeRegExp(rule, ADGUARD_SCRIPTLET_MASK_REG);\n                const uboName = uboAlias\n                    .replace(UBO_ALIAS_NAME_MARKER, '')\n                    // '.js' in the Ubo scriptlet name can be omitted\n                    // https://github.com/gorhill/uBlock/wiki/Resources-Library#general-purpose-scriptlets\n                    .replace('.js', '');\n\n                const args = (parsedParams.length > 0) ? `${uboName}, ${parsedParams.join(', ')}` : uboName;\n\n                const uboRule = replacePlaceholders(\n                    template,\n                    { domains, args },\n                );\n\n                res = uboRule;\n            }\n        }\n    }\n\n    return res;\n};\n\n/**\n * Validates any scriptlet rule\n * @param {string} input - can be Adguard or Ubo or Abp scriptlet rule\n */\nexport const isValidScriptletRule = (input) => {\n    if (!input) {\n        return false;\n    }\n    // ABP 'input' rule may contain more than one snippet\n    const rulesArray = convertScriptletToAdg(input);\n\n    // checking if each of parsed scriptlets is valid\n    // if at least one of them is not valid - whole 'input' rule is not valid too\n    const isValid = rulesArray.reduce((acc, rule) => {\n        const parsedRule = parseRule(rule);\n        return validator.isValidScriptletName(parsedRule.name) && acc;\n    }, true);\n\n    return isValid;\n};\n\n\n/**\n * Converts Ubo redirect rule to Adg one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertUboRedirectToAdg = (rule) => {\n    const firstPartOfRule = substringBefore(rule, '$');\n    const uboModifiers = validator.parseModifiers(rule);\n    const adgModifiers = uboModifiers\n        .map((el) => {\n            if (el.indexOf(validator.REDIRECT_RULE_TYPES.UBO.marker) > -1) {\n                const uboName = substringAfter(el, validator.REDIRECT_RULE_TYPES.UBO.marker);\n                const adgName = validator.REDIRECT_RULE_TYPES.UBO.compatibility[uboName];\n                return `${validator.REDIRECT_RULE_TYPES.ADG.marker}${adgName}`;\n            }\n            if (el === UBO_XHR_TYPE) {\n                return ADG_XHR_TYPE;\n            }\n            return el;\n        })\n        .join(',');\n\n    return `${firstPartOfRule}$${adgModifiers}`;\n};\n\n/**\n * Converts Abp redirect rule to Adg one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertAbpRedirectToAdg = (rule) => {\n    const firstPartOfRule = substringBefore(rule, '$');\n    const abpModifiers = validator.parseModifiers(rule);\n    const adgModifiers = abpModifiers\n        .map((el) => {\n            if (el.indexOf(validator.REDIRECT_RULE_TYPES.ABP.marker) > -1) {\n                const abpName = substringAfter(el, validator.REDIRECT_RULE_TYPES.ABP.marker);\n                const adgName = validator.REDIRECT_RULE_TYPES.ABP.compatibility[abpName];\n                return `${validator.REDIRECT_RULE_TYPES.ADG.marker}${adgName}`;\n            }\n            return el;\n        })\n        .join(',');\n\n    return `${firstPartOfRule}$${adgModifiers}`;\n};\n\n/**\n * Converts redirect rule to AdGuard one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertRedirectToAdg = (rule) => {\n    let result;\n    if (validator.isValidUboRedirectRule(rule)) {\n        result = convertUboRedirectToAdg(rule);\n    } else if (validator.isValidAbpRedirectRule(rule)) {\n        result = convertAbpRedirectToAdg(rule);\n    } else if (validator.isValidAdgRedirectRule(rule) || (validator.isComment(rule))) {\n        result = rule;\n    }\n\n    return result;\n};\n\n/**\n * Converts Adg redirect rule to Ubo one\n * @param {string} rule\n * @returns {string}\n */\nexport const convertAdgRedirectToUbo = (rule) => {\n    if (!validator.hasValidContentType(rule)) {\n        throw new Error(`Rule is not valid for converting to Ubo. Source type is not specified in the rule: ${rule}`);\n    } else {\n        const firstPartOfRule = substringBefore(rule, '$');\n        const uboModifiers = validator.parseModifiers(rule);\n        const adgModifiers = uboModifiers\n            .map((el) => {\n                if (el.indexOf(validator.REDIRECT_RULE_TYPES.ADG.marker) > -1) {\n                    const adgName = substringAfter(el, validator.REDIRECT_RULE_TYPES.ADG.marker);\n                    const uboName = validator.REDIRECT_RULE_TYPES.ADG.compatibility[adgName];\n                    return `${validator.REDIRECT_RULE_TYPES.UBO.marker}${uboName}`;\n                }\n                return el;\n            })\n            .join(',');\n\n        return `${firstPartOfRule}$${adgModifiers}`;\n    }\n};\n","import { hit } from '../helpers/hit';\nimport { noop, noopNull } from '../helpers/noop';\n\n/**\n * @redirect google-analytics\n *\n * @description\n * Mocks Google Analytics API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/google-analytics_analytics.js\n *\n * **Example**\n * ```\n * ||google-analytics.com/analytics.js$script,redirect=google-analytics\n * ```\n */\nexport function GoogleAnalytics(source) {\n    // eslint-disable-next-line func-names\n    const Tracker = function () { }; // constructor\n    const proto = Tracker.prototype;\n    proto.get = noop;\n    proto.set = noop;\n    proto.send = noop;\n\n    const googleAnalyticsName = window.GoogleAnalyticsObject || 'ga';\n    function ga() {\n        const len = arguments.length;\n        if (len === 0) {\n            return;\n        }\n        // eslint-disable-next-line prefer-rest-params\n        const lastArg = arguments[len - 1];\n        if (typeof lastArg !== 'object'\n            || lastArg === null\n            || typeof lastArg.hitCallback !== 'function'\n        ) {\n            return;\n        }\n\n        try {\n            lastArg.hitCallback();\n            // eslint-disable-next-line no-empty\n        } catch (ex) { }\n    }\n\n    ga.create = () => new Tracker();\n    ga.getByName = noopNull;\n    ga.getAll = () => [];\n    ga.remove = noop;\n    ga.loaded = true;\n    window[googleAnalyticsName] = ga;\n\n    const { dataLayer } = window;\n    if (dataLayer instanceof Object\n        && dataLayer.hide instanceof Object\n        && typeof dataLayer.hide.end === 'function'\n    ) {\n        dataLayer.hide.end();\n    }\n\n    hit(source);\n}\n\nGoogleAnalytics.names = [\n    'google-analytics',\n    'ubo-google-analytics_analytics.js',\n    'google-analytics_analytics.js',\n];\n\nGoogleAnalytics.injections = [\n    hit,\n    noop,\n    noopNull,\n];\n","/* eslint-disable no-underscore-dangle */\nimport { hit } from '../helpers/hit';\nimport { noop } from '../helpers/noop';\n\n/**\n * @redirect google-analytics-ga\n *\n * @description\n * Mocks old Google Analytics API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/google-analytics_ga.js\n *\n * **Example**\n * ```\n * ||google-analytics.com/ga.js$script,redirect=google-analytics-ga\n * ```\n */\nexport function GoogleAnalyticsGa(source) {\n    // Gaq constructor\n    function Gaq() { }\n\n    Gaq.prototype.Na = noop;\n    Gaq.prototype.O = noop;\n    Gaq.prototype.Sa = noop;\n    Gaq.prototype.Ta = noop;\n    Gaq.prototype.Va = noop;\n    Gaq.prototype._createAsyncTracker = noop;\n    Gaq.prototype._getAsyncTracker = noop;\n    Gaq.prototype._getPlugin = noop;\n    Gaq.prototype.push = (data) => {\n        if (typeof data === 'function') {\n            data();\n            return;\n        }\n        if (Array.isArray(data) === false) {\n            return;\n        }\n        // https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiDomainDirectory#_gat.GA_Tracker_._link\n        if (data[0] === '_link' && typeof data[1] === 'string') {\n            window.location.assign(data[1]);\n        }\n        // https://github.com/gorhill/uBlock/issues/2162\n        if (data[0] === '_set' && data[1] === 'hitCallback' && typeof data[2] === 'function') {\n            data[2]();\n        }\n    };\n\n    const gaq = new Gaq();\n    const asyncTrackers = window._gaq || [];\n    if (Array.isArray(asyncTrackers)) {\n        while (asyncTrackers[0]) {\n            gaq.push(asyncTrackers.shift());\n        }\n    }\n    // eslint-disable-next-line no-multi-assign\n    window._gaq = gaq.qf = gaq;\n\n\n    // Gat constructor\n    function Gat() { }\n\n    // Mock tracker api\n    const api = [\n        '_addIgnoredOrganic', '_addIgnoredRef', '_addItem', '_addOrganic',\n        '_addTrans', '_clearIgnoredOrganic', '_clearIgnoredRef', '_clearOrganic',\n        '_cookiePathCopy', '_deleteCustomVar', '_getName', '_setAccount',\n        '_getAccount', '_getClientInfo', '_getDetectFlash', '_getDetectTitle',\n        '_getLinkerUrl', '_getLocalGifPath', '_getServiceMode', '_getVersion',\n        '_getVisitorCustomVar', '_initData', '_link', '_linkByPost',\n        '_setAllowAnchor', '_setAllowHash', '_setAllowLinker', '_setCampContentKey',\n        '_setCampMediumKey', '_setCampNameKey', '_setCampNOKey', '_setCampSourceKey',\n        '_setCampTermKey', '_setCampaignCookieTimeout', '_setCampaignTrack', '_setClientInfo',\n        '_setCookiePath', '_setCookiePersistence', '_setCookieTimeout', '_setCustomVar',\n        '_setDetectFlash', '_setDetectTitle', '_setDomainName', '_setLocalGifPath',\n        '_setLocalRemoteServerMode', '_setLocalServerMode', '_setReferrerOverride', '_setRemoteServerMode',\n        '_setSampleRate', '_setSessionTimeout', '_setSiteSpeedSampleRate', '_setSessionCookieTimeout',\n        '_setVar', '_setVisitorCookieTimeout', '_trackEvent', '_trackPageLoadTime',\n        '_trackPageview', '_trackSocial', '_trackTiming', '_trackTrans',\n        '_visitCode',\n    ];\n    const tracker = api.reduce((res, funcName) => {\n        res[funcName] = noop;\n        return res;\n    }, {});\n    tracker._getLinkerUrl = (a) => a;\n\n    Gat.prototype._anonymizeIP = noop;\n    Gat.prototype._createTracker = noop;\n    Gat.prototype._forceSSL = noop;\n    Gat.prototype._getPlugin = noop;\n    Gat.prototype._getTracker = () => tracker;\n    Gat.prototype._getTrackerByName = () => tracker;\n    Gat.prototype._getTrackers = noop;\n    Gat.prototype.aa = noop;\n    Gat.prototype.ab = noop;\n    Gat.prototype.hb = noop;\n    Gat.prototype.la = noop;\n    Gat.prototype.oa = noop;\n    Gat.prototype.pa = noop;\n    Gat.prototype.u = noop;\n\n    const gat = new Gat();\n    window._gat = gat;\n\n    hit(source);\n}\n\nGoogleAnalyticsGa.names = [\n    'google-analytics-ga',\n    'ubo-google-analytics_ga.js',\n    'google-analytics_ga.js',\n];\n\nGoogleAnalyticsGa.injections = [\n    hit,\n    noop,\n];\n","import { hit } from '../helpers/hit';\n\n/* eslint-disable max-len */\n/**\n * @redirect googlesyndication-adsbygoogle\n *\n * @description\n * Mocks Google AdSense API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/googlesyndication_adsbygoogle.js\n *\n * **Example**\n * ```\n * ||pagead2.googlesyndication.com/pagead/js/adsbygoogle.js$script,redirect=googlesyndication-adsbygoogle\n * ```\n */\n/* eslint-enable max-len */\nexport function GoogleSyndicationAdsByGoogle(source) {\n    window.adsbygoogle = window.adsbygoogle || {\n        length: 0,\n        loaded: true,\n        push() {\n            this.length += 1;\n        },\n    };\n    const adElems = document.querySelectorAll('.adsbygoogle');\n    const css = 'height:1px!important;max-height:1px!important;max-width:1px!important;width:1px!important;';\n    let executed = false;\n    for (let i = 0; i < adElems.length; i += 1) {\n        const frame = document.createElement('iframe');\n        frame.id = `aswift_${i + 1}`;\n        frame.style = css;\n        const childFrame = document.createElement('iframe');\n        childFrame.id = `google_ads_frame${i}`;\n        frame.appendChild(childFrame);\n        document.body.appendChild(frame);\n        executed = true;\n    }\n    if (executed) {\n        hit(source);\n    }\n}\n\nGoogleSyndicationAdsByGoogle.names = [\n    'googlesyndication-adsbygoogle',\n    'ubo-googlesyndication_adsbygoogle.js',\n    'googlesyndication_adsbygoogle.js',\n];\n\nGoogleSyndicationAdsByGoogle.injections = [\n    hit,\n];\n","import { hit } from '../helpers/hit';\nimport { noop } from '../helpers/noop';\n\n/**\n * @redirect googletagmanager-gtm\n *\n * @description\n * Mocks Google Tag Manager API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/googletagmanager_gtm.js\n *\n * **Example**\n * ```\n * ||googletagmanager.com/gtm.js$script,redirect=googletagmanager-gtm\n * ```\n */\nexport function GoogleTagManagerGtm(source) {\n    window.ga = window.ga || noop;\n    const { dataLayer } = window;\n    if (dataLayer instanceof Object === false) {\n        return;\n    }\n\n    if (dataLayer.hide instanceof Object && typeof dataLayer.hide.end === 'function') {\n        dataLayer.hide.end();\n    }\n\n    if (typeof dataLayer.push === 'function') {\n        dataLayer.push = (data) => {\n            if (data instanceof Object && typeof data.eventCallback === 'function') {\n                setTimeout(data.eventCallback, 1);\n            }\n        };\n    }\n\n    hit(source);\n}\n\nGoogleTagManagerGtm.names = [\n    'googletagmanager-gtm',\n    'ubo-googletagmanager_gtm.js',\n    'googletagmanager_gtm.js',\n];\n\nGoogleTagManagerGtm.injections = [\n    hit,\n    noop,\n];\n","import { hit } from '../helpers/hit';\nimport {\n    noop,\n    noopThis,\n    noopNull,\n    noopArray,\n    noopStr,\n} from '../helpers/noop';\n\n/**\n * @redirect googletagservices-gpt\n *\n * @description\n * Mocks Google Publisher Tag API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/googletagservices_gpt.js\n *\n * **Example**\n * ```\n * ||googletagservices.com/tag/js/gpt.js$script,redirect=googletagservices-gpt\n * ```\n */\nexport function GoogleTagServicesGpt(source) {\n    const companionAdsService = {\n        addEventListener: noopThis,\n        enableSyncLoading: noop,\n        setRefreshUnfilledSlots: noop,\n    };\n    const contentService = {\n        addEventListener: noopThis,\n        setContent: noop,\n    };\n    function PassbackSlot() { } // constructor\n\n    PassbackSlot.prototype.display = noop;\n    PassbackSlot.prototype.get = noopNull;\n    PassbackSlot.prototype.set = noopThis;\n    PassbackSlot.prototype.setClickUrl = noopThis;\n    PassbackSlot.prototype.setTagForChildDirectedTreatment = noopThis;\n    PassbackSlot.prototype.setTargeting = noopThis;\n    PassbackSlot.prototype.updateTargetingFromMap = noopThis;\n\n    function SizeMappingBuilder() { } // constructor\n    SizeMappingBuilder.prototype.addSize = noopThis;\n    SizeMappingBuilder.prototype.build = noopNull;\n\n    function Slot() { } // constructor\n    Slot.prototype.addService = noopThis;\n    Slot.prototype.clearCategoryExclusions = noopThis;\n    Slot.prototype.clearTargeting = noopThis;\n    Slot.prototype.defineSizeMapping = noopThis;\n    Slot.prototype.get = noopNull;\n    Slot.prototype.getAdUnitPath = noopArray;\n    Slot.prototype.getAttributeKeys = noopArray;\n    Slot.prototype.getCategoryExclusions = noopArray;\n    Slot.prototype.getDomId = noopStr;\n    Slot.prototype.getSlotElementId = noopStr;\n    Slot.prototype.getSlotId = noopThis;\n    Slot.prototype.getTargeting = noopArray;\n    Slot.prototype.getTargetingKeys = noopArray;\n    Slot.prototype.set = noopThis;\n    Slot.prototype.setCategoryExclusion = noopThis;\n    Slot.prototype.setClickUrl = noopThis;\n    Slot.prototype.setCollapseEmptyDiv = noopThis;\n    Slot.prototype.setTargeting = noopThis;\n\n    const pubAdsService = {\n        addEventListener: noopThis,\n        clear: noop,\n        clearCategoryExclusions: noopThis,\n        clearTagForChildDirectedTreatment: noopThis,\n        clearTargeting: noopThis,\n        collapseEmptyDivs: noop,\n        defineOutOfPagePassback() { return new PassbackSlot(); },\n        definePassback() { return new PassbackSlot(); },\n        disableInitialLoad: noop,\n        display: noop,\n        enableAsyncRendering: noop,\n        enableSingleRequest: noop,\n        enableSyncRendering: noop,\n        enableVideoAds: noop,\n        get: noopNull,\n        getAttributeKeys: noopArray,\n        getTargeting: noop,\n        getTargetingKeys: noopArray,\n        getSlots: noopArray,\n        refresh: noop,\n        set: noopThis,\n        setCategoryExclusion: noopThis,\n        setCentering: noop,\n        setCookieOptions: noopThis,\n        setForceSafeFrame: noopThis,\n        setLocation: noopThis,\n        setPublisherProvidedId: noopThis,\n        setRequestNonPersonalizedAds: noopThis,\n        setSafeFrameConfig: noopThis,\n        setTagForChildDirectedTreatment: noopThis,\n        setTargeting: noopThis,\n        setVideoContent: noopThis,\n        updateCorrelator: noop,\n    };\n\n\n    const { googletag = {} } = window;\n    const { cmd = [] } = googletag;\n\n    googletag.apiReady = true;\n    googletag.cmd = [];\n    googletag.cmd.push = (a) => {\n        try {\n            a();\n            // eslint-disable-next-line no-empty\n        } catch (ex) { }\n        return 1;\n    };\n    googletag.companionAds = () => companionAdsService;\n    googletag.content = () => contentService;\n    googletag.defineOutOfPageSlot = () => new Slot();\n    googletag.defineSlot = () => new Slot();\n    googletag.destroySlots = noop;\n    googletag.disablePublisherConsole = noop;\n    googletag.display = noop;\n    googletag.enableServices = noop;\n    googletag.getVersion = noopStr;\n    googletag.pubads = () => pubAdsService;\n    googletag.pubadsReady = true;\n    googletag.setAdIframeTitle = noop;\n    googletag.sizeMapping = () => new SizeMappingBuilder();\n\n    window.googletag = googletag;\n    while (cmd.length !== 0) {\n        googletag.cmd.push(cmd.shift());\n    }\n\n    hit(source);\n}\n\nGoogleTagServicesGpt.names = [\n    'googletagservices-gpt',\n    'ubo-googletagservices_gpt.js',\n    'googletagservices_gpt.js',\n];\n\nGoogleTagServicesGpt.injections = [\n    hit,\n    noop,\n    noopThis,\n    noopNull,\n    noopArray,\n    noopStr,\n];\n","import { hit } from '../helpers/hit';\n\n/**\n * @redirect scorecardresearch-beacon\n *\n * @description\n * Mocks Scorecard Research API.\n *\n * Related UBO redirect resource:\n * https://github.com/gorhill/uBlock/blob/a94df7f3b27080ae2dcb3b914ace39c0c294d2f6/src/web_accessible_resources/scorecardresearch_beacon.js\n *\n * **Example**\n * ```\n * ||sb.scorecardresearch.com/beacon.js$script,redirect=scorecardresearch-beacon\n * ```\n */\nexport function ScoreCardResearchBeacon(source) {\n    window.COMSCORE = {\n        purge() {\n            // eslint-disable-next-line no-underscore-dangle\n            window._comscore = [];\n        },\n        beacon() {},\n    };\n    hit(source);\n}\n\nScoreCardResearchBeacon.names = [\n    'scorecardresearch-beacon',\n    'ubo-scorecardresearch_beacon.js',\n    'scorecardresearch_beacon.js',\n];\n\nScoreCardResearchBeacon.injections = [\n    hit,\n];\n","import { hit } from '../helpers/hit';\nimport { noop } from '../helpers/noop';\n\n/**\n * @redirect metrika-yandex-tag\n *\n * @description\n * Mocks Yandex Metrika API.\n * https://yandex.ru/support/metrica/objects/method-reference.html\n *\n * **Example**\n * ```\n * ||mc.yandex.ru/metrika/tag.js$script,redirect=metrika-yandex-tag\n * ```\n */\nexport function metrikaYandexTag(source) {\n    const asyncCallbackFromOptions = (param, options = {}) => {\n        let { callback } = options;\n        const { ctx } = options;\n        if (typeof callback === 'function') {\n            callback = ctx !== undefined ? callback.bind(ctx) : callback;\n            setTimeout(() => callback());\n        }\n    };\n\n    const init = noop;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/addfileextension.html\n     */\n    const addFileExtension = noop;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/extlink.html\n     */\n    const extLink = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/file.html\n     */\n    const file = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/get-client-id.html\n     * @param {Function} cb\n     */\n    const getClientID = (cb) => {\n        setTimeout(cb(null));\n    };\n\n    /**\n     * https://yandex.ru/support/metrica/objects/hit.html\n     */\n    const hitFunc = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/notbounce.html\n     */\n    const notBounce = asyncCallbackFromOptions;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/params-method.html\n     */\n    const params = noop;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/reachgoal.html\n     * @param {string} target\n     * @param {Object} params\n     * @param {Function} callback\n     * @param {any} ctx\n     */\n    const reachGoal = (target, params, callback, ctx) => {\n        asyncCallbackFromOptions(null, { callback, ctx });\n    };\n\n    /**\n     * https://yandex.ru/support/metrica/objects/set-user-id.html\n     */\n    const setUserID = noop;\n\n    /**\n     * https://yandex.ru/support/metrica/objects/user-params.html\n     */\n    const userParams = noop;\n\n    const api = {\n        init,\n        addFileExtension,\n        extLink,\n        file,\n        getClientID,\n        hit: hitFunc,\n        notBounce,\n        params,\n        reachGoal,\n        setUserID,\n        userParams,\n    };\n\n    function ym(id, funcName, ...args) {\n        return api[funcName] && api[funcName](...args);\n    }\n\n    window.ym = ym;\n\n    hit(source);\n}\n\nmetrikaYandexTag.names = [\n    'metrika-yandex-tag',\n];\n\nmetrikaYandexTag.injections = [hit, noop];\n","import { hit } from '../helpers/hit';\nimport { noop } from '../helpers/noop';\n\n/**\n * @redirect metrika-yandex-watch\n *\n * @description\n * Mocks the old Yandex Metrika API.\n * https://yandex.ru/support/metrica/objects/_method-reference.html\n *\n * **Example**\n * ```\n * ||mc.yandex.ru/metrika/watch.js$script,redirect=metrika-yandex-watch\n * ```\n */\nexport function metrikaYandexWatch(source) {\n    const cbName = 'yandex_metrika_callbacks';\n\n    /**\n     * Gets callback and its context from options and call it in async way\n     * @param {Object} options Yandex Metrika API options\n     */\n    const asyncCallbackFromOptions = (options = {}) => {\n        let { callback } = options;\n        const { ctx } = options;\n        if (typeof callback === 'function') {\n            callback = ctx !== undefined ? callback.bind(ctx) : callback;\n            setTimeout(() => callback());\n        }\n    };\n\n    function Metrika() { } // constructor\n\n    // Methods without options\n    Metrika.prototype.addFileExtension = noop;\n    Metrika.prototype.getClientID = noop;\n    Metrika.prototype.setUserID = noop;\n    Metrika.prototype.userParams = noop;\n\n    // Methods with options\n    // The order of arguments should be kept in according to API\n    Metrika.prototype.extLink = (url, options) => {\n        asyncCallbackFromOptions(options);\n    };\n    Metrika.prototype.file = (url, options) => {\n        asyncCallbackFromOptions(options);\n    };\n    Metrika.prototype.hit = (url, options) => {\n        asyncCallbackFromOptions(options);\n    };\n    Metrika.prototype.reachGoal = (target, params, cb, ctx) => {\n        asyncCallbackFromOptions({ callback: cb, ctx });\n    };\n    Metrika.prototype.notBounce = asyncCallbackFromOptions;\n\n    if (window.Ya) {\n        window.Ya.Metrika = Metrika;\n    } else {\n        window.Ya = { Metrika };\n    }\n\n    if (window[cbName] && Array.isArray(window[cbName])) {\n        window[cbName].forEach((func) => {\n            if (typeof func === 'function') {\n                func();\n            }\n        });\n    }\n\n    hit(source);\n}\n\nmetrikaYandexWatch.names = [\n    'metrika-yandex-watch',\n];\n\nmetrikaYandexWatch.injections = [hit, noop];\n","import {\n    attachDependencies,\n    addCall,\n    passSourceAndProps,\n} from '../helpers/injector';\n\nimport validator from '../helpers/validator';\n\nimport {\n    convertUboRedirectToAdg,\n    convertAbpRedirectToAdg,\n    convertRedirectToAdg,\n    convertAdgRedirectToUbo,\n} from '../helpers/converter';\n\nimport * as redirectsList from './redirectsList';\n\n/**\n * Finds redirect resource by it's name\n * @param {string} name - redirect name\n */\nconst getRedirectByName = (name) => {\n    const redirects = Object.keys(redirectsList).map((key) => redirectsList[key]);\n    return redirects.find((r) => r.names && r.names.indexOf(name) > -1);\n};\n\nconst getRedirectCode = (name) => {\n    const redirect = getRedirectByName(name);\n    let result = attachDependencies(redirect);\n    result = addCall(redirect, result);\n\n    return passSourceAndProps({ name }, result);\n};\n\n\nexport const redirectsCjs = {\n    getCode: getRedirectCode,\n    isAdgRedirectRule: validator.isAdgRedirectRule,\n    isValidRedirectRule: validator.isValidRedirectRule,\n    isValidAdgRedirectRule: validator.isValidAdgRedirectRule,\n    isValidUboRedirectRule: validator.isValidUboRedirectRule,\n    isValidAbpRedirectRule: validator.isValidAbpRedirectRule,\n    convertUboRedirectToAdg,\n    convertAbpRedirectToAdg,\n    convertRedirectToAdg,\n    convertAdgRedirectToUbo,\n};\n","import { redirectsCjs } from '../redirects';\n\nimport {\n    attachDependencies,\n    addCall,\n    passSourceAndProps,\n    wrapInNonameFunc,\n} from '../helpers/injector';\n\nimport validator from '../helpers/validator';\n\nimport {\n    isValidScriptletRule,\n    convertUboScriptletToAdg,\n    convertAbpSnippetToAdg,\n    convertScriptletToAdg,\n    convertAdgScriptletToUbo,\n} from '../helpers/converter';\n\n\n/**\n * @typedef {Object} Source - scriptlet properties\n * @property {string} name Scriptlet name\n * @property {Array<string>} args Arguments for scriptlet function\n * @property {'extension'|'corelibs'} engine Defines the final form of scriptlet string presentation\n * @property {string} [version]\n * @property {boolean} [verbose] flag to enable printing to console debug information\n * @property {string} [ruleText] Source rule text is used for debugging purposes\n */\n\n/**\n* Returns scriptlet code by param\n* @param {Source} source\n*/\nfunction getScriptletCode(source) {\n    if (!validator.isValidScriptletName(source.name)) {\n        return null;\n    }\n\n    const scriptlet = validator.getScriptletByName(source.name);\n    let result = attachDependencies(scriptlet);\n    result = addCall(scriptlet, result);\n    result = source.engine === 'corelibs'\n        ? wrapInNonameFunc(result)\n        : passSourceAndProps(source, result);\n    return result;\n}\n\n/**\n * Scriptlets variable\n *\n * @returns {Object} object with methods:\n * `invoke` method receives one argument with `Source` type\n * `validate` method receives one argument with `String` type\n */\nconst scriptletsObject = (() => ({\n    invoke: getScriptletCode,\n    isValidScriptletName: validator.isValidScriptletName,\n    isValidScriptletRule,\n    isAdgScriptletRule: validator.isAdgScriptletRule,\n    isUboScriptletRule: validator.isUboScriptletRule,\n    isAbpSnippetRule: validator.isAbpSnippetRule,\n    convertUboToAdg: convertUboScriptletToAdg,\n    convertAbpToAdg: convertAbpSnippetToAdg,\n    convertScriptletToAdg,\n    convertAdgToUbo: convertAdgScriptletToUbo,\n    redirects: redirectsCjs,\n}))();\n\nexport default scriptletsObject;\n","import scriptletsObject from './index';\n\n/**\n * Add module exports to be used as node package\n */\nmodule.exports = scriptletsObject;\n"],"names":["randomId","Math","random","toString","substr","setPropertyAccess","object","property","descriptor","currentDescriptor","Object","getOwnPropertyDescriptor","configurable","defineProperty","getPropertyInChain","base","chain","addProp","pos","indexOf","prop","slice","own","undefined","escapeRegExp","str","replace","toRegExp","length","RegExp","escaped","getBeforeRegExp","rx","index","search","substring","startsWith","prefix","substringAfter","separator","substringBefore","wrapInSingleQuotes","getStringInBraces","firstIndex","lastIndex","lastIndexOf","createOnErrorHandler","rid","nativeOnError","window","onerror","onError","error","Function","args","apply","noop","noopNull","noopThis","noopArray","noopStr","hit","source","message","verbose","log","console","bind","trace","ruleText","e","__debugScriptlets","observeDOMChanges","callback","observeAttrs","attrsToObserv","throttle","method","delay","wait","savedArgs","wrapper","setTimeout","THROTTLE_DELAY_MS","observer","MutationObserver","callbackWrapper","connect","observe","document","documentElement","childList","subtree","attributes","attributeFilter","disconnect","attachDependencies","scriptlet","injections","reduce","accum","dep","dependencies","name","addCall","code","passSourceAndProps","sourceString","JSON","stringify","argsString","map","params","wrapInNonameFunc","iterateWithTransitions","iterable","transitions","init","state","keys","i","ADG_SCRIPTLET_MASK","wordSaver","strs","saveSymb","s","saveStr","push","getAll","parseRule","TRANSITION","OPENED","PARAM","CLOSED","opened","rule","sep","char","transition","symb","Error","param","saver","preIndex","before","abortOnPropertyRead","abort","ReferenceError","setChainPropAccess","owner","chainInfo","setter","a","get","set","names","abortOnPropertyWrite","preventSetTimeout","match","nativeTimeout","nativeIsNaN","Number","isNaN","shouldLog","INVERT_MARKER","isNotMatch","isNotDelay","parseInt","timeoutWrapper","timeout","shouldPrevent","test","preventSetInterval","nativeInterval","setInterval","intervalWrapper","interval","preventWindowOpen","inverse","nativeOpen","open","openWrapper","abortCurrentInlineScript","regex","getCurrentScript","currentScript","scripts","getElementsByTagName","ourScript","scriptEl","HTMLScriptElement","textContent","Node","prototype","currentValue","value","setConstant","constantValue","parseFloat","abs","canceled","mustCancel","removeCookie","removeCookieFromHost","cookieName","hostName","cookieSpec","domain1","domain2","path","expiration","cookie","rmCookie","split","forEach","cookieStr","trim","hostParts","location","hostname","join","addEventListener","preventAddEventListener","event","funcStr","nativeAddEventListener","EventTarget","addEventListenerWrapper","eventName","preventBab","nativeSetTimeout","babRegex","call","signatures","check","tokens","j","token","found","nativeEval","eval","bodyEl","body","style","removeProperty","el","getElementById","parentNode","removeChild","nowebrtc","propertyName","RTCPeerConnection","webkitRTCPeerConnection","rtcReplacement","config","close","createDataChannel","createOffer","setRemoteDescription","rtc","b","send","logAddEventListener","logEval","evalWrapper","nativeFunction","FunctionWrapper","create","constructor","noeval","preventEvalIf","payload","preventFab","Fab","clearEvent","emitEvent","on","onDetected","onNotDetected","setOption","FuckAdBlock","BlockAdBlock","fuckAdBlock","blockAdBlock","setPopadsDummy","PopAds","popns","defineProperties","preventPopadsNet","throwError","preventAdfly","isDigit","data","handler","encodedURL","evenChars","oddChars","charAt","ii","temp","decodedURL","atob","stop","onbeforeunload","href","val","applyHandler","result","err","debugOnPropertyRead","debugOnPropertyWrite","debugCurrentInlineScript","removeAttr","attrs","selector","rmattr","nodes","querySelectorAll","removed","node","attr","removeAttribute","removeClass","classNames","selectors","className","removeClassHandler","Set","foundedNodes","n","add","elements","element","classList","contains","remove","CLASS_ATTR_NAME","disableNewtabLinks","ev","target","localName","hasAttribute","stopPropagation","preventDefault","adjustSetInterval","boost","nativeIsFinite","isFinite","cb","d","adjustSetTimeout","dirString","times","dir","dirWrapper","jsonPrune","propsToRemove","requiredInitialProps","prunePaths","needlePaths","isPruningNeeded","root","needlePath","details","nestedPropName","pop","nativeParse","parse","parseWrapper","r","ownerObj","COMMENT_MARKER","isComment","UBO_SCRIPTLET_MASK_REG","UBO_SCRIPTLET_MASK_1","UBO_SCRIPTLET_MASK_2","UBO_SCRIPTLET_EXCEPTION_MASK_1","UBO_SCRIPTLET_EXCEPTION_MASK_2","ABP_SCRIPTLET_MASK","ABP_SCRIPTLET_EXCEPTION_MASK","ADG_CSS_MASK_REG","isAdgScriptletRule","isUboScriptletRule","isAbpSnippetRule","getScriptletByName","scriptlets","scriptletsList","key","find","isValidScriptletName","ADG_UBO_REDIRECT_MARKER","ABP_REDIRECT_MARKER","VALID_SOURCE_TYPES","validAdgRedirects","redirects","filter","adg","objFromEntries","pairs","output","acc","uboToAdgCompatibility","ubo","abpToAdgCompatibility","abp","adgToUboCompatibility","REDIRECT_RULE_TYPES","ADG","marker","compatibility","UBO","ABP","parseModifiers","getRedirectName","ruleModifiers","redirectNamePart","isAdgRedirectRule","isRedirectRuleByType","type","redirectName","isValidAdgRedirectRule","isValidUboRedirectRule","isValidAbpRedirectRule","isValidRedirectRule","hasValidContentType","sourceType","validator","ADGUARD_SCRIPTLET_MASK_REG","ADGUARD_SCRIPTLET_TEMPLATE","ADGUARD_SCRIPTLET_EXCEPTION_TEMPLATE","UBO_SCRIPTLET_TEMPLATE","UBO_SCRIPTLET_EXCEPTION_TEMPLATE","UBO_ALIAS_NAME_MARKER","UBO_XHR_TYPE","ADG_XHR_TYPE","getSentences","reg","replacePlaceholders","convertUboScriptletToAdg","domains","mask","template","arg","outputArg","adgRule","convertAbpSnippetToAdg","SEMICOLON_DIVIDER","convertScriptletToAdg","convertAdgScriptletToUbo","res","parsedName","parsedParams","adgScriptletObject","scriptletList","aliases","uboAlias","alias","includes","uboName","uboRule","isValidScriptletRule","input","rulesArray","isValid","parsedRule","convertUboRedirectToAdg","firstPartOfRule","uboModifiers","adgModifiers","adgName","convertAbpRedirectToAdg","abpModifiers","abpName","convertRedirectToAdg","convertAdgRedirectToUbo","GoogleAnalytics","Tracker","proto","googleAnalyticsName","GoogleAnalyticsObject","ga","len","arguments","lastArg","hitCallback","ex","getByName","loaded","dataLayer","hide","end","GoogleAnalyticsGa","Gaq","Na","O","Sa","Ta","Va","_createAsyncTracker","_getAsyncTracker","_getPlugin","Array","isArray","assign","gaq","asyncTrackers","_gaq","shift","qf","Gat","api","tracker","funcName","_getLinkerUrl","_anonymizeIP","_createTracker","_forceSSL","_getTracker","_getTrackerByName","_getTrackers","aa","ab","hb","la","oa","pa","u","gat","_gat","GoogleSyndicationAdsByGoogle","adsbygoogle","adElems","css","executed","frame","createElement","id","childFrame","appendChild","GoogleTagManagerGtm","eventCallback","GoogleTagServicesGpt","companionAdsService","enableSyncLoading","setRefreshUnfilledSlots","contentService","setContent","PassbackSlot","display","setClickUrl","setTagForChildDirectedTreatment","setTargeting","updateTargetingFromMap","SizeMappingBuilder","addSize","build","Slot","addService","clearCategoryExclusions","clearTargeting","defineSizeMapping","getAdUnitPath","getAttributeKeys","getCategoryExclusions","getDomId","getSlotElementId","getSlotId","getTargeting","getTargetingKeys","setCategoryExclusion","setCollapseEmptyDiv","pubAdsService","clear","clearTagForChildDirectedTreatment","collapseEmptyDivs","defineOutOfPagePassback","definePassback","disableInitialLoad","enableAsyncRendering","enableSingleRequest","enableSyncRendering","enableVideoAds","getSlots","refresh","setCentering","setCookieOptions","setForceSafeFrame","setLocation","setPublisherProvidedId","setRequestNonPersonalizedAds","setSafeFrameConfig","setVideoContent","updateCorrelator","googletag","cmd","apiReady","companionAds","content","defineOutOfPageSlot","defineSlot","destroySlots","disablePublisherConsole","enableServices","getVersion","pubads","pubadsReady","setAdIframeTitle","sizeMapping","ScoreCardResearchBeacon","COMSCORE","purge","_comscore","beacon","metrikaYandexTag","asyncCallbackFromOptions","options","ctx","addFileExtension","extLink","file","getClientID","hitFunc","notBounce","reachGoal","setUserID","userParams","ym","metrikaYandexWatch","cbName","Metrika","url","Ya","func","getRedirectByName","redirectsList","getRedirectCode","redirect","redirectsCjs","getCode","getScriptletCode","engine","scriptletsObject","invoke","convertUboToAdg","convertAbpToAdg","convertAdgToUbo","module","exports"],"mappings":";;;;;;AACA;;;AAGO,SAASA,QAAT,GAAoB;AACvB,SAAOC,IAAI,CAACC,MAAL,GAAcC,QAAd,CAAuB,EAAvB,EAA2BC,MAA3B,CAAkC,CAAlC,EAAqC,CAArC,CAAP;AACH;;ACND;;;;;;;AAOA,AAAO,SAASC,iBAAT,CAA2BC,MAA3B,EAAmCC,QAAnC,EAA6CC,UAA7C,EAAyD;AAC5D,MAAMC,iBAAiB,GAAGC,MAAM,CAACC,wBAAP,CAAgCL,MAAhC,EAAwCC,QAAxC,CAA1B;;AACA,MAAIE,iBAAiB,IAAI,CAACA,iBAAiB,CAACG,YAA5C,EAA0D;AACtD,WAAO,KAAP;AACH;;AACDF,EAAAA,MAAM,CAACG,cAAP,CAAsBP,MAAtB,EAA8BC,QAA9B,EAAwCC,UAAxC;AACA,SAAO,IAAP;AACH;;ACdD;;;;;;;AAOA;;;;;;;;;;;;AAYA,AAAO,SAASM,kBAAT,CAA4BC,IAA5B,EAAkCC,KAAlC,EAAyD;AAAA,MAAhBC,OAAgB,uEAAN,IAAM;AAC5D,MAAMC,GAAG,GAAGF,KAAK,CAACG,OAAN,CAAc,GAAd,CAAZ;;AACA,MAAID,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZ,WAAO;AAAEH,MAAAA,IAAI,EAAJA,IAAF;AAAQK,MAAAA,IAAI,EAAEJ;AAAd,KAAP;AACH;;AACD,MAAMI,IAAI,GAAGJ,KAAK,CAACK,KAAN,CAAY,CAAZ,EAAeH,GAAf,CAAb;AACA,MAAMI,GAAG,GAAGP,IAAI,CAACK,IAAD,CAAhB;AACAJ,EAAAA,KAAK,GAAGA,KAAK,CAACK,KAAN,CAAYH,GAAG,GAAG,CAAlB,CAAR;;AACA,MAAII,GAAG,KAAKC,SAAZ,EAAuB;AACnB,WAAOT,kBAAkB,CAACQ,GAAD,EAAMN,KAAN,EAAaC,OAAb,CAAzB;AACH;;AAED,MAAI,CAACA,OAAL,EAAc;AACV,WAAO,KAAP;AACH;;AAEDP,EAAAA,MAAM,CAACG,cAAP,CAAsBE,IAAtB,EAA4BK,IAA5B,EAAkC;AAAER,IAAAA,YAAY,EAAE;AAAhB,GAAlC;AACA,SAAO;AAAEG,IAAAA,IAAI,EAAEO,GAAR;AAAaF,IAAAA,IAAI,EAAJA,IAAb;AAAmBJ,IAAAA,KAAK,EAALA;AAAnB,GAAP;AACH;;ACrCD;;;;;AAKA,AAAO,IAAMQ,YAAY,GAAG,SAAfA,YAAe,CAACC,GAAD;AAAA,SAASA,GAAG,CAACC,OAAJ,CAAY,qBAAZ,EAAmC,MAAnC,CAAT;AAAA,CAArB;AAEP;;;;;;;AAMA,AAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACF,GAAD,EAAS;AAC7B,MAAIA,GAAG,CAAC,CAAD,CAAH,KAAW,GAAX,IAAkBA,GAAG,CAACA,GAAG,CAACG,MAAJ,GAAa,CAAd,CAAH,KAAwB,GAA9C,EAAmD;AAC/C,WAAO,IAAIC,MAAJ,CAAWJ,GAAG,CAACJ,KAAJ,CAAU,CAAV,EAAa,CAAC,CAAd,CAAX,CAAP;AACH;;AACD,MAAMS,OAAO,GAAGL,GAAG,CAACC,OAAJ,CAAY,qBAAZ,EAAmC,MAAnC,CAAhB;AACA,SAAO,IAAIG,MAAJ,CAAWC,OAAX,CAAP;AACH,CANM;AAQP;;;;;;AAKA,AAAO,IAAMC,eAAe,GAAG,SAAlBA,eAAkB,CAACN,GAAD,EAAMO,EAAN,EAAa;AACxC,MAAMC,KAAK,GAAGR,GAAG,CAACS,MAAJ,CAAWF,EAAX,CAAd;AACA,SAAOP,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBF,KAAjB,CAAP;AACH,CAHM;AAKP,AAAO,IAAMG,UAAU,GAAG,SAAbA,UAAa,CAACX,GAAD,EAAMY,MAAN,EAAiB;AACvC,SAAOZ,GAAG,IAAIA,GAAG,CAACN,OAAJ,CAAYkB,MAAZ,MAAwB,CAAtC;AACH,CAFM;AAIP,AAAO,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACb,GAAD,EAAMc,SAAN,EAAoB;AAC9C,MAAI,CAACd,GAAL,EAAU;AACN,WAAOA,GAAP;AACH;;AACD,MAAMQ,KAAK,GAAGR,GAAG,CAACN,OAAJ,CAAYoB,SAAZ,CAAd;AACA,SAAON,KAAK,GAAG,CAAR,GAAY,EAAZ,GAAiBR,GAAG,CAACU,SAAJ,CAAcF,KAAK,GAAGM,SAAS,CAACX,MAAhC,CAAxB;AACH,CANM;AAQP,AAAO,IAAMY,eAAe,GAAG,SAAlBA,eAAkB,CAACf,GAAD,EAAMc,SAAN,EAAoB;AAC/C,MAAI,CAACd,GAAD,IAAQ,CAACc,SAAb,EAAwB;AACpB,WAAOd,GAAP;AACH;;AACD,MAAMQ,KAAK,GAAGR,GAAG,CAACN,OAAJ,CAAYoB,SAAZ,CAAd;AACA,SAAON,KAAK,GAAG,CAAR,GAAYR,GAAZ,GAAkBA,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBF,KAAjB,CAAzB;AACH,CANM;AAQP;;;;;AAIA,AAAO,IAAMQ,kBAAkB,GAAG,SAArBA,kBAAqB,CAAChB,GAAD,EAAS;AACvC,MAAKA,GAAG,CAAC,CAAD,CAAH,KAAW,IAAX,IAAmBA,GAAG,CAACA,GAAG,CAACG,MAAJ,GAAa,CAAd,CAAH,KAAwB,IAA5C,IACIH,GAAG,CAAC,CAAD,CAAH,KAAW,GAAX,IAAkBA,GAAG,CAACA,GAAG,CAACG,MAAJ,GAAa,CAAd,CAAH,KAAwB,GADlD,EACwD;AACpDH,IAAAA,GAAG,GAAGA,GAAG,CAACU,SAAJ,CAAc,CAAd,EAAiBV,GAAG,CAACG,MAAJ,GAAa,CAA9B,CAAN;AACH,GAJsC;;;AAMvCH,EAAAA,GAAG,GAAGA,GAAG,CAACC,OAAJ,CAAY,KAAZ,EAAmB,GAAnB,CAAN;AAEA,oBAAWD,GAAX;AACH,CATM;AAWP;;;;;AAIA,AAAO,IAAMiB,iBAAiB,GAAG,SAApBA,iBAAoB,CAACjB,GAAD,EAAS;AACtC,MAAMkB,UAAU,GAAGlB,GAAG,CAACN,OAAJ,CAAY,GAAZ,CAAnB;AACA,MAAMyB,SAAS,GAAGnB,GAAG,CAACoB,WAAJ,CAAgB,GAAhB,CAAlB;AACA,SAAOpB,GAAG,CAACU,SAAJ,CAAcQ,UAAU,GAAG,CAA3B,EAA8BC,SAA9B,CAAP;AACH,CAJM;;ACtEP;;;;;;AAMA,AAAO,SAASE,oBAAT,CAA8BC,GAA9B,EAAmC;AACtC;AACA,MAAMC,aAAa,GAAGC,MAAM,CAACC,OAA7B;AACA,SAAO,SAASC,OAAT,CAAiBC,KAAjB,EAAiC;AACpC,QAAI,OAAOA,KAAP,KAAiB,QAAjB,IAA6BA,KAAK,CAACjC,OAAN,CAAc4B,GAAd,MAAuB,CAAC,CAAzD,EAA4D;AACxD,aAAO,IAAP;AACH;;AACD,QAAIC,aAAa,YAAYK,QAA7B,EAAuC;AAAA,wCAJTC,IAIS;AAJTA,QAAAA,IAIS;AAAA;;AACnC,aAAON,aAAa,CAACO,KAAd,CAAoB,IAApB,GAA2BH,KAA3B,SAAqCE,IAArC,EAAP;AACH;;AACD,WAAO,KAAP;AACH,GARD;AASH;;AClBD;;;AAGA,AAAO,IAAME,IAAI,GAAG,SAAPA,IAAO,GAAM,EAAnB;AAEP;;;;AAGA,AAAO,IAAMC,QAAQ,GAAG,SAAXA,QAAW;AAAA,SAAM,IAAN;AAAA,CAAjB;AAEP;;;;AAGA,AAAO,SAASC,QAAT,GAAoB;AACvB,SAAO,IAAP;AACH;AAED;;;;AAGA,AAAO,IAAMC,SAAS,GAAG,SAAZA,SAAY;AAAA,SAAM,EAAN;AAAA,CAAlB;AAEP;;;;AAGA,AAAO,IAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,SAAM,EAAN;AAAA,CAAhB;;ACzBP;;AACA;;;;;AAKA,AAAO,IAAMC,GAAG,GAAG,SAANA,GAAM,CAACC,MAAD,EAASC,OAAT,EAAqB;AACpC,MAAID,MAAM,CAACE,OAAP,KAAmB,IAAvB,EAA6B;AACzB;AACH;;AAED,MAAI;AACA,QAAMC,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,QAAME,KAAK,GAAGF,OAAO,CAACE,KAAR,CAAcD,IAAd,CAAmBD,OAAnB,CAAd;AAEA,QAAM7B,MAAM,GAAGyB,MAAM,CAACO,QAAP,IAAmB,EAAlC;;AAEA,QAAIN,OAAJ,EAAa;AACTE,MAAAA,GAAG,WAAI5B,MAAJ,wBAAwB0B,OAAxB,EAAH;AACH;;AAEDE,IAAAA,GAAG,WAAI5B,MAAJ,kBAAH;;AACA,QAAI+B,KAAJ,EAAW;AACPA,MAAAA,KAAK;AACR;;AACDH,IAAAA,GAAG,WAAI5B,MAAJ,gBAAH;AACH,GAfD,CAeE,OAAOiC,CAAP,EAAU,EAAV;AAEE;AACA;AAGJ;;;AACA,MAAI,OAAOrB,MAAM,CAACsB,iBAAd,KAAoC,UAAxC,EAAoD;AAChDtB,IAAAA,MAAM,CAACsB,iBAAP,CAAyBT,MAAzB;AACH;AACJ,CA9BM;;ACNP;;;;;AAKA,AAAO,IAAMU,iBAAiB,GAAG,SAApBA,iBAAoB,CAACC,QAAD,EAAwD;AAAA,MAA7CC,YAA6C,uEAA9B,KAA8B;AAAA,MAAvBC,aAAuB,uEAAP,EAAO;;AACrF;;;;;;AAMA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,MAAD,EAASC,KAAT,EAAmB;AAChC,QAAIC,IAAI,GAAG,KAAX;AACA,QAAIC,SAAJ;;AACA,QAAMC,OAAO,GAAG,SAAVA,OAAU,GAAa;AAAA,wCAAT3B,IAAS;AAATA,QAAAA,IAAS;AAAA;;AACzB,UAAIyB,IAAJ,EAAU;AACNC,QAAAA,SAAS,GAAG1B,IAAZ;AACA;AACH;;AACDuB,MAAAA,MAAM,MAAN,SAAUvB,IAAV;AACAyB,MAAAA,IAAI,GAAG,IAAP;AACAG,MAAAA,UAAU,CAAC,YAAM;AACbH,QAAAA,IAAI,GAAG,KAAP;;AACA,YAAIC,SAAJ,EAAe;AACXC,UAAAA,OAAO,CAACD,SAAD,CAAP;AACAA,UAAAA,SAAS,GAAG,IAAZ;AACH;AACJ,OANS,EAMPF,KANO,CAAV;AAOH,KAdD;;AAeA,WAAOG,OAAP;AACH,GAnBD;AAqBA;;;;;AAGA,MAAME,iBAAiB,GAAG,EAA1B;AACA;;;AAGA;;AACA,MAAMC,QAAQ,GAAG,IAAIC,gBAAJ,CAAqBT,QAAQ,CAACU,eAAD,EAAkBH,iBAAlB,CAA7B,CAAjB;;AAEA,MAAMI,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClB,QAAIZ,aAAa,CAAC/C,MAAd,GAAuB,CAA3B,EAA8B;AAC1BwD,MAAAA,QAAQ,CAACI,OAAT,CAAiBC,QAAQ,CAACC,eAA1B,EAA2C;AACvCC,QAAAA,SAAS,EAAE,IAD4B;AAEvCC,QAAAA,OAAO,EAAE,IAF8B;AAGvCC,QAAAA,UAAU,EAAEnB,YAH2B;AAIvCoB,QAAAA,eAAe,EAAEnB;AAJsB,OAA3C;AAMH,KAPD,MAOO;AACHS,MAAAA,QAAQ,CAACI,OAAT,CAAiBC,QAAQ,CAACC,eAA1B,EAA2C;AACvCC,QAAAA,SAAS,EAAE,IAD4B;AAEvCC,QAAAA,OAAO,EAAE,IAF8B;AAGvCC,QAAAA,UAAU,EAAEnB;AAH2B,OAA3C;AAKH;AACJ,GAfD;;AAgBA,MAAMqB,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrBX,IAAAA,QAAQ,CAACW,UAAT;AACH,GAFD;;AAGA,WAAST,eAAT,GAA2B;AACvBS,IAAAA,UAAU;AACVtB,IAAAA,QAAQ;AACRc,IAAAA,OAAO;AACV;;AAEDA,EAAAA,OAAO;AACV,CAhEM;;ACLP;;;;;;;;;;;;;;;;;;;;;;;;;;;ACGA;;;;;AAIA,AAAO,SAASS,kBAAT,CAA4BC,SAA5B,EAAuC;AAAA,8BACdA,SADc,CAClCC,UADkC;AAAA,MAClCA,UADkC,sCACrB,EADqB;AAE1C,SAAOA,UAAU,CAACC,MAAX,CAAkB,UAACC,KAAD,EAAQC,GAAR;AAAA,qBAAmBD,KAAnB,eAA6BE,YAAY,CAACD,GAAG,CAACE,IAAL,CAAzC;AAAA,GAAlB,EAAyEN,SAAS,CAAC9F,QAAV,EAAzE,CAAP;AACH;AAED;;;;;;AAKA,AAAO,SAASqG,OAAT,CAAiBP,SAAjB,EAA4BQ,IAA5B,EAAkC;AACrC,mBAAUA,IAAV,uGAEMR,SAAS,CAACM,IAFhB;AAIH;AAED;;;;;;;;;;;;;;;;;;;;;;;AAsBA,AAAO,SAASG,kBAAT,CAA4B5C,MAA5B,EAAoC2C,IAApC,EAA0C;AAC7C,MAAI3C,MAAM,CAACD,GAAX,EAAgB;AACZC,IAAAA,MAAM,CAACD,GAAP,GAAaC,MAAM,CAACD,GAAP,CAAW1D,QAAX,EAAb;AACH;;AACD,MAAMwG,YAAY,GAAGC,IAAI,CAACC,SAAL,CAAe/C,MAAf,CAArB;AACA,MAAMgD,UAAU,GAAGhD,MAAM,CAACR,IAAP,cAAkBQ,MAAM,CAACR,IAAP,CAAYyD,GAAZ,CAAgBH,IAAI,CAACC,SAArB,CAAlB,SAAuDtF,SAA1E;AACA,MAAMyF,MAAM,GAAGF,UAAU,aAAMH,YAAN,eAAuBG,UAAvB,IAAsCH,YAA/D;AACA,6CAAoCF,IAApC,kBAAgDO,MAAhD;AACH;AAED;;;;;AAIA,AAAO,SAASC,gBAAT,CAA0BR,IAA1B,EAAgC;AACnC,4CAAmCA,IAAnC;AACH;;AC9DD,SAAS,eAAe,CAAC,GAAG,EAAE;EAC5B,IAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,EAAE,OAAO,GAAG,CAAC;CACpC;;AAED,kBAAc,GAAG,eAAe;;ACJhC,SAAS,qBAAqB,CAAC,GAAG,EAAE,CAAC,EAAE;EACrC,IAAI,EAAE,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,GAAG,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,KAAK,oBAAoB,CAAC,EAAE;IACrG,OAAO;GACR;;EAED,IAAI,IAAI,GAAG,EAAE,CAAC;EACd,IAAI,EAAE,GAAG,IAAI,CAAC;EACd,IAAI,EAAE,GAAG,KAAK,CAAC;EACf,IAAI,EAAE,GAAG,SAAS,CAAC;;EAEnB,IAAI;IACF,KAAK,IAAI,EAAE,GAAG,GAAG,CAAC,MAAM,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,GAAG,CAAC,EAAE,GAAG,EAAE,CAAC,IAAI,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,GAAG,IAAI,EAAE;MAClF,IAAI,CAAC,IAAI,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC;;MAEpB,IAAI,CAAC,IAAI,IAAI,CAAC,MAAM,KAAK,CAAC,EAAE,MAAM;KACnC;GACF,CAAC,OAAO,GAAG,EAAE;IACZ,EAAE,GAAG,IAAI,CAAC;IACV,EAAE,GAAG,GAAG,CAAC;GACV,SAAS;IACR,IAAI;MACF,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC,QAAQ,CAAC,IAAI,IAAI,EAAE,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC;KACjD,SAAS;MACR,IAAI,EAAE,EAAE,MAAM,EAAE,CAAC;KAClB;GACF;;EAED,OAAO,IAAI,CAAC;CACb;;AAED,wBAAc,GAAG,qBAAqB;;AC9BtC,SAAS,gBAAgB,GAAG;EAC1B,MAAM,IAAI,SAAS,CAAC,sDAAsD,CAAC,CAAC;CAC7E;;AAED,mBAAc,GAAG,gBAAgB;;ACEjC,SAAS,cAAc,CAAC,GAAG,EAAE,CAAC,EAAE;EAC9B,OAAO,cAAc,CAAC,GAAG,CAAC,IAAI,oBAAoB,CAAC,GAAG,EAAE,CAAC,CAAC,IAAI,eAAe,EAAE,CAAC;CACjF;;AAED,iBAAc,GAAG,cAAc;;ACV/B,SAAS,eAAe,CAAC,GAAG,EAAE,GAAG,EAAE,KAAK,EAAE;EACxC,IAAI,GAAG,IAAI,GAAG,EAAE;IACd,MAAM,CAAC,cAAc,CAAC,GAAG,EAAE,GAAG,EAAE;MAC9B,KAAK,EAAE,KAAK;MACZ,UAAU,EAAE,IAAI;MAChB,YAAY,EAAE,IAAI;MAClB,QAAQ,EAAE,IAAI;KACf,CAAC,CAAC;GACJ,MAAM;IACL,GAAG,CAAC,GAAG,CAAC,GAAG,KAAK,CAAC;GAClB;;EAED,OAAO,GAAG,CAAC;CACZ;;AAED,kBAAc,GAAG,eAAe;;ACfhC;;;;;;;AAOA,SAASS,sBAAT,CAAgCC,QAAhC,EAA0CC,WAA1C,EAAuDC,IAAvD,EAA6D/D,IAA7D,EAAmE;AAC/D,MAAIgE,KAAK,GAAGD,IAAI,IAAI3G,MAAM,CAAC6G,IAAP,CAAYH,WAAZ,EAAyB,CAAzB,CAApB;;AACA,OAAK,IAAII,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGL,QAAQ,CAACvF,MAA7B,EAAqC4F,CAAC,IAAI,CAA1C,EAA6C;AACzCF,IAAAA,KAAK,GAAGF,WAAW,CAACE,KAAD,CAAX,CAAmBH,QAAnB,EAA6BK,CAA7B,EAAgClE,IAAhC,CAAR;AACH;;AACD,SAAOgE,KAAP;AACH;AAED;;;;;AAGA,AAAO,IAAMG,kBAAkB,GAAG,cAA3B;AAEP;;;;AAGA,IAAMC,SAAS,GAAG,SAAZA,SAAY,GAAM;AACpB,MAAIjG,GAAG,GAAG,EAAV;AACA,MAAMkG,IAAI,GAAG,EAAb;;AACA,MAAMC,QAAQ,GAAG,SAAXA,QAAW,CAACC,CAAD,EAAO;AACpBpG,IAAAA,GAAG,IAAIoG,CAAP;AACA,WAAOpG,GAAP;AACH,GAHD;;AAIA,MAAMqG,OAAO,GAAG,SAAVA,OAAU,GAAM;AAClBH,IAAAA,IAAI,CAACI,IAAL,CAAUtG,GAAV;AACAA,IAAAA,GAAG,GAAG,EAAN;AACH,GAHD;;AAIA,MAAMuG,MAAM,GAAG,SAATA,MAAS;AAAA,qBAAUL,IAAV;AAAA,GAAf;;AAEA,SAAO;AAAEC,IAAAA,QAAQ,EAARA,QAAF;AAAYE,IAAAA,OAAO,EAAPA,OAAZ;AAAqBE,IAAAA,MAAM,EAANA;AAArB,GAAP;AACH,CAdD;;AAgBA,IAAM1F,gBAAc,GAAG,SAAjBA,cAAiB,CAACb,GAAD,EAAMc,SAAN,EAAoB;AACvC,MAAI,CAACd,GAAL,EAAU;AACN,WAAOA,GAAP;AACH;;AACD,MAAMQ,KAAK,GAAGR,GAAG,CAACN,OAAJ,CAAYoB,SAAZ,CAAd;AACA,SAAON,KAAK,GAAG,CAAR,GAAY,EAAZ,GAAiBR,GAAG,CAACU,SAAJ,CAAcF,KAAK,GAAGM,SAAS,CAACX,MAAhC,CAAxB;AACH,CAND;AAQA;;;;;;;AAKA,AAAO,IAAMqG,SAAS,GAAG,SAAZA,SAAY,CAAC5D,QAAD,EAAc;AAAA;;AACnCA,EAAAA,QAAQ,GAAG/B,gBAAc,CAAC+B,QAAD,EAAWoD,kBAAX,CAAzB;AACA;;;;AAGA,MAAMS,UAAU,GAAG;AACfC,IAAAA,MAAM,EAAE,QADO;AAEfC,IAAAA,KAAK,EAAE,OAFQ;AAGfC,IAAAA,MAAM,EAAE;AAHO,GAAnB;AAMA;;;;;;;;AAOA,MAAMC,MAAM,GAAG,SAATA,MAAS,CAACC,IAAD,EAAOtG,KAAP,QAA0B;AAAA,QAAVuG,GAAU,QAAVA,GAAU;AACrC,QAAMC,IAAI,GAAGF,IAAI,CAACtG,KAAD,CAAjB;AACA,QAAIyG,UAAJ;;AACA,YAAQD,IAAR;AACA,WAAK,GAAL;AACA,WAAK,GAAL;AACA,WAAK,GAAL;AAAU;AACNC,UAAAA,UAAU,GAAGR,UAAU,CAACC,MAAxB;AACA;AACH;;AACD,WAAK,IAAL;AACA,WAAK,GAAL;AAAU;AACNK,UAAAA,GAAG,CAACG,IAAJ,GAAWF,IAAX;AACAC,UAAAA,UAAU,GAAGR,UAAU,CAACE,KAAxB;AACA;AACH;;AACD,WAAK,GAAL;AAAU;AACNM,UAAAA,UAAU,GAAGzG,KAAK,KAAKsG,IAAI,CAAC3G,MAAL,GAAc,CAAxB,GACPsG,UAAU,CAACG,MADJ,GAEPH,UAAU,CAACC,MAFjB;AAGA;AACH;;AACD;AAAS;AACL,gBAAM,IAAIS,KAAJ,CAAU,6BAAV,CAAN;AACH;AArBD;;AAwBA,WAAOF,UAAP;AACH,GA5BD;AA6BA;;;;;;;;;;AAQA,MAAMG,KAAK,GAAG,SAARA,KAAQ,CAACN,IAAD,EAAOtG,KAAP,SAAiC;AAAA,QAAjB6G,KAAiB,SAAjBA,KAAiB;AAAA,QAAVN,GAAU,SAAVA,GAAU;AAC3C,QAAMC,IAAI,GAAGF,IAAI,CAACtG,KAAD,CAAjB;;AACA,YAAQwG,IAAR;AACA,WAAK,IAAL;AACA,WAAK,GAAL;AAAU;AACN,cAAMM,QAAQ,GAAG9G,KAAK,GAAG,CAAzB;AACA,cAAM+G,MAAM,GAAGT,IAAI,CAACQ,QAAD,CAAnB;;AACA,cAAIN,IAAI,KAAKD,GAAG,CAACG,IAAb,IAAqBK,MAAM,KAAK,IAApC,EAA0C;AACtCR,YAAAA,GAAG,CAACG,IAAJ,GAAW,IAAX;AACAG,YAAAA,KAAK,CAAChB,OAAN;AACA,mBAAOI,UAAU,CAACC,MAAlB;AACH;AACJ;AACD;;AACA;AAAS;AACLW,UAAAA,KAAK,CAAClB,QAAN,CAAea,IAAf;AACA,iBAAOP,UAAU,CAACE,KAAlB;AACH;AAfD;AAiBH,GAnBD;;AAoBA,MAAMhB,WAAW,oDACZc,UAAU,CAACC,MADC,EACQG,MADR,gCAEZJ,UAAU,CAACE,KAFC,EAEOS,KAFP,gCAGZX,UAAU,CAACG,MAHC,EAGQ,YAAM,EAHd,gBAAjB;AAKA,MAAMG,GAAG,GAAG;AAAEG,IAAAA,IAAI,EAAE;AAAR,GAAZ;AACA,MAAMG,KAAK,GAAGpB,SAAS,EAAvB;AACA,MAAMJ,KAAK,GAAGJ,sBAAsB,CAAC7C,QAAD,EAAW+C,WAAX,EAAwBc,UAAU,CAACC,MAAnC,EAA2C;AAAEK,IAAAA,GAAG,EAAHA,GAAF;AAAOM,IAAAA,KAAK,EAALA;AAAP,GAA3C,CAApC;;AAEA,MAAIxB,KAAK,KAAK,QAAd,EAAwB;AACpB,UAAM,IAAIsB,KAAJ,kCAAoCvE,QAApC,EAAN;AACH;;AAED,MAAMf,IAAI,GAAGwF,KAAK,CAACd,MAAN,EAAb;AACA,SAAO;AACHzB,IAAAA,IAAI,EAAEjD,IAAI,CAAC,CAAD,CADP;AAEHA,IAAAA,IAAI,EAAEA,IAAI,CAACjC,KAAL,CAAW,CAAX;AAFH,GAAP;AAIH,CA7FM;;AC/CP;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA;;AACA,AAAO,SAAS4H,mBAAT,CAA6BnF,MAA7B,EAAqCvD,QAArC,EAA+C;AAClD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMwC,GAAG,GAAG/C,QAAQ,EAApB;;AACA,MAAMkJ,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBrF,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,UAAM,IAAIqF,cAAJ,CAAmBpG,GAAnB,CAAN;AACH,GAHD;;AAIA,MAAMqG,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9I,QAAR,EAAqB;AAC5C,QAAM+I,SAAS,GAAGxI,kBAAkB,CAACuI,KAAD,EAAQ9I,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7BuI,SAF6B,CAEtCvI,IAFsC;AAAA,QAGpCK,IAHoC,GAGpBkI,SAHoB,CAGpClI,IAHoC;AAAA,QAG9BJ,KAH8B,GAGpBsI,SAHoB,CAG9BtI,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAMuI,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClBzI,QAAAA,IAAI,GAAGyI,CAAP;;AACA,YAAIA,CAAC,YAAY9I,MAAjB,EAAyB;AACrB0I,UAAAA,kBAAkB,CAACI,CAAD,EAAIxI,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsBwI,KAAtB,EAA6BjI,IAA7B,EAAmC;AAC/BqI,QAAAA,GAAG,EAAE;AAAA,iBAAM1I,IAAN;AAAA,SAD0B;AAE/B2I,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDlJ,IAAAA,iBAAiB,CAACU,IAAD,EAAOK,IAAP,EAAa;AAC1BqI,MAAAA,GAAG,EAAEP,KADqB;AAE1BQ,MAAAA,GAAG,EAAE,eAAM;AAFe,KAAb,CAAjB;AAKH,GAvBD;;AAyBAN,EAAAA,kBAAkB,CAACnG,MAAD,EAAS1C,QAAT,CAAlB;AAEA0C,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAED8E,mBAAmB,CAACU,KAApB,GAA4B,CACxB,wBADwB,EAExB,2BAFwB,EAGxB,+BAHwB,EAIxB,SAJwB,EAKxB,aALwB,EAMxB,4BANwB,CAA5B;AAQAV,mBAAmB,CAAC/C,UAApB,GAAiC,CAC7BlG,QAD6B,EAE7BK,iBAF6B,EAG7BS,kBAH6B,EAI7BgC,oBAJ6B,EAK7Be,GAL6B,CAAjC;;AC/EA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA2BA;;AACA,AAAO,SAAS+F,oBAAT,CAA8B9F,MAA9B,EAAsCvD,QAAtC,EAAgD;AACnD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMwC,GAAG,GAAG/C,QAAQ,EAApB;;AACA,MAAMkJ,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBrF,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,UAAM,IAAIqF,cAAJ,CAAmBpG,GAAnB,CAAN;AACH,GAHD;;AAIA,MAAMqG,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9I,QAAR,EAAqB;AAC5C,QAAM+I,SAAS,GAAGxI,kBAAkB,CAACuI,KAAD,EAAQ9I,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7BuI,SAF6B,CAEtCvI,IAFsC;AAAA,QAGpCK,IAHoC,GAGpBkI,SAHoB,CAGpClI,IAHoC;AAAA,QAG9BJ,KAH8B,GAGpBsI,SAHoB,CAG9BtI,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAMuI,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClBzI,QAAAA,IAAI,GAAGyI,CAAP;;AACA,YAAIA,CAAC,YAAY9I,MAAjB,EAAyB;AACrB0I,UAAAA,kBAAkB,CAACI,CAAD,EAAIxI,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsBwI,KAAtB,EAA6BjI,IAA7B,EAAmC;AAC/BqI,QAAAA,GAAG,EAAE;AAAA,iBAAM1I,IAAN;AAAA,SAD0B;AAE/B2I,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDlJ,IAAAA,iBAAiB,CAACU,IAAD,EAAOK,IAAP,EAAa;AAAEsI,MAAAA,GAAG,EAAER;AAAP,KAAb,CAAjB;AACH,GAnBD;;AAqBAE,EAAAA,kBAAkB,CAACnG,MAAD,EAAS1C,QAAT,CAAlB;AAEA0C,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CAA0BoB,IAA1B,EAAjB;AACH;AAEDyF,oBAAoB,CAACD,KAArB,GAA6B,CACzB,yBADyB,EAEzB,4BAFyB,EAGzB,gCAHyB,EAIzB,SAJyB,EAKzB,aALyB,EAMzB,6BANyB,CAA7B;AASAC,oBAAoB,CAAC1D,UAArB,GAAkC,CAC9BlG,QAD8B,EAE9BK,iBAF8B,EAG9BS,kBAH8B,EAI9BgC,oBAJ8B,EAK9Be,GAL8B,CAAlC;;AC3EA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;;AACA,AAAO,SAASgG,iBAAT,CAA2B/F,MAA3B,EAAmCgG,KAAnC,EAA0ChF,KAA1C,EAAiD;AACpD,MAAMiF,aAAa,GAAG9G,MAAM,CAACiC,UAA7B;AACA,MAAM8E,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgBjH,MAAM,CAACiH,KAA3C,CAFoD;;AAGpD,MAAMjG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ,CAHoD;AAKpD;;AACA,MAAMiG,SAAS,GAAK,OAAOL,KAAP,KAAiB,WAAlB,IAAmC,OAAOhF,KAAP,KAAiB,WAAvE;AAEA,MAAMsF,aAAa,GAAG,GAAtB;AAEA,MAAMC,UAAU,GAAGjI,UAAU,CAAC0H,KAAD,EAAQM,aAAR,CAA7B;;AACA,MAAIC,UAAJ,EAAgB;AACZP,IAAAA,KAAK,GAAGA,KAAK,CAACzI,KAAN,CAAY,CAAZ,CAAR;AACH;;AACD,MAAMiJ,UAAU,GAAGlI,UAAU,CAAC0C,KAAD,EAAQsF,aAAR,CAA7B;;AACA,MAAIE,UAAJ,EAAgB;AACZxF,IAAAA,KAAK,GAAGA,KAAK,CAACzD,KAAN,CAAY,CAAZ,CAAR;AACH;;AAEDyD,EAAAA,KAAK,GAAGyF,QAAQ,CAACzF,KAAD,EAAQ,EAAR,CAAhB;AACAA,EAAAA,KAAK,GAAGkF,WAAW,CAAClF,KAAD,CAAX,GAAqB,IAArB,GAA4BA,KAApC;AAEAgF,EAAAA,KAAK,GAAGA,KAAK,GAAGnI,QAAQ,CAACmI,KAAD,CAAX,GAAqBnI,QAAQ,CAAC,MAAD,CAA1C;;AAEA,MAAM6I,cAAc,GAAG,SAAjBA,cAAiB,CAAC/F,QAAD,EAAWgG,OAAX,EAAgC;AACnD,QAAIC,aAAa,GAAG,KAApB;;AACA,QAAIP,SAAJ,EAAe;AACXtG,MAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,MAAAA,GAAG,wBAAgBQ,QAAQ,CAACtE,QAAT,EAAhB,iBAAyCsK,OAAzC,OAAH;AACH,KAHD,MAGO,IAAI,CAAC3F,KAAL,EAAY;AACf4F,MAAAA,aAAa,GAAGZ,KAAK,CAACa,IAAN,CAAWlG,QAAQ,CAACtE,QAAT,EAAX,MAAoCkK,UAApD;AACH,KAFM,MAEA,IAAIP,KAAK,KAAK,MAAd,EAAsB;AACzBY,MAAAA,aAAa,GAAID,OAAO,KAAK3F,KAAb,KAAwBwF,UAAxC;AACH,KAFM,MAEA;AACHI,MAAAA,aAAa,GAAGZ,KAAK,CAACa,IAAN,CAAWlG,QAAQ,CAACtE,QAAT,EAAX,MAAoCkK,UAApC,IACRI,OAAO,KAAK3F,KAAb,KAAwBwF,UAD/B;AAEH;;AAED,QAAII,aAAJ,EAAmB;AACf7G,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,aAAOiG,aAAa,CAAC,YAAM,EAAP,EAAYU,OAAZ,CAApB;AACH;;AAjBkD,sCAATnH,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAmBnD,WAAOyG,aAAa,CAACxG,KAAd,CAAoBN,MAApB,GAA6BwB,QAA7B,EAAuCgG,OAAvC,SAAmDnH,IAAnD,EAAP;AACH,GApBD;;AAqBAL,EAAAA,MAAM,CAACiC,UAAP,GAAoBsF,cAApB;AACH;AAEDX,iBAAiB,CAACF,KAAlB,GAA0B,CACtB,oBADsB,EAEtB,qBAFsB;AAGtB,yBAHsB,EAItB,uBAJsB;AAKtB,2BALsB,EAMtB,WANsB;AAOtB,eAPsB,EAQtB,QARsB;AAStB,YATsB,CAA1B;AAYAE,iBAAiB,CAAC3D,UAAlB,GAA+B,CAACvE,QAAD,EAAWS,UAAX,EAAuByB,GAAvB,CAA/B;;AClKA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoGA;;AACA,AAAO,SAAS+G,kBAAT,CAA4B9G,MAA5B,EAAoCgG,KAApC,EAA2ChF,KAA3C,EAAkD;AACrD,MAAM+F,cAAc,GAAG5H,MAAM,CAAC6H,WAA9B;AACA,MAAMd,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgBjH,MAAM,CAACiH,KAA3C,CAFqD;;AAGrD,MAAMjG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ,CAHqD;AAKrD;;AACA,MAAMiG,SAAS,GAAK,OAAOL,KAAP,KAAiB,WAAlB,IAAmC,OAAOhF,KAAP,KAAiB,WAAvE;AAEA,MAAMsF,aAAa,GAAG,GAAtB;AAEA,MAAMC,UAAU,GAAGjI,UAAU,CAAC0H,KAAD,EAAQM,aAAR,CAA7B;;AACA,MAAIC,UAAJ,EAAgB;AACZP,IAAAA,KAAK,GAAGA,KAAK,CAACzI,KAAN,CAAY,CAAZ,CAAR;AACH;;AACD,MAAMiJ,UAAU,GAAGlI,UAAU,CAAC0C,KAAD,EAAQsF,aAAR,CAA7B;;AACA,MAAIE,UAAJ,EAAgB;AACZxF,IAAAA,KAAK,GAAGA,KAAK,CAACzD,KAAN,CAAY,CAAZ,CAAR;AACH;;AAEDyD,EAAAA,KAAK,GAAGyF,QAAQ,CAACzF,KAAD,EAAQ,EAAR,CAAhB;AACAA,EAAAA,KAAK,GAAGkF,WAAW,CAAClF,KAAD,CAAX,GAAqB,IAArB,GAA4BA,KAApC;AAEAgF,EAAAA,KAAK,GAAGA,KAAK,GAAGnI,QAAQ,CAACmI,KAAD,CAAX,GAAqBnI,QAAQ,CAAC,MAAD,CAA1C;;AAEA,MAAMoJ,eAAe,GAAG,SAAlBA,eAAkB,CAACtG,QAAD,EAAWuG,QAAX,EAAiC;AACrD,QAAIN,aAAa,GAAG,KAApB;;AACA,QAAIP,SAAJ,EAAe;AACXtG,MAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,MAAAA,GAAG,yBAAiBQ,QAAQ,CAACtE,QAAT,EAAjB,iBAA0C6K,QAA1C,OAAH;AACH,KAHD,MAGO,IAAI,CAAClG,KAAL,EAAY;AACf4F,MAAAA,aAAa,GAAGZ,KAAK,CAACa,IAAN,CAAWlG,QAAQ,CAACtE,QAAT,EAAX,MAAoCkK,UAApD;AACH,KAFM,MAEA,IAAIP,KAAK,KAAK,MAAd,EAAsB;AACzBY,MAAAA,aAAa,GAAIM,QAAQ,KAAKlG,KAAd,KAAyBwF,UAAzC;AACH,KAFM,MAEA;AACHI,MAAAA,aAAa,GAAGZ,KAAK,CAACa,IAAN,CAAWlG,QAAQ,CAACtE,QAAT,EAAX,MAAoCkK,UAApC,IACRW,QAAQ,KAAKlG,KAAd,KAAyBwF,UADhC;AAEH;;AAED,QAAII,aAAJ,EAAmB;AACf7G,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,aAAO+G,cAAc,CAAC,YAAM,EAAP,EAAYG,QAAZ,CAArB;AACH;;AAjBoD,sCAAT1H,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAmBrD,WAAOuH,cAAc,CAACtH,KAAf,CAAqBN,MAArB,GAA8BwB,QAA9B,EAAwCuG,QAAxC,SAAqD1H,IAArD,EAAP;AACH,GApBD;;AAqBAL,EAAAA,MAAM,CAAC6H,WAAP,GAAqBC,eAArB;AACH;AAEDH,kBAAkB,CAACjB,KAAnB,GAA2B,CACvB,qBADuB,EAEvB,sBAFuB;AAGvB,0BAHuB,EAIvB,wBAJuB;AAKvB,4BALuB,EAMvB,WANuB;AAOvB,eAPuB,EAQvB,QARuB;AASvB,YATuB,CAA3B;AAYAiB,kBAAkB,CAAC1E,UAAnB,GAAgC,CAACvE,QAAD,EAAWS,UAAX,EAAuByB,GAAvB,CAAhC;;AClKA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AACA,AAAO,SAASoH,iBAAT,CAA2BnH,MAA3B,EAAmCoH,OAAnC,EAA4CpB,KAA5C,EAAmD;AACtD,MAAMqB,UAAU,GAAGlI,MAAM,CAACmI,IAA1B;AAEAF,EAAAA,OAAO,GAAGA,OAAO,GACX,CAAE,CAACA,OADQ,GAEX,CAAC,CAACA,OAFR;AAGApB,EAAAA,KAAK,GAAGA,KAAK,GACPnI,QAAQ,CAACmI,KAAD,CADD,GAEPnI,QAAQ,CAAC,MAAD,CAFd,CANsD;;AAWtD,MAAM0J,WAAW,GAAG,SAAdA,WAAc,CAAC5J,GAAD,EAAkB;AAClC,QAAIyJ,OAAO,KAAKpB,KAAK,CAACa,IAAN,CAAWlJ,GAAX,CAAhB,EAAiC;AAAA,wCADR6B,IACQ;AADRA,QAAAA,IACQ;AAAA;;AAC7B,aAAO6H,UAAU,CAAC5H,KAAX,CAAiBN,MAAjB,GAA0BxB,GAA1B,SAAkC6B,IAAlC,EAAP;AACH;;AACDO,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GALD;;AAMAb,EAAAA,MAAM,CAACmI,IAAP,GAAcC,WAAd;AACH;AAEDJ,iBAAiB,CAACtB,KAAlB,GAA0B,CACtB,qBADsB,EAEtB,wBAFsB,EAGtB,4BAHsB,CAA1B;AAMAsB,iBAAiB,CAAC/E,UAAlB,GAA+B,CAACvE,QAAD,EAAWkC,GAAX,CAA/B;;ACvEA;AACA,AAMA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyDA;;AACA,AAAO,SAASyH,wBAAT,CAAkCxH,MAAlC,EAA0CvD,QAA1C,EAAmE;AAAA,MAAf2B,MAAe,uEAAN,IAAM;AACtE,MAAMqJ,KAAK,GAAGrJ,MAAM,GAAGP,QAAQ,CAACO,MAAD,CAAX,GAAsB,IAA1C;AACA,MAAMa,GAAG,GAAG/C,QAAQ,EAApB;;AAEA,MAAMwL,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,QAAI,CAAC/F,QAAQ,CAACgG,aAAd,EAA6B;AAAE;AAC3B,UAAMC,OAAO,GAAGjG,QAAQ,CAACkG,oBAAT,CAA8B,QAA9B,CAAhB;AACA,aAAOD,OAAO,CAACA,OAAO,CAAC9J,MAAR,GAAiB,CAAlB,CAAd;AACH;;AACD,WAAO6D,QAAQ,CAACgG,aAAhB,CAL2B;AAM9B,GAND;;AAQA,MAAMG,SAAS,GAAGJ,gBAAgB,EAAlC;;AAEA,MAAMtC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB,QAAM2C,QAAQ,GAAGL,gBAAgB,EAAjC;;AACA,QAAIK,QAAQ,YAAYC,iBAApB,IACDD,QAAQ,KAAKD,SADZ,KAEA,CAACL,KAAD,IAAUA,KAAK,CAACZ,IAAN,CAAWkB,QAAQ,CAACE,WAApB,CAFV,CAAJ,EAEiD;AAC7ClI,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,YAAM,IAAIqF,cAAJ,CAAmBpG,GAAnB,CAAN;AACH;AACJ,GARD;;AAUA,MAAMqG,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9I,QAAR,EAAqB;AAC5C,QAAM+I,SAAS,GAAGxI,kBAAkB,CAACuI,KAAD,EAAQ9I,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7BuI,SAF6B,CAEtCvI,IAFsC;;AAI5C,QAAIA,IAAI,KAAK,IAAb,EAAmB;AAAA,UACPK,IADO,GACSkI,SADT,CACPlI,IADO;AAAA,UACDJ,KADC,GACSsI,SADT,CACDtI,KADC;;AAEf,UAAIA,KAAJ,EAAW;AACP,YAAMuI,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClBzI,UAAAA,IAAI,GAAGyI,CAAP;;AACA,cAAIA,CAAC,YAAY9I,MAAjB,EAAyB;AACrB0I,YAAAA,kBAAkB,CAACI,CAAD,EAAIxI,KAAJ,CAAlB;AACH;AACJ,SALD;;AAMAN,QAAAA,MAAM,CAACG,cAAP,CAAsBwI,KAAtB,EAA6BjI,IAA7B,EAAmC;AAC/BqI,UAAAA,GAAG,EAAE;AAAA,mBAAM1I,IAAN;AAAA,WAD0B;AAE/B2I,UAAAA,GAAG,EAAEH;AAF0B,SAAnC;AAIA;AACH,OAdc;AAiBf;AACA;;;AACA,UAAM/I,UAAU,GAAGE,MAAM,CAACC,wBAAP,CAAgCqL,IAAI,CAACC,SAArC,EAAgD,aAAhD,CAAnB;AAEA,UAAIC,YAAJ;;AACA,UAAI1L,UAAU,YAAYE,MAAtB,KAAiC,KAAjC,IACDF,UAAU,CAACiJ,GAAX,YAA0BpG,QAA1B,KAAuC,KAD1C,EACiD;AAC7C6I,QAAAA,YAAY,GAAGnL,IAAI,CAACK,IAAD,CAAnB;AACH;;AAEDf,MAAAA,iBAAiB,CAACU,IAAD,EAAOK,IAAP,EAAa;AAC1BsI,QAAAA,GAAG,EAAE,aAACyC,KAAD,EAAW;AACZjD,UAAAA,KAAK;AACLgD,UAAAA,YAAY,GAAGC,KAAf;AACH,SAJyB;AAK1B1C,QAAAA,GAAG,EAAE,eAAM;AACPP,UAAAA,KAAK;AACL,iBAAOgD,YAAP;AACH;AARyB,OAAb,CAAjB;AAUH;AACJ,GA1CD;;AA4CA9C,EAAAA,kBAAkB,CAACnG,MAAD,EAAS1C,QAAT,CAAlB;AAEA0C,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAEDmH,wBAAwB,CAAC3B,KAAzB,GAAiC,CAC7B,6BAD6B,EAE7B,gCAF6B,EAG7B,oCAH6B,EAI7B,SAJ6B,EAK7B,aAL6B,EAM7B,iCAN6B,CAAjC;AASA2B,wBAAwB,CAACpF,UAAzB,GAAsC,CAClClG,QADkC,EAElCK,iBAFkC,EAGlCS,kBAHkC,EAIlCa,QAJkC,EAKlCmB,oBALkC,EAMlCe,GANkC,CAAtC;;ACjJA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;;AACA,AAAO,SAASuI,WAAT,CAAqBtI,MAArB,EAA6BvD,QAA7B,EAAuC4L,KAAvC,EAA8C;AACjD,MAAI,CAAC5L,QAAL,EAAe;AACX;AACH;;AAED,MAAMyJ,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgBjH,MAAM,CAACiH,KAA3C,CALiD;;AAOjD,MAAImC,aAAJ;;AACA,MAAIF,KAAK,KAAK,WAAd,EAA2B;AACvBE,IAAAA,aAAa,GAAG9K,SAAhB;AACH,GAFD,MAEO,IAAI4K,KAAK,KAAK,OAAd,EAAuB;AAC1BE,IAAAA,aAAa,GAAG,KAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,MAAd,EAAsB;AACzBE,IAAAA,aAAa,GAAG,IAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,MAAd,EAAsB;AACzBE,IAAAA,aAAa,GAAG,IAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,UAAd,EAA0B;AAC7BE,IAAAA,aAAa,GAAG,yBAAM,EAAtB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,UAAd,EAA0B;AAC7BE,IAAAA,aAAa,GAAG;AAAA,aAAM,IAAN;AAAA,KAAhB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,WAAd,EAA2B;AAC9BE,IAAAA,aAAa,GAAG;AAAA,aAAM,KAAN;AAAA,KAAhB;AACH,GAFM,MAEA,IAAI,QAAQ1B,IAAR,CAAawB,KAAb,CAAJ,EAAyB;AAC5BE,IAAAA,aAAa,GAAGC,UAAU,CAACH,KAAD,CAA1B;;AACA,QAAInC,WAAW,CAACqC,aAAD,CAAf,EAAgC;AAC5B;AACH;;AACD,QAAIpM,IAAI,CAACsM,GAAL,CAASF,aAAT,IAA0B,MAA9B,EAAsC;AAClC;AACH;AACJ,GARM,MAQA,IAAIF,KAAK,KAAK,IAAd,EAAoB;AACvBE,IAAAA,aAAa,GAAG,CAAC,CAAjB;AACH,GAFM,MAEA,IAAIF,KAAK,KAAK,EAAd,EAAkB;AACrBE,IAAAA,aAAa,GAAG,EAAhB;AACH,GAFM,MAEA;AACH;AACH;;AAED,MAAIG,QAAQ,GAAG,KAAf;;AACA,MAAMC,UAAU,GAAG,SAAbA,UAAa,CAACN,KAAD,EAAW;AAC1B,QAAIK,QAAJ,EAAc;AACV,aAAOA,QAAP;AACH;;AACDA,IAAAA,QAAQ,GAAGL,KAAK,KAAK5K,SAAV,IACJ8K,aAAa,KAAK9K,SADd,IAEJ,OAAO4K,KAAP,KAAiB,OAAOE,aAF/B;AAGA,WAAOG,QAAP;AACH,GARD;;AAUA,MAAMpD,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9I,QAAR,EAAqB;AAC5C,QAAM+I,SAAS,GAAGxI,kBAAkB,CAACuI,KAAD,EAAQ9I,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7BuI,SAF6B,CAEtCvI,IAFsC;AAAA,QAGpCK,IAHoC,GAGpBkI,SAHoB,CAGpClI,IAHoC;AAAA,QAG9BJ,KAH8B,GAGpBsI,SAHoB,CAG9BtI,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAMuI,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClBzI,QAAAA,IAAI,GAAGyI,CAAP;;AACA,YAAIA,CAAC,YAAY9I,MAAjB,EAAyB;AACrB0I,UAAAA,kBAAkB,CAACI,CAAD,EAAIxI,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsBwI,KAAtB,EAA6BjI,IAA7B,EAAmC;AAC/BqI,QAAAA,GAAG,EAAE;AAAA,iBAAM1I,IAAN;AAAA,SAD0B;AAE/B2I,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAED,QAAIkD,UAAU,CAAC1L,IAAI,CAACK,IAAD,CAAL,CAAd,EAA4B;AAAE;AAAS;;AAEvCyC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAzD,IAAAA,iBAAiB,CAACU,IAAD,EAAOK,IAAP,EAAa;AAC1BqI,MAAAA,GAAG,EAAE;AAAA,eAAM4C,aAAN;AAAA,OADqB;AAE1B3C,MAAAA,GAAG,EAAE,aAACF,CAAD,EAAO;AACR,YAAIiD,UAAU,CAACjD,CAAD,CAAd,EAAmB;AACf6C,UAAAA,aAAa,GAAG7C,CAAhB;AACH;AACJ;AANyB,KAAb,CAAjB;AAQH,GA7BD;;AA+BAJ,EAAAA,kBAAkB,CAACnG,MAAD,EAAS1C,QAAT,CAAlB;AACH;AAED6L,WAAW,CAACzC,KAAZ,GAAoB,CAChB,cADgB,EAEhB,iBAFgB,EAGhB,qBAHgB,EAIhB,QAJgB,EAKhB,YALgB,CAApB;AAOAyC,WAAW,CAAClG,UAAZ,GAAyB,CAACpF,kBAAD,EAAqBT,iBAArB,EAAwCwD,GAAxC,CAAzB;;ACrIA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiCA;;AACA,AAAO,SAAS6I,YAAT,CAAsB5I,MAAtB,EAA8BgG,KAA9B,EAAqC;AACxC,MAAMyB,KAAK,GAAGzB,KAAK,GAAGnI,QAAQ,CAACmI,KAAD,CAAX,GAAqBnI,QAAQ,CAAC,MAAD,CAAhD;;AAEA,MAAMgL,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,UAAD,EAAaC,QAAb,EAA0B;AACnD,QAAMC,UAAU,aAAMF,UAAN,MAAhB;AACA,QAAMG,OAAO,sBAAeF,QAAf,CAAb;AACA,QAAMG,OAAO,uBAAgBH,QAAhB,CAAb;AACA,QAAMI,IAAI,GAAG,UAAb;AACA,QAAMC,UAAU,GAAG,yCAAnB;AACAzH,IAAAA,QAAQ,CAAC0H,MAAT,GAAkBL,UAAU,GAAGI,UAA/B;AACAzH,IAAAA,QAAQ,CAAC0H,MAAT,GAAkBL,UAAU,GAAGC,OAAb,GAAuBG,UAAzC;AACAzH,IAAAA,QAAQ,CAAC0H,MAAT,GAAkBL,UAAU,GAAGE,OAAb,GAAuBE,UAAzC;AACAzH,IAAAA,QAAQ,CAAC0H,MAAT,GAAkBL,UAAU,GAAGG,IAAb,GAAoBC,UAAtC;AACAzH,IAAAA,QAAQ,CAAC0H,MAAT,GAAkBL,UAAU,GAAGC,OAAb,GAAuBE,IAAvB,GAA8BC,UAAhD;AACAzH,IAAAA,QAAQ,CAAC0H,MAAT,GAAkBL,UAAU,GAAGE,OAAb,GAAuBC,IAAvB,GAA8BC,UAAhD;AACArJ,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GAbD;;AAeA,MAAMsJ,QAAQ,GAAG,SAAXA,QAAW,GAAM;AACnB3H,IAAAA,QAAQ,CAAC0H,MAAT,CAAgBE,KAAhB,CAAsB,GAAtB,EAA2BC,OAA3B,CAAmC,UAACC,SAAD,EAAe;AAC9C,UAAMrM,GAAG,GAAGqM,SAAS,CAACpM,OAAV,CAAkB,GAAlB,CAAZ;;AACA,UAAID,GAAG,KAAK,CAAC,CAAb,EAAgB;AACZ;AACH;;AAED,UAAM0L,UAAU,GAAGW,SAAS,CAAClM,KAAV,CAAgB,CAAhB,EAAmBH,GAAnB,EAAwBsM,IAAxB,EAAnB;;AACA,UAAI,CAACjC,KAAK,CAACZ,IAAN,CAAWiC,UAAX,CAAL,EAA6B;AACzB;AACH;;AAED,UAAMa,SAAS,GAAGhI,QAAQ,CAACiI,QAAT,CAAkBC,QAAlB,CAA2BN,KAA3B,CAAiC,GAAjC,CAAlB;;AACA,WAAK,IAAI7F,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIiG,SAAS,CAAC7L,MAAV,GAAmB,CAAxC,EAA2C4F,CAAC,IAAI,CAAhD,EAAmD;AAC/C,YAAMqF,QAAQ,GAAGY,SAAS,CAACpM,KAAV,CAAgBmG,CAAhB,EAAmBoG,IAAnB,CAAwB,GAAxB,CAAjB;;AACA,YAAIf,QAAJ,EAAc;AACVF,UAAAA,oBAAoB,CAACC,UAAD,EAAaC,QAAb,CAApB;AACH;AACJ;AACJ,KAlBD;AAmBH,GApBD;;AAqBAO,EAAAA,QAAQ;AACRnK,EAAAA,MAAM,CAAC4K,gBAAP,CAAwB,cAAxB,EAAwCT,QAAxC;AACH;AAEDV,YAAY,CAAC/C,KAAb,GAAqB,CACjB,eADiB,EAEjB,mBAFiB,EAGjB,uBAHiB,CAArB;AAMA+C,YAAY,CAACxG,UAAb,GAA0B,CAACvE,QAAD,EAAWkC,GAAX,CAA1B;;ACpFA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoCA;;AACA,AAAO,SAASiK,uBAAT,CAAiChK,MAAjC,EAAyCiK,KAAzC,EAAgDC,OAAhD,EAAyD;AAC5DD,EAAAA,KAAK,GAAGA,KAAK,GAAGpM,QAAQ,CAACoM,KAAD,CAAX,GAAqBpM,QAAQ,CAAC,MAAD,CAA1C;AACAqM,EAAAA,OAAO,GAAGA,OAAO,GAAGrM,QAAQ,CAACqM,OAAD,CAAX,GAAuBrM,QAAQ,CAAC,MAAD,CAAhD;AAEA,MAAMsM,sBAAsB,GAAGhL,MAAM,CAACiL,WAAP,CAAmBjC,SAAnB,CAA6B4B,gBAA5D;;AACA,WAASM,uBAAT,CAAiCC,SAAjC,EAA4C3J,QAA5C,EAA+D;AAC3D,QAAIsJ,KAAK,CAACpD,IAAN,CAAWyD,SAAS,CAACjO,QAAV,EAAX,KAAoC6N,OAAO,CAACrD,IAAR,CAAalG,QAAQ,CAACtE,QAAT,EAAb,CAAxC,EAA2E;AACvE0D,MAAAA,GAAG,CAACC,MAAD,CAAH;AACA,aAAOvC,SAAP;AACH;;AAJ0D,sCAAN+B,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAK3D,WAAO2K,sBAAsB,CAAC1K,KAAvB,CAA6B,IAA7B,GAAoC6K,SAApC,EAA+C3J,QAA/C,SAA4DnB,IAA5D,EAAP;AACH;;AAEDL,EAAAA,MAAM,CAACiL,WAAP,CAAmBjC,SAAnB,CAA6B4B,gBAA7B,GAAgDM,uBAAhD;AACH;AAEDL,uBAAuB,CAACnE,KAAxB,GAAgC,CAC5B,0BAD4B,EAE5B,6BAF4B,EAG5B,iCAH4B,EAI5B,SAJ4B,EAK5B,aAL4B,CAAhC;AAQAmE,uBAAuB,CAAC5H,UAAxB,GAAqC,CAACvE,QAAD,EAAWkC,GAAX,CAArC;;ACjEA;AAEA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASwK,UAAT,CAAoBvK,MAApB,EAA4B;AAAA;;AAC/B,MAAMwK,gBAAgB,GAAGrL,MAAM,CAACiC,UAAhC;AACA,MAAMqJ,QAAQ,GAAG,mBAAjB;;AAEAtL,EAAAA,MAAM,CAACiC,UAAP,GAAoB,UAACT,QAAD,EAAuB;AACvC,QAAI,OAAOA,QAAP,KAAoB,QAApB,IAAgC,CAAC8J,QAAQ,CAAC5D,IAAT,CAAclG,QAAd,CAArC,EAA8D;AAAA,wCADhCnB,IACgC;AADhCA,QAAAA,IACgC;AAAA;;AAC1D,aAAOgL,gBAAgB,CAACE,IAAjB,OAAAF,gBAAgB,GAAM,KAAN,EAAY7J,QAAZ,SAAyBnB,IAAzB,EAAvB;AACH;;AACDO,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GALD;;AAOA,MAAM2K,UAAU,GAAG,CACf,CAAC,cAAD,CADe,EAEf,CAAC,SAAD,CAFe,EAGf,CAAC,mBAAD,CAHe,EAIf,CAAC,gBAAD,EAAmB,qBAAnB,EAA0C,gEAA1C,EAA4G,QAA5G,EAAsH,kBAAtH,EAA0I,SAA1I,EAAqJ,kBAArJ,EAAyK,UAAzK,EAAqL,cAArL,EAAqM,UAArM,EAAiN,gBAAjN,EAAmO,aAAnO,EAAkP,cAAlP,EAAkQ,MAAlQ,EAA0Q,QAA1Q,CAJe,CAAnB;;AAMA,MAAMC,KAAK,GAAG,SAARA,KAAQ,CAACjN,GAAD,EAAS;AACnB,SAAK,IAAI+F,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGiH,UAAU,CAAC7M,MAA/B,EAAuC4F,CAAC,IAAI,CAA5C,EAA+C;AAC3C,UAAMmH,MAAM,GAAGF,UAAU,CAACjH,CAAD,CAAzB;AACA,UAAIsC,KAAK,GAAG,CAAZ;;AACA,WAAK,IAAI8E,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGD,MAAM,CAAC/M,MAA3B,EAAmCgN,CAAC,IAAI,CAAxC,EAA2C;AACvC,YAAMC,KAAK,GAAGF,MAAM,CAACC,CAAD,CAApB;AACA,YAAME,KAAK,GAAGD,KAAK,YAAYhN,MAAjB,GAA0BgN,KAAK,CAAClE,IAAN,CAAWlJ,GAAX,CAA1B,GAA4CA,GAAG,CAACN,OAAJ,CAAY0N,KAAZ,IAAqB,CAAC,CAAhF;;AACA,YAAIC,KAAJ,EAAW;AACPhF,UAAAA,KAAK,IAAI,CAAT;AACH;AACJ;;AACD,UAAIA,KAAK,GAAG6E,MAAM,CAAC/M,MAAf,IAAyB,GAA7B,EAAkC;AAC9B,eAAO,IAAP;AACH;AACJ;;AACD,WAAO,KAAP;AACH,GAhBD;;AAkBA,MAAMmN,UAAU,GAAG9L,MAAM,CAAC+L,IAA1B;;AACA/L,EAAAA,MAAM,CAAC+L,IAAP,GAAc,UAACvN,GAAD,EAAS;AACnB,QAAI,CAACiN,KAAK,CAACjN,GAAD,CAAV,EAAiB;AACb,aAAOsN,UAAU,CAACtN,GAAD,CAAjB;AACH;;AACDoC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,QAAMmL,MAAM,GAAGxJ,QAAQ,CAACyJ,IAAxB;;AACA,QAAID,MAAJ,EAAY;AACRA,MAAAA,MAAM,CAACE,KAAP,CAAaC,cAAb,CAA4B,YAA5B;AACH;;AACD,QAAMC,EAAE,GAAG5J,QAAQ,CAAC6J,cAAT,CAAwB,YAAxB,CAAX;;AACA,QAAID,EAAJ,EAAQ;AACJA,MAAAA,EAAE,CAACE,UAAH,CAAcC,WAAd,CAA0BH,EAA1B;AACH;AACJ,GAbD;AAcH;AAEDhB,UAAU,CAAC1E,KAAX,GAAmB,CACf,aADe,EAEf,gBAFe,EAGf,oBAHe,EAIf,UAJe,EAKf,cALe,CAAnB;AAQA0E,UAAU,CAACnI,UAAX,GAAwB,CAACrC,GAAD,CAAxB;;AC9EA;AACA,AAEA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAAS4L,QAAT,CAAkB3L,MAAlB,EAA0B;AAC7B,MAAI4L,YAAY,GAAG,EAAnB;;AACA,MAAIzM,MAAM,CAAC0M,iBAAX,EAA8B;AAC1BD,IAAAA,YAAY,GAAG,mBAAf;AACH,GAFD,MAEO,IAAIzM,MAAM,CAAC2M,uBAAX,EAAoC;AACvCF,IAAAA,YAAY,GAAG,yBAAf;AACH;;AAED,MAAIA,YAAY,KAAK,EAArB,EAAyB;AACrB;AACH;;AAED,MAAMG,cAAc,GAAG,SAAjBA,cAAiB,CAACC,MAAD,EAAY;AAC/BjM,IAAAA,GAAG,CAACC,MAAD,2DAA2DgM,MAA3D,EAAH;AACH,GAFD;;AAGA,MAAMtM,IAAI,GAAG,SAAPA,IAAO,GAAM,EAAnB;;AACAqM,EAAAA,cAAc,CAAC5D,SAAf,GAA2B;AACvB8D,IAAAA,KAAK,EAAEvM,IADgB;AAEvBwM,IAAAA,iBAAiB,EAAExM,IAFI;AAGvByM,IAAAA,WAAW,EAAEzM,IAHU;AAIvB0M,IAAAA,oBAAoB,EAAE1M;AAJC,GAA3B;AAMA,MAAM2M,GAAG,GAAGlN,MAAM,CAACyM,YAAD,CAAlB;AACAzM,EAAAA,MAAM,CAACyM,YAAD,CAAN,GAAuBG,cAAvB;;AACA,MAAIM,GAAG,CAAClE,SAAR,EAAmB;AACfkE,IAAAA,GAAG,CAAClE,SAAJ,CAAc+D,iBAAd,GAAkC,UAAUxG,CAAV,EAAa4G,CAAb,EAAgB;AAC9C,aAAO;AACHL,QAAAA,KAAK,EAAEvM,IADJ;AAEH6M,QAAAA,IAAI,EAAE7M;AAFH,OAAP;AAIH,KALiC,CAKhCW,IALgC,CAK3B,IAL2B,CAAlC;AAMH;AACJ;AAEDsL,QAAQ,CAAC9F,KAAT,GAAiB,CACb,UADa,EAEb,aAFa,EAGb,iBAHa,CAAjB;AAMA8F,QAAQ,CAACvJ,UAAT,GAAsB,CAACrC,GAAD,CAAtB;;AC3DA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASyM,mBAAT,CAA6BxM,MAA7B,EAAqC;AACxC,MAAMG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,MAAM+J,sBAAsB,GAAGhL,MAAM,CAACiL,WAAP,CAAmBjC,SAAnB,CAA6B4B,gBAA5D;;AACA,WAASM,uBAAT,CAAiCC,SAAjC,EAA4C3J,QAA5C,EAA+D;AAC3DZ,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,IAAAA,GAAG,8BAAsBmK,SAAtB,iBAAqC3J,QAAQ,CAACtE,QAAT,EAArC,OAAH;;AAF2D,sCAANmD,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAG3D,WAAO2K,sBAAsB,CAAC1K,KAAvB,CAA6B,IAA7B,GAAoC6K,SAApC,EAA+C3J,QAA/C,SAA4DnB,IAA5D,EAAP;AACH;;AACDL,EAAAA,MAAM,CAACiL,WAAP,CAAmBjC,SAAnB,CAA6B4B,gBAA7B,GAAgDM,uBAAhD;AACH;AAEDmC,mBAAmB,CAAC3G,KAApB,GAA4B,CACxB,sBADwB,EAExB,4BAFwB,EAGxB,gCAHwB,EAIxB,SAJwB,EAKxB,aALwB,CAA5B;AAQA2G,mBAAmB,CAACpK,UAApB,GAAiC,CAACrC,GAAD,CAAjC;;ACpCA;AACA,AAEA;;;;;;;;;;;;AAWA,AAAO,SAAS0M,OAAT,CAAiBzM,MAAjB,EAAyB;AAC5B,MAAMG,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ,CAD4B;;AAG5B,MAAM6K,UAAU,GAAG9L,MAAM,CAAC+L,IAA1B;;AACA,WAASwB,WAAT,CAAqB/O,GAArB,EAA0B;AACtBoC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACAG,IAAAA,GAAG,kBAAUxC,GAAV,SAAH;AACA,WAAOsN,UAAU,CAACtN,GAAD,CAAjB;AACH;;AACDwB,EAAAA,MAAM,CAAC+L,IAAP,GAAcwB,WAAd,CAT4B;;AAY5B,MAAMC,cAAc,GAAGxN,MAAM,CAACI,QAA9B;;AAEA,WAASqN,eAAT,GAAkC;AAC9B7M,IAAAA,GAAG,CAACC,MAAD,CAAH;;AAD8B,sCAANR,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAE9BW,IAAAA,GAAG,wBAAiBX,IAAI,CAACsK,IAAL,CAAU,IAAV,CAAjB,OAAH;AACA,WAAO6C,cAAc,CAAClN,KAAf,CAAqB,IAArB,YAA+BD,IAA/B,EAAP;AACH;;AAEDoN,EAAAA,eAAe,CAACzE,SAAhB,GAA4BvL,MAAM,CAACiQ,MAAP,CAAcF,cAAc,CAACxE,SAA7B,CAA5B;AACAyE,EAAAA,eAAe,CAACzE,SAAhB,CAA0B2E,WAA1B,GAAwCF,eAAxC;AAEAzN,EAAAA,MAAM,CAACI,QAAP,GAAkBqN,eAAlB;AACH;AAEDH,OAAO,CAAC5G,KAAR,GAAgB,CACZ,UADY,CAAhB;AAIA4G,OAAO,CAACrK,UAAR,GAAqB,CAACrC,GAAD,CAArB;;AC5CA;;;;;;;;;;;AAWA,AAAO,SAASI,GAAT,GAAsB;AAAA,oCAANX,IAAM;AAANA,IAAAA,IAAM;AAAA;;AACzBY,EAAAA,OAAO,CAACD,GAAR,CAAYX,IAAZ,EADyB;AAE5B;AACDW,GAAG,CAAC0F,KAAJ,GAAY,CAAC,KAAD,CAAZ;;ACdA;AACA,AAEA;;;;;;;;;;;;;;;;AAeA,AAAO,SAASkH,MAAT,CAAgB/M,MAAhB,EAAwB;AAC3Bb,EAAAA,MAAM,CAAC+L,IAAP,GAAc,SAASwB,WAAT,CAAqB3I,CAArB,EAAwB;AAClChE,IAAAA,GAAG,CAACC,MAAD,yCAAyC+D,CAAzC,EAAH;AACH,GAFa,CAEZ1D,IAFY,EAAd;AAGH;AAED0M,MAAM,CAAClH,KAAP,GAAe,CACX,QADW,EAEX,WAFW,EAGX,kBAHW,EAIX,eAJW,EAKX,sBALW,CAAf;AAQAkH,MAAM,CAAC3K,UAAP,GAAoB,CAACrC,GAAD,CAApB;;AChCA;AAEA,AAEA;;;;;;;;;;;;;;;;;;;;AAmBA,AAAO,SAASiN,aAAT,CAAuBhN,MAAvB,EAA+B5B,MAA/B,EAAuC;AAC1CA,EAAAA,MAAM,GAAGA,MAAM,GAAGP,QAAQ,CAACO,MAAD,CAAX,GAAsBP,QAAQ,CAAC,MAAD,CAA7C;AAEA,MAAMoN,UAAU,GAAG9L,MAAM,CAAC+L,IAA1B;;AACA/L,EAAAA,MAAM,CAAC+L,IAAP,GAAc,UAAU+B,OAAV,EAAmB;AAC7B,QAAI,CAAC7O,MAAM,CAACyI,IAAP,CAAYoG,OAAO,CAAC5Q,QAAR,EAAZ,CAAL,EAAsC;AAClC,aAAO4O,UAAU,CAACP,IAAX,CAAgBvL,MAAhB,EAAwB8N,OAAxB,CAAP;AACH;;AACDlN,IAAAA,GAAG,CAACC,MAAD,EAASiN,OAAT,CAAH;AACA,WAAOxP,SAAP;AACH,GANa,CAMZ4C,IANY,CAMPlB,MANO,CAAd;AAOH;AAED6N,aAAa,CAACnH,KAAd,GAAsB,CAClB,iBADkB,EAElB,cAFkB,EAGlB,kBAHkB,CAAtB;AAMAmH,aAAa,CAAC5K,UAAd,GAA2B,CAACvE,QAAD,EAAWkC,GAAX,CAA3B;;AC1CA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASmN,UAAT,CAAoBlN,MAApB,EAA4B;AAC/BD,EAAAA,GAAG,CAACC,MAAD,CAAH;;AACA,MAAMmN,GAAG,GAAG,SAANA,GAAM,GAAY,EAAxB;;AACAA,EAAAA,GAAG,CAAChF,SAAJ,CAAcyC,KAAd,GAAsBlL,IAAtB;AACAyN,EAAAA,GAAG,CAAChF,SAAJ,CAAciF,UAAd,GAA2B1N,IAA3B;AACAyN,EAAAA,GAAG,CAAChF,SAAJ,CAAckF,SAAd,GAA0B3N,IAA1B;;AACAyN,EAAAA,GAAG,CAAChF,SAAJ,CAAcmF,EAAd,GAAmB,UAAU5H,CAAV,EAAa4G,CAAb,EAAgB;AAC/B,QAAI,CAAC5G,CAAL,EAAQ;AACJ4G,MAAAA,CAAC;AACJ;;AACD,WAAO,IAAP;AACH,GALD;;AAMAa,EAAAA,GAAG,CAAChF,SAAJ,CAAcoF,UAAd,GAA2B,YAAY;AACnC,WAAO,IAAP;AACH,GAFD;;AAGAJ,EAAAA,GAAG,CAAChF,SAAJ,CAAcqF,aAAd,GAA8B,UAAU9H,CAAV,EAAa;AACvCA,IAAAA,CAAC;AACD,WAAO,IAAP;AACH,GAHD;;AAIAyH,EAAAA,GAAG,CAAChF,SAAJ,CAAcsF,SAAd,GAA0B/N,IAA1B;AACAP,EAAAA,MAAM,CAACuO,WAAP,GAAqBvO,MAAM,CAACwO,YAAP,GAAsBR,GAA3C,CApB+B;;AAsB/BhO,EAAAA,MAAM,CAACyO,WAAP,GAAqBzO,MAAM,CAAC0O,YAAP,GAAsB,IAAIV,GAAJ,EAA3C;AACH;AAEDD,UAAU,CAACrH,KAAX,GAAmB,CACf,mBADe,EAEf,sBAFe,EAGf,0BAHe,EAIf,UAJe,EAKf,cALe,CAAnB;AAQAqH,UAAU,CAAC9K,UAAX,GAAwB,CAAC1C,IAAD,EAAOK,GAAP,CAAxB;;AClDA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAAS+N,cAAT,CAAwB9N,MAAxB,EAAgC;AACnC,SAAOb,MAAM,CAAC4O,MAAd;AACA,SAAO5O,MAAM,CAAC6O,KAAd;AACApR,EAAAA,MAAM,CAACqR,gBAAP,CAAwB9O,MAAxB,EAAgC;AAC5B4O,IAAAA,MAAM,EAAE;AACJpI,MAAAA,GAAG,EAAE,eAAM;AACP5F,QAAAA,GAAG,CAACC,MAAD,CAAH;AACA,eAAO,EAAP;AACH;AAJG,KADoB;AAO5BgO,IAAAA,KAAK,EAAE;AACHrI,MAAAA,GAAG,EAAE,eAAM;AACP5F,QAAAA,GAAG,CAACC,MAAD,CAAH;AACA,eAAO,EAAP;AACH;AAJE;AAPqB,GAAhC;AAcH;AAED8N,cAAc,CAACjI,KAAf,GAAuB,CACnB,kBADmB,EAEnB,iBAFmB,EAGnB,qBAHmB,CAAvB;AAMAiI,cAAc,CAAC1L,UAAf,GAA4B,CAACrC,GAAD,CAA5B;;ACtCA;;;;;;;;;;;;;;;AAcA,AAAO,SAASmO,gBAAT,CAA0BlO,MAA1B,EAAkC;AACrC,MAAMf,GAAG,GAAG/C,QAAQ,EAApB;;AAEA,MAAMiS,UAAU,GAAG,SAAbA,UAAa,GAAM;AACrB,UAAM,IAAI9I,cAAJ,CAAmBpG,GAAnB,CAAN;AACH,GAFD;;AAIA,SAAOE,MAAM,CAAC4O,MAAd;AACA,SAAO5O,MAAM,CAAC6O,KAAd;AACApR,EAAAA,MAAM,CAACqR,gBAAP,CAAwB9O,MAAxB,EAAgC;AAC5B4O,IAAAA,MAAM,EAAE;AAAEnI,MAAAA,GAAG,EAAEuI;AAAP,KADoB;AAE5BH,IAAAA,KAAK,EAAE;AAAEpI,MAAAA,GAAG,EAAEuI;AAAP;AAFqB,GAAhC;AAKAhP,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CAA0BoB,IAA1B,EAAjB;AACAN,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAEDkO,gBAAgB,CAACrI,KAAjB,GAAyB,CACrB,oBADqB,EAErB,eAFqB,EAGrB,mBAHqB,CAAzB;AAMAqI,gBAAgB,CAAC9L,UAAjB,GAA8B,CAACpD,oBAAD,EAAuB9C,QAAvB,EAAiC6D,GAAjC,CAA9B;;AC1CA;AACA,AAEA;;;;;;;;;;;;;;;AAcA,AAAO,SAASqO,YAAT,CAAsBpO,MAAtB,EAA8B;AACjC,MAAMqO,OAAO,GAAG,SAAVA,OAAU,CAACC,IAAD;AAAA,WAAU,OAAOzH,IAAP,CAAYyH,IAAZ,CAAV;AAAA,GAAhB;;AACA,MAAMC,OAAO,GAAG,SAAVA,OAAU,CAAUC,UAAV,EAAsB;AAClC,QAAIC,SAAS,GAAG,EAAhB;AACA,QAAIC,QAAQ,GAAG,EAAf;;AACA,SAAK,IAAIhL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG8K,UAAU,CAAC1Q,MAA/B,EAAuC4F,CAAC,IAAI,CAA5C,EAA+C;AAC3C,UAAIA,CAAC,GAAG,CAAJ,KAAU,CAAd,EAAiB;AACb+K,QAAAA,SAAS,IAAID,UAAU,CAACG,MAAX,CAAkBjL,CAAlB,CAAb;AACH,OAFD,MAEO;AACHgL,QAAAA,QAAQ,GAAGF,UAAU,CAACG,MAAX,CAAkBjL,CAAlB,IAAuBgL,QAAlC;AACH;AACJ;;AAED,QAAIJ,IAAI,GAAG,CAACG,SAAS,GAAGC,QAAb,EAAuBnF,KAAvB,CAA6B,EAA7B,CAAX;;AAEA,SAAK,IAAI7F,EAAC,GAAG,CAAb,EAAgBA,EAAC,GAAG4K,IAAI,CAACxQ,MAAzB,EAAiC4F,EAAC,IAAI,CAAtC,EAAyC;AACrC,UAAI2K,OAAO,CAACC,IAAI,CAAC5K,EAAD,CAAL,CAAX,EAAsB;AAClB,aAAK,IAAIkL,EAAE,GAAGlL,EAAC,GAAG,CAAlB,EAAqBkL,EAAE,GAAGN,IAAI,CAACxQ,MAA/B,EAAuC8Q,EAAE,IAAI,CAA7C,EAAgD;AAC5C,cAAIP,OAAO,CAACC,IAAI,CAACM,EAAD,CAAL,CAAX,EAAuB;AACnB;AACA,gBAAMC,IAAI,GAAGpI,QAAQ,CAAC6H,IAAI,CAAC5K,EAAD,CAAL,EAAU,EAAV,CAAR,GAAwB+C,QAAQ,CAAC6H,IAAI,CAACM,EAAD,CAAL,EAAW,EAAX,CAA7C;;AACA,gBAAIC,IAAI,GAAG,EAAX,EAAe;AACXP,cAAAA,IAAI,CAAC5K,EAAD,CAAJ,GAAUmL,IAAI,CAACxS,QAAL,EAAV;AACH;;AACDqH,YAAAA,EAAC,GAAGkL,EAAJ;AACA;AACH;AACJ;AACJ;AACJ;;AACDN,IAAAA,IAAI,GAAGA,IAAI,CAACxE,IAAL,CAAU,EAAV,CAAP;AACA,QAAMgF,UAAU,GAAG3P,MAAM,CAAC4P,IAAP,CAAYT,IAAZ,EAAkB/Q,KAAlB,CAAwB,EAAxB,EAA4B,CAAC,EAA7B,CAAnB;AACA;;AACA,QAAI4B,MAAM,CAAC6P,IAAX,EAAiB;AACb7P,MAAAA,MAAM,CAAC6P,IAAP;AACH;AACD;;;AACA7P,IAAAA,MAAM,CAAC8P,cAAP,GAAwB,IAAxB;AACA9P,IAAAA,MAAM,CAACyK,QAAP,CAAgBsF,IAAhB,GAAuBJ,UAAvB;AACH,GArCD;;AAuCA,MAAIK,GAAJ,CAzCiC;;AA2CjC,MAAIC,YAAY,GAAG,IAAnB;AAEA,MAAMC,MAAM,GAAG9S,iBAAiB,CAAC4C,MAAD,EAAS,MAAT,EAAiB;AAC7CrC,IAAAA,YAAY,EAAE,KAD+B;AAE7C8I,IAAAA,GAAG,EAAE,aAACyC,KAAD,EAAW;AACZ,UAAI+G,YAAJ,EAAkB;AACdA,QAAAA,YAAY,GAAG,KAAf;;AACA,YAAI;AACA,cAAI,OAAO/G,KAAP,KAAiB,QAArB,EAA+B;AAC3BkG,YAAAA,OAAO,CAAClG,KAAD,CAAP;AACH;AACJ,SAJD,CAIE,OAAOiH,GAAP,EAAY,EANA;;AAOjB;;AACDH,MAAAA,GAAG,GAAG9G,KAAN;AACH,KAZ4C;AAa7C1C,IAAAA,GAAG,EAAE;AAAA,aAAMwJ,GAAN;AAAA;AAbwC,GAAjB,CAAhC;;AAgBA,MAAIE,MAAJ,EAAY;AACRtP,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH,GAFD,MAEO;AACHb,IAAAA,MAAM,CAACiB,OAAP,CAAed,KAAf,CAAqB,0CAArB;AACH;AACJ;AAED8O,YAAY,CAACvI,KAAb,GAAqB,CACjB,eADiB,EAEjB,kBAFiB,EAGjB,sBAHiB,CAArB;AAMAuI,YAAY,CAAChM,UAAb,GAA0B,CAAC7F,iBAAD,EAAoBwD,GAApB,CAA1B;;ACtFA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAASwP,mBAAT,CAA6BvP,MAA7B,EAAqCvD,QAArC,EAA+C;AAClD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMwC,GAAG,GAAG/C,QAAQ,EAApB;;AACA,MAAMkJ,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBrF,IAAAA,GAAG,CAACC,MAAD,CAAH,CADgB;;AAGhB;AACH,GAJD;;AAKA,MAAMsF,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9I,QAAR,EAAqB;AAC5C,QAAM+I,SAAS,GAAGxI,kBAAkB,CAACuI,KAAD,EAAQ9I,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7BuI,SAF6B,CAEtCvI,IAFsC;AAAA,QAGpCK,IAHoC,GAGpBkI,SAHoB,CAGpClI,IAHoC;AAAA,QAG9BJ,KAH8B,GAGpBsI,SAHoB,CAG9BtI,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAMuI,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClBzI,QAAAA,IAAI,GAAGyI,CAAP;;AACA,YAAIA,CAAC,YAAY9I,MAAjB,EAAyB;AACrB0I,UAAAA,kBAAkB,CAACI,CAAD,EAAIxI,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsBwI,KAAtB,EAA6BjI,IAA7B,EAAmC;AAC/BqI,QAAAA,GAAG,EAAE;AAAA,iBAAM1I,IAAN;AAAA,SAD0B;AAE/B2I,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDlJ,IAAAA,iBAAiB,CAACU,IAAD,EAAOK,IAAP,EAAa;AAC1BqI,MAAAA,GAAG,EAAEP,KADqB;AAE1BQ,MAAAA,GAAG,EAAE,eAAM;AAFe,KAAb,CAAjB;AAIH,GAtBD;;AAwBAN,EAAAA,kBAAkB,CAACnG,MAAD,EAAS1C,QAAT,CAAlB;AAEA0C,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAEDkP,mBAAmB,CAAC1J,KAApB,GAA4B,CACxB,wBADwB,CAA5B;AAGA0J,mBAAmB,CAACnN,UAApB,GAAiC,CAC7BlG,QAD6B,EAE7BK,iBAF6B,EAG7BS,kBAH6B,EAI7BgC,oBAJ6B,EAK7Be,GAL6B,CAAjC;;AC3DA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAASyP,oBAAT,CAA8BxP,MAA9B,EAAsCvD,QAAtC,EAAgD;AACnD,MAAI,CAACA,QAAL,EAAe;AACX;AACH;;AACD,MAAMwC,GAAG,GAAG/C,QAAQ,EAApB;;AACA,MAAMkJ,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChBrF,IAAAA,GAAG,CAACC,MAAD,CAAH,CADgB;;AAGhB;AACH,GAJD;;AAKA,MAAMsF,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9I,QAAR,EAAqB;AAC5C,QAAM+I,SAAS,GAAGxI,kBAAkB,CAACuI,KAAD,EAAQ9I,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7BuI,SAF6B,CAEtCvI,IAFsC;AAAA,QAGpCK,IAHoC,GAGpBkI,SAHoB,CAGpClI,IAHoC;AAAA,QAG9BJ,KAH8B,GAGpBsI,SAHoB,CAG9BtI,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAMuI,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClBzI,QAAAA,IAAI,GAAGyI,CAAP;;AACA,YAAIA,CAAC,YAAY9I,MAAjB,EAAyB;AACrB0I,UAAAA,kBAAkB,CAACI,CAAD,EAAIxI,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsBwI,KAAtB,EAA6BjI,IAA7B,EAAmC;AAC/BqI,QAAAA,GAAG,EAAE;AAAA,iBAAM1I,IAAN;AAAA,SAD0B;AAE/B2I,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAEDlJ,IAAAA,iBAAiB,CAACU,IAAD,EAAOK,IAAP,EAAa;AAAEsI,MAAAA,GAAG,EAAER;AAAP,KAAb,CAAjB;AACH,GAnBD;;AAqBAE,EAAAA,kBAAkB,CAACnG,MAAD,EAAS1C,QAAT,CAAlB;AAEA0C,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CAA0BoB,IAA1B,EAAjB;AACH;AAEDmP,oBAAoB,CAAC3J,KAArB,GAA6B,CACzB,yBADyB,CAA7B;AAIA2J,oBAAoB,CAACpN,UAArB,GAAkC,CAC9BlG,QAD8B,EAE9BK,iBAF8B,EAG9BS,kBAH8B,EAI9BgC,oBAJ8B,EAK9Be,GAL8B,CAAlC;;AC7DA;AACA,AAMA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAAS0P,wBAAT,CAAkCzP,MAAlC,EAA0CvD,QAA1C,EAAmE;AAAA,MAAf2B,MAAe,uEAAN,IAAM;AACtE,MAAMqJ,KAAK,GAAGrJ,MAAM,GAAGP,QAAQ,CAACO,MAAD,CAAX,GAAsB,IAA1C;AACA,MAAMa,GAAG,GAAG/C,QAAQ,EAApB;;AAEA,MAAMwL,gBAAgB,GAAG,SAAnBA,gBAAmB,GAAM;AAC3B,QAAI,CAAC/F,QAAQ,CAACgG,aAAd,EAA6B;AAAE;AAC3B,UAAMC,OAAO,GAAGjG,QAAQ,CAACkG,oBAAT,CAA8B,QAA9B,CAAhB;AACA,aAAOD,OAAO,CAACA,OAAO,CAAC9J,MAAR,GAAiB,CAAlB,CAAd;AACH;;AACD,WAAO6D,QAAQ,CAACgG,aAAhB,CAL2B;AAM9B,GAND;;AAQA,MAAMG,SAAS,GAAGJ,gBAAgB,EAAlC;;AAEA,MAAMtC,KAAK,GAAG,SAARA,KAAQ,GAAM;AAChB,QAAM2C,QAAQ,GAAGL,gBAAgB,EAAjC;;AACA,QAAIK,QAAQ,YAAYC,iBAApB,IACGD,QAAQ,CAACE,WAAT,CAAqBnK,MAArB,GAA8B,CADjC,IAEGiK,QAAQ,KAAKD,SAFhB,KAGI,CAACL,KAAD,IAAUA,KAAK,CAACZ,IAAN,CAAWkB,QAAQ,CAACE,WAApB,CAHd,CAAJ,EAGqD;AACjDlI,MAAAA,GAAG,CAACC,MAAD,CAAH,CADiD;;AAGjD;AACH;AACJ,GAVD;;AAYA,MAAMsF,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,KAAD,EAAQ9I,QAAR,EAAqB;AAC5C,QAAM+I,SAAS,GAAGxI,kBAAkB,CAACuI,KAAD,EAAQ9I,QAAR,CAApC;AAD4C,QAEtCQ,IAFsC,GAE7BuI,SAF6B,CAEtCvI,IAFsC;AAAA,QAGpCK,IAHoC,GAGpBkI,SAHoB,CAGpClI,IAHoC;AAAA,QAG9BJ,KAH8B,GAGpBsI,SAHoB,CAG9BtI,KAH8B;;AAI5C,QAAIA,KAAJ,EAAW;AACP,UAAMuI,MAAM,GAAG,SAATA,MAAS,CAACC,CAAD,EAAO;AAClBzI,QAAAA,IAAI,GAAGyI,CAAP;;AACA,YAAIA,CAAC,YAAY9I,MAAjB,EAAyB;AACrB0I,UAAAA,kBAAkB,CAACI,CAAD,EAAIxI,KAAJ,CAAlB;AACH;AACJ,OALD;;AAMAN,MAAAA,MAAM,CAACG,cAAP,CAAsBwI,KAAtB,EAA6BjI,IAA7B,EAAmC;AAC/BqI,QAAAA,GAAG,EAAE;AAAA,iBAAM1I,IAAN;AAAA,SAD0B;AAE/B2I,QAAAA,GAAG,EAAEH;AAF0B,OAAnC;AAIA;AACH;;AAED,QAAI2C,YAAY,GAAGnL,IAAI,CAACK,IAAD,CAAvB;AACAf,IAAAA,iBAAiB,CAACU,IAAD,EAAOK,IAAP,EAAa;AAC1BsI,MAAAA,GAAG,EAAE,aAACyC,KAAD,EAAW;AACZjD,QAAAA,KAAK;AACLgD,QAAAA,YAAY,GAAGC,KAAf;AACH,OAJyB;AAK1B1C,MAAAA,GAAG,EAAE,eAAM;AACPP,QAAAA,KAAK;AACL,eAAOgD,YAAP;AACH;AARyB,KAAb,CAAjB;AAUH,GA7BD;;AA+BA9C,EAAAA,kBAAkB,CAACnG,MAAD,EAAS1C,QAAT,CAAlB;AAEA0C,EAAAA,MAAM,CAACC,OAAP,GAAiBJ,oBAAoB,CAACC,GAAD,CAApB,CACZoB,IADY,EAAjB;AAEH;AAEDoP,wBAAwB,CAAC5J,KAAzB,GAAiC,CAC7B,6BAD6B,CAAjC;AAIA4J,wBAAwB,CAACrN,UAAzB,GAAsC,CAClClG,QADkC,EAElCK,iBAFkC,EAGlCS,kBAHkC,EAIlCa,QAJkC,EAKlCmB,oBALkC,EAMlCe,GANkC,CAAtC;;ACxFA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiDA;;AACA,AAAO,SAAS2P,UAAT,CAAoB1P,MAApB,EAA4B2P,KAA5B,EAAmCC,QAAnC,EAA6C;AAChD,MAAI,CAACD,KAAL,EAAY;AAAE;AAAS;;AACvBA,EAAAA,KAAK,GAAGA,KAAK,CAACpG,KAAN,CAAY,UAAZ,CAAR;;AACA,MAAI,CAACqG,QAAL,EAAe;AACXA,IAAAA,QAAQ,cAAOD,KAAK,CAAC7F,IAAN,CAAW,KAAX,CAAP,MAAR;AACH;;AAED,MAAM+F,MAAM,GAAG,SAATA,MAAS,GAAM;AACjB,QAAMC,KAAK,GAAG,GAAGvS,KAAH,CAASmN,IAAT,CAAc/I,QAAQ,CAACoO,gBAAT,CAA0BH,QAA1B,CAAd,CAAd;AACA,QAAII,OAAO,GAAG,KAAd;AACAF,IAAAA,KAAK,CAACtG,OAAN,CAAc,UAACyG,IAAD,EAAU;AACpBN,MAAAA,KAAK,CAACnG,OAAN,CAAc,UAAC0G,IAAD,EAAU;AACpBD,QAAAA,IAAI,CAACE,eAAL,CAAqBD,IAArB;AACAF,QAAAA,OAAO,GAAG,IAAV;AACH,OAHD;AAIH,KALD;;AAMA,QAAIA,OAAJ,EAAa;AACTjQ,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AACJ,GAZD;;AAcA6P,EAAAA,MAAM,GArB0C;;AAwBhDnP,EAAAA,iBAAiB,CAACmP,MAAD,EAAS,IAAT,CAAjB;AACH;AAEDH,UAAU,CAAC7J,KAAX,GAAmB,CACf,aADe,EAEf,gBAFe,EAGf,oBAHe,EAIf,OAJe,EAKf,WALe,CAAnB;AAQA6J,UAAU,CAACtN,UAAX,GAAwB,CAACrC,GAAD,EAAMW,iBAAN,CAAxB;;ACtFA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsDA;;AAEA,AAAO,SAAS0P,WAAT,CAAqBpQ,MAArB,EAA6BqQ,UAA7B,EAAyCT,QAAzC,EAAmD;AACtD,MAAI,CAACS,UAAL,EAAiB;AAAE;AAAS;;AAC5BA,EAAAA,UAAU,GAAGA,UAAU,CAAC9G,KAAX,CAAiB,UAAjB,CAAb;AACA,MAAI+G,SAAS,GAAG,EAAhB;;AACA,MAAI,CAACV,QAAL,EAAe;AACXU,IAAAA,SAAS,GAAGD,UAAU,CAACpN,GAAX,CAAe,UAACsN,SAAD,EAAe;AACtC,wBAAWA,SAAX;AACH,KAFW,CAAZ;AAGH;;AAED,MAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,GAAM;AAC7B,QAAMV,KAAK,GAAG,IAAIW,GAAJ,EAAd;;AACA,QAAIb,QAAJ,EAAc;AACV,UAAMc,YAAY,GAAG,GAAGnT,KAAH,CAASmN,IAAT,CAAc/I,QAAQ,CAACoO,gBAAT,CAA0BH,QAA1B,CAAd,CAArB;AACAc,MAAAA,YAAY,CAAClH,OAAb,CAAqB,UAACmH,CAAD;AAAA,eAAOb,KAAK,CAACc,GAAN,CAAUD,CAAV,CAAP;AAAA,OAArB;AACH,KAHD,MAGO,IAAIL,SAAS,CAACxS,MAAV,GAAmB,CAAvB,EAA0B;AAC7BwS,MAAAA,SAAS,CAAC9G,OAAV,CAAkB,UAACzF,CAAD,EAAO;AACrB,YAAM8M,QAAQ,GAAGlP,QAAQ,CAACoO,gBAAT,CAA0BhM,CAA1B,CAAjB;;AACA,aAAK,IAAIL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGmN,QAAQ,CAAC/S,MAA7B,EAAqC4F,CAAC,IAAI,CAA1C,EAA6C;AACzC,cAAMoN,OAAO,GAAGD,QAAQ,CAACnN,CAAD,CAAxB;AACAoM,UAAAA,KAAK,CAACc,GAAN,CAAUE,OAAV;AACH;AACJ,OAND;AAOH;;AAED,QAAId,OAAO,GAAG,KAAd;AAEAF,IAAAA,KAAK,CAACtG,OAAN,CAAc,UAACyG,IAAD,EAAU;AACpBI,MAAAA,UAAU,CAAC7G,OAAX,CAAmB,UAAC+G,SAAD,EAAe;AAC9B,YAAIN,IAAI,CAACc,SAAL,CAAeC,QAAf,CAAwBT,SAAxB,CAAJ,EAAwC;AACpCN,UAAAA,IAAI,CAACc,SAAL,CAAeE,MAAf,CAAsBV,SAAtB;AACAP,UAAAA,OAAO,GAAG,IAAV;AACH;AACJ,OALD;AAMH,KAPD;;AASA,QAAIA,OAAJ,EAAa;AACTjQ,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AACJ,GA7BD;;AA+BAwQ,EAAAA,kBAAkB;AAElB,MAAMU,eAAe,GAAG,CAAC,OAAD,CAAxB,CA3CsD;AA6CtD;;AACAxQ,EAAAA,iBAAiB,CAAC8P,kBAAD,EAAqB,IAArB,EAA2BU,eAA3B,CAAjB;AACH;AAEDd,WAAW,CAACvK,KAAZ,GAAoB,CAChB,cADgB,CAApB;AAIAuK,WAAW,CAAChO,UAAZ,GAAyB,CAACrC,GAAD,EAAMW,iBAAN,CAAzB;;AC9GA;;;;;;;;;;;;;;;AAcA,AAAO,SAASyQ,kBAAT,CAA4BnR,MAA5B,EAAoC;AACvC2B,EAAAA,QAAQ,CAACoI,gBAAT,CAA0B,OAA1B,EAAmC,UAACqH,EAAD,EAAQ;AAAA,QACjCC,MADiC,GACtBD,EADsB,CACjCC,MADiC;;AAEvC,WAAOA,MAAM,KAAK,IAAlB,EAAwB;AACpB,UAAIA,MAAM,CAACC,SAAP,KAAqB,GAArB,IAA4BD,MAAM,CAACE,YAAP,CAAoB,QAApB,CAAhC,EAA+D;AAC3DH,QAAAA,EAAE,CAACI,eAAH;AACAJ,QAAAA,EAAE,CAACK,cAAH;AACA1R,QAAAA,GAAG,CAACC,MAAD,CAAH;AACA;AACH;;AACDqR,MAAAA,MAAM,GAAGA,MAAM,CAAC5F,UAAhB;AACH;AACJ,GAXD;AAYH;AAED0F,kBAAkB,CAACtL,KAAnB,GAA2B,CACvB,sBADuB,EAEvB,yBAFuB,EAGvB,6BAHuB,CAA3B;AAMAsL,kBAAkB,CAAC/O,UAAnB,GAAgC,CAC5BrC,GAD4B,CAAhC;;AClCA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AACA,AAAO,SAAS2R,iBAAT,CAA2B1R,MAA3B,EAAmCgG,KAAnC,EAA0CkB,QAA1C,EAAoDyK,KAApD,EAA2D;AAC9D,MAAM5K,cAAc,GAAG5H,MAAM,CAAC6H,WAA9B;AACA,MAAMd,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgBjH,MAAM,CAACiH,KAA3C,CAF8D;;AAG9D,MAAMwL,cAAc,GAAGzL,MAAM,CAAC0L,QAAP,IAAmB1S,MAAM,CAAC0S,QAAjD,CAH8D;;AAK9D3K,EAAAA,QAAQ,GAAGT,QAAQ,CAACS,QAAD,EAAW,EAAX,CAAnB;AACAA,EAAAA,QAAQ,GAAGhB,WAAW,CAACgB,QAAD,CAAX,GAAwB,IAAxB,GAA+BA,QAA1C;AAEAyK,EAAAA,KAAK,GAAGlL,QAAQ,CAACkL,KAAD,EAAQ,EAAR,CAAhB;AACAA,EAAAA,KAAK,GAAGzL,WAAW,CAACgB,QAAD,CAAX,IAAyB,CAAC0K,cAAc,CAACD,KAAD,CAAxC,GAAkD,IAAlD,GAAyDA,KAAjE;AAEA3L,EAAAA,KAAK,GAAGA,KAAK,GAAGnI,QAAQ,CAACmI,KAAD,CAAX,GAAqBnI,QAAQ,CAAC,MAAD,CAA1C;;AAEA,MAAI8T,KAAK,GAAG,IAAZ,EAAkB;AACdA,IAAAA,KAAK,GAAG,IAAR;AACH;;AACD,MAAIA,KAAK,GAAG,EAAZ,EAAgB;AACZA,IAAAA,KAAK,GAAG,EAAR;AACH;;AAED,MAAM1K,eAAe,GAAG,SAAlBA,eAAkB,CAAC6K,EAAD,EAAKC,CAAL,EAAoB;AACxC,QAAIA,CAAC,KAAK7K,QAAN,IAAkBlB,KAAK,CAACa,IAAN,CAAWiL,EAAE,CAACzV,QAAH,EAAX,CAAtB,EAAiD;AAC7C0V,MAAAA,CAAC,IAAIJ,KAAL;AACA5R,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;;AAJuC,sCAATR,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAKxC,WAAOuH,cAAc,CAACtH,KAAf,CAAqBN,MAArB,GAA8B2S,EAA9B,EAAkCC,CAAlC,SAAwCvS,IAAxC,EAAP;AACH,GAND;;AAOAL,EAAAA,MAAM,CAAC6H,WAAP,GAAqBC,eAArB;AACH;AAEDyK,iBAAiB,CAAC7L,KAAlB,GAA0B,CACtB,oBADsB,EAEtB,6BAFsB,EAGtB,iCAHsB,EAItB,aAJsB,EAKtB,iBALsB,CAA1B;AAQA6L,iBAAiB,CAACtP,UAAlB,GAA+B,CAACvE,QAAD,EAAWkC,GAAX,CAA/B;;AC/EA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA;;AACA,AAAO,SAASiS,gBAAT,CAA0BhS,MAA1B,EAAkCgG,KAAlC,EAAyCW,OAAzC,EAAkDgL,KAAlD,EAAyD;AAC5D,MAAM1L,aAAa,GAAG9G,MAAM,CAACiC,UAA7B;AACA,MAAM8E,WAAW,GAAGC,MAAM,CAACC,KAAP,IAAgBjH,MAAM,CAACiH,KAA3C,CAF4D;;AAG5D,MAAMwL,cAAc,GAAGzL,MAAM,CAAC0L,QAAP,IAAmB1S,MAAM,CAAC0S,QAAjD,CAH4D;;AAK5DlL,EAAAA,OAAO,GAAGF,QAAQ,CAACE,OAAD,EAAU,EAAV,CAAlB;AACAA,EAAAA,OAAO,GAAGT,WAAW,CAACS,OAAD,CAAX,GAAuB,IAAvB,GAA8BA,OAAxC;AAEAgL,EAAAA,KAAK,GAAGlL,QAAQ,CAACkL,KAAD,EAAQ,EAAR,CAAhB;AACAA,EAAAA,KAAK,GAAGzL,WAAW,CAACS,OAAD,CAAX,IAAwB,CAACiL,cAAc,CAACD,KAAD,CAAvC,GAAiD,IAAjD,GAAwDA,KAAhE;AAEA3L,EAAAA,KAAK,GAAGA,KAAK,GAAGnI,QAAQ,CAACmI,KAAD,CAAX,GAAqBnI,QAAQ,CAAC,MAAD,CAA1C;;AAEA,MAAI8T,KAAK,GAAG,IAAZ,EAAkB;AACdA,IAAAA,KAAK,GAAG,IAAR;AACH;;AACD,MAAIA,KAAK,GAAG,EAAZ,EAAgB;AACZA,IAAAA,KAAK,GAAG,EAAR;AACH;;AAED,MAAMjL,cAAc,GAAG,SAAjBA,cAAiB,CAACoL,EAAD,EAAKC,CAAL,EAAoB;AACvC,QAAIA,CAAC,KAAKpL,OAAN,IAAiBX,KAAK,CAACa,IAAN,CAAWiL,EAAE,CAACzV,QAAH,EAAX,CAArB,EAAgD;AAC5C0V,MAAAA,CAAC,IAAIJ,KAAL;AACA5R,MAAAA,GAAG,CAACC,MAAD,CAAH;AACH;;AAJsC,sCAATR,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAKvC,WAAOyG,aAAa,CAACxG,KAAd,CAAoBN,MAApB,GAA6B2S,EAA7B,EAAiCC,CAAjC,SAAuCvS,IAAvC,EAAP;AACH,GAND;;AAOAL,EAAAA,MAAM,CAACiC,UAAP,GAAoBsF,cAApB;AACH;AAEDsL,gBAAgB,CAACnM,KAAjB,GAAyB,CACrB,mBADqB,EAErB,4BAFqB,EAGrB,gCAHqB,EAIrB,aAJqB,EAKrB,iBALqB,CAAzB;AAQAmM,gBAAgB,CAAC5P,UAAjB,GAA8B,CAACvE,QAAD,EAAWkC,GAAX,CAA9B;;AChFA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AAyBA;;AACA,AAAO,SAASkS,SAAT,CAAmBjS,MAAnB,EAA2BkS,KAA3B,EAAkC;AAAA,iBACrB9R,OADqB;AAAA,MAC7B+R,GAD6B,YAC7BA,GAD6B;AAErCD,EAAAA,KAAK,GAAGzL,QAAQ,CAACyL,KAAD,EAAQ,EAAR,CAAhB;;AAEA,WAASE,UAAT,CAAoB5V,MAApB,EAA4B;AACxB;AACA,QAAIqS,IAAJ;;AACA,SAAK,IAAInL,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGwO,KAApB,EAA2BxO,CAAC,IAAI,CAAhC,EAAmC;AAC/B;AACAmL,MAAAA,IAAI,aAAMrS,MAAN,CAAJ;AACH;;AACD,QAAI,OAAO2V,GAAP,KAAe,UAAnB,EAA+B;AAC3BA,MAAAA,GAAG,CAACzH,IAAJ,CAAS,IAAT,EAAelO,MAAf;AACH;;AACDuD,IAAAA,GAAG,CAACC,MAAD,EAAS6O,IAAT,CAAH;AACH,GAfoC;;;AAiBrCzO,EAAAA,OAAO,CAAC+R,GAAR,GAAcC,UAAd;AACH;AAEDH,SAAS,CAACpM,KAAV,GAAkB,CACd,YADc,EAEd,gBAFc,CAAlB;AAKAoM,SAAS,CAAC7P,UAAV,GAAuB,CAACrC,GAAD,CAAvB;;ACpDA;;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgDA;;AACA,AAAO,SAASsS,SAAT,CAAmBrS,MAAnB,EAA2BsS,aAA3B,EAA0CC,oBAA1C,EAAgE;AACnE;AACA,MAAMpS,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,IAAZ,CAAiBD,OAAjB,CAAZ;AACA,MAAMoS,UAAU,GAAGF,aAAa,KAAK7U,SAAlB,IAA+B6U,aAAa,KAAK,EAAjD,GACbA,aAAa,CAAC/I,KAAd,CAAoB,IAApB,CADa,GAEb,EAFN;AAGA,MAAMkJ,WAAW,GAAGF,oBAAoB,KAAK9U,SAAzB,IAAsC8U,oBAAoB,KAAK,EAA/D,GACdA,oBAAoB,CAAChJ,KAArB,CAA2B,IAA3B,CADc,GAEd,EAFN;;AAIA,WAASmJ,eAAT,CAAyBC,IAAzB,EAA+B;AAC3B,QAAI,CAACA,IAAL,EAAW;AACP,aAAO,KAAP;AACH;;AAED,SAAK,IAAIjP,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG+O,WAAW,CAAC3U,MAAhC,EAAwC4F,CAAC,IAAI,CAA7C,EAAgD;AAC5C,UAAMkP,UAAU,GAAGH,WAAW,CAAC/O,CAAD,CAA9B;AACA,UAAMmP,OAAO,GAAG7V,kBAAkB,CAAC2V,IAAD,EAAOC,UAAP,EAAmB,KAAnB,CAAlC;AACA,UAAME,cAAc,GAAGF,UAAU,CAACrJ,KAAX,CAAiB,GAAjB,EAAsBwJ,GAAtB,EAAvB;;AACA,UAAIF,OAAO,IAAIA,OAAO,CAAC5V,IAAR,CAAa6V,cAAb,MAAiCrV,SAAhD,EAA2D;AACvD,eAAO,KAAP;AACH;AACJ;;AACD,WAAO,IAAP;AACH;;AAED,MAAMuV,WAAW,GAAGlQ,IAAI,CAACmQ,KAAzB;;AAEA,MAAMC,YAAY,GAAG,SAAfA,YAAe,GAAa;AAAA,sCAAT1T,IAAS;AAATA,MAAAA,IAAS;AAAA;;AAC9B,QAAM2T,CAAC,GAAGH,WAAW,CAACvT,KAAZ,CAAkBN,MAAlB,EAA0BK,IAA1B,CAAV;;AACA,QAAIgT,UAAU,CAAC1U,MAAX,KAAsB,CAA1B,EAA6B;AACzBqC,MAAAA,GAAG,CAAChB,MAAM,CAACyK,QAAP,CAAgBC,QAAjB,EAA2BsJ,CAA3B,CAAH;AACA,aAAOA,CAAP;AACH;;AACD,QAAIT,eAAe,CAACS,CAAD,CAAf,KAAuB,KAA3B,EAAkC;AAC9B,aAAOA,CAAP;AACH;;AACDX,IAAAA,UAAU,CAAChJ,OAAX,CAAmB,UAACL,IAAD,EAAU;AACzB,UAAMiK,QAAQ,GAAGpW,kBAAkB,CAACmW,CAAD,EAAIhK,IAAJ,EAAU,KAAV,CAAnC;;AACA,UAAIiK,QAAQ,KAAK3V,SAAb,IAA0B2V,QAAQ,CAACnW,IAAvC,EAA6C;AACzC,eAAOmW,QAAQ,CAACnW,IAAT,CAAcmW,QAAQ,CAAC9V,IAAvB,CAAP;AACH;AACJ,KALD;AAMAyC,IAAAA,GAAG,CAACC,MAAD,CAAH;AACA,WAAOmT,CAAP;AACH,GAjBD;;AAmBArQ,EAAAA,IAAI,CAACmQ,KAAL,GAAaC,YAAb;AACH;AAGDb,SAAS,CAACxM,KAAV,GAAkB,CACd,YADc,EAEd,eAFc,EAGd,mBAHc,CAAlB;AAMAwM,SAAS,CAACjQ,UAAV,GAAuB,CAACrC,GAAD,EAAM/C,kBAAN,CAAvB;;AC7GA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACYA,IAAMqW,cAAc,GAAG,GAAvB;AAEA;;;;;;AAKA,IAAMC,SAAS,GAAG,SAAZA,SAAY,CAAC7O,IAAD;AAAA,SAAUnG,UAAU,CAACmG,IAAD,EAAO4O,cAAP,CAApB;AAAA,CAAlB;AAGA;;;;;;AAOA;;;;;AAGA,IAAME,sBAAsB,GAAG,+BAA/B;AACA,IAAMC,oBAAoB,GAAG,OAA7B;AACA,IAAMC,oBAAoB,GAAG,iBAA7B;AACA,IAAMC,8BAA8B,GAAG,QAAvC;AACA,IAAMC,8BAA8B,GAAG,kBAAvC;AAEA;;;;AAGA,IAAMC,kBAAkB,GAAG,KAA3B;AACA,IAAMC,4BAA4B,GAAG,MAArC;AAEA;;;;AAGA,IAAMC,gBAAgB,GAAG,yBAAzB;AAGA;;;;;AAIA,IAAMC,kBAAkB,GAAG,SAArBA,kBAAqB,CAACtP,IAAD,EAAU;AACjC,SACI,CAAC6O,SAAS,CAAC7O,IAAD,CAAV,IACGA,IAAI,CAACpH,OAAL,CAAasG,kBAAb,IAAmC,CAAC,CAF3C;AAIH,CALD;AAOA;;;;;;AAIA,IAAMqQ,kBAAkB,GAAG,SAArBA,kBAAqB,CAACvP,IAAD,EAAU;AACjC,SAAO,CACHA,IAAI,CAACpH,OAAL,CAAamW,oBAAb,IAAqC,CAAC,CAAtC,IACG/O,IAAI,CAACpH,OAAL,CAAaoW,oBAAb,IAAqC,CAAC,CADzC,IAEGhP,IAAI,CAACpH,OAAL,CAAaqW,8BAAb,IAA+C,CAAC,CAFnD,IAGGjP,IAAI,CAACpH,OAAL,CAAasW,8BAAb,IAA+C,CAAC,CAJhD,KAMAJ,sBAAsB,CAAC1M,IAAvB,CAA4BpC,IAA5B,CANA,IAOA,CAAC6O,SAAS,CAAC7O,IAAD,CAPjB;AAQH,CATD;AAWA;;;;;;AAIA,IAAMwP,gBAAgB,GAAG,SAAnBA,gBAAmB,CAACxP,IAAD,EAAU;AAC/B,SAAO,CACHA,IAAI,CAACpH,OAAL,CAAauW,kBAAb,IAAmC,CAAC,CAApC,IACGnP,IAAI,CAACpH,OAAL,CAAawW,4BAAb,IAA6C,CAAC,CAF9C,KAIJpP,IAAI,CAACrG,MAAL,CAAY0V,gBAAZ,MAAkC,CAAC,CAJ/B,IAKJ,CAACR,SAAS,CAAC7O,IAAD,CALb;AAMH,CAPD;AASA;;;;;;AAIA,IAAMyP,kBAAkB,GAAG,SAArBA,kBAAqB,CAACzR,IAAD,EAAU;AACjC,MAAM0R,UAAU,GAAGvX,MAAM,CAAC6G,IAAP,CAAY2Q,aAAZ,EAA4BnR,GAA5B,CAAgC,UAACoR,GAAD;AAAA,WAASD,aAAc,CAACC,GAAD,CAAvB;AAAA,GAAhC,CAAnB;AACA,SAAOF,UAAU,CACZG,IADE,CACG,UAACvQ,CAAD;AAAA,WAAOA,CAAC,CAAC8B,KAAF,IAAW9B,CAAC,CAAC8B,KAAF,CAAQxI,OAAR,CAAgBoF,IAAhB,IAAwB,CAAC,CAA3C;AAAA,GADH,CAAP;AAEH,CAJD;AAMA;;;;;;AAIA,IAAM8R,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC9R,IAAD,EAAU;AACnC,MAAI,CAACA,IAAL,EAAW;AACP,WAAO,KAAP;AACH;;AACD,MAAMN,SAAS,GAAG+R,kBAAkB,CAACzR,IAAD,CAApC;;AACA,MAAI,CAACN,SAAL,EAAgB;AACZ,WAAO,KAAP;AACH;;AACD,SAAO,IAAP;AACH,CATD;AAWA;;;;;;AAMA;;;;;AAGA,IAAMqS,uBAAuB,GAAG,WAAhC;AACA,IAAMC,mBAAmB,GAAG,uBAA5B;AAEA,IAAMC,kBAAkB,GAAG,CACvB,OADuB,EAEvB,aAFuB,EAGvB,YAHuB,EAIvB,QAJuB,EAKvB,gBALuB,EAMvB,OANuB,CAA3B;AASA,IAAMC,iBAAiB,GAAGC,SAAS,CAACC,MAAV,CAAiB,UAACtJ,EAAD;AAAA,SAAQA,EAAE,CAACuJ,GAAX;AAAA,CAAjB,CAA1B;AAEA;;;;;;;AAMA,IAAMC,cAAc,GAAG,SAAjBA,cAAiB,CAACC,KAAD,EAAW;AAC9B,MAAMC,MAAM,GAAGD,KAAK,CACf3S,MADU,CACH,UAAC6S,GAAD,EAAM3J,EAAN,EAAa;AAAA,4BACIA,EADJ;AAAA,QACV8I,GADU;AAAA,QACLhM,KADK;;AAEjB6M,IAAAA,GAAG,CAACb,GAAD,CAAH,GAAWhM,KAAX;AACA,WAAO6M,GAAP;AACH,GALU,EAKR,EALQ,CAAf;AAMA,SAAOD,MAAP;AACH,CARD;AAUA;;;;;;AAIA,IAAME,qBAAqB,GAAGJ,cAAc,CACxCJ,iBAAiB,CACZE,MADL,CACY,UAACtJ,EAAD;AAAA,SAAQA,EAAE,CAAC6J,GAAX;AAAA,CADZ,EAEKnS,GAFL,CAES,UAACsI,EAAD,EAAQ;AACT,SAAO,CAACA,EAAE,CAAC6J,GAAJ,EAAS7J,EAAE,CAACuJ,GAAZ,CAAP;AACH,CAJL,CADwC,CAA5C;AAQA;;;;;AAIA,IAAMO,qBAAqB,GAAGN,cAAc,CACxCJ,iBAAiB,CACZE,MADL,CACY,UAACtJ,EAAD;AAAA,SAAQA,EAAE,CAAC+J,GAAX;AAAA,CADZ,EAEKrS,GAFL,CAES,UAACsI,EAAD,EAAQ;AACT,SAAO,CAACA,EAAE,CAAC+J,GAAJ,EAAS/J,EAAE,CAACuJ,GAAZ,CAAP;AACH,CAJL,CADwC,CAA5C;AAQA;;;;;AAIA,IAAMS,qBAAqB,GAAGR,cAAc,CACxCJ,iBAAiB,CACZE,MADL,CACY,UAACtJ,EAAD;AAAA,SAAQA,EAAE,CAAC6J,GAAX;AAAA,CADZ,EAEKnS,GAFL,CAES,UAACsI,EAAD,EAAQ;AACT,SAAO,CAACA,EAAE,CAACuJ,GAAJ,EAASvJ,EAAE,CAAC6J,GAAZ,CAAP;AACH,CAJL,CADwC,CAA5C;AASA,IAAMI,mBAAmB,GAAG;AACxBC,EAAAA,GAAG,EAAE;AACDC,IAAAA,MAAM,EAAElB,uBADP;AAEDmB,IAAAA,aAAa,EAAEJ;AAFd,GADmB;AAKxBK,EAAAA,GAAG,EAAE;AACDF,IAAAA,MAAM,EAAElB,uBADP;AAEDmB,IAAAA,aAAa,EAAER;AAFd,GALmB;AASxBU,EAAAA,GAAG,EAAE;AACDH,IAAAA,MAAM,EAAEjB,mBADP;AAEDkB,IAAAA,aAAa,EAAEN;AAFd;AATmB,CAA5B;AAeA;;;;;;AAKA,IAAMS,cAAc,GAAG,SAAjBA,cAAiB,CAACrR,IAAD;AAAA,SAAUjG,cAAc,CAACiG,IAAD,EAAO,GAAP,CAAd,CAA0B8E,KAA1B,CAAgC,GAAhC,CAAV;AAAA,CAAvB;AAEA;;;;;;;;AAMA,IAAMwM,eAAe,GAAG,SAAlBA,eAAkB,CAACtR,IAAD,EAAOiR,MAAP,EAAkB;AACtC,MAAMM,aAAa,GAAGF,cAAc,CAACrR,IAAD,CAApC;AACA,MAAMwR,gBAAgB,GAAGD,aAAa,CACjC1B,IADoB,CACf,UAAC/I,EAAD;AAAA,WAAQA,EAAE,CAAClO,OAAH,CAAWqY,MAAX,IAAqB,CAAC,CAA9B;AAAA,GADe,CAAzB;AAEA,SAAOlX,cAAc,CAACyX,gBAAD,EAAmBP,MAAnB,CAArB;AACH,CALD;AAQA;;;;;;;AAKA,IAAMQ,iBAAiB,GAAG,SAApBA,iBAAoB,CAACzR,IAAD,EAAU;AAChC,SACI,CAAC6O,SAAS,CAAC7O,IAAD,CAAV,IACGA,IAAI,CAACpH,OAAL,CAAamY,mBAAmB,CAACC,GAApB,CAAwBC,MAArC,IAA+C,CAAC,CAFvD;AAIH,CALD;AAOA;;;;;;;AAKA,IAAMS,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAC1R,IAAD,EAAO2R,IAAP,EAAgB;AAAA,8BACPZ,mBAAmB,CAACY,IAAD,CADZ;AAAA,MACjCV,MADiC,yBACjCA,MADiC;AAAA,MACzBC,aADyB,yBACzBA,aADyB;;AAGzC,MAAK,CAACrC,SAAS,CAAC7O,IAAD,CAAX,IACIA,IAAI,CAACpH,OAAL,CAAaqY,MAAb,IAAuB,CAAC,CADhC,EACoC;AAChC,QAAMW,YAAY,GAAGN,eAAe,CAACtR,IAAD,EAAOiR,MAAP,CAApC;AAEA,WAAOW,YAAY,KAAKzZ,MAAM,CACzB6G,IADmB,CACdkS,aADc,EAEnBrB,IAFmB,CAEd,UAAC/I,EAAD;AAAA,aAAQA,EAAE,KAAK8K,YAAf;AAAA,KAFc,CAAxB;AAGH;;AACD,SAAO,KAAP;AACH,CAZD;AAcA;;;;;;;AAKA,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAC7R,IAAD,EAAU;AACrC,SAAO0R,oBAAoB,CAAC1R,IAAD,EAAO,KAAP,CAA3B;AACH,CAFD;AAIA;;;;;;;AAKA,IAAM8R,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAC9R,IAAD,EAAU;AACrC,SAAO0R,oBAAoB,CAAC1R,IAAD,EAAO,KAAP,CAA3B;AACH,CAFD;AAIA;;;;;;;AAKA,IAAM+R,sBAAsB,GAAG,SAAzBA,sBAAyB,CAAC/R,IAAD,EAAU;AACrC,SAAO0R,oBAAoB,CAAC1R,IAAD,EAAO,KAAP,CAA3B;AACH,CAFD;AAIA;;;;;;;AAKA,IAAMgS,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAChS,IAAD,EAAU;AAClC,SAAQ6R,sBAAsB,CAAC7R,IAAD,CAAtB,IACD8R,sBAAsB,CAAC9R,IAAD,CADrB,IAED+R,sBAAsB,CAAC/R,IAAD,CAF7B;AAGH,CAJD;AAMA;;;;;;;;;;;;;;;;;;AAgBA,IAAMiS,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACjS,IAAD,EAAU;AAClC,MAAI0R,oBAAoB,CAAC1R,IAAD,EAAO,KAAP,CAAxB,EAAuC;AACnC,QAAMuR,aAAa,GAAGF,cAAc,CAACrR,IAAD,CAApC;AACA,QAAMkS,UAAU,GAAGX,aAAa,CAC3B1B,IADc,CACT,UAAC/I,EAAD;AAAA,aAAQmJ,kBAAkB,CAACrX,OAAnB,CAA2BkO,EAA3B,IAAiC,CAAC,CAA1C;AAAA,KADS,CAAnB;AAGA,WAAOoL,UAAU,KAAKlZ,SAAtB;AACH;;AACD,SAAO,KAAP;AACH,CATD;;AAWA,IAAMmZ,SAAS,GAAG;AACdrD,EAAAA,sBAAsB,EAAtBA,sBADc;AAEdK,EAAAA,kBAAkB,EAAlBA,kBAFc;AAGdC,EAAAA,4BAA4B,EAA5BA,4BAHc;AAIdP,EAAAA,SAAS,EAATA,SAJc;AAKdS,EAAAA,kBAAkB,EAAlBA,kBALc;AAMdC,EAAAA,kBAAkB,EAAlBA,kBANc;AAOdC,EAAAA,gBAAgB,EAAhBA,gBAPc;AAQdC,EAAAA,kBAAkB,EAAlBA,kBARc;AASdK,EAAAA,oBAAoB,EAApBA,oBATc;AAUdiB,EAAAA,mBAAmB,EAAnBA,mBAVc;AAWdU,EAAAA,iBAAiB,EAAjBA,iBAXc;AAYdO,EAAAA,mBAAmB,EAAnBA,mBAZc;AAadH,EAAAA,sBAAsB,EAAtBA,sBAbc;AAcdC,EAAAA,sBAAsB,EAAtBA,sBAdc;AAedC,EAAAA,sBAAsB,EAAtBA,sBAfc;AAgBdV,EAAAA,cAAc,EAAdA,cAhBc;AAiBdC,EAAAA,eAAe,EAAfA,eAjBc;AAkBdW,EAAAA,mBAAmB,EAAnBA;AAlBc,CAAlB;;AClUA,SAAS,gBAAgB,CAAC,IAAI,EAAE;EAC9B,IAAI,MAAM,CAAC,QAAQ,IAAI,MAAM,CAAC,IAAI,CAAC,IAAI,MAAM,CAAC,SAAS,CAAC,QAAQ,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,oBAAoB,EAAE,OAAO,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;CAC/H;;AAED,mBAAc,GAAG,gBAAgB;;ACEjC,SAAS,QAAQ,CAAC,GAAG,EAAE;EACrB,OAAO,cAAc,CAAC,GAAG,CAAC,IAAI,eAAe,CAAC,GAAG,CAAC,IAAI,eAAe,EAAE,CAAC;CACzE;;AAED,WAAc,GAAG,QAAQ;;ACIzB;;;;AAGA,IAAMG,0BAA0B,GAAG,0BAAnC;;AAEA,IAAMC,0BAA0B,GAAG,mCAAnC;;AAEA,IAAMC,oCAAoC,GAAG,oCAA7C;AAEA;;;AAGA;;AACA,IAAMC,sBAAsB,GAAG,0BAA/B;;AAEA,IAAMC,gCAAgC,GAAG,2BAAzC;AAEA,IAAMC,qBAAqB,GAAG,MAA9B;;AAGA,IAAMC,YAAY,GAAG,KAArB;AAEA,IAAMC,YAAY,GAAG,gBAArB;AAGA;;;;;AAIA,IAAMC,YAAY,GAAG,SAAfA,YAAe,CAAC1Z,GAAD,EAAS;AAC1B,MAAM2Z,GAAG,GAAG,kBAAZ;AACA,SAAO3Z,GAAG,CAACqI,KAAJ,CAAUsR,GAAV,CAAP;AACH,CAHD;AAKA;;;;;;;AAKA,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAAC5Z,GAAD,EAAM2Q,IAAN,EAAe;AACvC,SAAO1R,MAAM,CAAC6G,IAAP,CAAY6K,IAAZ,EAAkBjM,MAAlB,CAAyB,UAAC6S,GAAD,EAAMb,GAAN,EAAc;AAC1C,QAAMiD,GAAG,GAAG,IAAIvZ,MAAJ,iBAAoBsW,GAApB,UAA8B,GAA9B,CAAZ;AACAa,IAAAA,GAAG,GAAGA,GAAG,CAACtX,OAAJ,CAAY0Z,GAAZ,EAAiBhJ,IAAI,CAAC+F,GAAD,CAArB,CAAN;AACA,WAAOa,GAAP;AACH,GAJM,EAIJvX,GAJI,CAAP;AAKH,CAND;AAQA;;;;;;;AAKA,AAAO,IAAM6Z,wBAAwB,GAAG,SAA3BA,wBAA2B,CAAC/S,IAAD,EAAU;AAC9C,MAAMgT,OAAO,GAAGxZ,eAAe,CAACwG,IAAD,EAAOmS,SAAS,CAACrD,sBAAjB,CAA/B;AACA,MAAMmE,IAAI,GAAGjT,IAAI,CAACuB,KAAL,CAAW4Q,SAAS,CAACrD,sBAArB,EAA6C,CAA7C,CAAb;AACA,MAAIoE,QAAJ;;AACA,MAAID,IAAI,CAACra,OAAL,CAAa,GAAb,IAAoB,CAAC,CAAzB,EAA4B;AACxBsa,IAAAA,QAAQ,GAAGZ,oCAAX;AACH,GAFD,MAEO;AACHY,IAAAA,QAAQ,GAAGb,0BAAX;AACH;;AACD,MAAMtX,IAAI,GAAGZ,iBAAiB,CAAC6F,IAAD,CAAjB,CACR8E,KADQ,CACF,KADE,EAERtG,GAFQ,CAEJ,UAAC2U,GAAD,EAAMzZ,KAAN,EAAgB;AACjB,QAAI0Z,SAAJ;;AACA,QAAI1Z,KAAK,KAAK,CAAd,EAAiB;AACb0Z,MAAAA,SAAS,GAAID,GAAG,CAACva,OAAJ,CAAY,KAAZ,IAAqB,CAAC,CAAvB,iBAAmCua,GAAnC,kBAAkDA,GAAlD,QAAZ;AACH,KAFD,MAEO;AACHC,MAAAA,SAAS,GAAGD,GAAZ;AACH,KANgB;;;AAQjB,QAAIA,GAAG,KAAK,GAAZ,EAAiB;AACbC,MAAAA,SAAS,GAAG,IAAZ;AACH;;AACD,WAAOA,SAAP;AACH,GAdQ,EAeR5U,GAfQ,CAeJ,UAAC2U,GAAD;AAAA,WAASjZ,kBAAkB,CAACiZ,GAAD,CAA3B;AAAA,GAfI,EAgBR9N,IAhBQ,CAgBH,IAhBG,CAAb;AAiBA,MAAMgO,OAAO,GAAGP,mBAAmB,CAC/BI,QAD+B,EAE/B;AAAEF,IAAAA,OAAO,EAAPA,OAAF;AAAWjY,IAAAA,IAAI,EAAJA;AAAX,GAF+B,CAAnC;AAIA,SAAO,CAACsY,OAAD,CAAP;AACH,CA/BM;AAiCP;;;;;;;AAMA,AAAO,IAAMC,sBAAsB,GAAG,SAAzBA,sBAAyB,CAACtT,IAAD,EAAU;AAC5C,MAAMuT,iBAAiB,GAAG,gCAA1B;AACA,MAAMN,IAAI,GAAGjT,IAAI,CAACpH,OAAL,CAAauZ,SAAS,CAAChD,kBAAvB,IAA6C,CAAC,CAA9C,GACPgD,SAAS,CAAChD,kBADH,GAEPgD,SAAS,CAAC/C,4BAFhB;AAGA,MAAM8D,QAAQ,GAAGD,IAAI,KAAKd,SAAS,CAAChD,kBAAnB,GACXkD,0BADW,GAEXC,oCAFN;AAGA,MAAMU,OAAO,GAAG/Y,eAAe,CAAC+F,IAAD,EAAOiT,IAAP,CAA/B;AACA,MAAMlY,IAAI,GAAGhB,cAAc,CAACiG,IAAD,EAAOiT,IAAP,CAA3B;AAEA,SAAOlY,IAAI,CAAC+J,KAAL,CAAWyO,iBAAX,EACF/U,GADE,CACE,UAACzD,IAAD;AAAA,WAAU6X,YAAY,CAAC7X,IAAD,CAAZ,CACVqV,MADU,CACH,UAAC+C,GAAD;AAAA,aAASA,GAAT;AAAA,KADG,EAEV3U,GAFU,CAEN,UAAC2U,GAAD,EAAMzZ,KAAN;AAAA,aAAiBA,KAAK,KAAK,CAAV,iBAAqByZ,GAArB,IAA6BA,GAA9C;AAAA,KAFM,EAGV3U,GAHU,CAGN,UAAC2U,GAAD;AAAA,aAASjZ,kBAAkB,CAACiZ,GAAD,CAA3B;AAAA,KAHM,EAIV9N,IAJU,CAIL,IAJK,CAAV;AAAA,GADF,EAMF7G,GANE,CAME,UAACzD,IAAD;AAAA,WAAU+X,mBAAmB,CAACI,QAAD,EAAW;AAAEF,MAAAA,OAAO,EAAPA,OAAF;AAAWjY,MAAAA,IAAI,EAAJA;AAAX,KAAX,CAA7B;AAAA,GANF,CAAP;AAOH,CAlBM;AAoBP;;;;;;;AAMA,AAAO,IAAMyY,qBAAqB,GAAG,SAAxBA,qBAAwB,CAACxT,IAAD,EAAU;AAC3C,MAAI4K,MAAJ;;AACA,MAAIuH,SAAS,CAAC5C,kBAAV,CAA6BvP,IAA7B,CAAJ,EAAwC;AACpC4K,IAAAA,MAAM,GAAGmI,wBAAwB,CAAC/S,IAAD,CAAjC;AACH,GAFD,MAEO,IAAImS,SAAS,CAAC3C,gBAAV,CAA2BxP,IAA3B,CAAJ,EAAsC;AACzC4K,IAAAA,MAAM,GAAG0I,sBAAsB,CAACtT,IAAD,CAA/B;AACH,GAFM,MAEA,IAAImS,SAAS,CAAC7C,kBAAV,CAA6BtP,IAA7B,KAAuCmS,SAAS,CAACtD,SAAV,CAAoB7O,IAApB,CAA3C,EAAuE;AAC1E4K,IAAAA,MAAM,GAAG,CAAC5K,IAAD,CAAT;AACH;;AAED,SAAO4K,MAAP;AACH,CAXM;AAaP;;;;;;AAKA,AAAO,IAAM6I,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACzT,IAAD,EAAU;AAC9C,MAAI0T,GAAJ;;AAEA,MAAIvB,SAAS,CAAC7C,kBAAV,CAA6BtP,IAA7B,CAAJ,EAAwC;AAAA,qBACaN,SAAS,CAACM,IAAD,CADtB;AAAA,QACtB2T,UADsB,cAC5B3V,IAD4B;AAAA,QACJ4V,YADI,cACV7Y,IADU;;;AAIpC,QAAM8Y,kBAAkB,GAAG1b,MAAM,CAC5B6G,IADsB,CACjB8U,aADiB,EAEtBtV,GAFsB,CAElB,UAACsI,EAAD;AAAA,aAAQgN,aAAa,CAAChN,EAAD,CAArB;AAAA,KAFkB,EAGtBtI,GAHsB,CAGlB,UAACc,CAAD,EAAO;AAAA,6BACmBA,CAAC,CAAC8B,KADrB;AAAA,UACDpD,IADC;AAAA,UACQ+V,OADR;;AAER,aAAO;AAAE/V,QAAAA,IAAI,EAAJA,IAAF;AAAQ+V,QAAAA,OAAO,EAAPA;AAAR,OAAP;AACH,KANsB,EAOtBlE,IAPsB,CAOjB,UAAC/I,EAAD;AAAA,aAASA,EAAE,CAAC9I,IAAH,KAAY2V,UAAZ,IACR7M,EAAE,CAACiN,OAAH,CAAWnb,OAAX,CAAmB+a,UAAnB,KAAkC,CADnC;AAAA,KAPiB,CAA3B;AAJoC,QAc5BI,OAd4B,GAchBF,kBAdgB,CAc5BE,OAd4B;;AAgBpC,QAAIA,OAAO,CAAC1a,MAAR,GAAiB,CAArB,EAAwB;AACpB,UAAM2a,QAAQ,GAAGH,kBAAkB,CAACE,OAAnB;AAAA,OAEZlE,IAFY,CAEP,UAACoE,KAAD;AAAA,eAAWA,KAAK,CAACC,QAAN,CAAezB,qBAAf,CAAX;AAAA,OAFO,CAAjB;;AAIA,UAAIuB,QAAJ,EAAc;AACV,YAAMf,IAAI,GAAGjT,IAAI,CAACuB,KAAL,CAAW6Q,0BAAX,EAAuC,CAAvC,CAAb;AACA,YAAIc,QAAJ;;AACA,YAAID,IAAI,CAACra,OAAL,CAAa,GAAb,IAAoB,CAAC,CAAzB,EAA4B;AACxBsa,UAAAA,QAAQ,GAAGV,gCAAX;AACH,SAFD,MAEO;AACHU,UAAAA,QAAQ,GAAGX,sBAAX;AACH;;AACD,YAAMS,OAAO,GAAGxZ,eAAe,CAACwG,IAAD,EAAOoS,0BAAP,CAA/B;AACA,YAAM+B,OAAO,GAAGH,QAAQ,CACnB7a,OADW,CACHsZ,qBADG,EACoB,EADpB;AAGZ;AAHY,SAIXtZ,OAJW,CAIH,KAJG,EAII,EAJJ,CAAhB;AAMA,YAAM4B,IAAI,GAAI6Y,YAAY,CAACva,MAAb,GAAsB,CAAvB,aAA+B8a,OAA/B,eAA2CP,YAAY,CAACvO,IAAb,CAAkB,IAAlB,CAA3C,IAAuE8O,OAApF;AAEA,YAAMC,OAAO,GAAGtB,mBAAmB,CAC/BI,QAD+B,EAE/B;AAAEF,UAAAA,OAAO,EAAPA,OAAF;AAAWjY,UAAAA,IAAI,EAAJA;AAAX,SAF+B,CAAnC;AAKA2Y,QAAAA,GAAG,GAAGU,OAAN;AACH;AACJ;AACJ;;AAED,SAAOV,GAAP;AACH,CApDM;AAsDP;;;;;AAIA,AAAO,IAAMW,oBAAoB,GAAG,SAAvBA,oBAAuB,CAACC,KAAD,EAAW;AAC3C,MAAI,CAACA,KAAL,EAAY;AACR,WAAO,KAAP;AACH,GAH0C;;;AAK3C,MAAMC,UAAU,GAAGf,qBAAqB,CAACc,KAAD,CAAxC,CAL2C;AAQ3C;;AACA,MAAME,OAAO,GAAGD,UAAU,CAAC3W,MAAX,CAAkB,UAAC6S,GAAD,EAAMzQ,IAAN,EAAe;AAC7C,QAAMyU,UAAU,GAAG/U,SAAS,CAACM,IAAD,CAA5B;AACA,WAAOmS,SAAS,CAACrC,oBAAV,CAA+B2E,UAAU,CAACzW,IAA1C,KAAmDyS,GAA1D;AACH,GAHe,EAGb,IAHa,CAAhB;AAKA,SAAO+D,OAAP;AACH,CAfM;AAkBP;;;;;;AAKA,AAAO,IAAME,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAC1U,IAAD,EAAU;AAC7C,MAAM2U,eAAe,GAAG1a,eAAe,CAAC+F,IAAD,EAAO,GAAP,CAAvC;AACA,MAAM4U,YAAY,GAAGzC,SAAS,CAACd,cAAV,CAAyBrR,IAAzB,CAArB;AACA,MAAM6U,YAAY,GAAGD,YAAY,CAC5BpW,GADgB,CACZ,UAACsI,EAAD,EAAQ;AACT,QAAIA,EAAE,CAAClO,OAAH,CAAWuZ,SAAS,CAACpB,mBAAV,CAA8BI,GAA9B,CAAkCF,MAA7C,IAAuD,CAAC,CAA5D,EAA+D;AAC3D,UAAMkD,OAAO,GAAGpa,cAAc,CAAC+M,EAAD,EAAKqL,SAAS,CAACpB,mBAAV,CAA8BI,GAA9B,CAAkCF,MAAvC,CAA9B;AACA,UAAM6D,OAAO,GAAG3C,SAAS,CAACpB,mBAAV,CAA8BI,GAA9B,CAAkCD,aAAlC,CAAgDiD,OAAhD,CAAhB;AACA,uBAAUhC,SAAS,CAACpB,mBAAV,CAA8BC,GAA9B,CAAkCC,MAA5C,SAAqD6D,OAArD;AACH;;AACD,QAAIhO,EAAE,KAAK4L,YAAX,EAAyB;AACrB,aAAOC,YAAP;AACH;;AACD,WAAO7L,EAAP;AACH,GAXgB,EAYhBzB,IAZgB,CAYX,GAZW,CAArB;AAcA,mBAAUsP,eAAV,cAA6BE,YAA7B;AACH,CAlBM;AAoBP;;;;;;AAKA,AAAO,IAAME,uBAAuB,GAAG,SAA1BA,uBAA0B,CAAC/U,IAAD,EAAU;AAC7C,MAAM2U,eAAe,GAAG1a,eAAe,CAAC+F,IAAD,EAAO,GAAP,CAAvC;AACA,MAAMgV,YAAY,GAAG7C,SAAS,CAACd,cAAV,CAAyBrR,IAAzB,CAArB;AACA,MAAM6U,YAAY,GAAGG,YAAY,CAC5BxW,GADgB,CACZ,UAACsI,EAAD,EAAQ;AACT,QAAIA,EAAE,CAAClO,OAAH,CAAWuZ,SAAS,CAACpB,mBAAV,CAA8BK,GAA9B,CAAkCH,MAA7C,IAAuD,CAAC,CAA5D,EAA+D;AAC3D,UAAMgE,OAAO,GAAGlb,cAAc,CAAC+M,EAAD,EAAKqL,SAAS,CAACpB,mBAAV,CAA8BK,GAA9B,CAAkCH,MAAvC,CAA9B;AACA,UAAM6D,OAAO,GAAG3C,SAAS,CAACpB,mBAAV,CAA8BK,GAA9B,CAAkCF,aAAlC,CAAgD+D,OAAhD,CAAhB;AACA,uBAAU9C,SAAS,CAACpB,mBAAV,CAA8BC,GAA9B,CAAkCC,MAA5C,SAAqD6D,OAArD;AACH;;AACD,WAAOhO,EAAP;AACH,GARgB,EAShBzB,IATgB,CASX,GATW,CAArB;AAWA,mBAAUsP,eAAV,cAA6BE,YAA7B;AACH,CAfM;AAiBP;;;;;;AAKA,AAAO,IAAMK,oBAAoB,GAAG,SAAvBA,oBAAuB,CAAClV,IAAD,EAAU;AAC1C,MAAI4K,MAAJ;;AACA,MAAIuH,SAAS,CAACL,sBAAV,CAAiC9R,IAAjC,CAAJ,EAA4C;AACxC4K,IAAAA,MAAM,GAAG8J,uBAAuB,CAAC1U,IAAD,CAAhC;AACH,GAFD,MAEO,IAAImS,SAAS,CAACJ,sBAAV,CAAiC/R,IAAjC,CAAJ,EAA4C;AAC/C4K,IAAAA,MAAM,GAAGmK,uBAAuB,CAAC/U,IAAD,CAAhC;AACH,GAFM,MAEA,IAAImS,SAAS,CAACN,sBAAV,CAAiC7R,IAAjC,KAA2CmS,SAAS,CAACtD,SAAV,CAAoB7O,IAApB,CAA/C,EAA2E;AAC9E4K,IAAAA,MAAM,GAAG5K,IAAT;AACH;;AAED,SAAO4K,MAAP;AACH,CAXM;AAaP;;;;;;AAKA,AAAO,IAAMuK,uBAAuB,GAAG,SAA1BA,uBAA0B,CAACnV,IAAD,EAAU;AAC7C,MAAI,CAACmS,SAAS,CAACF,mBAAV,CAA8BjS,IAA9B,CAAL,EAA0C;AACtC,UAAM,IAAIK,KAAJ,8FAAgGL,IAAhG,EAAN;AACH,GAFD,MAEO;AACH,QAAM2U,eAAe,GAAG1a,eAAe,CAAC+F,IAAD,EAAO,GAAP,CAAvC;AACA,QAAM4U,YAAY,GAAGzC,SAAS,CAACd,cAAV,CAAyBrR,IAAzB,CAArB;AACA,QAAM6U,YAAY,GAAGD,YAAY,CAC5BpW,GADgB,CACZ,UAACsI,EAAD,EAAQ;AACT,UAAIA,EAAE,CAAClO,OAAH,CAAWuZ,SAAS,CAACpB,mBAAV,CAA8BC,GAA9B,CAAkCC,MAA7C,IAAuD,CAAC,CAA5D,EAA+D;AAC3D,YAAM6D,OAAO,GAAG/a,cAAc,CAAC+M,EAAD,EAAKqL,SAAS,CAACpB,mBAAV,CAA8BC,GAA9B,CAAkCC,MAAvC,CAA9B;AACA,YAAMkD,OAAO,GAAGhC,SAAS,CAACpB,mBAAV,CAA8BC,GAA9B,CAAkCE,aAAlC,CAAgD4D,OAAhD,CAAhB;AACA,yBAAU3C,SAAS,CAACpB,mBAAV,CAA8BI,GAA9B,CAAkCF,MAA5C,SAAqDkD,OAArD;AACH;;AACD,aAAOrN,EAAP;AACH,KARgB,EAShBzB,IATgB,CASX,GATW,CAArB;AAWA,qBAAUsP,eAAV,cAA6BE,YAA7B;AACH;AACJ,CAnBM;;ACpSP;;;;;;;;;;;;;;;AAcA,AAAO,SAASO,eAAT,CAAyB7Z,MAAzB,EAAiC;AACpC;AACA,MAAM8Z,OAAO,GAAG,SAAVA,OAAU,GAAY,EAA5B,CAFoC;;;AAGpC,MAAMC,KAAK,GAAGD,OAAO,CAAC3R,SAAtB;AACA4R,EAAAA,KAAK,CAACpU,GAAN,GAAYjG,IAAZ;AACAqa,EAAAA,KAAK,CAACnU,GAAN,GAAYlG,IAAZ;AACAqa,EAAAA,KAAK,CAACxN,IAAN,GAAa7M,IAAb;AAEA,MAAMsa,mBAAmB,GAAG7a,MAAM,CAAC8a,qBAAP,IAAgC,IAA5D;;AACA,WAASC,EAAT,GAAc;AACV,QAAMC,GAAG,GAAGC,SAAS,CAACtc,MAAtB;;AACA,QAAIqc,GAAG,KAAK,CAAZ,EAAe;AACX;AACH,KAJS;;;AAMV,QAAME,OAAO,GAAGD,SAAS,CAACD,GAAG,GAAG,CAAP,CAAzB;;AACA,QAAI,OAAOE,OAAP,KAAmB,QAAnB,IACGA,OAAO,KAAK,IADf,IAEG,OAAOA,OAAO,CAACC,WAAf,KAA+B,UAFtC,EAGE;AACE;AACH;;AAED,QAAI;AACAD,MAAAA,OAAO,CAACC,WAAR,GADA;AAGH,KAHD,CAGE,OAAOC,EAAP,EAAW;AAChB;;AAEDL,EAAAA,EAAE,CAACrN,MAAH,GAAY;AAAA,WAAM,IAAIiN,OAAJ,EAAN;AAAA,GAAZ;;AACAI,EAAAA,EAAE,CAACM,SAAH,GAAe7a,QAAf;;AACAua,EAAAA,EAAE,CAAChW,MAAH,GAAY;AAAA,WAAM,EAAN;AAAA,GAAZ;;AACAgW,EAAAA,EAAE,CAACjJ,MAAH,GAAYvR,IAAZ;AACAwa,EAAAA,EAAE,CAACO,MAAH,GAAY,IAAZ;AACAtb,EAAAA,MAAM,CAAC6a,mBAAD,CAAN,GAA8BE,EAA9B;AAlCoC,gBAoCd/a,MApCc;AAAA,MAoC5Bub,SApC4B,WAoC5BA,SApC4B;;AAqCpC,MAAIA,SAAS,YAAY9d,MAArB,IACG8d,SAAS,CAACC,IAAV,YAA0B/d,MAD7B,IAEG,OAAO8d,SAAS,CAACC,IAAV,CAAeC,GAAtB,KAA8B,UAFrC,EAGE;AACEF,IAAAA,SAAS,CAACC,IAAV,CAAeC,GAAf;AACH;;AAED7a,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAED6Z,eAAe,CAAChU,KAAhB,GAAwB,CACpB,kBADoB,EAEpB,mCAFoB,EAGpB,+BAHoB,CAAxB;AAMAgU,eAAe,CAACzX,UAAhB,GAA6B,CACzBrC,GADyB,EAEzBL,IAFyB,EAGzBC,QAHyB,CAA7B;;ACtEA;AACA,AAGA;;;;;;;;;;;;;;;AAcA,AAAO,SAASkb,iBAAT,CAA2B7a,MAA3B,EAAmC;AACtC;AACA,WAAS8a,GAAT,GAAe;;AAEfA,EAAAA,GAAG,CAAC3S,SAAJ,CAAc4S,EAAd,GAAmBrb,IAAnB;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAc6S,CAAd,GAAkBtb,IAAlB;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAc8S,EAAd,GAAmBvb,IAAnB;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAc+S,EAAd,GAAmBxb,IAAnB;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAcgT,EAAd,GAAmBzb,IAAnB;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAciT,mBAAd,GAAoC1b,IAApC;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAckT,gBAAd,GAAiC3b,IAAjC;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAcmT,UAAd,GAA2B5b,IAA3B;;AACAob,EAAAA,GAAG,CAAC3S,SAAJ,CAAclE,IAAd,GAAqB,UAACqK,IAAD,EAAU;AAC3B,QAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;AAC5BA,MAAAA,IAAI;AACJ;AACH;;AACD,QAAIiN,KAAK,CAACC,OAAN,CAAclN,IAAd,MAAwB,KAA5B,EAAmC;AAC/B;AACH,KAP0B;;;AAS3B,QAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,OAAZ,IAAuB,OAAOA,IAAI,CAAC,CAAD,CAAX,KAAmB,QAA9C,EAAwD;AACpDnP,MAAAA,MAAM,CAACyK,QAAP,CAAgB6R,MAAhB,CAAuBnN,IAAI,CAAC,CAAD,CAA3B;AACH,KAX0B;;;AAa3B,QAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,MAAZ,IAAsBA,IAAI,CAAC,CAAD,CAAJ,KAAY,aAAlC,IAAmD,OAAOA,IAAI,CAAC,CAAD,CAAX,KAAmB,UAA1E,EAAsF;AAClFA,MAAAA,IAAI,CAAC,CAAD,CAAJ;AACH;AACJ,GAhBD;;AAkBA,MAAMoN,GAAG,GAAG,IAAIZ,GAAJ,EAAZ;AACA,MAAMa,aAAa,GAAGxc,MAAM,CAACyc,IAAP,IAAe,EAArC;;AACA,MAAIL,KAAK,CAACC,OAAN,CAAcG,aAAd,CAAJ,EAAkC;AAC9B,WAAOA,aAAa,CAAC,CAAD,CAApB,EAAyB;AACrBD,MAAAA,GAAG,CAACzX,IAAJ,CAAS0X,aAAa,CAACE,KAAd,EAAT;AACH;AACJ,GApCqC;;;AAsCtC1c,EAAAA,MAAM,CAACyc,IAAP,GAAcF,GAAG,CAACI,EAAJ,GAASJ,GAAvB,CAtCsC;;AA0CtC,WAASK,GAAT,GAAe,EA1CuB;;;AA6CtC,MAAMC,GAAG,GAAG,CACR,oBADQ,EACc,gBADd,EACgC,UADhC,EAC4C,aAD5C,EAER,WAFQ,EAEK,sBAFL,EAE6B,kBAF7B,EAEiD,eAFjD,EAGR,iBAHQ,EAGW,kBAHX,EAG+B,UAH/B,EAG2C,aAH3C,EAIR,aAJQ,EAIO,gBAJP,EAIyB,iBAJzB,EAI4C,iBAJ5C,EAKR,eALQ,EAKS,kBALT,EAK6B,iBAL7B,EAKgD,aALhD,EAMR,sBANQ,EAMgB,WANhB,EAM6B,OAN7B,EAMsC,aANtC,EAOR,iBAPQ,EAOW,eAPX,EAO4B,iBAP5B,EAO+C,oBAP/C,EAQR,mBARQ,EAQa,iBARb,EAQgC,eARhC,EAQiD,mBARjD,EASR,iBATQ,EASW,2BATX,EASwC,mBATxC,EAS6D,gBAT7D,EAUR,gBAVQ,EAUU,uBAVV,EAUmC,mBAVnC,EAUwD,eAVxD,EAWR,iBAXQ,EAWW,iBAXX,EAW8B,gBAX9B,EAWgD,kBAXhD,EAYR,2BAZQ,EAYqB,qBAZrB,EAY4C,sBAZ5C,EAYoE,sBAZpE,EAaR,gBAbQ,EAaU,oBAbV,EAagC,yBAbhC,EAa2D,0BAb3D,EAcR,SAdQ,EAcG,0BAdH,EAc+B,aAd/B,EAc8C,oBAd9C,EAeR,gBAfQ,EAeU,cAfV,EAe0B,cAf1B,EAe0C,aAf1C,EAgBR,YAhBQ,CAAZ;AAkBA,MAAMC,OAAO,GAAGD,GAAG,CAAC3Z,MAAJ,CAAW,UAAC8V,GAAD,EAAM+D,QAAN,EAAmB;AAC1C/D,IAAAA,GAAG,CAAC+D,QAAD,CAAH,GAAgBxc,IAAhB;AACA,WAAOyY,GAAP;AACH,GAHe,EAGb,EAHa,CAAhB;;AAIA8D,EAAAA,OAAO,CAACE,aAAR,GAAwB,UAACzW,CAAD;AAAA,WAAOA,CAAP;AAAA,GAAxB;;AAEAqW,EAAAA,GAAG,CAAC5T,SAAJ,CAAciU,YAAd,GAA6B1c,IAA7B;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAckU,cAAd,GAA+B3c,IAA/B;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAcmU,SAAd,GAA0B5c,IAA1B;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAcmT,UAAd,GAA2B5b,IAA3B;;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAcoU,WAAd,GAA4B;AAAA,WAAMN,OAAN;AAAA,GAA5B;;AACAF,EAAAA,GAAG,CAAC5T,SAAJ,CAAcqU,iBAAd,GAAkC;AAAA,WAAMP,OAAN;AAAA,GAAlC;;AACAF,EAAAA,GAAG,CAAC5T,SAAJ,CAAcsU,YAAd,GAA6B/c,IAA7B;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAcuU,EAAd,GAAmBhd,IAAnB;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAcwU,EAAd,GAAmBjd,IAAnB;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAcyU,EAAd,GAAmBld,IAAnB;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAc0U,EAAd,GAAmBnd,IAAnB;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAc2U,EAAd,GAAmBpd,IAAnB;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAc4U,EAAd,GAAmBrd,IAAnB;AACAqc,EAAAA,GAAG,CAAC5T,SAAJ,CAAc6U,CAAd,GAAkBtd,IAAlB;AAEA,MAAMud,GAAG,GAAG,IAAIlB,GAAJ,EAAZ;AACA5c,EAAAA,MAAM,CAAC+d,IAAP,GAAcD,GAAd;AAEAld,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAED6a,iBAAiB,CAAChV,KAAlB,GAA0B,CACtB,qBADsB,EAEtB,4BAFsB,EAGtB,wBAHsB,CAA1B;AAMAgV,iBAAiB,CAACzY,UAAlB,GAA+B,CAC3BrC,GAD2B,EAE3BL,IAF2B,CAA/B;;AChHA;;AACA;;;;;;;;;;;;;;;AAcA;;AACA,AAAO,SAASyd,4BAAT,CAAsCnd,MAAtC,EAA8C;AACjDb,EAAAA,MAAM,CAACie,WAAP,GAAqBje,MAAM,CAACie,WAAP,IAAsB;AACvCtf,IAAAA,MAAM,EAAE,CAD+B;AAEvC2c,IAAAA,MAAM,EAAE,IAF+B;AAGvCxW,IAAAA,IAHuC,kBAGhC;AACH,WAAKnG,MAAL,IAAe,CAAf;AACH;AALsC,GAA3C;AAOA,MAAMuf,OAAO,GAAG1b,QAAQ,CAACoO,gBAAT,CAA0B,cAA1B,CAAhB;AACA,MAAMuN,GAAG,GAAG,4FAAZ;AACA,MAAIC,QAAQ,GAAG,KAAf;;AACA,OAAK,IAAI7Z,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG2Z,OAAO,CAACvf,MAA5B,EAAoC4F,CAAC,IAAI,CAAzC,EAA4C;AACxC,QAAM8Z,KAAK,GAAG7b,QAAQ,CAAC8b,aAAT,CAAuB,QAAvB,CAAd;AACAD,IAAAA,KAAK,CAACE,EAAN,oBAAqBha,CAAC,GAAG,CAAzB;AACA8Z,IAAAA,KAAK,CAACnS,KAAN,GAAciS,GAAd;AACA,QAAMK,UAAU,GAAGhc,QAAQ,CAAC8b,aAAT,CAAuB,QAAvB,CAAnB;AACAE,IAAAA,UAAU,CAACD,EAAX,6BAAmCha,CAAnC;AACA8Z,IAAAA,KAAK,CAACI,WAAN,CAAkBD,UAAlB;AACAhc,IAAAA,QAAQ,CAACyJ,IAAT,CAAcwS,WAAd,CAA0BJ,KAA1B;AACAD,IAAAA,QAAQ,GAAG,IAAX;AACH;;AACD,MAAIA,QAAJ,EAAc;AACVxd,IAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AACJ;AAEDmd,4BAA4B,CAACtX,KAA7B,GAAqC,CACjC,+BADiC,EAEjC,sCAFiC,EAGjC,kCAHiC,CAArC;AAMAsX,4BAA4B,CAAC/a,UAA7B,GAA0C,CACtCrC,GADsC,CAA1C;;AC/CA;;;;;;;;;;;;;;;AAcA,AAAO,SAAS8d,mBAAT,CAA6B7d,MAA7B,EAAqC;AACxCb,EAAAA,MAAM,CAAC+a,EAAP,GAAY/a,MAAM,CAAC+a,EAAP,IAAaxa,IAAzB;AADwC,gBAElBP,MAFkB;AAAA,MAEhCub,SAFgC,WAEhCA,SAFgC;;AAGxC,MAAIA,SAAS,YAAY9d,MAArB,KAAgC,KAApC,EAA2C;AACvC;AACH;;AAED,MAAI8d,SAAS,CAACC,IAAV,YAA0B/d,MAA1B,IAAoC,OAAO8d,SAAS,CAACC,IAAV,CAAeC,GAAtB,KAA8B,UAAtE,EAAkF;AAC9EF,IAAAA,SAAS,CAACC,IAAV,CAAeC,GAAf;AACH;;AAED,MAAI,OAAOF,SAAS,CAACzW,IAAjB,KAA0B,UAA9B,EAA0C;AACtCyW,IAAAA,SAAS,CAACzW,IAAV,GAAiB,UAACqK,IAAD,EAAU;AACvB,UAAIA,IAAI,YAAY1R,MAAhB,IAA0B,OAAO0R,IAAI,CAACwP,aAAZ,KAA8B,UAA5D,EAAwE;AACpE1c,QAAAA,UAAU,CAACkN,IAAI,CAACwP,aAAN,EAAqB,CAArB,CAAV;AACH;AACJ,KAJD;AAKH;;AAED/d,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAED6d,mBAAmB,CAAChY,KAApB,GAA4B,CACxB,sBADwB,EAExB,6BAFwB,EAGxB,yBAHwB,CAA5B;AAMAgY,mBAAmB,CAACzb,UAApB,GAAiC,CAC7BrC,GAD6B,EAE7BL,IAF6B,CAAjC;;ACpCA;;;;;;;;;;;;;;;AAcA,AAAO,SAASqe,oBAAT,CAA8B/d,MAA9B,EAAsC;AACzC,MAAMge,mBAAmB,GAAG;AACxBjU,IAAAA,gBAAgB,EAAEnK,QADM;AAExBqe,IAAAA,iBAAiB,EAAEve,IAFK;AAGxBwe,IAAAA,uBAAuB,EAAExe;AAHD,GAA5B;AAKA,MAAMye,cAAc,GAAG;AACnBpU,IAAAA,gBAAgB,EAAEnK,QADC;AAEnBwe,IAAAA,UAAU,EAAE1e;AAFO,GAAvB;;AAIA,WAAS2e,YAAT,GAAwB,EAViB;;;AAYzCA,EAAAA,YAAY,CAAClW,SAAb,CAAuBmW,OAAvB,GAAiC5e,IAAjC;AACA2e,EAAAA,YAAY,CAAClW,SAAb,CAAuBxC,GAAvB,GAA6BhG,QAA7B;AACA0e,EAAAA,YAAY,CAAClW,SAAb,CAAuBvC,GAAvB,GAA6BhG,QAA7B;AACAye,EAAAA,YAAY,CAAClW,SAAb,CAAuBoW,WAAvB,GAAqC3e,QAArC;AACAye,EAAAA,YAAY,CAAClW,SAAb,CAAuBqW,+BAAvB,GAAyD5e,QAAzD;AACAye,EAAAA,YAAY,CAAClW,SAAb,CAAuBsW,YAAvB,GAAsC7e,QAAtC;AACAye,EAAAA,YAAY,CAAClW,SAAb,CAAuBuW,sBAAvB,GAAgD9e,QAAhD;;AAEA,WAAS+e,kBAAT,GAA8B,EApBW;;;AAqBzCA,EAAAA,kBAAkB,CAACxW,SAAnB,CAA6ByW,OAA7B,GAAuChf,QAAvC;AACA+e,EAAAA,kBAAkB,CAACxW,SAAnB,CAA6B0W,KAA7B,GAAqClf,QAArC;;AAEA,WAASmf,IAAT,GAAgB,EAxByB;;;AAyBzCA,EAAAA,IAAI,CAAC3W,SAAL,CAAe4W,UAAf,GAA4Bnf,QAA5B;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAe6W,uBAAf,GAAyCpf,QAAzC;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAe8W,cAAf,GAAgCrf,QAAhC;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAe+W,iBAAf,GAAmCtf,QAAnC;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAexC,GAAf,GAAqBhG,QAArB;AACAmf,EAAAA,IAAI,CAAC3W,SAAL,CAAegX,aAAf,GAA+Btf,SAA/B;AACAif,EAAAA,IAAI,CAAC3W,SAAL,CAAeiX,gBAAf,GAAkCvf,SAAlC;AACAif,EAAAA,IAAI,CAAC3W,SAAL,CAAekX,qBAAf,GAAuCxf,SAAvC;AACAif,EAAAA,IAAI,CAAC3W,SAAL,CAAemX,QAAf,GAA0Bxf,OAA1B;AACAgf,EAAAA,IAAI,CAAC3W,SAAL,CAAeoX,gBAAf,GAAkCzf,OAAlC;AACAgf,EAAAA,IAAI,CAAC3W,SAAL,CAAeqX,SAAf,GAA2B5f,QAA3B;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAesX,YAAf,GAA8B5f,SAA9B;AACAif,EAAAA,IAAI,CAAC3W,SAAL,CAAeuX,gBAAf,GAAkC7f,SAAlC;AACAif,EAAAA,IAAI,CAAC3W,SAAL,CAAevC,GAAf,GAAqBhG,QAArB;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAewX,oBAAf,GAAsC/f,QAAtC;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAeoW,WAAf,GAA6B3e,QAA7B;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAeyX,mBAAf,GAAqChgB,QAArC;AACAkf,EAAAA,IAAI,CAAC3W,SAAL,CAAesW,YAAf,GAA8B7e,QAA9B;AAEA,MAAMigB,aAAa,GAAG;AAClB9V,IAAAA,gBAAgB,EAAEnK,QADA;AAElBkgB,IAAAA,KAAK,EAAEpgB,IAFW;AAGlBsf,IAAAA,uBAAuB,EAAEpf,QAHP;AAIlBmgB,IAAAA,iCAAiC,EAAEngB,QAJjB;AAKlBqf,IAAAA,cAAc,EAAErf,QALE;AAMlBogB,IAAAA,iBAAiB,EAAEtgB,IAND;AAOlBugB,IAAAA,uBAPkB,qCAOQ;AAAE,aAAO,IAAI5B,YAAJ,EAAP;AAA4B,KAPtC;AAQlB6B,IAAAA,cARkB,4BAQD;AAAE,aAAO,IAAI7B,YAAJ,EAAP;AAA4B,KAR7B;AASlB8B,IAAAA,kBAAkB,EAAEzgB,IATF;AAUlB4e,IAAAA,OAAO,EAAE5e,IAVS;AAWlB0gB,IAAAA,oBAAoB,EAAE1gB,IAXJ;AAYlB2gB,IAAAA,mBAAmB,EAAE3gB,IAZH;AAalB4gB,IAAAA,mBAAmB,EAAE5gB,IAbH;AAclB6gB,IAAAA,cAAc,EAAE7gB,IAdE;AAelBiG,IAAAA,GAAG,EAAEhG,QAfa;AAgBlByf,IAAAA,gBAAgB,EAAEvf,SAhBA;AAiBlB4f,IAAAA,YAAY,EAAE/f,IAjBI;AAkBlBggB,IAAAA,gBAAgB,EAAE7f,SAlBA;AAmBlB2gB,IAAAA,QAAQ,EAAE3gB,SAnBQ;AAoBlB4gB,IAAAA,OAAO,EAAE/gB,IApBS;AAqBlBkG,IAAAA,GAAG,EAAEhG,QArBa;AAsBlB+f,IAAAA,oBAAoB,EAAE/f,QAtBJ;AAuBlB8gB,IAAAA,YAAY,EAAEhhB,IAvBI;AAwBlBihB,IAAAA,gBAAgB,EAAE/gB,QAxBA;AAyBlBghB,IAAAA,iBAAiB,EAAEhhB,QAzBD;AA0BlBihB,IAAAA,WAAW,EAAEjhB,QA1BK;AA2BlBkhB,IAAAA,sBAAsB,EAAElhB,QA3BN;AA4BlBmhB,IAAAA,4BAA4B,EAAEnhB,QA5BZ;AA6BlBohB,IAAAA,kBAAkB,EAAEphB,QA7BF;AA8BlB4e,IAAAA,+BAA+B,EAAE5e,QA9Bf;AA+BlB6e,IAAAA,YAAY,EAAE7e,QA/BI;AAgClBqhB,IAAAA,eAAe,EAAErhB,QAhCC;AAiClBshB,IAAAA,gBAAgB,EAAExhB;AAjCA,GAAtB;AA5CyC,gBAiFdP,MAjFc;AAAA,kCAiFjCgiB,SAjFiC;AAAA,MAiFjCA,SAjFiC,kCAiFrB,EAjFqB;AAAA,uBAkFpBA,SAlFoB,CAkFjCC,GAlFiC;AAAA,MAkFjCA,GAlFiC,+BAkF3B,EAlF2B;AAoFzCD,EAAAA,SAAS,CAACE,QAAV,GAAqB,IAArB;AACAF,EAAAA,SAAS,CAACC,GAAV,GAAgB,EAAhB;;AACAD,EAAAA,SAAS,CAACC,GAAV,CAAcnd,IAAd,GAAqB,UAACyB,CAAD,EAAO;AACxB,QAAI;AACAA,MAAAA,CAAC,GADD;AAGH,KAHD,CAGE,OAAO6U,EAAP,EAAW;;AACb,WAAO,CAAP;AACH,GAND;;AAOA4G,EAAAA,SAAS,CAACG,YAAV,GAAyB;AAAA,WAAMtD,mBAAN;AAAA,GAAzB;;AACAmD,EAAAA,SAAS,CAACI,OAAV,GAAoB;AAAA,WAAMpD,cAAN;AAAA,GAApB;;AACAgD,EAAAA,SAAS,CAACK,mBAAV,GAAgC;AAAA,WAAM,IAAI1C,IAAJ,EAAN;AAAA,GAAhC;;AACAqC,EAAAA,SAAS,CAACM,UAAV,GAAuB;AAAA,WAAM,IAAI3C,IAAJ,EAAN;AAAA,GAAvB;;AACAqC,EAAAA,SAAS,CAACO,YAAV,GAAyBhiB,IAAzB;AACAyhB,EAAAA,SAAS,CAACQ,uBAAV,GAAoCjiB,IAApC;AACAyhB,EAAAA,SAAS,CAAC7C,OAAV,GAAoB5e,IAApB;AACAyhB,EAAAA,SAAS,CAACS,cAAV,GAA2BliB,IAA3B;AACAyhB,EAAAA,SAAS,CAACU,UAAV,GAAuB/hB,OAAvB;;AACAqhB,EAAAA,SAAS,CAACW,MAAV,GAAmB;AAAA,WAAMjC,aAAN;AAAA,GAAnB;;AACAsB,EAAAA,SAAS,CAACY,WAAV,GAAwB,IAAxB;AACAZ,EAAAA,SAAS,CAACa,gBAAV,GAA6BtiB,IAA7B;;AACAyhB,EAAAA,SAAS,CAACc,WAAV,GAAwB;AAAA,WAAM,IAAItD,kBAAJ,EAAN;AAAA,GAAxB;;AAEAxf,EAAAA,MAAM,CAACgiB,SAAP,GAAmBA,SAAnB;;AACA,SAAOC,GAAG,CAACtjB,MAAJ,KAAe,CAAtB,EAAyB;AACrBqjB,IAAAA,SAAS,CAACC,GAAV,CAAcnd,IAAd,CAAmBmd,GAAG,CAACvF,KAAJ,EAAnB;AACH;;AAED9b,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAED+d,oBAAoB,CAAClY,KAArB,GAA6B,CACzB,uBADyB,EAEzB,8BAFyB,EAGzB,0BAHyB,CAA7B;AAMAkY,oBAAoB,CAAC3b,UAArB,GAAkC,CAC9BrC,GAD8B,EAE9BL,IAF8B,EAG9BE,QAH8B,EAI9BD,QAJ8B,EAK9BE,SAL8B,EAM9BC,OAN8B,CAAlC;;AC9IA;;;;;;;;;;;;;;;AAcA,AAAO,SAASoiB,uBAAT,CAAiCliB,MAAjC,EAAyC;AAC5Cb,EAAAA,MAAM,CAACgjB,QAAP,GAAkB;AACdC,IAAAA,KADc,mBACN;AACJ;AACAjjB,MAAAA,MAAM,CAACkjB,SAAP,GAAmB,EAAnB;AACH,KAJa;AAKdC,IAAAA,MALc,oBAKL;AALK,GAAlB;AAOAviB,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAEDkiB,uBAAuB,CAACrc,KAAxB,GAAgC,CAC5B,0BAD4B,EAE5B,iCAF4B,EAG5B,6BAH4B,CAAhC;AAMAqc,uBAAuB,CAAC9f,UAAxB,GAAqC,CACjCrC,GADiC,CAArC;;AC9BA;;;;;;;;;;;;;AAYA,AAAO,SAASwiB,gBAAT,CAA0BviB,MAA1B,EAAkC;AACrC,MAAMwiB,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACzd,KAAD,EAAyB;AAAA,QAAjB0d,OAAiB,uEAAP,EAAO;AAAA,QAChD9hB,QADgD,GACnC8hB,OADmC,CAChD9hB,QADgD;AAAA,QAE9C+hB,GAF8C,GAEtCD,OAFsC,CAE9CC,GAF8C;;AAGtD,QAAI,OAAO/hB,QAAP,KAAoB,UAAxB,EAAoC;AAChCA,MAAAA,QAAQ,GAAG+hB,GAAG,KAAKjlB,SAAR,GAAoBkD,QAAQ,CAACN,IAAT,CAAcqiB,GAAd,CAApB,GAAyC/hB,QAApD;AACAS,MAAAA,UAAU,CAAC;AAAA,eAAMT,QAAQ,EAAd;AAAA,OAAD,CAAV;AACH;AACJ,GAPD;;AASA,MAAM4C,IAAI,GAAG7D,IAAb;AAEA;;;;AAGA,MAAMijB,gBAAgB,GAAGjjB,IAAzB;AAEA;;;;AAGA,MAAMkjB,OAAO,GAAGJ,wBAAhB;AAEA;;;;AAGA,MAAMK,IAAI,GAAGL,wBAAb;AAEA;;;;;AAIA,MAAMM,WAAW,GAAG,SAAdA,WAAc,CAAChR,EAAD,EAAQ;AACxB1Q,IAAAA,UAAU,CAAC0Q,EAAE,CAAC,IAAD,CAAH,CAAV;AACH,GAFD;AAIA;;;;;AAGA,MAAMiR,OAAO,GAAGP,wBAAhB;AAEA;;;;AAGA,MAAMQ,SAAS,GAAGR,wBAAlB;AAEA;;;;AAGA,MAAMtf,MAAM,GAAGxD,IAAf;AAEA;;;;;;;;AAOA,MAAMujB,SAAS,GAAG,SAAZA,SAAY,CAAC5R,MAAD,EAASnO,MAAT,EAAiBvC,QAAjB,EAA2B+hB,GAA3B,EAAmC;AACjDF,IAAAA,wBAAwB,CAAC,IAAD,EAAO;AAAE7hB,MAAAA,QAAQ,EAARA,QAAF;AAAY+hB,MAAAA,GAAG,EAAHA;AAAZ,KAAP,CAAxB;AACH,GAFD;AAIA;;;;;AAGA,MAAMQ,SAAS,GAAGxjB,IAAlB;AAEA;;;;AAGA,MAAMyjB,UAAU,GAAGzjB,IAAnB;AAEA,MAAMsc,GAAG,GAAG;AACRzY,IAAAA,IAAI,EAAJA,IADQ;AAERof,IAAAA,gBAAgB,EAAhBA,gBAFQ;AAGRC,IAAAA,OAAO,EAAPA,OAHQ;AAIRC,IAAAA,IAAI,EAAJA,IAJQ;AAKRC,IAAAA,WAAW,EAAXA,WALQ;AAMR/iB,IAAAA,GAAG,EAAEgjB,OANG;AAORC,IAAAA,SAAS,EAATA,SAPQ;AAQR9f,IAAAA,MAAM,EAANA,MARQ;AASR+f,IAAAA,SAAS,EAATA,SATQ;AAURC,IAAAA,SAAS,EAATA,SAVQ;AAWRC,IAAAA,UAAU,EAAVA;AAXQ,GAAZ;;AAcA,WAASC,EAAT,CAAY1F,EAAZ,EAAgBxB,QAAhB,EAAmC;AAAA,sCAAN1c,IAAM;AAANA,MAAAA,IAAM;AAAA;;AAC/B,WAAOwc,GAAG,CAACE,QAAD,CAAH,IAAiBF,GAAG,CAACE,QAAD,CAAH,OAAAF,GAAG,EAAcxc,IAAd,CAA3B;AACH;;AAEDL,EAAAA,MAAM,CAACikB,EAAP,GAAYA,EAAZ;AAEArjB,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAEDuiB,gBAAgB,CAAC1c,KAAjB,GAAyB,CACrB,oBADqB,CAAzB;AAIA0c,gBAAgB,CAACngB,UAAjB,GAA8B,CAACrC,GAAD,EAAML,IAAN,CAA9B;;AC9GA;;;;;;;;;;;;;AAYA,AAAO,SAAS2jB,kBAAT,CAA4BrjB,MAA5B,EAAoC;AACvC,MAAMsjB,MAAM,GAAG,0BAAf;AAEA;;;;;AAIA,MAAMd,wBAAwB,GAAG,SAA3BA,wBAA2B,GAAkB;AAAA,QAAjBC,OAAiB,uEAAP,EAAO;AAAA,QACzC9hB,QADyC,GAC5B8hB,OAD4B,CACzC9hB,QADyC;AAAA,QAEvC+hB,GAFuC,GAE/BD,OAF+B,CAEvCC,GAFuC;;AAG/C,QAAI,OAAO/hB,QAAP,KAAoB,UAAxB,EAAoC;AAChCA,MAAAA,QAAQ,GAAG+hB,GAAG,KAAKjlB,SAAR,GAAoBkD,QAAQ,CAACN,IAAT,CAAcqiB,GAAd,CAApB,GAAyC/hB,QAApD;AACAS,MAAAA,UAAU,CAAC;AAAA,eAAMT,QAAQ,EAAd;AAAA,OAAD,CAAV;AACH;AACJ,GAPD;;AASA,WAAS4iB,OAAT,GAAmB,EAhBoB;AAkBvC;;;AACAA,EAAAA,OAAO,CAACpb,SAAR,CAAkBwa,gBAAlB,GAAqCjjB,IAArC;AACA6jB,EAAAA,OAAO,CAACpb,SAAR,CAAkB2a,WAAlB,GAAgCpjB,IAAhC;AACA6jB,EAAAA,OAAO,CAACpb,SAAR,CAAkB+a,SAAlB,GAA8BxjB,IAA9B;AACA6jB,EAAAA,OAAO,CAACpb,SAAR,CAAkBgb,UAAlB,GAA+BzjB,IAA/B,CAtBuC;AAyBvC;;AACA6jB,EAAAA,OAAO,CAACpb,SAAR,CAAkBya,OAAlB,GAA4B,UAACY,GAAD,EAAMf,OAAN,EAAkB;AAC1CD,IAAAA,wBAAwB,CAACC,OAAD,CAAxB;AACH,GAFD;;AAGAc,EAAAA,OAAO,CAACpb,SAAR,CAAkB0a,IAAlB,GAAyB,UAACW,GAAD,EAAMf,OAAN,EAAkB;AACvCD,IAAAA,wBAAwB,CAACC,OAAD,CAAxB;AACH,GAFD;;AAGAc,EAAAA,OAAO,CAACpb,SAAR,CAAkBpI,GAAlB,GAAwB,UAACyjB,GAAD,EAAMf,OAAN,EAAkB;AACtCD,IAAAA,wBAAwB,CAACC,OAAD,CAAxB;AACH,GAFD;;AAGAc,EAAAA,OAAO,CAACpb,SAAR,CAAkB8a,SAAlB,GAA8B,UAAC5R,MAAD,EAASnO,MAAT,EAAiB4O,EAAjB,EAAqB4Q,GAArB,EAA6B;AACvDF,IAAAA,wBAAwB,CAAC;AAAE7hB,MAAAA,QAAQ,EAAEmR,EAAZ;AAAgB4Q,MAAAA,GAAG,EAAHA;AAAhB,KAAD,CAAxB;AACH,GAFD;;AAGAa,EAAAA,OAAO,CAACpb,SAAR,CAAkB6a,SAAlB,GAA8BR,wBAA9B;;AAEA,MAAIrjB,MAAM,CAACskB,EAAX,EAAe;AACXtkB,IAAAA,MAAM,CAACskB,EAAP,CAAUF,OAAV,GAAoBA,OAApB;AACH,GAFD,MAEO;AACHpkB,IAAAA,MAAM,CAACskB,EAAP,GAAY;AAAEF,MAAAA,OAAO,EAAPA;AAAF,KAAZ;AACH;;AAED,MAAIpkB,MAAM,CAACmkB,MAAD,CAAN,IAAkB/H,KAAK,CAACC,OAAN,CAAcrc,MAAM,CAACmkB,MAAD,CAApB,CAAtB,EAAqD;AACjDnkB,IAAAA,MAAM,CAACmkB,MAAD,CAAN,CAAe9Z,OAAf,CAAuB,UAACka,IAAD,EAAU;AAC7B,UAAI,OAAOA,IAAP,KAAgB,UAApB,EAAgC;AAC5BA,QAAAA,IAAI;AACP;AACJ,KAJD;AAKH;;AAED3jB,EAAAA,GAAG,CAACC,MAAD,CAAH;AACH;AAEDqjB,kBAAkB,CAACxd,KAAnB,GAA2B,CACvB,sBADuB,CAA3B;AAIAwd,kBAAkB,CAACjhB,UAAnB,GAAgC,CAACrC,GAAD,EAAML,IAAN,CAAhC;;;;;;;;;;;;;;;;;;;;AC3DA;;;;;AAIA,IAAMikB,iBAAiB,GAAG,SAApBA,iBAAoB,CAAClhB,IAAD,EAAU;AAChC,MAAMmS,SAAS,GAAGhY,MAAM,CAAC6G,IAAP,CAAYmgB,aAAZ,EAA2B3gB,GAA3B,CAA+B,UAACoR,GAAD;AAAA,WAASuP,aAAa,CAACvP,GAAD,CAAtB;AAAA,GAA/B,CAAlB;AACA,SAAOO,SAAS,CAACN,IAAV,CAAe,UAACnB,CAAD;AAAA,WAAOA,CAAC,CAACtN,KAAF,IAAWsN,CAAC,CAACtN,KAAF,CAAQxI,OAAR,CAAgBoF,IAAhB,IAAwB,CAAC,CAA3C;AAAA,GAAf,CAAP;AACH,CAHD;;AAKA,IAAMohB,eAAe,GAAG,SAAlBA,eAAkB,CAACphB,IAAD,EAAU;AAC9B,MAAMqhB,QAAQ,GAAGH,iBAAiB,CAAClhB,IAAD,CAAlC;AACA,MAAI4M,MAAM,GAAGnN,kBAAkB,CAAC4hB,QAAD,CAA/B;AACAzU,EAAAA,MAAM,GAAG3M,OAAO,CAACohB,QAAD,EAAWzU,MAAX,CAAhB;AAEA,SAAOzM,kBAAkB,CAAC;AAAEH,IAAAA,IAAI,EAAJA;AAAF,GAAD,EAAW4M,MAAX,CAAzB;AACH,CAND;;AASA,AAAO,IAAM0U,YAAY,GAAG;AACxBC,EAAAA,OAAO,EAAEH,eADe;AAExB3N,EAAAA,iBAAiB,EAAEU,SAAS,CAACV,iBAFL;AAGxBO,EAAAA,mBAAmB,EAAEG,SAAS,CAACH,mBAHP;AAIxBH,EAAAA,sBAAsB,EAAEM,SAAS,CAACN,sBAJV;AAKxBC,EAAAA,sBAAsB,EAAEK,SAAS,CAACL,sBALV;AAMxBC,EAAAA,sBAAsB,EAAEI,SAAS,CAACJ,sBANV;AAOxB2C,EAAAA,uBAAuB,EAAvBA,uBAPwB;AAQxBK,EAAAA,uBAAuB,EAAvBA,uBARwB;AASxBG,EAAAA,oBAAoB,EAApBA,oBATwB;AAUxBC,EAAAA,uBAAuB,EAAvBA;AAVwB,CAArB;;ACfP;;;;;;;;;;AAUA;;;;;AAIA,SAASqK,gBAAT,CAA0BjkB,MAA1B,EAAkC;AAC9B,MAAI,CAAC4W,SAAS,CAACrC,oBAAV,CAA+BvU,MAAM,CAACyC,IAAtC,CAAL,EAAkD;AAC9C,WAAO,IAAP;AACH;;AAED,MAAMN,SAAS,GAAGyU,SAAS,CAAC1C,kBAAV,CAA6BlU,MAAM,CAACyC,IAApC,CAAlB;AACA,MAAI4M,MAAM,GAAGnN,kBAAkB,CAACC,SAAD,CAA/B;AACAkN,EAAAA,MAAM,GAAG3M,OAAO,CAACP,SAAD,EAAYkN,MAAZ,CAAhB;AACAA,EAAAA,MAAM,GAAGrP,MAAM,CAACkkB,MAAP,KAAkB,UAAlB,GACH/gB,gBAAgB,CAACkM,MAAD,CADb,GAEHzM,kBAAkB,CAAC5C,MAAD,EAASqP,MAAT,CAFxB;AAGA,SAAOA,MAAP;AACH;AAED;;;;;;;;;AAOA,IAAM8U,gBAAgB,GAAI;AAAA,SAAO;AAC7BC,IAAAA,MAAM,EAAEH,gBADqB;AAE7B1P,IAAAA,oBAAoB,EAAEqC,SAAS,CAACrC,oBAFH;AAG7BuE,IAAAA,oBAAoB,EAApBA,oBAH6B;AAI7B/E,IAAAA,kBAAkB,EAAE6C,SAAS,CAAC7C,kBAJD;AAK7BC,IAAAA,kBAAkB,EAAE4C,SAAS,CAAC5C,kBALD;AAM7BC,IAAAA,gBAAgB,EAAE2C,SAAS,CAAC3C,gBANC;AAO7BoQ,IAAAA,eAAe,EAAE7M,wBAPY;AAQ7B8M,IAAAA,eAAe,EAAEvM,sBARY;AAS7BE,IAAAA,qBAAqB,EAArBA,qBAT6B;AAU7BsM,IAAAA,eAAe,EAAErM,wBAVY;AAW7BtD,IAAAA,SAAS,EAAEmP;AAXkB,GAAP;AAAA,CAAD,EAAzB;;ACrDA;;;;AAGAS,MAAM,CAACC,OAAP,GAAiBN,gBAAjB;;;;;;;;;;;;"}